/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var c=Object.create;var s=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var p=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of h(e))!f.call(t,o)&&o!==n&&s(t,o,{get:()=>e[o],enumerable:!(i=l(e,o))||i.enumerable});return t};var C=(t,e,n)=>(n=t!=null?c(g(t)):{},p(e||!t||!t.__esModule?s(n,"default",{value:t,enumerable:!0}):n,t));var u=C(require("http"));var R=[{id:"azure",url:"http://169.254.169.254/metadata/instance?api-version=2019-03-11",headers:{Metadata:"true"},match:/azEnvironment/},{id:"digitalocean",url:"http://169.254.169.254/metadata/v1/id",match:/^\d{9}/},{id:"aws",url:"http://169.254.169.254/latest/meta-data/instance-id",match:/^i-[0-9a-f]{8}/},{id:"gcp",url:"http://metadata.google.internal/computeMetadata/v1/instance/id",headers:{"Metadata-Flavor":"Google"},match:/^\d{10}/}];async function P(){let t,e=new Promise(n=>t=n);return Promise.race([Promise.all(R.map(({id:n,url:i,headers:o,match:r})=>v(i,o,e).then(a=>{r.test(a)&&t(n)},a=>{}))),new Promise(n=>setTimeout(n,7e3).unref())]).then(()=>t()),e}async function v(t,e,n){return new Promise((i,o)=>{let r=u.get(t,{headers:e},a=>{if(a.statusCode<200||a.statusCode>299)return a.destroy(),o(new Error(`Status ${a.statusCode}`));let d=[];a.on("data",m=>d.push(m)),a.on("end",()=>i(Buffer.concat(d).toString("utf8"))),a.on("error",o)});r.on("error",o),n.then(()=>r.abort())})}P().then(t=>console.log(t||""));
//# sourceMappingURL=remoteCloudGuesser.js.map
