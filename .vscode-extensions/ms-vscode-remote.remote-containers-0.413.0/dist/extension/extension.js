/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var k7=Object.create;var FC=Object.defineProperty;var L7=Object.getOwnPropertyDescriptor;var A7=Object.getOwnPropertyNames;var F7=Object.getPrototypeOf,O7=Object.prototype.hasOwnProperty;var Z=(t,e)=>()=>(t&&(e=t(t=0)),e);var M=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Ug=(t,e)=>{for(var n in e)FC(t,n,{get:e[n],enumerable:!0})},f1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of A7(e))!O7.call(t,o)&&o!==n&&FC(t,o,{get:()=>e[o],enumerable:!(r=L7(e,o))||r.enumerable});return t};var Y=(t,e,n)=>(n=t!=null?k7(F7(t)):{},f1(e||!t||!t.__esModule?FC(n,"default",{value:t,enumerable:!0}):n,t)),Mg=t=>f1(FC({},"__esModule",{value:!0}),t);var $r=M((wwe,h1)=>{"use strict";var sP=Object.defineProperty,U7=Object.getOwnPropertyDescriptor,M7=Object.getOwnPropertyNames,$7=Object.prototype.hasOwnProperty,H7=(t,e)=>{for(var n in e)sP(t,n,{get:e[n],enumerable:!0})},B7=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of M7(e))!$7.call(t,o)&&o!==n&&sP(t,o,{get:()=>e[o],enumerable:!(r=U7(e,o))||r.enumerable});return t},W7=t=>B7(sP({},"__esModule",{value:!0}),t),m1={};H7(m1,{config:()=>G7,t:()=>p1});h1.exports=W7(m1);var j7=require("fs"),V7=require("fs/promises");async function Y7(t){if(t.protocol==="file:")return await(0,V7.readFile)(t,"utf8");if(t.protocol==="http:"||t.protocol==="https:"){let e=await fetch(t.toString(),{headers:{"Accept-Encoding":"gzip, deflate",Accept:"application/json"},redirect:"follow"});if(!e.ok){let r=`Unexpected ${e.status} response while trying to read ${t}`;try{r+=`: ${await e.text()}`}catch{}throw new Error(r)}return await e.text()}throw new Error("Unsupported protocol")}function q7(t){return(0,j7.readFileSync)(t,"utf8")}var df;function G7(t){if("contents"in t){typeof t.contents=="string"?df=JSON.parse(t.contents):df=t.contents;return}if("fsPath"in t){let e=q7(t.fsPath),n=JSON.parse(e);df=d1(n)?n.contents.bundle:n;return}if(t.uri){let e=t.uri;return typeof t.uri=="string"&&(e=new URL(t.uri)),new Promise((n,r)=>{Y7(e).then(o=>{try{let i=JSON.parse(o);df=d1(i)?i.contents.bundle:i,n()}catch(i){r(i)}}).catch(o=>{r(o)})})}}function p1(...t){let e=t[0],n,r,o;if(typeof e=="string")n=e,r=e,t.splice(0,1),o=!t||typeof t[0]!="object"?t:t[0];else if(e instanceof Array){let s=t.slice(1);if(e.length!==s.length+1)throw new Error("expected a string as the first argument to l10n.t");let a=e[0];for(let c=1;c<e.length;c++)a+=`{${c-1}}`+e[c];return p1(a,...s)}else r=e.message,n=r,e.comment&&e.comment.length>0&&(n+=`/${Array.isArray(e.comment)?e.comment.join(""):e.comment}`),o=e.args??{};let i=df==null?void 0:df[n];return i?typeof i=="string"?OC(i,o):i.comment?OC(i.message,o):OC(r,o):OC(r,o)}var z7=/{([^}]+)}/g;function OC(t,e){return Object.keys(e).length===0?t:t.replace(z7,(n,r)=>e[r]??n)}function d1(t){var e;return typeof((e=t==null?void 0:t.contents)==null?void 0:e.bundle)=="object"&&typeof(t==null?void 0:t.version)=="string"}});var M1=M((Wwe,U1)=>{var Dm=1e3,Im=Dm*60,Pm=Im*60,vf=Pm*24,fX=vf*7,dX=vf*365.25;U1.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return mX(t);if(n==="number"&&isFinite(t))return e.long?hX(t):pX(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function mX(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*dX;case"weeks":case"week":case"w":return n*fX;case"days":case"day":case"d":return n*vf;case"hours":case"hour":case"hrs":case"hr":case"h":return n*Pm;case"minutes":case"minute":case"mins":case"min":case"m":return n*Im;case"seconds":case"second":case"secs":case"sec":case"s":return n*Dm;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function pX(t){var e=Math.abs(t);return e>=vf?Math.round(t/vf)+"d":e>=Pm?Math.round(t/Pm)+"h":e>=Im?Math.round(t/Im)+"m":e>=Dm?Math.round(t/Dm)+"s":t+"ms"}function hX(t){var e=Math.abs(t);return e>=vf?YC(t,e,vf,"day"):e>=Pm?YC(t,e,Pm,"hour"):e>=Im?YC(t,e,Im,"minute"):e>=Dm?YC(t,e,Dm,"second"):t+" ms"}function YC(t,e,n,r){var o=e>=n*1.5;return Math.round(t/n)+" "+r+(o?"s":"")}});var vP=M((jwe,$1)=>{function gX(t){n.debug=n,n.default=n,n.coerce=c,n.disable=s,n.enable=o,n.enabled=a,n.humanize=M1(),n.destroy=l,Object.keys(t).forEach(u=>{n[u]=t[u]}),n.names=[],n.skips=[],n.formatters={};function e(u){let f=0;for(let m=0;m<u.length;m++)f=(f<<5)-f+u.charCodeAt(m),f|=0;return n.colors[Math.abs(f)%n.colors.length]}n.selectColor=e;function n(u){let f,m=null,d,p;function h(...g){if(!h.enabled)return;let v=h,C=Number(new Date),w=C-(f||C);v.diff=w,v.prev=f,v.curr=C,f=C,g[0]=n.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(P,D)=>{if(P==="%%")return"%";y++;let A=n.formatters[D];if(typeof A=="function"){let O=g[y];P=A.call(v,O),g.splice(y,1),y--}return P}),n.formatArgs.call(v,g),(v.log||n.log).apply(v,g)}return h.namespace=u,h.useColors=n.useColors(),h.color=n.selectColor(u),h.extend=r,h.destroy=n.destroy,Object.defineProperty(h,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(d!==n.namespaces&&(d=n.namespaces,p=n.enabled(u)),p),set:g=>{m=g}}),typeof n.init=="function"&&n.init(h),h}function r(u,f){let m=n(this.namespace+(typeof f>"u"?":":f)+u);return m.log=this.log,m}function o(u){n.save(u),n.namespaces=u,n.names=[],n.skips=[];let f=(typeof u=="string"?u:"").trim().replace(" ",",").split(",").filter(Boolean);for(let m of f)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function i(u,f){let m=0,d=0,p=-1,h=0;for(;m<u.length;)if(d<f.length&&(f[d]===u[m]||f[d]==="*"))f[d]==="*"?(p=d,h=m,d++):(m++,d++);else if(p!==-1)d=p+1,h++,m=h;else return!1;for(;d<f.length&&f[d]==="*";)d++;return d===f.length}function s(){let u=[...n.names,...n.skips.map(f=>"-"+f)].join(",");return n.enable(""),u}function a(u){for(let f of n.skips)if(i(u,f))return!1;for(let f of n.names)if(i(u,f))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}$1.exports=gX});var H1=M((Qo,qC)=>{Qo.formatArgs=wX;Qo.save=yX;Qo.load=CX;Qo.useColors=vX;Qo.storage=EX();Qo.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Qo.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function vX(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function wX(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+qC.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,o=>{o!=="%%"&&(n++,o==="%c"&&(r=n))}),t.splice(r,0,e)}Qo.log=console.debug||console.log||(()=>{});function yX(t){try{t?Qo.storage.setItem("debug",t):Qo.storage.removeItem("debug")}catch{}}function CX(){let t;try{t=Qo.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function EX(){try{return localStorage}catch{}}qC.exports=vP()(Qo);var{formatters:SX}=qC.exports;SX.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var W1=M((Vwe,B1)=>{"use strict";B1.exports=(t,e)=>{e=e||process.argv;let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),o=e.indexOf("--");return r!==-1&&(o===-1?!0:r<o)}});var V1=M((Ywe,j1)=>{"use strict";var _X=require("os"),rs=W1(),Hr=process.env,bm;rs("no-color")||rs("no-colors")||rs("color=false")?bm=!1:(rs("color")||rs("colors")||rs("color=true")||rs("color=always"))&&(bm=!0);"FORCE_COLOR"in Hr&&(bm=Hr.FORCE_COLOR.length===0||parseInt(Hr.FORCE_COLOR,10)!==0);function xX(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function DX(t){if(bm===!1)return 0;if(rs("color=16m")||rs("color=full")||rs("color=truecolor"))return 3;if(rs("color=256"))return 2;if(t&&!t.isTTY&&bm!==!0)return 0;let e=bm?1:0;if(process.platform==="win32"){let n=_X.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in Hr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(n=>n in Hr)||Hr.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Hr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Hr.TEAMCITY_VERSION)?1:0;if(Hr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Hr){let n=parseInt((Hr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Hr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Hr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Hr.TERM)||"COLORTERM"in Hr?1:(Hr.TERM==="dumb",e)}function wP(t){let e=DX(t);return xX(e)}j1.exports={supportsColor:wP,stdout:wP(process.stdout),stderr:wP(process.stderr)}});var q1=M((rr,zC)=>{var IX=require("tty"),GC=require("util");rr.init=LX;rr.log=RX;rr.formatArgs=bX;rr.save=NX;rr.load=kX;rr.useColors=PX;rr.destroy=GC.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");rr.colors=[6,2,3,4,5,1];try{let t=V1();t&&(t.stderr||t).level>=2&&(rr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}rr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(o,i)=>i.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function PX(){return"colors"in rr.inspectOpts?!!rr.inspectOpts.colors:IX.isatty(process.stderr.fd)}function bX(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,o="\x1B[3"+(r<8?r:"8;5;"+r),i=`  ${o};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(o+"m+"+zC.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=TX()+e+" "+t[0]}function TX(){return rr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function RX(...t){return process.stderr.write(GC.formatWithOptions(rr.inspectOpts,...t)+`
`)}function NX(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function kX(){return process.env.DEBUG}function LX(t){t.inspectOpts={};let e=Object.keys(rr.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=rr.inspectOpts[e[n]]}zC.exports=vP()(rr);var{formatters:Y1}=zC.exports;Y1.o=function(t){return this.inspectOpts.colors=this.useColors,GC.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Y1.O=function(t){return this.inspectOpts.colors=this.useColors,GC.inspect(t,this.inspectOpts)}});var KC=M((qwe,yP)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?yP.exports=H1():yP.exports=q1()});var z1=M((Gwe,G1)=>{var Gg;G1.exports=function(){if(!Gg){try{Gg=KC()("follow-redirects")}catch{}typeof Gg!="function"&&(Gg=function(){})}Gg.apply(null,arguments)}});var XC=M((zwe,NP)=>{var Kg=require("url"),zg=Kg.URL,AX=require("http"),FX=require("https"),xP=require("stream").Writable,DP=require("assert"),K1=z1();(function(){var e=typeof process<"u",n=typeof window<"u"&&typeof document<"u",r=yf(Error.captureStackTrace);!e&&(n||!r)&&console.warn("The follow-redirects package should be excluded from browser builds.")})();var IP=!1;try{DP(new zg(""))}catch(t){IP=t.code==="ERR_INVALID_URL"}var OX=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],PP=["abort","aborted","connect","error","socket","timeout"],bP=Object.create(null);PP.forEach(function(t){bP[t]=function(e,n,r){this._redirectable.emit(t,e,n,r)}});var EP=Xg("ERR_INVALID_URL","Invalid URL",TypeError),SP=Xg("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),UX=Xg("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",SP),MX=Xg("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),$X=Xg("ERR_STREAM_WRITE_AFTER_END","write after end"),HX=xP.prototype.destroy||J1;function Io(t,e){xP.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var n=this;this._onNativeResponse=function(r){try{n._processResponse(r)}catch(o){n.emit("error",o instanceof SP?o:new SP({cause:o}))}},this._performRequest()}Io.prototype=Object.create(xP.prototype);Io.prototype.abort=function(){RP(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};Io.prototype.destroy=function(t){return RP(this._currentRequest,t),HX.call(this,t),this};Io.prototype.write=function(t,e,n){if(this._ending)throw new $X;if(!wf(t)&&!jX(t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(yf(e)&&(n=e,e=null),t.length===0){n&&n();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,n)):(this.emit("error",new MX),this.abort())};Io.prototype.end=function(t,e,n){if(yf(t)?(n=t,t=e=null):yf(e)&&(n=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,n);else{var r=this,o=this._currentRequest;this.write(t,e,function(){r._ended=!0,o.end(null,null,n)}),this._ending=!0}};Io.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Io.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Io.prototype.setTimeout=function(t,e){var n=this;function r(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function o(s){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout(function(){n.emit("timeout"),i()},t),r(s)}function i(){n._timeout&&(clearTimeout(n._timeout),n._timeout=null),n.removeListener("abort",i),n.removeListener("error",i),n.removeListener("response",i),n.removeListener("close",i),e&&n.removeListener("timeout",e),n.socket||n._currentRequest.removeListener("socket",o)}return e&&this.on("timeout",e),this.socket?o(this.socket):this._currentRequest.once("socket",o),this.on("socket",r),this.on("abort",i),this.on("error",i),this.on("response",i),this.on("close",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Io.prototype[t]=function(e,n){return this._currentRequest[t](e,n)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Io.prototype,t,{get:function(){return this._currentRequest[t]}})});Io.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Io.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e)throw new TypeError("Unsupported protocol "+t);if(this._options.agents){var n=t.slice(0,-1);this._options.agent=this._options.agents[n]}var r=this._currentRequest=e.request(this._options,this._onNativeResponse);r._redirectable=this;for(var o of PP)r.on(o,bP[o]);if(this._currentUrl=/^\//.test(this._options.path)?Kg.format(this._options):this._options.path,this._isRedirect){var i=0,s=this,a=this._requestBodyBuffers;(function c(l){if(r===s._currentRequest)if(l)s.emit("error",l);else if(i<a.length){var u=a[i++];r.finished||r.write(u.data,u.encoding,c)}else s._ended&&r.end()})()}};Io.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var n=t.headers.location;if(!n||this._options.followRedirects===!1||e<300||e>=400){t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[];return}if(RP(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)throw new UX;var r,o=this._options.beforeRedirect;o&&(r=Object.assign({Host:t.req.getHeader("host")},this._options.headers));var i=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],CP(/^content-/i,this._options.headers));var s=CP(/^host$/i,this._options.headers),a=TP(this._currentUrl),c=s||a.host,l=/^\w+:/.test(n)?this._currentUrl:Kg.format(Object.assign(a,{host:c})),u=BX(n,l);if(K1("redirecting to",u.href),this._isRedirect=!0,_P(u,this._options),(u.protocol!==a.protocol&&u.protocol!=="https:"||u.host!==c&&!WX(u.host,c))&&CP(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers),yf(o)){var f={headers:t.headers,statusCode:e},m={url:l,method:i,headers:r};o(this._options,f,m),this._sanitizeOptions(this._options)}this._performRequest()};function X1(t){var e={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(t).forEach(function(r){var o=r+":",i=n[o]=t[r],s=e[r]=Object.create(i);function a(l,u,f){return VX(l)?l=_P(l):wf(l)?l=_P(TP(l)):(f=u,u=Z1(l),l={protocol:o}),yf(u)&&(f=u,u=null),u=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},l,u),u.nativeProtocols=n,!wf(u.host)&&!wf(u.hostname)&&(u.hostname="::1"),DP.equal(u.protocol,o,"protocol mismatch"),K1("options",u),new Io(u,f)}function c(l,u,f){var m=s.request(l,u,f);return m.end(),m}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function J1(){}function TP(t){var e;if(IP)e=new zg(t);else if(e=Z1(Kg.parse(t)),!wf(e.protocol))throw new EP({input:t});return e}function BX(t,e){return IP?new zg(t,e):TP(Kg.resolve(e,t))}function Z1(t){if(/^\[/.test(t.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(t.hostname))throw new EP({input:t.href||t});if(/^\[/.test(t.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(t.host))throw new EP({input:t.href||t});return t}function _P(t,e){var n=e||{};for(var r of OX)n[r]=t[r];return n.hostname.startsWith("[")&&(n.hostname=n.hostname.slice(1,-1)),n.port!==""&&(n.port=Number(n.port)),n.path=n.search?n.pathname+n.search:n.pathname,n}function CP(t,e){var n;for(var r in e)t.test(r)&&(n=e[r],delete e[r]);return n===null||typeof n>"u"?void 0:String(n).trim()}function Xg(t,e,n){function r(o){yf(Error.captureStackTrace)&&Error.captureStackTrace(this,this.constructor),Object.assign(this,o||{}),this.code=t,this.message=this.cause?e+": "+this.cause.message:e}return r.prototype=new(n||Error),Object.defineProperties(r.prototype,{constructor:{value:r,enumerable:!1},name:{value:"Error ["+t+"]",enumerable:!1}}),r}function RP(t,e){for(var n of PP)t.removeListener(n,bP[n]);t.on("error",J1),t.destroy(e)}function WX(t,e){DP(wf(t)&&wf(e));var n=t.length-e.length-1;return n>0&&t[n]==="."&&t.endsWith(e)}function wf(t){return typeof t=="string"||t instanceof String}function yf(t){return typeof t=="function"}function jX(t){return typeof t=="object"&&"length"in t}function VX(t){return zg&&t instanceof zg}NP.exports=X1({http:AX,https:FX});NP.exports.wrap=X1});var Tm=M((Kwe,eU)=>{"use strict";var Q1=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);eU.exports=t=>t?Object.keys(t).map(e=>[Q1.has(e)?Q1.get(e):e,t[e]]).reduce((e,n)=>(e[n[0]]=n[1],e),Object.create(null)):{}});var rE=M(uU=>{"use strict";var tU=typeof process=="object"&&process?process:{stdout:null,stderr:null},YX=require("events"),nU=require("stream"),qX=require("string_decoder"),rU=qX.StringDecoder,za=Symbol("EOF"),Ka=Symbol("maybeEmitEnd"),cl=Symbol("emittedEnd"),JC=Symbol("emittingEnd"),Jg=Symbol("emittedError"),ZC=Symbol("closed"),oU=Symbol("read"),QC=Symbol("flush"),iU=Symbol("flushChunk"),Po=Symbol("encoding"),Xa=Symbol("decoder"),eE=Symbol("flowing"),Zg=Symbol("paused"),Rm=Symbol("resume"),En=Symbol("buffer"),Ms=Symbol("pipes"),or=Symbol("bufferLength"),kP=Symbol("bufferPush"),LP=Symbol("bufferShift"),Sr=Symbol("objectMode"),Sn=Symbol("destroyed"),AP=Symbol("error"),FP=Symbol("emitData"),sU=Symbol("emitEnd"),OP=Symbol("emitEnd2"),Ja=Symbol("async"),UP=Symbol("abort"),tE=Symbol("aborted"),Cf=Symbol("signal"),Qg=t=>Promise.resolve().then(t),lU=global._MP_NO_ITERATOR_SYMBOLS_!=="1",aU=lU&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),cU=lU&&Symbol.iterator||Symbol("iterator not implemented"),GX=t=>t==="end"||t==="finish"||t==="prefinish",zX=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,KX=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),nE=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Rm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},MP=class extends nE{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}},$P=class t extends nU{constructor(e){super(),this[eE]=!1,this[Zg]=!1,this[Ms]=[],this[En]=[],this[Sr]=e&&e.objectMode||!1,this[Sr]?this[Po]=null:this[Po]=e&&e.encoding||null,this[Po]==="buffer"&&(this[Po]=null),this[Ja]=e&&!!e.async||!1,this[Xa]=this[Po]?new rU(this[Po]):null,this[za]=!1,this[cl]=!1,this[JC]=!1,this[ZC]=!1,this[Jg]=null,this.writable=!0,this.readable=!0,this[or]=0,this[Sn]=!1,e&&e.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[En]}),e&&e.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[Ms]}),this[Cf]=e&&e.signal,this[tE]=!1,this[Cf]&&(this[Cf].addEventListener("abort",()=>this[UP]()),this[Cf].aborted&&this[UP]())}get bufferLength(){return this[or]}get encoding(){return this[Po]}set encoding(e){if(this[Sr])throw new Error("cannot set encoding in objectMode");if(this[Po]&&e!==this[Po]&&(this[Xa]&&this[Xa].lastNeed||this[or]))throw new Error("cannot change encoding");this[Po]!==e&&(this[Xa]=e?new rU(e):null,this[En].length&&(this[En]=this[En].map(n=>this[Xa].write(n)))),this[Po]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Sr]}set objectMode(e){this[Sr]=this[Sr]||!!e}get async(){return this[Ja]}set async(e){this[Ja]=this[Ja]||!!e}[UP](){this[tE]=!0,this.emit("abort",this[Cf].reason),this.destroy(this[Cf].reason)}get aborted(){return this[tE]}set aborted(e){}write(e,n,r){if(this[tE])return!1;if(this[za])throw new Error("write after end");if(this[Sn])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[Ja]?Qg:i=>i();return!this[Sr]&&!Buffer.isBuffer(e)&&(KX(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):zX(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Sr]?(this.flowing&&this[or]!==0&&this[QC](!0),this.flowing?this.emit("data",e):this[kP](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[Po]&&!this[Xa].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[Po]&&(e=this[Xa].write(e)),this.flowing&&this[or]!==0&&this[QC](!0),this.flowing?this.emit("data",e):this[kP](e),this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[or]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[Sn])return null;if(this[or]===0||e===0||e>this[or])return this[Ka](),null;this[Sr]&&(e=null),this[En].length>1&&!this[Sr]&&(this.encoding?this[En]=[this[En].join("")]:this[En]=[Buffer.concat(this[En],this[or])]);let n=this[oU](e||null,this[En][0]);return this[Ka](),n}[oU](e,n){return e===n.length||e===null?this[LP]():(this[En][0]=n.slice(e),n=n.slice(0,e),this[or]-=e),this.emit("data",n),!this[En].length&&!this[za]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[za]=!0,this.writable=!1,(this.flowing||!this[Zg])&&this[Ka](),this}[Rm](){this[Sn]||(this[Zg]=!1,this[eE]=!0,this.emit("resume"),this[En].length?this[QC]():this[za]?this[Ka]():this.emit("drain"))}resume(){return this[Rm]()}pause(){this[eE]=!1,this[Zg]=!0}get destroyed(){return this[Sn]}get flowing(){return this[eE]}get paused(){return this[Zg]}[kP](e){this[Sr]?this[or]+=1:this[or]+=e.length,this[En].push(e)}[LP](){return this[Sr]?this[or]-=1:this[or]-=this[En][0].length,this[En].shift()}[QC](e){do;while(this[iU](this[LP]())&&this[En].length);!e&&!this[En].length&&!this[za]&&this.emit("drain")}[iU](e){return this.emit("data",e),this.flowing}pipe(e,n){if(this[Sn])return;let r=this[cl];return n=n||{},e===tU.stdout||e===tU.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this[Ms].push(n.proxyErrors?new MP(this,e,n):new nE(this,e,n)),this[Ja]?Qg(()=>this[Rm]()):this[Rm]()),e}unpipe(e){let n=this[Ms].find(r=>r.dest===e);n&&(this[Ms].splice(this[Ms].indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this[Ms].length&&!this.flowing?this[Rm]():e==="readable"&&this[or]!==0?super.emit("readable"):GX(e)&&this[cl]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[Jg]&&(this[Ja]?Qg(()=>n.call(this,this[Jg])):n.call(this,this[Jg])),r}get emittedEnd(){return this[cl]}[Ka](){!this[JC]&&!this[cl]&&!this[Sn]&&this[En].length===0&&this[za]&&(this[JC]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[ZC]&&this.emit("close"),this[JC]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Sn&&this[Sn])return;if(e==="data")return!this[Sr]&&!n?!1:this[Ja]?Qg(()=>this[FP](n)):this[FP](n);if(e==="end")return this[sU]();if(e==="close"){if(this[ZC]=!0,!this[cl]&&!this[Sn])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[Jg]=n,super.emit(AP,n);let i=!this[Cf]||this.listeners("error").length?super.emit("error",n):!1;return this[Ka](),i}else if(e==="resume"){let i=super.emit("resume");return this[Ka](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[Ka](),o}[FP](e){for(let r of this[Ms])r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Ka](),n}[sU](){this[cl]||(this[cl]=!0,this.readable=!1,this[Ja]?Qg(()=>this[OP]()):this[OP]())}[OP](){if(this[Xa]){let n=this[Xa].end();if(n){for(let r of this[Ms])r.dest.write(n);super.emit("data",n)}}for(let n of this[Ms])n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Sr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Sr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Sr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Sr]?Promise.reject(new Error("cannot concat in objectMode")):this[Po]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Sn,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[aU](){let e=!1,n=()=>(this.pause(),e=!0,Promise.resolve({done:!0}));return{next:()=>{if(e)return n();let o=this.read();if(o!==null)return Promise.resolve({done:!1,value:o});if(this[za])return n();let i=null,s=null,a=f=>{this.removeListener("data",c),this.removeListener("end",l),this.removeListener(Sn,u),n(),s(f)},c=f=>{this.removeListener("error",a),this.removeListener("end",l),this.removeListener(Sn,u),this.pause(),i({value:f,done:!!this[za]})},l=()=>{this.removeListener("error",a),this.removeListener("data",c),this.removeListener(Sn,u),n(),i({done:!0})},u=()=>a(new Error("stream destroyed"));return new Promise((f,m)=>{s=m,i=f,this.once(Sn,u),this.once("error",a),this.once("end",l),this.once("data",c)})},throw:n,return:n,[aU](){return this}}}[cU](){let e=!1,n=()=>(this.pause(),this.removeListener(AP,n),this.removeListener(Sn,n),this.removeListener("end",n),e=!0,{done:!0}),r=()=>{if(e)return n();let o=this.read();return o===null?n():{value:o}};return this.once("end",n),this.once(AP,n),this.once(Sn,n),{next:r,throw:n,return:n,[cU](){return this}}}destroy(e){return this[Sn]?(e?this.emit("error",e):this.emit(Sn),this):(this[Sn]=!0,this[En].length=0,this[or]=0,typeof this.close=="function"&&!this[ZC]&&this.close(),e?this.emit("error",e):this.emit(Sn),this)}static isStream(e){return!!e&&(e instanceof t||e instanceof nU||e instanceof YX&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}};uU.Minipass=$P});var dU=M((Jwe,fU)=>{var XX=require("zlib").constants||{ZLIB_VERNUM:4736};fU.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},XX))});var SU=M((Zwe,EU)=>{"use strict";var mU=typeof process=="object"&&process?process:{stdout:null,stderr:null},JX=require("events"),pU=require("stream"),hU=require("string_decoder").StringDecoder,Za=Symbol("EOF"),Qa=Symbol("maybeEmitEnd"),ll=Symbol("emittedEnd"),oE=Symbol("emittingEnd"),ev=Symbol("emittedError"),iE=Symbol("closed"),gU=Symbol("read"),sE=Symbol("flush"),vU=Symbol("flushChunk"),bo=Symbol("encoding"),ec=Symbol("decoder"),aE=Symbol("flowing"),tv=Symbol("paused"),Nm=Symbol("resume"),ir=Symbol("bufferLength"),HP=Symbol("bufferPush"),BP=Symbol("bufferShift"),Br=Symbol("objectMode"),Wr=Symbol("destroyed"),WP=Symbol("emitData"),wU=Symbol("emitEnd"),jP=Symbol("emitEnd2"),tc=Symbol("async"),nv=t=>Promise.resolve().then(t),yU=global._MP_NO_ITERATOR_SYMBOLS_!=="1",ZX=yU&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),QX=yU&&Symbol.iterator||Symbol("iterator not implemented"),eJ=t=>t==="end"||t==="finish"||t==="prefinish",tJ=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,nJ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),cE=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[Nm](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},VP=class extends cE{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};EU.exports=class CU extends pU{constructor(e){super(),this[aE]=!1,this[tv]=!1,this.pipes=[],this.buffer=[],this[Br]=e&&e.objectMode||!1,this[Br]?this[bo]=null:this[bo]=e&&e.encoding||null,this[bo]==="buffer"&&(this[bo]=null),this[tc]=e&&!!e.async||!1,this[ec]=this[bo]?new hU(this[bo]):null,this[Za]=!1,this[ll]=!1,this[oE]=!1,this[iE]=!1,this[ev]=null,this.writable=!0,this.readable=!0,this[ir]=0,this[Wr]=!1}get bufferLength(){return this[ir]}get encoding(){return this[bo]}set encoding(e){if(this[Br])throw new Error("cannot set encoding in objectMode");if(this[bo]&&e!==this[bo]&&(this[ec]&&this[ec].lastNeed||this[ir]))throw new Error("cannot change encoding");this[bo]!==e&&(this[ec]=e?new hU(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[ec].write(n)))),this[bo]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Br]}set objectMode(e){this[Br]=this[Br]||!!e}get async(){return this[tc]}set async(e){this[tc]=this[tc]||!!e}write(e,n,r){if(this[Za])throw new Error("write after end");if(this[Wr])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[tc]?nv:i=>i();return!this[Br]&&!Buffer.isBuffer(e)&&(nJ(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):tJ(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[Br]?(this.flowing&&this[ir]!==0&&this[sE](!0),this.flowing?this.emit("data",e):this[HP](e),this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[bo]&&!this[ec].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[bo]&&(e=this[ec].write(e)),this.flowing&&this[ir]!==0&&this[sE](!0),this.flowing?this.emit("data",e):this[HP](e),this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[ir]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[Wr])return null;if(this[ir]===0||e===0||e>this[ir])return this[Qa](),null;this[Br]&&(e=null),this.buffer.length>1&&!this[Br]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[ir])]);let n=this[gU](e||null,this.buffer[0]);return this[Qa](),n}[gU](e,n){return e===n.length||e===null?this[BP]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[ir]-=e),this.emit("data",n),!this.buffer.length&&!this[Za]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[Za]=!0,this.writable=!1,(this.flowing||!this[tv])&&this[Qa](),this}[Nm](){this[Wr]||(this[tv]=!1,this[aE]=!0,this.emit("resume"),this.buffer.length?this[sE]():this[Za]?this[Qa]():this.emit("drain"))}resume(){return this[Nm]()}pause(){this[aE]=!1,this[tv]=!0}get destroyed(){return this[Wr]}get flowing(){return this[aE]}get paused(){return this[tv]}[HP](e){this[Br]?this[ir]+=1:this[ir]+=e.length,this.buffer.push(e)}[BP](){return this.buffer.length&&(this[Br]?this[ir]-=1:this[ir]-=this.buffer[0].length),this.buffer.shift()}[sE](e){do;while(this[vU](this[BP]()));!e&&!this.buffer.length&&!this[Za]&&this.emit("drain")}[vU](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[Wr])return;let r=this[ll];return n=n||{},e===mU.stdout||e===mU.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new VP(this,e,n):new cE(this,e,n)),this[tc]?nv(()=>this[Nm]()):this[Nm]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[Nm]():e==="readable"&&this[ir]!==0?super.emit("readable"):eJ(e)&&this[ll]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[ev]&&(this[tc]?nv(()=>n.call(this,this[ev])):n.call(this,this[ev])),r}get emittedEnd(){return this[ll]}[Qa](){!this[oE]&&!this[ll]&&!this[Wr]&&this.buffer.length===0&&this[Za]&&(this[oE]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[iE]&&this.emit("close"),this[oE]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Wr&&this[Wr])return;if(e==="data")return n?this[tc]?nv(()=>this[WP](n)):this[WP](n):!1;if(e==="end")return this[wU]();if(e==="close"){if(this[iE]=!0,!this[ll]&&!this[Wr])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[ev]=n;let i=super.emit("error",n);return this[Qa](),i}else if(e==="resume"){let i=super.emit("resume");return this[Qa](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[Qa](),o}[WP](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[Qa](),n}[wU](){this[ll]||(this[ll]=!0,this.readable=!1,this[tc]?nv(()=>this[jP]()):this[jP]())}[jP](){if(this[ec]){let n=this[ec].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[Br]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[Br]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[Br]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Br]?Promise.reject(new Error("cannot concat in objectMode")):this[bo]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Wr,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[ZX](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Za])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[Za]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(Wr,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[QX](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[Wr]?(e?this.emit("error",e):this.emit(Wr),this):(this[Wr]=!0,this.buffer.length=0,this[ir]=0,typeof this.close=="function"&&!this[iE]&&this.close(),e?this.emit("error",e):this.emit(Wr),this)}static isStream(e){return!!e&&(e instanceof CU||e instanceof pU||e instanceof JX&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var sb=M(ei=>{"use strict";var KP=require("assert"),ul=require("buffer").Buffer,DU=require("zlib"),Ef=ei.constants=dU(),rJ=SU(),_U=ul.concat,Sf=Symbol("_superWrite"),Lm=class extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},oJ=Symbol("opts"),rv=Symbol("flushFlag"),xU=Symbol("finishFlushFlag"),ib=Symbol("fullFlushFlag"),Nt=Symbol("handle"),lE=Symbol("onError"),km=Symbol("sawError"),YP=Symbol("level"),qP=Symbol("strategy"),GP=Symbol("ended"),Qwe=Symbol("_defaultFullFlush"),uE=class extends rJ{constructor(e,n){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e),this[km]=!1,this[GP]=!1,this[oJ]=e,this[rv]=e.flush,this[xU]=e.finishFlush;try{this[Nt]=new DU[n](e)}catch(r){throw new Lm(r)}this[lE]=r=>{this[km]||(this[km]=!0,this.close(),this.emit("error",r))},this[Nt].on("error",r=>this[lE](new Lm(r))),this.once("end",()=>this.close)}close(){this[Nt]&&(this[Nt].close(),this[Nt]=null,this.emit("close"))}reset(){if(!this[km])return KP(this[Nt],"zlib binding closed"),this[Nt].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[ib]),this.write(Object.assign(ul.alloc(0),{[rv]:e})))}end(e,n,r){return e&&this.write(e,n),this.flush(this[xU]),this[GP]=!0,super.end(null,null,r)}get ended(){return this[GP]}write(e,n,r){if(typeof n=="function"&&(r=n,n="utf8"),typeof e=="string"&&(e=ul.from(e,n)),this[km])return;KP(this[Nt],"zlib binding closed");let o=this[Nt]._handle,i=o.close;o.close=()=>{};let s=this[Nt].close;this[Nt].close=()=>{},ul.concat=l=>l;let a;try{let l=typeof e[rv]=="number"?e[rv]:this[rv];a=this[Nt]._processChunk(e,l),ul.concat=_U}catch(l){ul.concat=_U,this[lE](new Lm(l))}finally{this[Nt]&&(this[Nt]._handle=o,o.close=i,this[Nt].close=s,this[Nt].removeAllListeners("error"))}this[Nt]&&this[Nt].on("error",l=>this[lE](new Lm(l)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[Sf](ul.from(a[0]));for(let l=1;l<a.length;l++)c=this[Sf](a[l])}else c=this[Sf](ul.from(a));return r&&r(),c}[Sf](e){return super.write(e)}},nc=class extends uE{constructor(e,n){e=e||{},e.flush=e.flush||Ef.Z_NO_FLUSH,e.finishFlush=e.finishFlush||Ef.Z_FINISH,super(e,n),this[ib]=Ef.Z_FULL_FLUSH,this[YP]=e.level,this[qP]=e.strategy}params(e,n){if(!this[km]){if(!this[Nt])throw new Error("cannot switch params when binding is closed");if(!this[Nt].params)throw new Error("not supported in this implementation");if(this[YP]!==e||this[qP]!==n){this.flush(Ef.Z_SYNC_FLUSH),KP(this[Nt],"zlib binding closed");let r=this[Nt].flush;this[Nt].flush=(o,i)=>{this.flush(o),i()};try{this[Nt].params(e,n)}finally{this[Nt].flush=r}this[Nt]&&(this[YP]=e,this[qP]=n)}}}},XP=class extends nc{constructor(e){super(e,"Deflate")}},JP=class extends nc{constructor(e){super(e,"Inflate")}},zP=Symbol("_portable"),ZP=class extends nc{constructor(e){super(e,"Gzip"),this[zP]=e&&!!e.portable}[Sf](e){return this[zP]?(this[zP]=!1,e[9]=255,super[Sf](e)):super[Sf](e)}},QP=class extends nc{constructor(e){super(e,"Gunzip")}},eb=class extends nc{constructor(e){super(e,"DeflateRaw")}},tb=class extends nc{constructor(e){super(e,"InflateRaw")}},nb=class extends nc{constructor(e){super(e,"Unzip")}},fE=class extends uE{constructor(e,n){e=e||{},e.flush=e.flush||Ef.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||Ef.BROTLI_OPERATION_FINISH,super(e,n),this[ib]=Ef.BROTLI_OPERATION_FLUSH}},rb=class extends fE{constructor(e){super(e,"BrotliCompress")}},ob=class extends fE{constructor(e){super(e,"BrotliDecompress")}};ei.Deflate=XP;ei.Inflate=JP;ei.Gzip=ZP;ei.Gunzip=QP;ei.DeflateRaw=eb;ei.InflateRaw=tb;ei.Unzip=nb;typeof DU.BrotliCompress=="function"?(ei.BrotliCompress=rb,ei.BrotliDecompress=ob):ei.BrotliCompress=ei.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Am=M((nye,IU)=>{var iJ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;IU.exports=iJ!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var dE=M((oye,PU)=>{"use strict";var{Minipass:sJ}=rE(),ab=Am(),lb=Symbol("slurp");PU.exports=class extends sJ{constructor(e,n,r){switch(super(),this.pause(),this.extended=n,this.globalExtended=r,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=ab(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=ab(e.linkpath),this.uname=e.uname,this.gname=e.gname,n&&this[lb](n),r&&this[lb](r,!0)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");let r=this.remain,o=this.blockRemain;return this.remain=Math.max(0,r-n),this.blockRemain=Math.max(0,o-n),this.ignore?!0:r>=n?super.write(e):super.write(e.slice(0,r))}[lb](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=r==="path"||r==="linkpath"?ab(e[r]):e[r])}}});var ub=M(mE=>{"use strict";mE.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);mE.code=new Map(Array.from(mE.name).map(t=>[t[1],t[0]]))});var NU=M((sye,RU)=>{"use strict";var aJ=(t,e)=>{if(Number.isSafeInteger(t))t<0?lJ(t,e):cJ(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},cJ=(t,e)=>{e[0]=128;for(var n=e.length;n>1;n--)e[n-1]=t&255,t=Math.floor(t/256)},lJ=(t,e)=>{e[0]=255;var n=!1;t=t*-1;for(var r=e.length;r>1;r--){var o=t&255;t=Math.floor(t/256),n?e[r-1]=bU(o):o===0?e[r-1]=0:(n=!0,e[r-1]=TU(o))}},uJ=t=>{let e=t[0],n=e===128?dJ(t.slice(1,t.length)):e===255?fJ(t):null;if(n===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(n))throw Error("parsed number outside of javascript safe integer range");return n},fJ=t=>{for(var e=t.length,n=0,r=!1,o=e-1;o>-1;o--){var i=t[o],s;r?s=bU(i):i===0?s=i:(r=!0,s=TU(i)),s!==0&&(n-=s*Math.pow(256,e-o-1))}return n},dJ=t=>{for(var e=t.length,n=0,r=e-1;r>-1;r--){var o=t[r];o!==0&&(n+=o*Math.pow(256,e-r-1))}return n},bU=t=>(255^t)&255,TU=t=>(255^t)+1&255;RU.exports={encode:aJ,parse:uJ}});var Om=M((aye,LU)=>{"use strict";var fb=ub(),Fm=require("path").posix,kU=NU(),db=Symbol("slurp"),ti=Symbol("type"),hb=class{constructor(e,n,r,o){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[ti]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,n||0,r,o):e&&this.set(e)}decode(e,n,r,o){if(n||(n=0),!e||!(e.length>=n+512))throw new Error("need 512 bytes for header");if(this.path=_f(e,n,100),this.mode=fl(e,n+100,8),this.uid=fl(e,n+108,8),this.gid=fl(e,n+116,8),this.size=fl(e,n+124,12),this.mtime=mb(e,n+136,12),this.cksum=fl(e,n+148,12),this[db](r),this[db](o,!0),this[ti]=_f(e,n+156,1),this[ti]===""&&(this[ti]="0"),this[ti]==="0"&&this.path.slice(-1)==="/"&&(this[ti]="5"),this[ti]==="5"&&(this.size=0),this.linkpath=_f(e,n+157,100),e.slice(n+257,n+265).toString()==="ustar\x0000")if(this.uname=_f(e,n+265,32),this.gname=_f(e,n+297,32),this.devmaj=fl(e,n+329,8),this.devmin=fl(e,n+337,8),e[n+475]!==0){let s=_f(e,n+345,155);this.path=s+"/"+this.path}else{let s=_f(e,n+345,130);s&&(this.path=s+"/"+this.path),this.atime=mb(e,n+476,12),this.ctime=mb(e,n+488,12)}let i=8*32;for(let s=n;s<n+148;s++)i+=e[s];for(let s=n+156;s<n+512;s++)i+=e[s];this.cksumValid=i===this.cksum,this.cksum===null&&i===8*32&&(this.nullBlock=!0)}[db](e,n){for(let r in e)e[r]!==null&&e[r]!==void 0&&!(n&&r==="path")&&(this[r]=e[r])}encode(e,n){if(e||(e=this.block=Buffer.alloc(512),n=0),n||(n=0),!(e.length>=n+512))throw new Error("need 512 bytes for header");let r=this.ctime||this.atime?130:155,o=mJ(this.path||"",r),i=o[0],s=o[1];this.needPax=o[2],this.needPax=xf(e,n,100,i)||this.needPax,this.needPax=dl(e,n+100,8,this.mode)||this.needPax,this.needPax=dl(e,n+108,8,this.uid)||this.needPax,this.needPax=dl(e,n+116,8,this.gid)||this.needPax,this.needPax=dl(e,n+124,12,this.size)||this.needPax,this.needPax=pb(e,n+136,12,this.mtime)||this.needPax,e[n+156]=this[ti].charCodeAt(0),this.needPax=xf(e,n+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",n+257,8),this.needPax=xf(e,n+265,32,this.uname)||this.needPax,this.needPax=xf(e,n+297,32,this.gname)||this.needPax,this.needPax=dl(e,n+329,8,this.devmaj)||this.needPax,this.needPax=dl(e,n+337,8,this.devmin)||this.needPax,this.needPax=xf(e,n+345,r,s)||this.needPax,e[n+475]!==0?this.needPax=xf(e,n+345,155,s)||this.needPax:(this.needPax=xf(e,n+345,130,s)||this.needPax,this.needPax=pb(e,n+476,12,this.atime)||this.needPax,this.needPax=pb(e,n+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=n;c<n+148;c++)a+=e[c];for(let c=n+156;c<n+512;c++)a+=e[c];return this.cksum=a,dl(e,n+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let n in e)e[n]!==null&&e[n]!==void 0&&(this[n]=e[n])}get type(){return fb.name.get(this[ti])||this[ti]}get typeKey(){return this[ti]}set type(e){fb.code.has(e)?this[ti]=fb.code.get(e):this[ti]=e}},mJ=(t,e)=>{let r=t,o="",i,s=Fm.parse(t).root||".";if(Buffer.byteLength(r)<100)i=[r,o,!1];else{o=Fm.dirname(r),r=Fm.basename(r);do Buffer.byteLength(r)<=100&&Buffer.byteLength(o)<=e?i=[r,o,!1]:Buffer.byteLength(r)>100&&Buffer.byteLength(o)<=e?i=[r.slice(0,99),o,!0]:(r=Fm.join(Fm.basename(o),r),o=Fm.dirname(o));while(o!==s&&!i);i||(i=[t.slice(0,99),"",!0])}return i},_f=(t,e,n)=>t.slice(e,e+n).toString("utf8").replace(/\0.*/,""),mb=(t,e,n)=>pJ(fl(t,e,n)),pJ=t=>t===null?null:new Date(t*1e3),fl=(t,e,n)=>t[e]&128?kU.parse(t.slice(e,e+n)):gJ(t,e,n),hJ=t=>isNaN(t)?null:t,gJ=(t,e,n)=>hJ(parseInt(t.slice(e,e+n).toString("utf8").replace(/\0.*$/,"").trim(),8)),vJ={12:8589934591,8:2097151},dl=(t,e,n,r)=>r===null?!1:r>vJ[n]||r<0?(kU.encode(r,t.slice(e,e+n)),!0):(wJ(t,e,n,r),!1),wJ=(t,e,n,r)=>t.write(yJ(r,n),e,n,"ascii"),yJ=(t,e)=>CJ(Math.floor(t).toString(8),e),CJ=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",pb=(t,e,n,r)=>r===null?!1:dl(t,e,n,r.getTime()/1e3),EJ=new Array(156).join("\0"),xf=(t,e,n,r)=>r===null?!1:(t.write(r+EJ,e,n,"utf8"),r.length!==Buffer.byteLength(r)||r.length>n);LU.exports=hb});var pE=M((cye,AU)=>{"use strict";var SJ=Om(),_J=require("path"),ov=class{constructor(e,n){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=n||!1}encode(){let e=this.encodeBody();if(e==="")return null;let n=Buffer.byteLength(e),r=512*Math.ceil(1+n/512),o=Buffer.allocUnsafe(r);for(let i=0;i<512;i++)o[i]=0;new SJ({path:("PaxHeader/"+_J.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:n,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(o),o.write(e,512,n,"utf8");for(let i=n+512;i<o.length;i++)o[i]=0;return o}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let n=this[e]instanceof Date?this[e].getTime()/1e3:this[e],r=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+n+`
`,o=Buffer.byteLength(r),i=Math.floor(Math.log(o)/Math.log(10))+1;return o+i>=Math.pow(10,i)&&(i+=1),i+o+r}};ov.parse=(t,e,n)=>new ov(xJ(DJ(t),e),n);var xJ=(t,e)=>e?Object.keys(t).reduce((n,r)=>(n[r]=t[r],n),e):t,DJ=t=>t.replace(/\n$/,"").split(`
`).reduce(IJ,Object.create(null)),IJ=(t,e)=>{let n=parseInt(e,10);if(n!==Buffer.byteLength(e)+1)return t;e=e.slice((n+" ").length);let r=e.split("="),o=r.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!o)return t;let i=r.join("=");return t[o]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(o)?new Date(i*1e3):/^[0-9]+$/.test(i)?+i:i,t};AU.exports=ov});var Um=M((lye,FU)=>{FU.exports=t=>{let e=t.length-1,n=-1;for(;e>-1&&t.charAt(e)==="/";)n=e,e--;return n===-1?t:t.slice(0,n)}});var hE=M((uye,OU)=>{"use strict";OU.exports=t=>class extends t{warn(e,n,r={}){this.file&&(r.file=this.file),this.cwd&&(r.cwd=this.cwd),r.code=n instanceof Error&&n.code||e,r.tarCode=e,!this.strict&&r.recoverable!==!1?(n instanceof Error&&(r=Object.assign(n,r),n=n.message),this.emit("warn",r.tarCode,n,r)):n instanceof Error?this.emit("error",Object.assign(n,r)):this.emit("error",Object.assign(new Error(`${e}: ${n}`),r))}}});var vb=M((dye,UU)=>{"use strict";var gE=["|","<",">","?",":"],gb=gE.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),PJ=new Map(gE.map((t,e)=>[t,gb[e]])),bJ=new Map(gb.map((t,e)=>[t,gE[e]]));UU.exports={encode:t=>gE.reduce((e,n)=>e.split(n).join(PJ.get(n)),t),decode:t=>gb.reduce((e,n)=>e.split(n).join(bJ.get(n)),t)}});var wb=M((mye,$U)=>{var{isAbsolute:TJ,parse:MU}=require("path").win32;$U.exports=t=>{let e="",n=MU(t);for(;TJ(t)||n.root;){let r=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":n.root;t=t.slice(r.length),e+=r,n=MU(t)}return[e,t]}});var BU=M((pye,HU)=>{"use strict";HU.exports=(t,e,n)=>(t&=4095,n&&(t=(t|384)&-19),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var bb=M((vye,tM)=>{"use strict";var{Minipass:zU}=rE(),KU=pE(),XU=Om(),Hs=require("fs"),WU=require("path"),$s=Am(),RJ=Um(),JU=(t,e)=>e?(t=$s(t).replace(/^\.(\/|$)/,""),RJ(e)+"/"+t):$s(t),NJ=16*1024*1024,jU=Symbol("process"),VU=Symbol("file"),YU=Symbol("directory"),Cb=Symbol("symlink"),qU=Symbol("hardlink"),iv=Symbol("header"),vE=Symbol("read"),Eb=Symbol("lstat"),wE=Symbol("onlstat"),Sb=Symbol("onread"),_b=Symbol("onreadlink"),xb=Symbol("openfile"),Db=Symbol("onopenfile"),ml=Symbol("close"),yE=Symbol("mode"),Ib=Symbol("awaitDrain"),yb=Symbol("ondrain"),Bs=Symbol("prefix"),GU=Symbol("hadError"),ZU=hE(),kJ=vb(),QU=wb(),eM=BU(),CE=ZU(class extends zU{constructor(e,n){if(n=n||{},super(n),typeof e!="string")throw new TypeError("path is required");this.path=$s(e),this.portable=!!n.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=n.maxReadSize||NJ,this.linkCache=n.linkCache||new Map,this.statCache=n.statCache||new Map,this.preservePaths=!!n.preservePaths,this.cwd=$s(n.cwd||process.cwd()),this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.mtime=n.mtime||null,this.prefix=n.prefix?$s(n.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=QU(this.path);o&&(this.path=i,r=o)}this.win32=!!n.win32||process.platform==="win32",this.win32&&(this.path=kJ.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=$s(n.absolute||WU.resolve(this.cwd,e)),this.path===""&&(this.path="./"),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.statCache.has(this.absolute)?this[wE](this.statCache.get(this.absolute)):this[Eb]()}emit(e,...n){return e==="error"&&(this[GU]=!0),super.emit(e,...n)}[Eb](){Hs.lstat(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[wE](n)})}[wE](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=AJ(e),this.emit("stat",e),this[jU]()}[jU](){switch(this.type){case"File":return this[VU]();case"Directory":return this[YU]();case"SymbolicLink":return this[Cb]();default:return this.end()}}[yE](e){return eM(e,this.type==="Directory",this.portable)}[Bs](e){return JU(e,this.prefix)}[iv](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new XU({path:this[Bs](this.path),linkpath:this.type==="Link"?this[Bs](this.linkpath):this.linkpath,mode:this[yE](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new KU({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Bs](this.path),linkpath:this.type==="Link"?this[Bs](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[YU](){this.path.slice(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[iv](),this.end()}[Cb](){Hs.readlink(this.absolute,(e,n)=>{if(e)return this.emit("error",e);this[_b](n)})}[_b](e){this.linkpath=$s(e),this[iv](),this.end()}[qU](e){this.type="Link",this.linkpath=$s(WU.relative(this.cwd,e)),this.stat.size=0,this[iv](),this.end()}[VU](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let n=this.linkCache.get(e);if(n.indexOf(this.cwd)===0)return this[qU](n)}this.linkCache.set(e,this.absolute)}if(this[iv](),this.stat.size===0)return this.end();this[xb]()}[xb](){Hs.open(this.absolute,"r",(e,n)=>{if(e)return this.emit("error",e);this[Db](n)})}[Db](e){if(this.fd=e,this[GU])return this[ml]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let n=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(n),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[vE]()}[vE](){let{fd:e,buf:n,offset:r,length:o,pos:i}=this;Hs.read(e,n,r,o,i,(s,a)=>{if(s)return this[ml](()=>this.emit("error",s));this[Sb](a)})}[ml](e){Hs.close(this.fd,e)}[Sb](e){if(e<=0&&this.remain>0){let o=new Error("encountered unexpected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[ml](()=>this.emit("error",o))}if(e>this.remain){let o=new Error("did not encounter expected EOF");return o.path=this.absolute,o.syscall="read",o.code="EOF",this[ml](()=>this.emit("error",o))}if(e===this.remain)for(let o=e;o<this.length&&e<this.blockRemain;o++)this.buf[o+this.offset]=0,e++,this.remain++;let n=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(n)?this[yb]():this[Ib](()=>this[yb]())}[Ib](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let n=new Error("writing more data than expected");return n.path=this.absolute,this.emit("error",n)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[yb](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[ml](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[vE]()}}),Pb=class extends CE{[Eb](){this[wE](Hs.lstatSync(this.absolute))}[Cb](){this[_b](Hs.readlinkSync(this.absolute))}[xb](){this[Db](Hs.openSync(this.absolute,"r"))}[vE](){let e=!0;try{let{fd:n,buf:r,offset:o,length:i,pos:s}=this,a=Hs.readSync(n,r,o,i,s);this[Sb](a),e=!1}finally{if(e)try{this[ml](()=>{})}catch{}}}[Ib](e){e()}[ml](e){Hs.closeSync(this.fd),e()}},LJ=ZU(class extends zU{constructor(e,n){n=n||{},super(n),this.preservePaths=!!n.preservePaths,this.portable=!!n.portable,this.strict=!!n.strict,this.noPax=!!n.noPax,this.noMtime=!!n.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=n.prefix||null,this.path=$s(e.path),this.mode=this[yE](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:n.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=$s(e.linkpath),typeof n.onwarn=="function"&&this.on("warn",n.onwarn);let r=!1;if(!this.preservePaths){let[o,i]=QU(this.path);o&&(this.path=i,r=o)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new XU({path:this[Bs](this.path),linkpath:this.type==="Link"?this[Bs](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),r&&this.warn("TAR_ENTRY_INFO",`stripping ${r} from absolute path`,{entry:this,path:r+this.path}),this.header.encode()&&!this.noPax&&super.write(new KU({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Bs](this.path),linkpath:this.type==="Link"?this[Bs](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Bs](e){return JU(e,this.prefix)}[yE](e){return eM(e,this.type==="Directory",this.portable)}write(e){let n=e.length;if(n>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=n,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});CE.Sync=Pb;CE.Tar=LJ;var AJ=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";tM.exports=CE});var rM=M((wye,nM)=>{"use strict";nM.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Tb=M((yye,oM)=>{"use strict";oM.exports=dt;dt.Node=Df;dt.create=dt;function dt(t){var e=this;if(e instanceof dt||(e=new dt),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(o){e.push(o)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}dt.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e};dt.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};dt.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};dt.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)OJ(this,arguments[t]);return this.length};dt.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)UJ(this,arguments[t]);return this.length};dt.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};dt.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};dt.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,r=0;n!==null;r++)t.call(e,n.value,r,this),n=n.next};dt.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,r=this.length-1;n!==null;r--)t.call(e,n.value,r,this),n=n.prev};dt.prototype.get=function(t){for(var e=0,n=this.head;n!==null&&e<t;e++)n=n.next;if(e===t&&n!==null)return n.value};dt.prototype.getReverse=function(t){for(var e=0,n=this.tail;n!==null&&e<t;e++)n=n.prev;if(e===t&&n!==null)return n.value};dt.prototype.map=function(t,e){e=e||this;for(var n=new dt,r=this.head;r!==null;)n.push(t.call(e,r.value,this)),r=r.next;return n};dt.prototype.mapReverse=function(t,e){e=e||this;for(var n=new dt,r=this.tail;r!==null;)n.push(t.call(e,r.value,this)),r=r.prev;return n};dt.prototype.reduce=function(t,e){var n,r=this.head;if(arguments.length>1)n=e;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=0;r!==null;o++)n=t(n,r.value,o),r=r.next;return n};dt.prototype.reduceReverse=function(t,e){var n,r=this.tail;if(arguments.length>1)n=e;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var o=this.length-1;r!==null;o--)n=t(n,r.value,o),r=r.prev;return n};dt.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;n!==null;e++)t[e]=n.value,n=n.next;return t};dt.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;n!==null;e++)t[e]=n.value,n=n.prev;return t};dt.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new dt;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(;o!==null&&r<e;r++,o=o.next)n.push(o.value);return n};dt.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var n=new dt;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,o=this.tail;o!==null&&r>e;r--)o=o.prev;for(;o!==null&&r>t;r--,o=o.prev)n.push(o.value);return n};dt.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,o=this.head;o!==null&&r<t;r++)o=o.next;for(var i=[],r=0;o&&r<e;r++)i.push(o.value),o=this.removeNode(o);o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev);for(var r=0;r<n.length;r++)o=FJ(this,o,n[r]);return i};dt.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=e,this.tail=t,this};function FJ(t,e,n){var r=e===t.head?new Df(n,null,e,t):new Df(n,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function OJ(t,e){t.tail=new Df(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function UJ(t,e){t.head=new Df(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Df(t,e,n,r){if(!(this instanceof Df))return new Df(t,e,n,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{rM()(dt)}catch{}});var TE=M((Eye,dM)=>{"use strict";var PE=class{constructor(e,n){this.path=e||"./",this.absolute=n,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},{Minipass:MJ}=rE(),iM=sb(),$J=dE(),Mb=bb(),HJ=Mb.Sync,BJ=Mb.Tar,WJ=Tb(),sM=Buffer.alloc(1024),_E=Symbol("onStat"),EE=Symbol("ended"),Ws=Symbol("queue"),Mm=Symbol("current"),If=Symbol("process"),SE=Symbol("processing"),aM=Symbol("processJob"),js=Symbol("jobs"),Rb=Symbol("jobDone"),xE=Symbol("addFSEntry"),cM=Symbol("addTarEntry"),Ab=Symbol("stat"),Fb=Symbol("readdir"),DE=Symbol("onreaddir"),IE=Symbol("pipe"),lM=Symbol("entry"),Nb=Symbol("entryOpt"),Ob=Symbol("writeEntryClass"),fM=Symbol("write"),kb=Symbol("ondrain"),bE=require("fs"),uM=require("path"),jJ=hE(),Lb=Am(),$b=jJ(class extends MJ{constructor(e){if(super(e),e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Lb(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Ob]=Mb,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip||e.brotli){if(e.gzip&&e.brotli)throw new TypeError("gzip and brotli are mutually exclusive");e.gzip&&(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new iM.Gzip(e.gzip)),e.brotli&&(typeof e.brotli!="object"&&(e.brotli={}),this.zip=new iM.BrotliCompress(e.brotli)),this.zip.on("data",n=>super.write(n)),this.zip.on("end",n=>super.end()),this.zip.on("drain",n=>this[kb]()),this.on("resume",n=>this.zip.resume())}else this.on("drain",this[kb]);this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:n=>!0,this[Ws]=new WJ,this[js]=0,this.jobs=+e.jobs||4,this[SE]=!1,this[EE]=!1}[fM](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[EE]=!0,this[If](),this}write(e){if(this[EE])throw new Error("write after end");return e instanceof $J?this[cM](e):this[xE](e),this.flowing}[cM](e){let n=Lb(uM.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let r=new PE(e.path,n,!1);r.entry=new BJ(e,this[Nb](r)),r.entry.on("end",o=>this[Rb](r)),this[js]+=1,this[Ws].push(r)}this[If]()}[xE](e){let n=Lb(uM.resolve(this.cwd,e));this[Ws].push(new PE(e,n)),this[If]()}[Ab](e){e.pending=!0,this[js]+=1;let n=this.follow?"stat":"lstat";bE[n](e.absolute,(r,o)=>{e.pending=!1,this[js]-=1,r?this.emit("error",r):this[_E](e,o)})}[_E](e,n){this.statCache.set(e.absolute,n),e.stat=n,this.filter(e.path,n)||(e.ignore=!0),this[If]()}[Fb](e){e.pending=!0,this[js]+=1,bE.readdir(e.absolute,(n,r)=>{if(e.pending=!1,this[js]-=1,n)return this.emit("error",n);this[DE](e,r)})}[DE](e,n){this.readdirCache.set(e.absolute,n),e.readdir=n,this[If]()}[If](){if(!this[SE]){this[SE]=!0;for(let e=this[Ws].head;e!==null&&this[js]<this.jobs;e=e.next)if(this[aM](e.value),e.value.ignore){let n=e.next;this[Ws].removeNode(e),e.next=n}this[SE]=!1,this[EE]&&!this[Ws].length&&this[js]===0&&(this.zip?this.zip.end(sM):(super.write(sM),super.end()))}}get[Mm](){return this[Ws]&&this[Ws].head&&this[Ws].head.value}[Rb](e){this[Ws].shift(),this[js]-=1,this[If]()}[aM](e){if(!e.pending){if(e.entry){e===this[Mm]&&!e.piped&&this[IE](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[_E](e,this.statCache.get(e.absolute)):this[Ab](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[DE](e,this.readdirCache.get(e.absolute)):this[Fb](e),!e.readdir))){if(e.entry=this[lM](e),!e.entry){e.ignore=!0;return}e===this[Mm]&&!e.piped&&this[IE](e)}}}[Nb](e){return{onwarn:(n,r,o)=>this.warn(n,r,o),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[lM](e){this[js]+=1;try{return new this[Ob](e.path,this[Nb](e)).on("end",()=>this[Rb](e)).on("error",n=>this.emit("error",n))}catch(n){this.emit("error",n)}}[kb](){this[Mm]&&this[Mm].entry&&this[Mm].entry.resume()}[IE](e){e.piped=!0,e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[xE](s+o)});let n=e.entry,r=this.zip;r?n.on("data",o=>{r.write(o)||n.pause()}):n.on("data",o=>{super.write(o)||n.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),Ub=class extends $b{constructor(e){super(e),this[Ob]=HJ}pause(){}resume(){}[Ab](e){let n=this.follow?"statSync":"lstatSync";this[_E](e,bE[n](e.absolute))}[Fb](e,n){this[DE](e,bE.readdirSync(e.absolute))}[IE](e){let n=e.entry,r=this.zip;e.readdir&&e.readdir.forEach(o=>{let i=e.path,s=i==="./"?"":i.replace(/\/*$/,"/");this[xE](s+o)}),r?n.on("data",o=>{r.write(o)}):n.on("data",o=>{super[fM](o)})}};$b.Sync=Ub;dM.exports=$b});var SM=M((Sye,EM)=>{"use strict";var mM=typeof process=="object"&&process?process:{stdout:null,stderr:null},VJ=require("events"),pM=require("stream"),hM=require("string_decoder").StringDecoder,rc=Symbol("EOF"),oc=Symbol("maybeEmitEnd"),pl=Symbol("emittedEnd"),RE=Symbol("emittingEnd"),sv=Symbol("emittedError"),NE=Symbol("closed"),gM=Symbol("read"),kE=Symbol("flush"),vM=Symbol("flushChunk"),To=Symbol("encoding"),ic=Symbol("decoder"),LE=Symbol("flowing"),av=Symbol("paused"),$m=Symbol("resume"),sr=Symbol("bufferLength"),Hb=Symbol("bufferPush"),Bb=Symbol("bufferShift"),jr=Symbol("objectMode"),Vr=Symbol("destroyed"),Wb=Symbol("emitData"),wM=Symbol("emitEnd"),jb=Symbol("emitEnd2"),sc=Symbol("async"),cv=t=>Promise.resolve().then(t),yM=global._MP_NO_ITERATOR_SYMBOLS_!=="1",YJ=yM&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),qJ=yM&&Symbol.iterator||Symbol("iterator not implemented"),GJ=t=>t==="end"||t==="finish"||t==="prefinish",zJ=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,KJ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),AE=class{constructor(e,n,r){this.src=e,this.dest=n,this.opts=r,this.ondrain=()=>e[$m](),n.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Vb=class extends AE{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,n,r){super(e,n,r),this.proxyErrors=o=>n.emit("error",o),e.on("error",this.proxyErrors)}};EM.exports=class CM extends pM{constructor(e){super(),this[LE]=!1,this[av]=!1,this.pipes=[],this.buffer=[],this[jr]=e&&e.objectMode||!1,this[jr]?this[To]=null:this[To]=e&&e.encoding||null,this[To]==="buffer"&&(this[To]=null),this[sc]=e&&!!e.async||!1,this[ic]=this[To]?new hM(this[To]):null,this[rc]=!1,this[pl]=!1,this[RE]=!1,this[NE]=!1,this[sv]=null,this.writable=!0,this.readable=!0,this[sr]=0,this[Vr]=!1}get bufferLength(){return this[sr]}get encoding(){return this[To]}set encoding(e){if(this[jr])throw new Error("cannot set encoding in objectMode");if(this[To]&&e!==this[To]&&(this[ic]&&this[ic].lastNeed||this[sr]))throw new Error("cannot change encoding");this[To]!==e&&(this[ic]=e?new hM(e):null,this.buffer.length&&(this.buffer=this.buffer.map(n=>this[ic].write(n)))),this[To]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[jr]}set objectMode(e){this[jr]=this[jr]||!!e}get async(){return this[sc]}set async(e){this[sc]=this[sc]||!!e}write(e,n,r){if(this[rc])throw new Error("write after end");if(this[Vr])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof n=="function"&&(r=n,n="utf8"),n||(n="utf8");let o=this[sc]?cv:i=>i();return!this[jr]&&!Buffer.isBuffer(e)&&(KJ(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):zJ(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),this[jr]?(this.flowing&&this[sr]!==0&&this[kE](!0),this.flowing?this.emit("data",e):this[Hb](e),this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing):e.length?(typeof e=="string"&&!(n===this[To]&&!this[ic].lastNeed)&&(e=Buffer.from(e,n)),Buffer.isBuffer(e)&&this[To]&&(e=this[ic].write(e)),this.flowing&&this[sr]!==0&&this[kE](!0),this.flowing?this.emit("data",e):this[Hb](e),this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing):(this[sr]!==0&&this.emit("readable"),r&&o(r),this.flowing)}read(e){if(this[Vr])return null;if(this[sr]===0||e===0||e>this[sr])return this[oc](),null;this[jr]&&(e=null),this.buffer.length>1&&!this[jr]&&(this.encoding?this.buffer=[this.buffer.join("")]:this.buffer=[Buffer.concat(this.buffer,this[sr])]);let n=this[gM](e||null,this.buffer[0]);return this[oc](),n}[gM](e,n){return e===n.length||e===null?this[Bb]():(this.buffer[0]=n.slice(e),n=n.slice(0,e),this[sr]-=e),this.emit("data",n),!this.buffer.length&&!this[rc]&&this.emit("drain"),n}end(e,n,r){return typeof e=="function"&&(r=e,e=null),typeof n=="function"&&(r=n,n="utf8"),e&&this.write(e,n),r&&this.once("end",r),this[rc]=!0,this.writable=!1,(this.flowing||!this[av])&&this[oc](),this}[$m](){this[Vr]||(this[av]=!1,this[LE]=!0,this.emit("resume"),this.buffer.length?this[kE]():this[rc]?this[oc]():this.emit("drain"))}resume(){return this[$m]()}pause(){this[LE]=!1,this[av]=!0}get destroyed(){return this[Vr]}get flowing(){return this[LE]}get paused(){return this[av]}[Hb](e){this[jr]?this[sr]+=1:this[sr]+=e.length,this.buffer.push(e)}[Bb](){return this.buffer.length&&(this[jr]?this[sr]-=1:this[sr]-=this.buffer[0].length),this.buffer.shift()}[kE](e){do;while(this[vM](this[Bb]()));!e&&!this.buffer.length&&!this[rc]&&this.emit("drain")}[vM](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,n){if(this[Vr])return;let r=this[pl];return n=n||{},e===mM.stdout||e===mM.stderr?n.end=!1:n.end=n.end!==!1,n.proxyErrors=!!n.proxyErrors,r?n.end&&e.end():(this.pipes.push(n.proxyErrors?new Vb(this,e,n):new AE(this,e,n)),this[sc]?cv(()=>this[$m]()):this[$m]()),e}unpipe(e){let n=this.pipes.find(r=>r.dest===e);n&&(this.pipes.splice(this.pipes.indexOf(n),1),n.unpipe())}addListener(e,n){return this.on(e,n)}on(e,n){let r=super.on(e,n);return e==="data"&&!this.pipes.length&&!this.flowing?this[$m]():e==="readable"&&this[sr]!==0?super.emit("readable"):GJ(e)&&this[pl]?(super.emit(e),this.removeAllListeners(e)):e==="error"&&this[sv]&&(this[sc]?cv(()=>n.call(this,this[sv])):n.call(this,this[sv])),r}get emittedEnd(){return this[pl]}[oc](){!this[RE]&&!this[pl]&&!this[Vr]&&this.buffer.length===0&&this[rc]&&(this[RE]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[NE]&&this.emit("close"),this[RE]=!1)}emit(e,n,...r){if(e!=="error"&&e!=="close"&&e!==Vr&&this[Vr])return;if(e==="data")return n?this[sc]?cv(()=>this[Wb](n)):this[Wb](n):!1;if(e==="end")return this[wM]();if(e==="close"){if(this[NE]=!0,!this[pl]&&!this[Vr])return;let i=super.emit("close");return this.removeAllListeners("close"),i}else if(e==="error"){this[sv]=n;let i=super.emit("error",n);return this[oc](),i}else if(e==="resume"){let i=super.emit("resume");return this[oc](),i}else if(e==="finish"||e==="prefinish"){let i=super.emit(e);return this.removeAllListeners(e),i}let o=super.emit(e,n,...r);return this[oc](),o}[Wb](e){for(let r of this.pipes)r.dest.write(e)===!1&&this.pause();let n=super.emit("data",e);return this[oc](),n}[wM](){this[pl]||(this[pl]=!0,this.readable=!1,this[sc]?cv(()=>this[jb]()):this[jb]())}[jb](){if(this[ic]){let n=this[ic].end();if(n){for(let r of this.pipes)r.dest.write(n);super.emit("data",n)}}for(let n of this.pipes)n.end();let e=super.emit("end");return this.removeAllListeners("end"),e}collect(){let e=[];this[jr]||(e.dataLength=0);let n=this.promise();return this.on("data",r=>{e.push(r),this[jr]||(e.dataLength+=r.length)}),n.then(()=>e)}concat(){return this[jr]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[jr]?Promise.reject(new Error("cannot concat in objectMode")):this[To]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,n)=>{this.on(Vr,()=>n(new Error("stream destroyed"))),this.on("error",r=>n(r)),this.on("end",()=>e())})}[YJ](){return{next:()=>{let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[rc])return Promise.resolve({done:!0});let r=null,o=null,i=l=>{this.removeListener("data",s),this.removeListener("end",a),o(l)},s=l=>{this.removeListener("error",i),this.removeListener("end",a),this.pause(),r({value:l,done:!!this[rc]})},a=()=>{this.removeListener("error",i),this.removeListener("data",s),r({done:!0})},c=()=>i(new Error("stream destroyed"));return new Promise((l,u)=>{o=u,r=l,this.once(Vr,c),this.once("error",i),this.once("end",a),this.once("data",s)})}}}[qJ](){return{next:()=>{let n=this.read();return{value:n,done:n===null}}}}destroy(e){return this[Vr]?(e?this.emit("error",e):this.emit(Vr),this):(this[Vr]=!0,this.buffer.length=0,this[sr]=0,typeof this.close=="function"&&!this[NE]&&this.close(),e?this.emit("error",e):this.emit(Vr),this)}static isStream(e){return!!e&&(e instanceof CM||e instanceof pM||e instanceof VJ&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var Gm=M(uv=>{"use strict";var XJ=SM(),JJ=require("events").EventEmitter,Ro=require("fs"),Gb=Ro.writev;if(!Gb){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Gb=(n,r,o,i)=>{let s=(c,l)=>i(c,l,r),a=new e;a.oncomplete=s,t.writeBuffers(n,r,o,a)}}var Ym=Symbol("_autoClose"),os=Symbol("_close"),lv=Symbol("_ended"),_t=Symbol("_fd"),_M=Symbol("_finished"),gl=Symbol("_flags"),Yb=Symbol("_flush"),zb=Symbol("_handleChunk"),Kb=Symbol("_makeBuf"),$E=Symbol("_mode"),FE=Symbol("_needDrain"),jm=Symbol("_onerror"),qm=Symbol("_onopen"),qb=Symbol("_onread"),Bm=Symbol("_onwrite"),vl=Symbol("_open"),ac=Symbol("_path"),Pf=Symbol("_pos"),Vs=Symbol("_queue"),Wm=Symbol("_read"),xM=Symbol("_readSize"),hl=Symbol("_reading"),OE=Symbol("_remain"),DM=Symbol("_size"),UE=Symbol("_write"),Hm=Symbol("_writing"),ME=Symbol("_defaultFlag"),Vm=Symbol("_errored"),HE=class extends XJ{constructor(e,n){if(n=n||{},super(n),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[Vm]=!1,this[_t]=typeof n.fd=="number"?n.fd:null,this[ac]=e,this[xM]=n.readSize||16*1024*1024,this[hl]=!1,this[DM]=typeof n.size=="number"?n.size:1/0,this[OE]=this[DM],this[Ym]=typeof n.autoClose=="boolean"?n.autoClose:!0,typeof this[_t]=="number"?this[Wm]():this[vl]()}get fd(){return this[_t]}get path(){return this[ac]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[vl](){Ro.open(this[ac],"r",(e,n)=>this[qm](e,n))}[qm](e,n){e?this[jm](e):(this[_t]=n,this.emit("open",n),this[Wm]())}[Kb](){return Buffer.allocUnsafe(Math.min(this[xM],this[OE]))}[Wm](){if(!this[hl]){this[hl]=!0;let e=this[Kb]();if(e.length===0)return process.nextTick(()=>this[qb](null,0,e));Ro.read(this[_t],e,0,e.length,null,(n,r,o)=>this[qb](n,r,o))}}[qb](e,n,r){this[hl]=!1,e?this[jm](e):this[zb](n,r)&&this[Wm]()}[os](){if(this[Ym]&&typeof this[_t]=="number"){let e=this[_t];this[_t]=null,Ro.close(e,n=>n?this.emit("error",n):this.emit("close"))}}[jm](e){this[hl]=!0,this[os](),this.emit("error",e)}[zb](e,n){let r=!1;return this[OE]-=e,e>0&&(r=super.write(e<n.length?n.slice(0,e):n)),(e===0||this[OE]<=0)&&(r=!1,this[os](),super.end()),r}emit(e,n){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[_t]=="number"&&this[Wm]();break;case"error":return this[Vm]?void 0:(this[Vm]=!0,super.emit(e,n));default:return super.emit(e,n)}}},Xb=class extends HE{[vl](){let e=!0;try{this[qm](null,Ro.openSync(this[ac],"r")),e=!1}finally{e&&this[os]()}}[Wm](){let e=!0;try{if(!this[hl]){this[hl]=!0;do{let n=this[Kb](),r=n.length===0?0:Ro.readSync(this[_t],n,0,n.length,null);if(!this[zb](r,n))break}while(!0);this[hl]=!1}e=!1}finally{e&&this[os]()}}[os](){if(this[Ym]&&typeof this[_t]=="number"){let e=this[_t];this[_t]=null,Ro.closeSync(e),this.emit("close")}}},BE=class extends JJ{constructor(e,n){n=n||{},super(n),this.readable=!1,this.writable=!0,this[Vm]=!1,this[Hm]=!1,this[lv]=!1,this[FE]=!1,this[Vs]=[],this[ac]=e,this[_t]=typeof n.fd=="number"?n.fd:null,this[$E]=n.mode===void 0?438:n.mode,this[Pf]=typeof n.start=="number"?n.start:null,this[Ym]=typeof n.autoClose=="boolean"?n.autoClose:!0;let r=this[Pf]!==null?"r+":"w";this[ME]=n.flags===void 0,this[gl]=this[ME]?r:n.flags,this[_t]===null&&this[vl]()}emit(e,n){if(e==="error"){if(this[Vm])return;this[Vm]=!0}return super.emit(e,n)}get fd(){return this[_t]}get path(){return this[ac]}[jm](e){this[os](),this[Hm]=!0,this.emit("error",e)}[vl](){Ro.open(this[ac],this[gl],this[$E],(e,n)=>this[qm](e,n))}[qm](e,n){this[ME]&&this[gl]==="r+"&&e&&e.code==="ENOENT"?(this[gl]="w",this[vl]()):e?this[jm](e):(this[_t]=n,this.emit("open",n),this[Yb]())}end(e,n){return e&&this.write(e,n),this[lv]=!0,!this[Hm]&&!this[Vs].length&&typeof this[_t]=="number"&&this[Bm](null,0),this}write(e,n){return typeof e=="string"&&(e=Buffer.from(e,n)),this[lv]?(this.emit("error",new Error("write() after end()")),!1):this[_t]===null||this[Hm]||this[Vs].length?(this[Vs].push(e),this[FE]=!0,!1):(this[Hm]=!0,this[UE](e),!0)}[UE](e){Ro.write(this[_t],e,0,e.length,this[Pf],(n,r)=>this[Bm](n,r))}[Bm](e,n){e?this[jm](e):(this[Pf]!==null&&(this[Pf]+=n),this[Vs].length?this[Yb]():(this[Hm]=!1,this[lv]&&!this[_M]?(this[_M]=!0,this[os](),this.emit("finish")):this[FE]&&(this[FE]=!1,this.emit("drain"))))}[Yb](){if(this[Vs].length===0)this[lv]&&this[Bm](null,0);else if(this[Vs].length===1)this[UE](this[Vs].pop());else{let e=this[Vs];this[Vs]=[],Gb(this[_t],e,this[Pf],(n,r)=>this[Bm](n,r))}}[os](){if(this[Ym]&&typeof this[_t]=="number"){let e=this[_t];this[_t]=null,Ro.close(e,n=>n?this.emit("error",n):this.emit("close"))}}},Jb=class extends BE{[vl](){let e;if(this[ME]&&this[gl]==="r+")try{e=Ro.openSync(this[ac],this[gl],this[$E])}catch(n){if(n.code==="ENOENT")return this[gl]="w",this[vl]();throw n}else e=Ro.openSync(this[ac],this[gl],this[$E]);this[qm](null,e)}[os](){if(this[Ym]&&typeof this[_t]=="number"){let e=this[_t];this[_t]=null,Ro.closeSync(e),this.emit("close")}}[UE](e){let n=!0;try{this[Bm](null,Ro.writeSync(this[_t],e,0,e.length,this[Pf])),n=!1}finally{if(n)try{this[os]()}catch{}}}};uv.ReadStream=HE;uv.ReadStreamSync=Xb;uv.WriteStream=BE;uv.WriteStreamSync=Jb});var zE=M((Dye,FM)=>{"use strict";var ZJ=hE(),IM=Om(),QJ=require("events"),eZ=Tb(),tZ=1024*1024,nZ=dE(),PM=pE(),bM=sb(),{nextTick:rZ}=require("process"),Zb=Buffer.from([31,139]),Pi=Symbol("state"),bf=Symbol("writeEntry"),cc=Symbol("readEntry"),Qb=Symbol("nextEntry"),TM=Symbol("processEntry"),bi=Symbol("extendedHeader"),fv=Symbol("globalExtendedHeader"),wl=Symbol("meta"),RM=Symbol("emitMeta"),kt=Symbol("buffer"),lc=Symbol("queue"),yl=Symbol("ended"),NM=Symbol("emittedEnd"),Tf=Symbol("emit"),ar=Symbol("unzip"),WE=Symbol("consumeChunk"),jE=Symbol("consumeChunkSub"),eT=Symbol("consumeBody"),kM=Symbol("consumeMeta"),LM=Symbol("consumeHeader"),VE=Symbol("consuming"),tT=Symbol("bufferConcat"),nT=Symbol("maybeEnd"),dv=Symbol("writing"),Cl=Symbol("aborted"),YE=Symbol("onDone"),Rf=Symbol("sawValidEntry"),qE=Symbol("sawNullBlock"),GE=Symbol("sawEOF"),AM=Symbol("closeStream"),oZ=t=>!0;FM.exports=ZJ(class extends QJ{constructor(e){e=e||{},super(e),this.file=e.file||"",this[Rf]=null,this.on(YE,r=>{(this[Pi]==="begin"||this[Rf]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(YE,e.ondone):this.on(YE,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||tZ,this.filter=typeof e.filter=="function"?e.filter:oZ;let n=e.file&&(e.file.endsWith(".tar.br")||e.file.endsWith(".tbr"));this.brotli=!e.gzip&&e.brotli!==void 0?e.brotli:n?void 0:!1,this.writable=!0,this.readable=!1,this[lc]=new eZ,this[kt]=null,this[cc]=null,this[bf]=null,this[Pi]="begin",this[wl]="",this[bi]=null,this[fv]=null,this[yl]=!1,this[ar]=null,this[Cl]=!1,this[qE]=!1,this[GE]=!1,this.on("end",()=>this[AM]()),typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[LM](e,n){this[Rf]===null&&(this[Rf]=!1);let r;try{r=new IM(e,n,this[bi],this[fv])}catch(o){return this.warn("TAR_ENTRY_INVALID",o)}if(r.nullBlock)this[qE]?(this[GE]=!0,this[Pi]==="begin"&&(this[Pi]="header"),this[Tf]("eof")):(this[qE]=!0,this[Tf]("nullBlock"));else if(this[qE]=!1,!r.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:r});else if(!r.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:r});else{let o=r.type;if(/^(Symbolic)?Link$/.test(o)&&!r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:r});else if(!/^(Symbolic)?Link$/.test(o)&&r.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:r});else{let i=this[bf]=new nZ(r,this[bi],this[fv]);if(!this[Rf])if(i.remain){let s=()=>{i.invalid||(this[Rf]=!0)};i.on("end",s)}else this[Rf]=!0;i.meta?i.size>this.maxMetaEntrySize?(i.ignore=!0,this[Tf]("ignoredEntry",i),this[Pi]="ignore",i.resume()):i.size>0&&(this[wl]="",i.on("data",s=>this[wl]+=s),this[Pi]="meta"):(this[bi]=null,i.ignore=i.ignore||!this.filter(i.path,i),i.ignore?(this[Tf]("ignoredEntry",i),this[Pi]=i.remain?"ignore":"header",i.resume()):(i.remain?this[Pi]="body":(this[Pi]="header",i.end()),this[cc]?this[lc].push(i):(this[lc].push(i),this[Qb]())))}}}[AM](){rZ(()=>this.emit("close"))}[TM](e){let n=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[cc]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",r=>this[Qb]()),n=!1)):(this[cc]=null,n=!1),n}[Qb](){do;while(this[TM](this[lc].shift()));if(!this[lc].length){let e=this[cc];!e||e.flowing||e.size===e.remain?this[dv]||this.emit("drain"):e.once("drain",r=>this.emit("drain"))}}[eT](e,n){let r=this[bf],o=r.blockRemain,i=o>=e.length&&n===0?e:e.slice(n,n+o);return r.write(i),r.blockRemain||(this[Pi]="header",this[bf]=null,r.end()),i.length}[kM](e,n){let r=this[bf],o=this[eT](e,n);return this[bf]||this[RM](r),o}[Tf](e,n,r){!this[lc].length&&!this[cc]?this.emit(e,n,r):this[lc].push([e,n,r])}[RM](e){switch(this[Tf]("meta",this[wl]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[bi]=PM.parse(this[wl],this[bi],!1);break;case"GlobalExtendedHeader":this[fv]=PM.parse(this[wl],this[fv],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[bi]=this[bi]||Object.create(null),this[bi].path=this[wl].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[bi]=this[bi]||Object.create(null),this[bi].linkpath=this[wl].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Cl]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[Cl])return;if((this[ar]===null||this.brotli===void 0&&this[ar]===!1)&&e){if(this[kt]&&(e=Buffer.concat([this[kt],e]),this[kt]=null),e.length<Zb.length)return this[kt]=e,!0;for(let i=0;this[ar]===null&&i<Zb.length;i++)e[i]!==Zb[i]&&(this[ar]=!1);let o=this.brotli===void 0;if(this[ar]===!1&&o)if(e.length<512)if(this[yl])this.brotli=!0;else return this[kt]=e,!0;else try{new IM(e.slice(0,512)),this.brotli=!1}catch{this.brotli=!0}if(this[ar]===null||this[ar]===!1&&this.brotli){let i=this[yl];this[yl]=!1,this[ar]=this[ar]===null?new bM.Unzip:new bM.BrotliDecompress,this[ar].on("data",a=>this[WE](a)),this[ar].on("error",a=>this.abort(a)),this[ar].on("end",a=>{this[yl]=!0,this[WE]()}),this[dv]=!0;let s=this[ar][i?"end":"write"](e);return this[dv]=!1,s}}this[dv]=!0,this[ar]?this[ar].write(e):this[WE](e),this[dv]=!1;let r=this[lc].length?!1:this[cc]?this[cc].flowing:!0;return!r&&!this[lc].length&&this[cc].once("drain",o=>this.emit("drain")),r}[tT](e){e&&!this[Cl]&&(this[kt]=this[kt]?Buffer.concat([this[kt],e]):e)}[nT](){if(this[yl]&&!this[NM]&&!this[Cl]&&!this[VE]){this[NM]=!0;let e=this[bf];if(e&&e.blockRemain){let n=this[kt]?this[kt].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${n} available)`,{entry:e}),this[kt]&&e.write(this[kt]),e.end()}this[Tf](YE)}}[WE](e){if(this[VE])this[tT](e);else if(!e&&!this[kt])this[nT]();else{if(this[VE]=!0,this[kt]){this[tT](e);let n=this[kt];this[kt]=null,this[jE](n)}else this[jE](e);for(;this[kt]&&this[kt].length>=512&&!this[Cl]&&!this[GE];){let n=this[kt];this[kt]=null,this[jE](n)}this[VE]=!1}(!this[kt]||this[yl])&&this[nT]()}[jE](e){let n=0,r=e.length;for(;n+512<=r&&!this[Cl]&&!this[GE];)switch(this[Pi]){case"begin":case"header":this[LM](e,n),n+=512;break;case"ignore":case"body":n+=this[eT](e,n);break;case"meta":n+=this[kM](e,n);break;default:throw new Error("invalid state: "+this[Pi])}n<r&&(this[kt]?this[kt]=Buffer.concat([e.slice(n),this[kt]]):this[kt]=e.slice(n))}end(e){this[Cl]||(this[ar]?this[ar].end(e):(this[yl]=!0,this.brotli===void 0&&(e=e||Buffer.alloc(0)),this.write(e)))}})});var KE=M((Iye,$M)=>{"use strict";var iZ=Tm(),UM=zE(),zm=require("fs"),sZ=Gm(),OM=require("path"),rT=Um();$M.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=iZ(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&cZ(r,e),r.noResume||aZ(r),r.file&&r.sync?lZ(r):r.file?uZ(r,n):MM(r)};var aZ=t=>{let e=t.onentry;t.onentry=e?n=>{e(n),n.resume()}:n=>n.resume()},cZ=(t,e)=>{let n=new Map(e.map(i=>[rT(i),!0])),r=t.filter,o=(i,s)=>{let a=s||OM.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(OM.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(rT(i)):i=>o(rT(i))},lZ=t=>{let e=MM(t),n=t.file,r=!0,o;try{let i=zm.statSync(n),s=t.maxReadSize||16*1024*1024;if(i.size<s)e.end(zm.readFileSync(n));else{let a=0,c=Buffer.allocUnsafe(s);for(o=zm.openSync(n,"r");a<i.size;){let l=zm.readSync(o,c,0,s,a);a+=l,e.write(c.slice(0,l))}e.end()}r=!1}finally{if(r&&o)try{zm.closeSync(o)}catch{}}},uZ=(t,e)=>{let n=new UM(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("end",s),zm.stat(o,(c,l)=>{if(c)a(c);else{let u=new sZ.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},MM=t=>new UM(t)});var YM=M((Pye,VM)=>{"use strict";var fZ=Tm(),XE=TE(),HM=Gm(),BM=KE(),WM=require("path");VM.exports=(t,e,n)=>{if(typeof e=="function"&&(n=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let r=fZ(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return r.file&&r.sync?dZ(r,e):r.file?mZ(r,e,n):r.sync?pZ(r,e):hZ(r,e)};var dZ=(t,e)=>{let n=new XE.Sync(t),r=new HM.WriteStreamSync(t.file,{mode:t.mode||438});n.pipe(r),jM(n,e)},mZ=(t,e,n)=>{let r=new XE(t),o=new HM.WriteStream(t.file,{mode:t.mode||438});r.pipe(o);let i=new Promise((s,a)=>{o.on("error",a),o.on("close",s),r.on("error",a)});return oT(r,e),n?i.then(n,n):i},jM=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?BM({file:WM.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},oT=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return BM({file:WM.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>oT(t,e));t.add(n)}t.end()},pZ=(t,e)=>{let n=new XE.Sync(t);return jM(n,e),n},hZ=(t,e)=>{let n=new XE(t);return oT(n,e),n}});var iT=M((bye,ZM)=>{"use strict";var gZ=Tm(),qM=TE(),ni=require("fs"),GM=Gm(),zM=KE(),KM=require("path"),XM=Om();ZM.exports=(t,e,n)=>{let r=gZ(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),r.sync?vZ(r,e):yZ(r,e,n)};var vZ=(t,e)=>{let n=new qM.Sync(t),r=!0,o,i;try{try{o=ni.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")o=ni.openSync(t.file,"w+");else throw c}let s=ni.fstatSync(o),a=Buffer.alloc(512);e:for(i=0;i<s.size;i+=512){for(let u=0,f=0;u<512;u+=f){if(f=ni.readSync(o,a,u,a.length-u,i+u),i===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new XM(a);if(!c.cksumValid)break;let l=512*Math.ceil(c.size/512);if(i+l+512>s.size)break;i+=l,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}r=!1,wZ(t,n,i,o,e)}finally{if(r)try{ni.closeSync(o)}catch{}}},wZ=(t,e,n,r,o)=>{let i=new GM.WriteStreamSync(t.file,{fd:r,start:n});e.pipe(i),CZ(e,o)},yZ=(t,e,n)=>{e=Array.from(e);let r=new qM(t),o=(s,a,c)=>{let l=(p,h)=>{p?ni.close(s,g=>c(p)):c(null,h)},u=0;if(a===0)return l(null,0);let f=0,m=Buffer.alloc(512),d=(p,h)=>{if(p)return l(p);if(f+=h,f<512&&h)return ni.read(s,m,f,m.length-f,u+f,d);if(u===0&&m[0]===31&&m[1]===139)return l(new Error("cannot append to compressed archives"));if(f<512)return l(null,u);let g=new XM(m);if(!g.cksumValid)return l(null,u);let v=512*Math.ceil(g.size/512);if(u+v+512>a||(u+=v+512,u>=a))return l(null,u);t.mtimeCache&&t.mtimeCache.set(g.path,g.mtime),f=0,ni.read(s,m,0,512,u,d)};ni.read(s,m,0,512,u,d)},i=new Promise((s,a)=>{r.on("error",a);let c="r+",l=(u,f)=>{if(u&&u.code==="ENOENT"&&c==="r+")return c="w+",ni.open(t.file,c,l);if(u)return a(u);ni.fstat(f,(m,d)=>{if(m)return ni.close(f,()=>a(m));o(f,d.size,(p,h)=>{if(p)return a(p);let g=new GM.WriteStream(t.file,{fd:f,start:h});r.pipe(g),g.on("error",a),g.on("close",s),JM(r,e)})})};ni.open(t.file,c,l)});return n?i.then(n,n):i},CZ=(t,e)=>{e.forEach(n=>{n.charAt(0)==="@"?zM({file:KM.resolve(t.cwd,n.slice(1)),sync:!0,noResume:!0,onentry:r=>t.add(r)}):t.add(n)}),t.end()},JM=(t,e)=>{for(;e.length;){let n=e.shift();if(n.charAt(0)==="@")return zM({file:KM.resolve(t.cwd,n.slice(1)),noResume:!0,onentry:r=>t.add(r)}).then(r=>JM(t,e));t.add(n)}t.end()}});var e$=M((Tye,QM)=>{"use strict";var EZ=Tm(),SZ=iT();QM.exports=(t,e,n)=>{let r=EZ(t);if(!r.file)throw new TypeError("file is required");if(r.gzip||r.brotli||r.file.endsWith(".br")||r.file.endsWith(".tbr"))throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),_Z(r),SZ(r,e,n)};var _Z=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(n,r)=>e(n,r)&&!(t.mtimeCache.get(n)>r.mtime):(n,r)=>!(t.mtimeCache.get(n)>r.mtime)}});var r$=M((Rye,n$)=>{var{promisify:t$}=require("util"),El=require("fs"),xZ=t=>{if(!t)t={mode:511,fs:El};else if(typeof t=="object")t={mode:511,fs:El,...t};else if(typeof t=="number")t={mode:t,fs:El};else if(typeof t=="string")t={mode:parseInt(t,8),fs:El};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||El.mkdir,t.mkdirAsync=t$(t.mkdir),t.stat=t.stat||t.fs.stat||El.stat,t.statAsync=t$(t.stat),t.statSync=t.statSync||t.fs.statSync||El.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||El.mkdirSync,t};n$.exports=xZ});var i$=M((Nye,o$)=>{var DZ=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:IZ,parse:PZ}=require("path"),bZ=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=IZ(t),DZ==="win32"){let e=/[*|"<>?:]/,{root:n}=PZ(t);if(e.test(t.substr(n.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};o$.exports=bZ});var u$=M((kye,l$)=>{var{dirname:s$}=require("path"),a$=(t,e,n=void 0)=>n===e?Promise.resolve():t.statAsync(e).then(r=>r.isDirectory()?n:void 0,r=>r.code==="ENOENT"?a$(t,s$(e),e):void 0),c$=(t,e,n=void 0)=>{if(n!==e)try{return t.statSync(e).isDirectory()?n:void 0}catch(r){return r.code==="ENOENT"?c$(t,s$(e),e):void 0}};l$.exports={findMade:a$,findMadeSync:c$}});var cT=M((Lye,d$)=>{var{dirname:f$}=require("path"),sT=(t,e,n)=>{e.recursive=!1;let r=f$(t);return r===t?e.mkdirAsync(t,e).catch(o=>{if(o.code!=="EISDIR")throw o}):e.mkdirAsync(t,e).then(()=>n||t,o=>{if(o.code==="ENOENT")return sT(r,e).then(i=>sT(t,e,i));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;return e.statAsync(t).then(i=>{if(i.isDirectory())return n;throw o},()=>{throw o})})},aT=(t,e,n)=>{let r=f$(t);if(e.recursive=!1,r===t)try{return e.mkdirSync(t,e)}catch(o){if(o.code!=="EISDIR")throw o;return}try{return e.mkdirSync(t,e),n||t}catch(o){if(o.code==="ENOENT")return aT(t,e,aT(r,e,n));if(o.code!=="EEXIST"&&o.code!=="EROFS")throw o;try{if(!e.statSync(t).isDirectory())throw o}catch{throw o}}};d$.exports={mkdirpManual:sT,mkdirpManualSync:aT}});var h$=M((Aye,p$)=>{var{dirname:m$}=require("path"),{findMade:TZ,findMadeSync:RZ}=u$(),{mkdirpManual:NZ,mkdirpManualSync:kZ}=cT(),LZ=(t,e)=>(e.recursive=!0,m$(t)===t?e.mkdirAsync(t,e):TZ(e,t).then(r=>e.mkdirAsync(t,e).then(()=>r).catch(o=>{if(o.code==="ENOENT")return NZ(t,e);throw o}))),AZ=(t,e)=>{if(e.recursive=!0,m$(t)===t)return e.mkdirSync(t,e);let r=RZ(e,t);try{return e.mkdirSync(t,e),r}catch(o){if(o.code==="ENOENT")return kZ(t,e);throw o}};p$.exports={mkdirpNative:LZ,mkdirpNativeSync:AZ}});var y$=M((Fye,w$)=>{var g$=require("fs"),FZ=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,lT=FZ.replace(/^v/,"").split("."),v$=+lT[0]>10||+lT[0]==10&&+lT[1]>=12,OZ=v$?t=>t.mkdir===g$.mkdir:()=>!1,UZ=v$?t=>t.mkdirSync===g$.mkdirSync:()=>!1;w$.exports={useNative:OZ,useNativeSync:UZ}});var D$=M((Oye,x$)=>{var Km=r$(),Xm=i$(),{mkdirpNative:C$,mkdirpNativeSync:E$}=h$(),{mkdirpManual:S$,mkdirpManualSync:_$}=cT(),{useNative:MZ,useNativeSync:$Z}=y$(),Jm=(t,e)=>(t=Xm(t),e=Km(e),MZ(e)?C$(t,e):S$(t,e)),HZ=(t,e)=>(t=Xm(t),e=Km(e),$Z(e)?E$(t,e):_$(t,e));Jm.sync=HZ;Jm.native=(t,e)=>C$(Xm(t),Km(e));Jm.manual=(t,e)=>S$(Xm(t),Km(e));Jm.nativeSync=(t,e)=>E$(Xm(t),Km(e));Jm.manualSync=(t,e)=>_$(Xm(t),Km(e));x$.exports=Jm});var k$=M((Uye,N$)=>{"use strict";var Ti=require("fs"),Nf=require("path"),BZ=Ti.lchown?"lchown":"chown",WZ=Ti.lchownSync?"lchownSync":"chownSync",P$=Ti.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),I$=(t,e,n)=>{try{return Ti[WZ](t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},jZ=(t,e,n)=>{try{return Ti.chownSync(t,e,n)}catch(r){if(r.code!=="ENOENT")throw r}},VZ=P$?(t,e,n,r)=>o=>{!o||o.code!=="EISDIR"?r(o):Ti.chown(t,e,n,r)}:(t,e,n,r)=>r,uT=P$?(t,e,n)=>{try{return I$(t,e,n)}catch(r){if(r.code!=="EISDIR")throw r;jZ(t,e,n)}}:(t,e,n)=>I$(t,e,n),YZ=process.version,b$=(t,e,n)=>Ti.readdir(t,e,n),qZ=(t,e)=>Ti.readdirSync(t,e);/^v4\./.test(YZ)&&(b$=(t,e,n)=>Ti.readdir(t,n));var JE=(t,e,n,r)=>{Ti[BZ](t,e,n,VZ(t,e,n,o=>{r(o&&o.code!=="ENOENT"?o:null)}))},T$=(t,e,n,r,o)=>{if(typeof e=="string")return Ti.lstat(Nf.resolve(t,e),(i,s)=>{if(i)return o(i.code!=="ENOENT"?i:null);s.name=e,T$(t,s,n,r,o)});if(e.isDirectory())fT(Nf.resolve(t,e.name),n,r,i=>{if(i)return o(i);let s=Nf.resolve(t,e.name);JE(s,n,r,o)});else{let i=Nf.resolve(t,e.name);JE(i,n,r,o)}},fT=(t,e,n,r)=>{b$(t,{withFileTypes:!0},(o,i)=>{if(o){if(o.code==="ENOENT")return r();if(o.code!=="ENOTDIR"&&o.code!=="ENOTSUP")return r(o)}if(o||!i.length)return JE(t,e,n,r);let s=i.length,a=null,c=l=>{if(!a){if(l)return r(a=l);if(--s===0)return JE(t,e,n,r)}};i.forEach(l=>T$(t,l,e,n,c))})},GZ=(t,e,n,r)=>{if(typeof e=="string")try{let o=Ti.lstatSync(Nf.resolve(t,e));o.name=e,e=o}catch(o){if(o.code==="ENOENT")return;throw o}e.isDirectory()&&R$(Nf.resolve(t,e.name),n,r),uT(Nf.resolve(t,e.name),n,r)},R$=(t,e,n)=>{let r;try{r=qZ(t,{withFileTypes:!0})}catch(o){if(o.code==="ENOENT")return;if(o.code==="ENOTDIR"||o.code==="ENOTSUP")return uT(t,e,n);throw o}return r&&r.length&&r.forEach(o=>GZ(t,o,e,n)),uT(t,e,n)};N$.exports=fT;fT.sync=R$});var O$=M((Mye,dT)=>{"use strict";var L$=D$(),Ri=require("fs"),ZE=require("path"),A$=k$(),is=Am(),QE=class extends Error{constructor(e,n){super("Cannot extract through symbolic link"),this.path=n,this.symlink=e}get name(){return"SylinkError"}},eS=class extends Error{constructor(e,n){super(n+": Cannot cd into '"+e+"'"),this.path=e,this.code=n}get name(){return"CwdError"}},tS=(t,e)=>t.get(is(e)),mv=(t,e,n)=>t.set(is(e),n),zZ=(t,e)=>{Ri.stat(t,(n,r)=>{(n||!r.isDirectory())&&(n=new eS(t,n&&n.code||"ENOTDIR")),e(n)})};dT.exports=(t,e,n)=>{t=is(t);let r=e.umask,o=e.mode|448,i=(o&r)!==0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),l=e.preserve,u=e.unlink,f=e.cache,m=is(e.cwd),d=(g,v)=>{g?n(g):(mv(f,t,!0),v&&c?A$(v,s,a,C=>d(C)):i?Ri.chmod(t,o,n):n())};if(f&&tS(f,t)===!0)return d();if(t===m)return zZ(t,d);if(l)return L$(t,{mode:o}).then(g=>d(null,g),d);let h=is(ZE.relative(m,t)).split("/");nS(m,h,o,f,u,m,null,d)};var nS=(t,e,n,r,o,i,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),l=is(ZE.resolve(t+"/"+c));if(tS(r,l))return nS(l,e,n,r,o,i,s,a);Ri.mkdir(l,n,F$(l,e,n,r,o,i,s,a))},F$=(t,e,n,r,o,i,s,a)=>c=>{c?Ri.lstat(t,(l,u)=>{if(l)l.path=l.path&&is(l.path),a(l);else if(u.isDirectory())nS(t,e,n,r,o,i,s,a);else if(o)Ri.unlink(t,f=>{if(f)return a(f);Ri.mkdir(t,n,F$(t,e,n,r,o,i,s,a))});else{if(u.isSymbolicLink())return a(new QE(t,t+"/"+e.join("/")));a(c)}}):(s=s||t,nS(t,e,n,r,o,i,s,a))},KZ=t=>{let e=!1,n="ENOTDIR";try{e=Ri.statSync(t).isDirectory()}catch(r){n=r.code}finally{if(!e)throw new eS(t,n)}};dT.exports.sync=(t,e)=>{t=is(t);let n=e.umask,r=e.mode|448,o=(r&n)!==0,i=e.uid,s=e.gid,a=typeof i=="number"&&typeof s=="number"&&(i!==e.processUid||s!==e.processGid),c=e.preserve,l=e.unlink,u=e.cache,f=is(e.cwd),m=g=>{mv(u,t,!0),g&&a&&A$.sync(g,i,s),o&&Ri.chmodSync(t,r)};if(u&&tS(u,t)===!0)return m();if(t===f)return KZ(f),m();if(c)return m(L$.sync(t,r));let p=is(ZE.relative(f,t)).split("/"),h=null;for(let g=p.shift(),v=f;g&&(v+="/"+g);g=p.shift())if(v=is(ZE.resolve(v)),!tS(u,v))try{Ri.mkdirSync(v,r),h=h||v,mv(u,v,!0)}catch{let w=Ri.lstatSync(v);if(w.isDirectory()){mv(u,v,!0);continue}else if(l){Ri.unlinkSync(v),Ri.mkdirSync(v,r),h=h||v,mv(u,v,!0);continue}else if(w.isSymbolicLink())return new QE(v,v+"/"+p.join("/"))}return m(h)}});var pT=M(($ye,U$)=>{var mT=Object.create(null),{hasOwnProperty:XZ}=Object.prototype;U$.exports=t=>(XZ.call(mT,t)||(mT[t]=t.normalize("NFD")),mT[t])});var B$=M((Hye,H$)=>{var M$=require("assert"),JZ=pT(),ZZ=Um(),{join:$$}=require("path"),QZ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,eQ=QZ==="win32";H$.exports=()=>{let t=new Map,e=new Map,n=l=>l.split("/").slice(0,-1).reduce((f,m)=>(f.length&&(m=$$(f[f.length-1],m)),f.push(m||"/"),f),[]),r=new Set,o=l=>{let u=e.get(l);if(!u)throw new Error("function does not have any path reservations");return{paths:u.paths.map(f=>t.get(f)),dirs:[...u.dirs].map(f=>t.get(f))}},i=l=>{let{paths:u,dirs:f}=o(l);return u.every(m=>m[0]===l)&&f.every(m=>m[0]instanceof Set&&m[0].has(l))},s=l=>r.has(l)||!i(l)?!1:(r.add(l),l(()=>a(l)),!0),a=l=>{if(!r.has(l))return!1;let{paths:u,dirs:f}=e.get(l),m=new Set;return u.forEach(d=>{let p=t.get(d);M$.equal(p[0],l),p.length===1?t.delete(d):(p.shift(),typeof p[0]=="function"?m.add(p[0]):p[0].forEach(h=>m.add(h)))}),f.forEach(d=>{let p=t.get(d);M$(p[0]instanceof Set),p[0].size===1&&p.length===1?t.delete(d):p[0].size===1?(p.shift(),m.add(p[0])):p[0].delete(l)}),r.delete(l),m.forEach(d=>s(d)),!0};return{check:i,reserve:(l,u)=>{l=eQ?["win32 parallelization disabled"]:l.map(m=>ZZ($$(JZ(m))).toLowerCase());let f=new Set(l.map(m=>n(m)).reduce((m,d)=>m.concat(d)));return e.set(u,{dirs:f,paths:l}),l.forEach(m=>{let d=t.get(m);d?d.push(u):t.set(m,[u])}),f.forEach(m=>{let d=t.get(m);d?d[d.length-1]instanceof Set?d[d.length-1].add(u):d.push(new Set([u])):t.set(m,[new Set([u])])}),s(u)}}}});var V$=M((Bye,j$)=>{var tQ=process.env.__FAKE_PLATFORM__||process.platform,nQ=tQ==="win32",rQ=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:oQ,O_TRUNC:iQ,O_WRONLY:sQ,UV_FS_O_FILEMAP:W$=0}=rQ.constants,aQ=nQ&&!!W$,cQ=512*1024,lQ=W$|iQ|oQ|sQ;j$.exports=aQ?t=>t<cQ?lQ:"w":()=>"w"});var _T=M((Wye,oH)=>{"use strict";var uQ=require("assert"),fQ=zE(),mt=require("fs"),dQ=Gm(),uc=require("path"),tH=O$(),Y$=vb(),mQ=B$(),pQ=wb(),Ni=Am(),hQ=Um(),gQ=pT(),q$=Symbol("onEntry"),vT=Symbol("checkFs"),G$=Symbol("checkFs2"),iS=Symbol("pruneCache"),wT=Symbol("isReusable"),ki=Symbol("makeFs"),yT=Symbol("file"),CT=Symbol("directory"),sS=Symbol("link"),z$=Symbol("symlink"),K$=Symbol("hardlink"),X$=Symbol("unsupported"),J$=Symbol("checkPath"),Sl=Symbol("mkdir"),Yr=Symbol("onError"),rS=Symbol("pending"),Z$=Symbol("pend"),Zm=Symbol("unpend"),hT=Symbol("ended"),gT=Symbol("maybeClose"),ET=Symbol("skip"),pv=Symbol("doChown"),hv=Symbol("uid"),gv=Symbol("gid"),vv=Symbol("checkedCwd"),nH=require("crypto"),rH=V$(),vQ=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,wv=vQ==="win32",wQ=1024,yQ=(t,e)=>{if(!wv)return mt.unlink(t,e);let n=t+".DELETE."+nH.randomBytes(16).toString("hex");mt.rename(t,n,r=>{if(r)return e(r);mt.unlink(n,e)})},CQ=t=>{if(!wv)return mt.unlinkSync(t);let e=t+".DELETE."+nH.randomBytes(16).toString("hex");mt.renameSync(t,e),mt.unlinkSync(e)},Q$=(t,e,n)=>t===t>>>0?t:e===e>>>0?e:n,eH=t=>hQ(Ni(gQ(t))).toLowerCase(),EQ=(t,e)=>{e=eH(e);for(let n of t.keys()){let r=eH(n);(r===e||r.indexOf(e+"/")===0)&&t.delete(n)}},SQ=t=>{for(let e of t.keys())t.delete(e)},yv=class extends fQ{constructor(e){if(e||(e={}),e.ondone=n=>{this[hT]=!0,this[gT]()},super(e),this[vv]=!1,this.reservations=mQ(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[rS]=0,this[hT]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.maxDepth=typeof e.maxDepth=="number"?e.maxDepth:wQ,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||wv,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=Ni(uc.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",n=>this[q$](n))}warn(e,n,r={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(r.recoverable=!1),super.warn(e,n,r)}[gT](){this[hT]&&this[rS]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"))}[J$](e){let n=Ni(e.path),r=n.split("/");if(this.strip){if(r.length<this.strip)return!1;if(e.type==="Link"){let o=Ni(e.linkpath).split("/");if(o.length>=this.strip)e.linkpath=o.slice(this.strip).join("/");else return!1}r.splice(0,this.strip),e.path=r.join("/")}if(isFinite(this.maxDepth)&&r.length>this.maxDepth)return this.warn("TAR_ENTRY_ERROR","path excessively deep",{entry:e,path:n,depth:r.length,maxDepth:this.maxDepth}),!1;if(!this.preservePaths){if(r.includes("..")||wv&&/^[a-z]:\.\.$/i.test(r[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:n}),!1;let[o,i]=pQ(n);o&&(e.path=i,this.warn("TAR_ENTRY_INFO",`stripping ${o} from absolute path`,{entry:e,path:n}))}if(uc.isAbsolute(e.path)?e.absolute=Ni(uc.resolve(e.path)):e.absolute=Ni(uc.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:Ni(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:o}=uc.win32.parse(e.absolute);e.absolute=o+Y$.encode(e.absolute.slice(o.length));let{root:i}=uc.win32.parse(e.path);e.path=i+Y$.encode(e.path.slice(i.length))}return!0}[q$](e){if(!this[J$](e))return e.resume();switch(uQ.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[vT](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[X$](e)}}[Yr](e,n){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:n}),this[Zm](),n.resume())}[Sl](e,n,r){tH(Ni(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n,noChmod:this.noChmod},r)}[pv](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[hv](e){return Q$(this.uid,e.uid,this.processUid)}[gv](e){return Q$(this.gid,e.gid,this.processGid)}[yT](e,n){let r=e.mode&4095||this.fmode,o=new dQ.WriteStream(e.absolute,{flags:rH(e.size),mode:r,autoClose:!1});o.on("error",c=>{o.fd&&mt.close(o.fd,()=>{}),o.write=()=>!0,this[Yr](c,e),n()});let i=1,s=c=>{if(c){o.fd&&mt.close(o.fd,()=>{}),this[Yr](c,e),n();return}--i===0&&mt.close(o.fd,l=>{l?this[Yr](l,e):this[Zm](),n()})};o.on("finish",c=>{let l=e.absolute,u=o.fd;if(e.mtime&&!this.noMtime){i++;let f=e.atime||new Date,m=e.mtime;mt.futimes(u,f,m,d=>d?mt.utimes(l,f,m,p=>s(p&&d)):s())}if(this[pv](e)){i++;let f=this[hv](e),m=this[gv](e);mt.fchown(u,f,m,d=>d?mt.chown(l,f,m,p=>s(p&&d)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[Yr](c,e),n()}),e.pipe(a)),a.pipe(o)}[CT](e,n){let r=e.mode&4095||this.dmode;this[Sl](e.absolute,r,o=>{if(o){this[Yr](o,e),n();return}let i=1,s=a=>{--i===0&&(n(),this[Zm](),e.resume())};e.mtime&&!this.noMtime&&(i++,mt.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[pv](e)&&(i++,mt.chown(e.absolute,this[hv](e),this[gv](e),s)),s()})}[X$](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[z$](e,n){this[sS](e,e.linkpath,"symlink",n)}[K$](e,n){let r=Ni(uc.resolve(this.cwd,e.linkpath));this[sS](e,r,"link",n)}[Z$](){this[rS]++}[Zm](){this[rS]--,this[gT]()}[ET](e){this[Zm](),e.resume()}[wT](e,n){return e.type==="File"&&!this.unlink&&n.isFile()&&n.nlink<=1&&!wv}[vT](e){this[Z$]();let n=[e.path];e.linkpath&&n.push(e.linkpath),this.reservations.reserve(n,r=>this[G$](e,r))}[iS](e){e.type==="SymbolicLink"?SQ(this.dirCache):e.type!=="Directory"&&EQ(this.dirCache,e.absolute)}[G$](e,n){this[iS](e);let r=a=>{this[iS](e),n(a)},o=()=>{this[Sl](this.cwd,this.dmode,a=>{if(a){this[Yr](a,e),r();return}this[vv]=!0,i()})},i=()=>{if(e.absolute!==this.cwd){let a=Ni(uc.dirname(e.absolute));if(a!==this.cwd)return this[Sl](a,this.dmode,c=>{if(c){this[Yr](c,e),r();return}s()})}s()},s=()=>{mt.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[ET](e),r();return}if(a||this[wT](e,c))return this[ki](null,e,r);if(c.isDirectory()){if(e.type==="Directory"){let l=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,u=f=>this[ki](f,e,r);return l?mt.chmod(e.absolute,e.mode,u):u()}if(e.absolute!==this.cwd)return mt.rmdir(e.absolute,l=>this[ki](l,e,r))}if(e.absolute===this.cwd)return this[ki](null,e,r);yQ(e.absolute,l=>this[ki](l,e,r))})};this[vv]?i():o()}[ki](e,n,r){if(e){this[Yr](e,n),r();return}switch(n.type){case"File":case"OldFile":case"ContiguousFile":return this[yT](n,r);case"Link":return this[K$](n,r);case"SymbolicLink":return this[z$](n,r);case"Directory":case"GNUDumpDir":return this[CT](n,r)}}[sS](e,n,r,o){mt[r](n,e.absolute,i=>{i?this[Yr](i,e):(this[Zm](),e.resume()),o()})}},oS=t=>{try{return[null,t()]}catch(e){return[e,null]}},ST=class extends yv{[ki](e,n){return super[ki](e,n,()=>{})}[vT](e){if(this[iS](e),!this[vv]){let i=this[Sl](this.cwd,this.dmode);if(i)return this[Yr](i,e);this[vv]=!0}if(e.absolute!==this.cwd){let i=Ni(uc.dirname(e.absolute));if(i!==this.cwd){let s=this[Sl](i,this.dmode);if(s)return this[Yr](s,e)}}let[n,r]=oS(()=>mt.lstatSync(e.absolute));if(r&&(this.keep||this.newer&&r.mtime>e.mtime))return this[ET](e);if(n||this[wT](e,r))return this[ki](null,e);if(r.isDirectory()){if(e.type==="Directory"){let s=!this.noChmod&&e.mode&&(r.mode&4095)!==e.mode,[a]=s?oS(()=>{mt.chmodSync(e.absolute,e.mode)}):[];return this[ki](a,e)}let[i]=oS(()=>mt.rmdirSync(e.absolute));this[ki](i,e)}let[o]=e.absolute===this.cwd?[]:oS(()=>CQ(e.absolute));this[ki](o,e)}[yT](e,n){let r=e.mode&4095||this.fmode,o=a=>{let c;try{mt.closeSync(i)}catch(l){c=l}(a||c)&&this[Yr](a||c,e),n()},i;try{i=mt.openSync(e.absolute,rH(e.size),r)}catch(a){return o(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[Yr](a,e)),e.pipe(s)),s.on("data",a=>{try{mt.writeSync(i,a,0,a.length)}catch(c){o(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let l=e.atime||new Date,u=e.mtime;try{mt.futimesSync(i,l,u)}catch(f){try{mt.utimesSync(e.absolute,l,u)}catch{c=f}}}if(this[pv](e)){let l=this[hv](e),u=this[gv](e);try{mt.fchownSync(i,l,u)}catch(f){try{mt.chownSync(e.absolute,l,u)}catch{c=c||f}}}o(c)})}[CT](e,n){let r=e.mode&4095||this.dmode,o=this[Sl](e.absolute,r);if(o){this[Yr](o,e),n();return}if(e.mtime&&!this.noMtime)try{mt.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[pv](e))try{mt.chownSync(e.absolute,this[hv](e),this[gv](e))}catch{}n(),e.resume()}[Sl](e,n){try{return tH.sync(Ni(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:n})}catch(r){return r}}[sS](e,n,r,o){try{mt[r+"Sync"](n,e.absolute),o(),e.resume()}catch(i){return this[Yr](i,e)}}};yv.Sync=ST;oH.exports=yv});var lH=M((jye,cH)=>{"use strict";var _Q=Tm(),aS=_T(),sH=require("fs"),aH=Gm(),iH=require("path"),xT=Um();cH.exports=(t,e,n)=>{typeof t=="function"?(n=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(n=e,e=null),e?e=Array.from(e):e=[];let r=_Q(t);if(r.sync&&typeof n=="function")throw new TypeError("callback not supported for sync tar functions");if(!r.file&&typeof n=="function")throw new TypeError("callback only supported with file option");return e.length&&xQ(r,e),r.file&&r.sync?DQ(r):r.file?IQ(r,n):r.sync?PQ(r):bQ(r)};var xQ=(t,e)=>{let n=new Map(e.map(i=>[xT(i),!0])),r=t.filter,o=(i,s)=>{let a=s||iH.parse(i).root||".",c=i===a?!1:n.has(i)?n.get(i):o(iH.dirname(i),a);return n.set(i,c),c};t.filter=r?(i,s)=>r(i,s)&&o(xT(i)):i=>o(xT(i))},DQ=t=>{let e=new aS.Sync(t),n=t.file,r=sH.statSync(n),o=t.maxReadSize||16*1024*1024;new aH.ReadStreamSync(n,{readSize:o,size:r.size}).pipe(e)},IQ=(t,e)=>{let n=new aS(t),r=t.maxReadSize||16*1024*1024,o=t.file,i=new Promise((s,a)=>{n.on("error",a),n.on("close",s),sH.stat(o,(c,l)=>{if(c)a(c);else{let u=new aH.ReadStream(o,{readSize:r,size:l.size});u.on("error",a),u.pipe(n)}})});return e?i.then(e,e):i},PQ=t=>new aS.Sync(t),bQ=t=>new aS(t)});var cS=M(jn=>{"use strict";jn.c=jn.create=YM();jn.r=jn.replace=iT();jn.t=jn.list=KE();jn.u=jn.update=e$();jn.x=jn.extract=lH();jn.Pack=TE();jn.Unpack=_T();jn.Parse=zE();jn.ReadEntry=dE();jn.WriteEntry=bb();jn.Header=Om();jn.Pax=pE();jn.types=ub()});var Cv=M((Yye,uH)=>{var TQ="2.0.0",RQ=Number.MAX_SAFE_INTEGER||9007199254740991,NQ=16,kQ=250,LQ=["major","premajor","minor","preminor","patch","prepatch","prerelease"];uH.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:NQ,MAX_SAFE_BUILD_LENGTH:kQ,MAX_SAFE_INTEGER:RQ,RELEASE_TYPES:LQ,SEMVER_SPEC_VERSION:TQ,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ev=M((qye,fH)=>{var AQ=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};fH.exports=AQ});var Qm=M((Ys,dH)=>{var{MAX_SAFE_COMPONENT_LENGTH:DT,MAX_SAFE_BUILD_LENGTH:FQ,MAX_LENGTH:OQ}=Cv(),UQ=Ev();Ys=dH.exports={};var MQ=Ys.re=[],$Q=Ys.safeRe=[],he=Ys.src=[],HQ=Ys.safeSrc=[],ge=Ys.t={},BQ=0,IT="[a-zA-Z0-9-]",WQ=[["\\s",1],["\\d",OQ],[IT,FQ]],jQ=t=>{for(let[e,n]of WQ)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},je=(t,e,n)=>{let r=jQ(e),o=BQ++;UQ(t,o,e),ge[t]=o,he[o]=e,HQ[o]=r,MQ[o]=new RegExp(e,n?"g":void 0),$Q[o]=new RegExp(r,n?"g":void 0)};je("NUMERICIDENTIFIER","0|[1-9]\\d*");je("NUMERICIDENTIFIERLOOSE","\\d+");je("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${IT}*`);je("MAINVERSION",`(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})\\.(${he[ge.NUMERICIDENTIFIER]})`);je("MAINVERSIONLOOSE",`(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})\\.(${he[ge.NUMERICIDENTIFIERLOOSE]})`);je("PRERELEASEIDENTIFIER",`(?:${he[ge.NUMERICIDENTIFIER]}|${he[ge.NONNUMERICIDENTIFIER]})`);je("PRERELEASEIDENTIFIERLOOSE",`(?:${he[ge.NUMERICIDENTIFIERLOOSE]}|${he[ge.NONNUMERICIDENTIFIER]})`);je("PRERELEASE",`(?:-(${he[ge.PRERELEASEIDENTIFIER]}(?:\\.${he[ge.PRERELEASEIDENTIFIER]})*))`);je("PRERELEASELOOSE",`(?:-?(${he[ge.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${he[ge.PRERELEASEIDENTIFIERLOOSE]})*))`);je("BUILDIDENTIFIER",`${IT}+`);je("BUILD",`(?:\\+(${he[ge.BUILDIDENTIFIER]}(?:\\.${he[ge.BUILDIDENTIFIER]})*))`);je("FULLPLAIN",`v?${he[ge.MAINVERSION]}${he[ge.PRERELEASE]}?${he[ge.BUILD]}?`);je("FULL",`^${he[ge.FULLPLAIN]}$`);je("LOOSEPLAIN",`[v=\\s]*${he[ge.MAINVERSIONLOOSE]}${he[ge.PRERELEASELOOSE]}?${he[ge.BUILD]}?`);je("LOOSE",`^${he[ge.LOOSEPLAIN]}$`);je("GTLT","((?:<|>)?=?)");je("XRANGEIDENTIFIERLOOSE",`${he[ge.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);je("XRANGEIDENTIFIER",`${he[ge.NUMERICIDENTIFIER]}|x|X|\\*`);je("XRANGEPLAIN",`[v=\\s]*(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:\\.(${he[ge.XRANGEIDENTIFIER]})(?:${he[ge.PRERELEASE]})?${he[ge.BUILD]}?)?)?`);je("XRANGEPLAINLOOSE",`[v=\\s]*(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:\\.(${he[ge.XRANGEIDENTIFIERLOOSE]})(?:${he[ge.PRERELEASELOOSE]})?${he[ge.BUILD]}?)?)?`);je("XRANGE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAIN]}$`);je("XRANGELOOSE",`^${he[ge.GTLT]}\\s*${he[ge.XRANGEPLAINLOOSE]}$`);je("COERCEPLAIN",`(^|[^\\d])(\\d{1,${DT}})(?:\\.(\\d{1,${DT}}))?(?:\\.(\\d{1,${DT}}))?`);je("COERCE",`${he[ge.COERCEPLAIN]}(?:$|[^\\d])`);je("COERCEFULL",he[ge.COERCEPLAIN]+`(?:${he[ge.PRERELEASE]})?(?:${he[ge.BUILD]})?(?:$|[^\\d])`);je("COERCERTL",he[ge.COERCE],!0);je("COERCERTLFULL",he[ge.COERCEFULL],!0);je("LONETILDE","(?:~>?)");je("TILDETRIM",`(\\s*)${he[ge.LONETILDE]}\\s+`,!0);Ys.tildeTrimReplace="$1~";je("TILDE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAIN]}$`);je("TILDELOOSE",`^${he[ge.LONETILDE]}${he[ge.XRANGEPLAINLOOSE]}$`);je("LONECARET","(?:\\^)");je("CARETTRIM",`(\\s*)${he[ge.LONECARET]}\\s+`,!0);Ys.caretTrimReplace="$1^";je("CARET",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAIN]}$`);je("CARETLOOSE",`^${he[ge.LONECARET]}${he[ge.XRANGEPLAINLOOSE]}$`);je("COMPARATORLOOSE",`^${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]})$|^$`);je("COMPARATOR",`^${he[ge.GTLT]}\\s*(${he[ge.FULLPLAIN]})$|^$`);je("COMPARATORTRIM",`(\\s*)${he[ge.GTLT]}\\s*(${he[ge.LOOSEPLAIN]}|${he[ge.XRANGEPLAIN]})`,!0);Ys.comparatorTrimReplace="$1$2$3";je("HYPHENRANGE",`^\\s*(${he[ge.XRANGEPLAIN]})\\s+-\\s+(${he[ge.XRANGEPLAIN]})\\s*$`);je("HYPHENRANGELOOSE",`^\\s*(${he[ge.XRANGEPLAINLOOSE]})\\s+-\\s+(${he[ge.XRANGEPLAINLOOSE]})\\s*$`);je("STAR","(<|>)?=?\\s*\\*");je("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");je("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var lS=M((Gye,mH)=>{var VQ=Object.freeze({loose:!0}),YQ=Object.freeze({}),qQ=t=>t?typeof t!="object"?VQ:t:YQ;mH.exports=qQ});var PT=M((zye,gH)=>{var pH=/^[0-9]+$/,hH=(t,e)=>{let n=pH.test(t),r=pH.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},GQ=(t,e)=>hH(e,t);gH.exports={compareIdentifiers:hH,rcompareIdentifiers:GQ}});var qr=M((Kye,CH)=>{var uS=Ev(),{MAX_LENGTH:vH,MAX_SAFE_INTEGER:fS}=Cv(),{safeRe:wH,safeSrc:yH,t:dS}=Qm(),zQ=lS(),{compareIdentifiers:ep}=PT(),bT=class t{constructor(e,n){if(n=zQ(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>vH)throw new TypeError(`version is longer than ${vH} characters`);uS("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?wH[dS.LOOSE]:wH[dS.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>fS||this.major<0)throw new TypeError("Invalid major version");if(this.minor>fS||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>fS||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){let i=+o;if(i>=0&&i<fS)return i}return o}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(uS("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),ep(this.major,e.major)||ep(this.minor,e.minor)||ep(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],o=e.prerelease[n];if(uS("prerelease compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return ep(r,o)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let r=this.build[n],o=e.build[n];if(uS("build compare",n,r,o),r===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(r===void 0)return-1;if(r===o)continue;return ep(r,o)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let o=new RegExp(`^${this.options.loose?yH[dS.PRERELEASELOOSE]:yH[dS.PRERELEASE]}$`),i=`-${n}`.match(o);if(!i||i[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let o=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(n){let i=[n,o];r===!1&&(i=[n]),ep(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};CH.exports=bT});var kf=M((Xye,SH)=>{var EH=qr(),KQ=(t,e,n=!1)=>{if(t instanceof EH)return t;try{return new EH(t,e)}catch(r){if(!n)return null;throw r}};SH.exports=KQ});var xH=M((Jye,_H)=>{var XQ=kf(),JQ=(t,e)=>{let n=XQ(t,e);return n?n.version:null};_H.exports=JQ});var IH=M((Zye,DH)=>{var ZQ=kf(),QQ=(t,e)=>{let n=ZQ(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null};DH.exports=QQ});var TH=M((Qye,bH)=>{var PH=qr(),eee=(t,e,n,r,o)=>{typeof n=="string"&&(o=r,r=n,n=void 0);try{return new PH(t instanceof PH?t.version:t,n).inc(e,r,o).version}catch{return null}};bH.exports=eee});var kH=M((eCe,NH)=>{var RH=kf(),tee=(t,e)=>{let n=RH(t,null,!0),r=RH(e,null,!0),o=n.compare(r);if(o===0)return null;let i=o>0,s=i?n:r,a=i?r:n,c=!!s.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(s)===0)return a.minor&&!a.patch?"minor":"patch"}let u=c?"pre":"";return n.major!==r.major?u+"major":n.minor!==r.minor?u+"minor":n.patch!==r.patch?u+"patch":"prerelease"};NH.exports=tee});var AH=M((tCe,LH)=>{var nee=qr(),ree=(t,e)=>new nee(t,e).major;LH.exports=ree});var OH=M((nCe,FH)=>{var oee=qr(),iee=(t,e)=>new oee(t,e).minor;FH.exports=iee});var MH=M((rCe,UH)=>{var see=qr(),aee=(t,e)=>new see(t,e).patch;UH.exports=aee});var HH=M((oCe,$H)=>{var cee=kf(),lee=(t,e)=>{let n=cee(t,e);return n&&n.prerelease.length?n.prerelease:null};$H.exports=lee});var Li=M((iCe,WH)=>{var BH=qr(),uee=(t,e,n)=>new BH(t,n).compare(new BH(e,n));WH.exports=uee});var VH=M((sCe,jH)=>{var fee=Li(),dee=(t,e,n)=>fee(e,t,n);jH.exports=dee});var qH=M((aCe,YH)=>{var mee=Li(),pee=(t,e)=>mee(t,e,!0);YH.exports=pee});var mS=M((cCe,zH)=>{var GH=qr(),hee=(t,e,n)=>{let r=new GH(t,n),o=new GH(e,n);return r.compare(o)||r.compareBuild(o)};zH.exports=hee});var XH=M((lCe,KH)=>{var gee=mS(),vee=(t,e)=>t.sort((n,r)=>gee(n,r,e));KH.exports=vee});var ZH=M((uCe,JH)=>{var wee=mS(),yee=(t,e)=>t.sort((n,r)=>wee(r,n,e));JH.exports=yee});var Sv=M((fCe,QH)=>{var Cee=Li(),Eee=(t,e,n)=>Cee(t,e,n)>0;QH.exports=Eee});var pS=M((dCe,e2)=>{var See=Li(),_ee=(t,e,n)=>See(t,e,n)<0;e2.exports=_ee});var TT=M((mCe,t2)=>{var xee=Li(),Dee=(t,e,n)=>xee(t,e,n)===0;t2.exports=Dee});var RT=M((pCe,n2)=>{var Iee=Li(),Pee=(t,e,n)=>Iee(t,e,n)!==0;n2.exports=Pee});var hS=M((hCe,r2)=>{var bee=Li(),Tee=(t,e,n)=>bee(t,e,n)>=0;r2.exports=Tee});var gS=M((gCe,o2)=>{var Ree=Li(),Nee=(t,e,n)=>Ree(t,e,n)<=0;o2.exports=Nee});var NT=M((vCe,i2)=>{var kee=TT(),Lee=RT(),Aee=Sv(),Fee=hS(),Oee=pS(),Uee=gS(),Mee=(t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return kee(t,n,r);case"!=":return Lee(t,n,r);case">":return Aee(t,n,r);case">=":return Fee(t,n,r);case"<":return Oee(t,n,r);case"<=":return Uee(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}};i2.exports=Mee});var a2=M((wCe,s2)=>{var $ee=qr(),Hee=kf(),{safeRe:vS,t:wS}=Qm(),Bee=(t,e)=>{if(t instanceof $ee)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?vS[wS.COERCEFULL]:vS[wS.COERCE]);else{let c=e.includePrerelease?vS[wS.COERCERTLFULL]:vS[wS.COERCERTL],l;for(;(l=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||l.index+l[0].length!==n.index+n[0].length)&&(n=l),c.lastIndex=l.index+l[1].length+l[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],o=n[3]||"0",i=n[4]||"0",s=e.includePrerelease&&n[5]?`-${n[5]}`:"",a=e.includePrerelease&&n[6]?`+${n[6]}`:"";return Hee(`${r}.${o}.${i}${s}${a}`,e)};s2.exports=Bee});var l2=M((yCe,c2)=>{var kT=class{constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let o=this.map.keys().next().value;this.delete(o)}this.map.set(e,n)}return this}};c2.exports=kT});var Ai=M((CCe,m2)=>{var Wee=/\s+/g,LT=class t{constructor(e,n){if(n=Vee(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof AT)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(Wee," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(o=>!f2(o[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let o of this.set)if(o.length===1&&Jee(o[0])){this.set=[o];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&Kee)|(this.options.loose&&Xee))+":"+e,o=u2.get(r);if(o)return o;let i=this.options.loose,s=i?No[oo.HYPHENRANGELOOSE]:No[oo.HYPHENRANGE];e=e.replace(s,ate(this.options.includePrerelease)),Ut("hyphen replace",e),e=e.replace(No[oo.COMPARATORTRIM],qee),Ut("comparator trim",e),e=e.replace(No[oo.TILDETRIM],Gee),Ut("tilde trim",e),e=e.replace(No[oo.CARETTRIM],zee),Ut("caret trim",e);let a=e.split(" ").map(f=>Zee(f,this.options)).join(" ").split(/\s+/).map(f=>ste(f,this.options));i&&(a=a.filter(f=>(Ut("loose invalid filter",f,this.options),!!f.match(No[oo.COMPARATORLOOSE])))),Ut("range list",a);let c=new Map,l=a.map(f=>new AT(f,this.options));for(let f of l){if(f2(f))return[f];c.set(f.value,f)}c.size>1&&c.has("")&&c.delete("");let u=[...c.values()];return u2.set(r,u),u}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(r=>d2(r,n)&&e.set.some(o=>d2(o,n)&&r.every(i=>o.every(s=>i.intersects(s,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Yee(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(cte(this.set[n],e,this.options))return!0;return!1}};m2.exports=LT;var jee=l2(),u2=new jee,Vee=lS(),AT=_v(),Ut=Ev(),Yee=qr(),{safeRe:No,t:oo,comparatorTrimReplace:qee,tildeTrimReplace:Gee,caretTrimReplace:zee}=Qm(),{FLAG_INCLUDE_PRERELEASE:Kee,FLAG_LOOSE:Xee}=Cv(),f2=t=>t.value==="<0.0.0-0",Jee=t=>t.value==="",d2=(t,e)=>{let n=!0,r=t.slice(),o=r.pop();for(;n&&r.length;)n=r.every(i=>o.intersects(i,e)),o=r.pop();return n},Zee=(t,e)=>(Ut("comp",t,e),t=tte(t,e),Ut("caret",t),t=Qee(t,e),Ut("tildes",t),t=rte(t,e),Ut("xrange",t),t=ite(t,e),Ut("stars",t),t),io=t=>!t||t.toLowerCase()==="x"||t==="*",Qee=(t,e)=>t.trim().split(/\s+/).map(n=>ete(n,e)).join(" "),ete=(t,e)=>{let n=e.loose?No[oo.TILDELOOSE]:No[oo.TILDE];return t.replace(n,(r,o,i,s,a)=>{Ut("tilde",t,r,o,i,s,a);let c;return io(o)?c="":io(i)?c=`>=${o}.0.0 <${+o+1}.0.0-0`:io(s)?c=`>=${o}.${i}.0 <${o}.${+i+1}.0-0`:a?(Ut("replaceTilde pr",a),c=`>=${o}.${i}.${s}-${a} <${o}.${+i+1}.0-0`):c=`>=${o}.${i}.${s} <${o}.${+i+1}.0-0`,Ut("tilde return",c),c})},tte=(t,e)=>t.trim().split(/\s+/).map(n=>nte(n,e)).join(" "),nte=(t,e)=>{Ut("caret",t,e);let n=e.loose?No[oo.CARETLOOSE]:No[oo.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(o,i,s,a,c)=>{Ut("caret",t,o,i,s,a,c);let l;return io(i)?l="":io(s)?l=`>=${i}.0.0${r} <${+i+1}.0.0-0`:io(a)?i==="0"?l=`>=${i}.${s}.0${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.0${r} <${+i+1}.0.0-0`:c?(Ut("replaceCaret pr",c),i==="0"?s==="0"?l=`>=${i}.${s}.${a}-${c} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}-${c} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a}-${c} <${+i+1}.0.0-0`):(Ut("no pr"),i==="0"?s==="0"?l=`>=${i}.${s}.${a}${r} <${i}.${s}.${+a+1}-0`:l=`>=${i}.${s}.${a}${r} <${i}.${+s+1}.0-0`:l=`>=${i}.${s}.${a} <${+i+1}.0.0-0`),Ut("caret return",l),l})},rte=(t,e)=>(Ut("replaceXRanges",t,e),t.split(/\s+/).map(n=>ote(n,e)).join(" ")),ote=(t,e)=>{t=t.trim();let n=e.loose?No[oo.XRANGELOOSE]:No[oo.XRANGE];return t.replace(n,(r,o,i,s,a,c)=>{Ut("xRange",t,r,o,i,s,a,c);let l=io(i),u=l||io(s),f=u||io(a),m=f;return o==="="&&m&&(o=""),c=e.includePrerelease?"-0":"",l?o===">"||o==="<"?r="<0.0.0-0":r="*":o&&m?(u&&(s=0),a=0,o===">"?(o=">=",u?(i=+i+1,s=0,a=0):(s=+s+1,a=0)):o==="<="&&(o="<",u?i=+i+1:s=+s+1),o==="<"&&(c="-0"),r=`${o+i}.${s}.${a}${c}`):u?r=`>=${i}.0.0${c} <${+i+1}.0.0-0`:f&&(r=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`),Ut("xRange return",r),r})},ite=(t,e)=>(Ut("replaceStars",t,e),t.trim().replace(No[oo.STAR],"")),ste=(t,e)=>(Ut("replaceGTE0",t,e),t.trim().replace(No[e.includePrerelease?oo.GTE0PRE:oo.GTE0],"")),ate=t=>(e,n,r,o,i,s,a,c,l,u,f,m)=>(io(r)?n="":io(o)?n=`>=${r}.0.0${t?"-0":""}`:io(i)?n=`>=${r}.${o}.0${t?"-0":""}`:s?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,io(l)?c="":io(u)?c=`<${+l+1}.0.0-0`:io(f)?c=`<${l}.${+u+1}.0-0`:m?c=`<=${l}.${u}.${f}-${m}`:t?c=`<${l}.${u}.${+f+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),cte=(t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Ut(t[r].semver),t[r].semver!==AT.ANY&&t[r].semver.prerelease.length>0){let o=t[r].semver;if(o.major===e.major&&o.minor===e.minor&&o.patch===e.patch)return!0}return!1}return!0}});var _v=M((ECe,y2)=>{var xv=Symbol("SemVer ANY"),UT=class t{static get ANY(){return xv}constructor(e,n){if(n=p2(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),OT("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===xv?this.value="":this.value=this.operator+this.semver.version,OT("comp",this)}parse(e){let n=this.options.loose?h2[g2.COMPARATORLOOSE]:h2[g2.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new v2(r[2],this.options.loose):this.semver=xv}toString(){return this.value}test(e){if(OT("Comparator.test",e,this.options.loose),this.semver===xv||e===xv)return!0;if(typeof e=="string")try{e=new v2(e,this.options)}catch{return!1}return FT(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new w2(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new w2(this.value,n).test(e.semver):(n=p2(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||FT(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||FT(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};y2.exports=UT;var p2=lS(),{safeRe:h2,t:g2}=Qm(),FT=NT(),OT=Ev(),v2=qr(),w2=Ai()});var Dv=M((SCe,C2)=>{var lte=Ai(),ute=(t,e,n)=>{try{e=new lte(e,n)}catch{return!1}return e.test(t)};C2.exports=ute});var S2=M((_Ce,E2)=>{var fte=Ai(),dte=(t,e)=>new fte(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" "));E2.exports=dte});var x2=M((xCe,_2)=>{var mte=qr(),pte=Ai(),hte=(t,e,n)=>{let r=null,o=null,i=null;try{i=new pte(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===-1)&&(r=s,o=new mte(r,n))}),r};_2.exports=hte});var I2=M((DCe,D2)=>{var gte=qr(),vte=Ai(),wte=(t,e,n)=>{let r=null,o=null,i=null;try{i=new vte(e,n)}catch{return null}return t.forEach(s=>{i.test(s)&&(!r||o.compare(s)===1)&&(r=s,o=new gte(r,n))}),r};D2.exports=wte});var T2=M((ICe,b2)=>{var MT=qr(),yte=Ai(),P2=Sv(),Cte=(t,e)=>{t=new yte(t,e);let n=new MT("0.0.0");if(t.test(n)||(n=new MT("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let o=t.set[r],i=null;o.forEach(s=>{let a=new MT(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||P2(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),i&&(!n||P2(n,i))&&(n=i)}return n&&t.test(n)?n:null};b2.exports=Cte});var N2=M((PCe,R2)=>{var Ete=Ai(),Ste=(t,e)=>{try{return new Ete(t,e).range||"*"}catch{return null}};R2.exports=Ste});var yS=M((bCe,F2)=>{var _te=qr(),A2=_v(),{ANY:xte}=A2,Dte=Ai(),Ite=Dv(),k2=Sv(),L2=pS(),Pte=gS(),bte=hS(),Tte=(t,e,n,r)=>{t=new _te(t,r),e=new Dte(e,r);let o,i,s,a,c;switch(n){case">":o=k2,i=Pte,s=L2,a=">",c=">=";break;case"<":o=L2,i=bte,s=k2,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ite(t,e,r))return!1;for(let l=0;l<e.set.length;++l){let u=e.set[l],f=null,m=null;if(u.forEach(d=>{d.semver===xte&&(d=new A2(">=0.0.0")),f=f||d,m=m||d,o(d.semver,f.semver,r)?f=d:s(d.semver,m.semver,r)&&(m=d)}),f.operator===a||f.operator===c||(!m.operator||m.operator===a)&&i(t,m.semver))return!1;if(m.operator===c&&s(t,m.semver))return!1}return!0};F2.exports=Tte});var U2=M((TCe,O2)=>{var Rte=yS(),Nte=(t,e,n)=>Rte(t,e,">",n);O2.exports=Nte});var $2=M((RCe,M2)=>{var kte=yS(),Lte=(t,e,n)=>kte(t,e,"<",n);M2.exports=Lte});var W2=M((NCe,B2)=>{var H2=Ai(),Ate=(t,e,n)=>(t=new H2(t,n),e=new H2(e,n),t.intersects(e,n));B2.exports=Ate});var V2=M((kCe,j2)=>{var Fte=Dv(),Ote=Li();j2.exports=(t,e,n)=>{let r=[],o=null,i=null,s=t.sort((u,f)=>Ote(u,f,n));for(let u of s)Fte(u,e,n)?(i=u,o||(o=u)):(i&&r.push([o,i]),i=null,o=null);o&&r.push([o,null]);let a=[];for(let[u,f]of r)u===f?a.push(u):!f&&u===s[0]?a.push("*"):f?u===s[0]?a.push(`<=${f}`):a.push(`${u} - ${f}`):a.push(`>=${u}`);let c=a.join(" || "),l=typeof e.raw=="string"?e.raw:String(e);return c.length<l.length?c:e}});var X2=M((LCe,K2)=>{var Y2=Ai(),HT=_v(),{ANY:$T}=HT,Iv=Dv(),BT=Li(),Ute=(t,e,n={})=>{if(t===e)return!0;t=new Y2(t,n),e=new Y2(e,n);let r=!1;e:for(let o of t.set){for(let i of e.set){let s=$te(o,i,n);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},Mte=[new HT(">=0.0.0-0")],q2=[new HT(">=0.0.0")],$te=(t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===$T){if(e.length===1&&e[0].semver===$T)return!0;n.includePrerelease?t=Mte:t=q2}if(e.length===1&&e[0].semver===$T){if(n.includePrerelease)return!0;e=q2}let r=new Set,o,i;for(let d of t)d.operator===">"||d.operator===">="?o=G2(o,d,n):d.operator==="<"||d.operator==="<="?i=z2(i,d,n):r.add(d.semver);if(r.size>1)return null;let s;if(o&&i){if(s=BT(o.semver,i.semver,n),s>0)return null;if(s===0&&(o.operator!==">="||i.operator!=="<="))return null}for(let d of r){if(o&&!Iv(d,String(o),n)||i&&!Iv(d,String(i),n))return null;for(let p of e)if(!Iv(d,String(p),n))return!1;return!0}let a,c,l,u,f=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(u=u||d.operator===">"||d.operator===">=",l=l||d.operator==="<"||d.operator==="<=",o){if(m&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===m.major&&d.semver.minor===m.minor&&d.semver.patch===m.patch&&(m=!1),d.operator===">"||d.operator===">="){if(a=G2(o,d,n),a===d&&a!==o)return!1}else if(o.operator===">="&&!Iv(o.semver,String(d),n))return!1}if(i){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(c=z2(i,d,n),c===d&&c!==i)return!1}else if(i.operator==="<="&&!Iv(i.semver,String(d),n))return!1}if(!d.operator&&(i||o)&&s!==0)return!1}return!(o&&l&&!i&&s!==0||i&&u&&!o&&s!==0||m||f)},G2=(t,e,n)=>{if(!t)return e;let r=BT(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},z2=(t,e,n)=>{if(!t)return e;let r=BT(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t};K2.exports=Ute});var jT=M((ACe,Q2)=>{var WT=Qm(),J2=Cv(),Hte=qr(),Z2=PT(),Bte=kf(),Wte=xH(),jte=IH(),Vte=TH(),Yte=kH(),qte=AH(),Gte=OH(),zte=MH(),Kte=HH(),Xte=Li(),Jte=VH(),Zte=qH(),Qte=mS(),ene=XH(),tne=ZH(),nne=Sv(),rne=pS(),one=TT(),ine=RT(),sne=hS(),ane=gS(),cne=NT(),lne=a2(),une=_v(),fne=Ai(),dne=Dv(),mne=S2(),pne=x2(),hne=I2(),gne=T2(),vne=N2(),wne=yS(),yne=U2(),Cne=$2(),Ene=W2(),Sne=V2(),_ne=X2();Q2.exports={parse:Bte,valid:Wte,clean:jte,inc:Vte,diff:Yte,major:qte,minor:Gte,patch:zte,prerelease:Kte,compare:Xte,rcompare:Jte,compareLoose:Zte,compareBuild:Qte,sort:ene,rsort:tne,gt:nne,lt:rne,eq:one,neq:ine,gte:sne,lte:ane,cmp:cne,coerce:lne,Comparator:une,Range:fne,satisfies:dne,toComparators:mne,maxSatisfying:pne,minSatisfying:hne,minVersion:gne,validRange:vne,outside:wne,gtr:yne,ltr:Cne,intersects:Ene,simplifyRange:Sne,subset:_ne,SemVer:Hte,re:WT.re,src:WT.src,tokens:WT.t,SEMVER_SPEC_VERSION:J2.SEMVER_SPEC_VERSION,RELEASE_TYPES:J2.RELEASE_TYPES,compareIdentifiers:Z2.compareIdentifiers,rcompareIdentifiers:Z2.rcompareIdentifiers}});var VT=M((FCe,eB)=>{eB.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,END64HDR:20,END64SIG:117853008,END64START:4,END64OFF:8,END64NUMDISKS:16,ZIP64SIG:101075792,ZIP64HDR:56,ZIP64LEAD:12,ZIP64SIZE:4,ZIP64VEM:12,ZIP64VER:14,ZIP64DSK:16,ZIP64DSKDIR:20,ZIP64SUB:24,ZIP64TOT:32,ZIP64SIZB:40,ZIP64OFF:48,ZIP64EXTRA:56,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,AES_ENCRYPT:99,FLG_ENC:1,FLG_COMP1:2,FLG_COMP2:4,FLG_DESC:8,FLG_ENH:16,FLG_PATCH:32,FLG_STR:64,FLG_EFS:2048,FLG_MSK:4096,FILE:2,BUFFER:1,NONE:0,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}});var CS=M(nB=>{var tB={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",DESCRIPTOR_NOT_EXIST:"No descriptor present",DESCRIPTOR_UNKNOWN:"Unknown descriptor format",DESCRIPTOR_FAULTY:"Descriptor data is malformed",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed {0}",FILE_IN_THE_WAY:"There is a file in the way: {0}",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",DISK_ENTRY_TOO_LARGE:"Number of disk entries is too large",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:'File not found: "{0}"',NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found",INVALID_PASS_PARAM:"Incompatible password parameter",WRONG_PASSWORD:"Wrong Password",COMMENT_TOO_LONG:"Comment is too long",EXTRA_FIELD_PARSE_ERROR:"Extra field parsing error"};function xne(t){return function(...e){return e.length&&(t=t.replace(/\{(\d)\}/g,(n,r)=>e[r]||"")),new Error("ADM-ZIP: "+t)}}for(let t of Object.keys(tB))nB[t]=xne(tB[t])});var aB=M((UCe,sB)=>{var Dne=require("fs"),Vn=require("path"),rB=VT(),Ine=CS(),Pne=typeof process=="object"&&process.platform==="win32",oB=t=>typeof t=="object"&&t!==null,iB=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=3988292384^e>>>1:e>>>=1;return e>>>0});function sn(t){this.sep=Vn.sep,this.fs=Dne,oB(t)&&oB(t.fs)&&typeof t.fs.statSync=="function"&&(this.fs=t.fs)}sB.exports=sn;sn.prototype.makeDir=function(t){let e=this;function n(r){let o=r.split(e.sep)[0];r.split(e.sep).forEach(function(i){if(!(!i||i.substr(-1,1)===":")){o+=e.sep+i;var s;try{s=e.fs.statSync(o)}catch{e.fs.mkdirSync(o)}if(s&&s.isFile())throw Ine.FILE_IN_THE_WAY(`"${o}"`)}})}n(t)};sn.prototype.writeFileTo=function(t,e,n,r){let o=this;if(o.fs.existsSync(t)){if(!n)return!1;var i=o.fs.statSync(t);if(i.isDirectory())return!1}var s=Vn.dirname(t);o.fs.existsSync(s)||o.makeDir(s);var a;try{a=o.fs.openSync(t,"w",438)}catch{o.fs.chmodSync(t,438),a=o.fs.openSync(t,"w",438)}if(a)try{o.fs.writeSync(a,e,0,e.length,0)}finally{o.fs.closeSync(a)}return o.fs.chmodSync(t,r||438),!0};sn.prototype.writeFileToAsync=function(t,e,n,r,o){typeof r=="function"&&(o=r,r=void 0);let i=this;i.fs.exists(t,function(s){if(s&&!n)return o(!1);i.fs.stat(t,function(a,c){if(s&&c.isDirectory())return o(!1);var l=Vn.dirname(t);i.fs.exists(l,function(u){u||i.makeDir(l),i.fs.open(t,"w",438,function(f,m){f?i.fs.chmod(t,438,function(){i.fs.open(t,"w",438,function(d,p){i.fs.write(p,e,0,e.length,0,function(){i.fs.close(p,function(){i.fs.chmod(t,r||438,function(){o(!0)})})})})}):m?i.fs.write(m,e,0,e.length,0,function(){i.fs.close(m,function(){i.fs.chmod(t,r||438,function(){o(!0)})})}):i.fs.chmod(t,r||438,function(){o(!0)})})})})})};sn.prototype.findFiles=function(t){let e=this;function n(r,o,i){typeof o=="boolean"&&(i=o,o=void 0);let s=[];return e.fs.readdirSync(r).forEach(function(a){let c=Vn.join(r,a),l=e.fs.statSync(c);(!o||o.test(c))&&s.push(Vn.normalize(c)+(l.isDirectory()?e.sep:"")),l.isDirectory()&&i&&(s=s.concat(n(c,o,i)))}),s}return n(t,void 0,!0)};sn.prototype.findFilesAsync=function(t,e){let n=this,r=[];n.fs.readdir(t,function(o,i){if(o)return e(o);let s=i.length;if(!s)return e(null,r);i.forEach(function(a){a=Vn.join(t,a),n.fs.stat(a,function(c,l){if(c)return e(c);l&&(r.push(Vn.normalize(a)+(l.isDirectory()?n.sep:"")),l.isDirectory()?n.findFilesAsync(a,function(u,f){if(u)return e(u);r=r.concat(f),--s||e(null,r)}):--s||e(null,r))})})})};sn.prototype.getAttributes=function(){};sn.prototype.setAttributes=function(){};sn.crc32update=function(t,e){return iB[(t^e)&255]^t>>>8};sn.crc32=function(t){typeof t=="string"&&(t=Buffer.from(t,"utf8"));let e=t.length,n=-1;for(let r=0;r<e;)n=sn.crc32update(n,t[r++]);return~n>>>0};sn.methodToString=function(t){switch(t){case rB.STORED:return"STORED ("+t+")";case rB.DEFLATED:return"DEFLATED ("+t+")";default:return"UNSUPPORTED ("+t+")"}};sn.canonical=function(t){if(!t)return"";let e=Vn.posix.normalize("/"+t.split("\\").join("/"));return Vn.join(".",e)};sn.zipnamefix=function(t){if(!t)return"";let e=Vn.posix.normalize("/"+t.split("\\").join("/"));return Vn.posix.join(".",e)};sn.findLast=function(t,e){if(!Array.isArray(t))throw new TypeError("arr is not array");let n=t.length>>>0;for(let r=n-1;r>=0;r--)if(e(t[r],r,t))return t[r]};sn.sanitize=function(t,e){t=Vn.resolve(Vn.normalize(t));for(var n=e.split("/"),r=0,o=n.length;r<o;r++){var i=Vn.normalize(Vn.join(t,n.slice(r,o).join(Vn.sep)));if(i.indexOf(t)===0)return i}return Vn.normalize(Vn.join(t,Vn.basename(e)))};sn.toBuffer=function(e,n){return Buffer.isBuffer(e)?e:e instanceof Uint8Array?Buffer.from(e):typeof e=="string"?n(e):Buffer.alloc(0)};sn.readBigUInt64LE=function(t,e){var n=Buffer.from(t.slice(e,e+8));return n.swap64(),parseInt(`0x${n.toString("hex")}`)};sn.fromDOS2Date=function(t){return new Date((t>>25&127)+1980,Math.max((t>>21&15)-1,0),Math.max(t>>16&31,1),t>>11&31,t>>5&63,(t&31)<<1)};sn.fromDate2DOS=function(t){let e=0,n=0;return t.getFullYear()>1979&&(e=(t.getFullYear()-1980&127)<<9|t.getMonth()+1<<5|t.getDate(),n=t.getHours()<<11|t.getMinutes()<<5|t.getSeconds()>>1),e<<16|n};sn.isWin=Pne;sn.crcTable=iB});var lB=M((MCe,cB)=>{var bne=require("path");cB.exports=function(t,{fs:e}){var n=t||"",r=i(),o=null;function i(){return{directory:!1,readonly:!1,hidden:!1,executable:!1,mtime:0,atime:0}}return n&&e.existsSync(n)?(o=e.statSync(n),r.directory=o.isDirectory(),r.mtime=o.mtime,r.atime=o.atime,r.executable=(73&o.mode)!==0,r.readonly=(128&o.mode)===0,r.hidden=bne.basename(n)[0]==="."):console.warn("Invalid path: "+n),{get directory(){return r.directory},get readOnly(){return r.readonly},get hidden(){return r.hidden},get mtime(){return r.mtime},get atime(){return r.atime},get executable(){return r.executable},decodeAttributes:function(){},encodeAttributes:function(){},toJSON:function(){return{path:n,isDirectory:r.directory,isReadOnly:r.readonly,isHidden:r.hidden,isExecutable:r.executable,mTime:r.mtime,aTime:r.atime}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var fB=M(($Ce,uB)=>{uB.exports={efs:!0,encode:t=>Buffer.from(t,"utf8"),decode:t=>t.toString("utf8")}});var np=M((HCe,tp)=>{tp.exports=aB();tp.exports.Constants=VT();tp.exports.Errors=CS();tp.exports.FileAttr=lB();tp.exports.decoder=fB()});var mB=M((BCe,dB)=>{var _l=np(),fe=_l.Constants;dB.exports=function(){var t=20,e=10,n=0,r=0,o=0,i=0,s=0,a=0,c=0,l=0,u=0,f=0,m=0,d=0,p=0;t|=_l.isWin?2560:768,n|=fe.FLG_EFS;let h={extraLen:0},g=w=>Math.max(0,w)>>>0,v=w=>Math.max(0,w)&65535,C=w=>Math.max(0,w)&255;return o=_l.fromDate2DOS(new Date),{get made(){return t},set made(w){t=w},get version(){return e},set version(w){e=w},get flags(){return n},set flags(w){n=w},get flags_efs(){return(n&fe.FLG_EFS)>0},set flags_efs(w){w?n|=fe.FLG_EFS:n&=~fe.FLG_EFS},get flags_desc(){return(n&fe.FLG_DESC)>0},set flags_desc(w){w?n|=fe.FLG_DESC:n&=~fe.FLG_DESC},get method(){return r},set method(w){switch(w){case fe.STORED:this.version=10;case fe.DEFLATED:default:this.version=20}r=w},get time(){return _l.fromDOS2Date(this.timeval)},set time(w){this.timeval=_l.fromDate2DOS(w)},get timeval(){return o},set timeval(w){o=g(w)},get timeHighByte(){return C(o>>>8)},get crc(){return i},set crc(w){i=g(w)},get compressedSize(){return s},set compressedSize(w){s=g(w)},get size(){return a},set size(w){a=g(w)},get fileNameLength(){return c},set fileNameLength(w){c=w},get extraLength(){return l},set extraLength(w){l=w},get extraLocalLength(){return h.extraLen},set extraLocalLength(w){h.extraLen=w},get commentLength(){return u},set commentLength(w){u=w},get diskNumStart(){return f},set diskNumStart(w){f=g(w)},get inAttr(){return m},set inAttr(w){m=g(w)},get attr(){return d},set attr(w){d=g(w)},get fileAttr(){return(d||0)>>16&4095},get offset(){return p},set offset(w){p=g(w)},get encrypted(){return(n&fe.FLG_ENC)===fe.FLG_ENC},get centralHeaderSize(){return fe.CENHDR+c+l+u},get realDataOffset(){return p+fe.LOCHDR+h.fnameLen+h.extraLen},get localHeader(){return h},loadLocalHeaderFromBinary:function(w){var y=w.slice(p,p+fe.LOCHDR);if(y.readUInt32LE(0)!==fe.LOCSIG)throw _l.Errors.INVALID_LOC();h.version=y.readUInt16LE(fe.LOCVER),h.flags=y.readUInt16LE(fe.LOCFLG),h.method=y.readUInt16LE(fe.LOCHOW),h.time=y.readUInt32LE(fe.LOCTIM),h.crc=y.readUInt32LE(fe.LOCCRC),h.compressedSize=y.readUInt32LE(fe.LOCSIZ),h.size=y.readUInt32LE(fe.LOCLEN),h.fnameLen=y.readUInt16LE(fe.LOCNAM),h.extraLen=y.readUInt16LE(fe.LOCEXT);let S=p+fe.LOCHDR+h.fnameLen,P=S+h.extraLen;return w.slice(S,P)},loadFromBinary:function(w){if(w.length!==fe.CENHDR||w.readUInt32LE(0)!==fe.CENSIG)throw _l.Errors.INVALID_CEN();t=w.readUInt16LE(fe.CENVEM),e=w.readUInt16LE(fe.CENVER),n=w.readUInt16LE(fe.CENFLG),r=w.readUInt16LE(fe.CENHOW),o=w.readUInt32LE(fe.CENTIM),i=w.readUInt32LE(fe.CENCRC),s=w.readUInt32LE(fe.CENSIZ),a=w.readUInt32LE(fe.CENLEN),c=w.readUInt16LE(fe.CENNAM),l=w.readUInt16LE(fe.CENEXT),u=w.readUInt16LE(fe.CENCOM),f=w.readUInt16LE(fe.CENDSK),m=w.readUInt16LE(fe.CENATT),d=w.readUInt32LE(fe.CENATX),p=w.readUInt32LE(fe.CENOFF)},localHeaderToBinary:function(){var w=Buffer.alloc(fe.LOCHDR);return w.writeUInt32LE(fe.LOCSIG,0),w.writeUInt16LE(e,fe.LOCVER),w.writeUInt16LE(n,fe.LOCFLG),w.writeUInt16LE(r,fe.LOCHOW),w.writeUInt32LE(o,fe.LOCTIM),w.writeUInt32LE(i,fe.LOCCRC),w.writeUInt32LE(s,fe.LOCSIZ),w.writeUInt32LE(a,fe.LOCLEN),w.writeUInt16LE(c,fe.LOCNAM),w.writeUInt16LE(h.extraLen,fe.LOCEXT),w},centralHeaderToBinary:function(){var w=Buffer.alloc(fe.CENHDR+c+l+u);return w.writeUInt32LE(fe.CENSIG,0),w.writeUInt16LE(t,fe.CENVEM),w.writeUInt16LE(e,fe.CENVER),w.writeUInt16LE(n,fe.CENFLG),w.writeUInt16LE(r,fe.CENHOW),w.writeUInt32LE(o,fe.CENTIM),w.writeUInt32LE(i,fe.CENCRC),w.writeUInt32LE(s,fe.CENSIZ),w.writeUInt32LE(a,fe.CENLEN),w.writeUInt16LE(c,fe.CENNAM),w.writeUInt16LE(l,fe.CENEXT),w.writeUInt16LE(u,fe.CENCOM),w.writeUInt16LE(f,fe.CENDSK),w.writeUInt16LE(m,fe.CENATT),w.writeUInt32LE(d,fe.CENATX),w.writeUInt32LE(p,fe.CENOFF),w},toJSON:function(){let w=function(y){return y+" bytes"};return{made:t,version:e,flags:n,method:_l.methodToString(r),time:this.time,crc:"0x"+i.toString(16).toUpperCase(),compressedSize:w(s),size:w(a),fileNameLength:w(c),extraLength:w(l),commentLength:w(u),diskNumStart:f,inAttr:m,attr:d,offset:p,centralHeaderSize:w(fe.CENHDR+c+l+u)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var hB=M((WCe,pB)=>{var rp=np(),Xt=rp.Constants;pB.exports=function(){var t=0,e=0,n=0,r=0,o=0;return{get diskEntries(){return t},set diskEntries(i){t=e=i},get totalEntries(){return e},set totalEntries(i){e=t=i},get size(){return n},set size(i){n=i},get offset(){return r},set offset(i){r=i},get commentLength(){return o},set commentLength(i){o=i},get mainHeaderSize(){return Xt.ENDHDR+o},loadFromBinary:function(i){if((i.length!==Xt.ENDHDR||i.readUInt32LE(0)!==Xt.ENDSIG)&&(i.length<Xt.ZIP64HDR||i.readUInt32LE(0)!==Xt.ZIP64SIG))throw rp.Errors.INVALID_END();i.readUInt32LE(0)===Xt.ENDSIG?(t=i.readUInt16LE(Xt.ENDSUB),e=i.readUInt16LE(Xt.ENDTOT),n=i.readUInt32LE(Xt.ENDSIZ),r=i.readUInt32LE(Xt.ENDOFF),o=i.readUInt16LE(Xt.ENDCOM)):(t=rp.readBigUInt64LE(i,Xt.ZIP64SUB),e=rp.readBigUInt64LE(i,Xt.ZIP64TOT),n=rp.readBigUInt64LE(i,Xt.ZIP64SIZE),r=rp.readBigUInt64LE(i,Xt.ZIP64OFF),o=0)},toBinary:function(){var i=Buffer.alloc(Xt.ENDHDR+o);return i.writeUInt32LE(Xt.ENDSIG,0),i.writeUInt32LE(0,4),i.writeUInt16LE(t,Xt.ENDSUB),i.writeUInt16LE(e,Xt.ENDTOT),i.writeUInt32LE(n,Xt.ENDSIZ),i.writeUInt32LE(r,Xt.ENDOFF),i.writeUInt16LE(o,Xt.ENDCOM),i.fill(" ",Xt.ENDHDR),i},toJSON:function(){let i=function(s,a){let c=s.toString(16).toUpperCase();for(;c.length<a;)c="0"+c;return"0x"+c};return{diskEntries:t,totalEntries:e,size:n+" bytes",offset:i(r,4),commentLength:o}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var qT=M(YT=>{YT.EntryHeader=mB();YT.MainHeader=hB()});var vB=M((VCe,gB)=>{gB.exports=function(t){var e=require("zlib"),n={chunkSize:(parseInt(t.length/1024)+1)*1024};return{deflate:function(){return e.deflateRawSync(t,n)},deflateAsync:function(r){var o=e.createDeflateRaw(n),i=[],s=0;o.on("data",function(a){i.push(a),s+=a.length}),o.on("end",function(){var a=Buffer.alloc(s),c=0;a.fill(0);for(var l=0;l<i.length;l++){var u=i[l];u.copy(a,c),c+=u.length}r&&r(a)}),o.end(t)}}}});var yB=M((YCe,wB)=>{var Tne=+(process.versions?process.versions.node:"").split(".")[0]||0;wB.exports=function(t,e){var n=require("zlib");let r=Tne>=15&&e>0?{maxOutputLength:e}:{};return{inflate:function(){return n.inflateRawSync(t,r)},inflateAsync:function(o){var i=n.createInflateRaw(r),s=[],a=0;i.on("data",function(c){s.push(c),a+=c.length}),i.on("end",function(){var c=Buffer.alloc(a),l=0;c.fill(0);for(var u=0;u<s.length;u++){var f=s[u];f.copy(c,l),l+=f.length}o&&o(c)}),i.end(t)}}}});var xB=M((qCe,_B)=>{"use strict";var{randomFillSync:CB}=require("crypto"),Rne=CS(),Nne=new Uint32Array(256).map((t,e)=>{for(let n=0;n<8;n++)(e&1)!==0?e=e>>>1^3988292384:e>>>=1;return e>>>0}),SB=(t,e)=>Math.imul(t,e)>>>0,EB=(t,e)=>Nne[(t^e)&255]^t>>>8,Pv=()=>typeof CB=="function"?CB(Buffer.alloc(12)):Pv.node();Pv.node=()=>{let t=Buffer.alloc(12),e=t.length;for(let n=0;n<e;n++)t[n]=Math.random()*256&255;return t};var ES={genSalt:Pv};function SS(t){let e=Buffer.isBuffer(t)?t:Buffer.from(t);this.keys=new Uint32Array([305419896,591751049,878082192]);for(let n=0;n<e.length;n++)this.updateKeys(e[n])}SS.prototype.updateKeys=function(t){let e=this.keys;return e[0]=EB(e[0],t),e[1]+=e[0]&255,e[1]=SB(e[1],134775813)+1,e[2]=EB(e[2],e[1]>>>24),t};SS.prototype.next=function(){let t=(this.keys[2]|2)>>>0;return SB(t,t^1)>>8&255};function kne(t){let e=new SS(t);return function(n){let r=Buffer.alloc(n.length),o=0;for(let i of n)r[o++]=e.updateKeys(i^e.next());return r}}function Lne(t){let e=new SS(t);return function(n,r,o=0){r||(r=Buffer.alloc(n.length));for(let i of n){let s=e.next();r[o++]=i^s,e.updateKeys(i)}return r}}function Ane(t,e,n){if(!t||!Buffer.isBuffer(t)||t.length<12)return Buffer.alloc(0);let r=kne(n),o=r(t.slice(0,12)),i=(e.flags&8)===8?e.timeHighByte:e.crc>>>24;if(o[11]!==i)throw Rne.WRONG_PASSWORD();return r(t.slice(12))}function Fne(t){Buffer.isBuffer(t)&&t.length>=12?ES.genSalt=function(){return t.slice(0,12)}:t==="node"?ES.genSalt=Pv.node:ES.genSalt=Pv}function One(t,e,n,r=!1){t==null&&(t=Buffer.alloc(0)),Buffer.isBuffer(t)||(t=Buffer.from(t.toString()));let o=Lne(n),i=ES.genSalt();i[11]=e.crc>>>24&255,r&&(i[10]=e.crc>>>16&255);let s=Buffer.alloc(t.length+12);return o(i,s),o(t,s,12)}_B.exports={decrypt:Ane,encrypt:One,_salter:Fne}});var DB=M(_S=>{_S.Deflater=vB();_S.Inflater=yB();_S.ZipCrypto=xB()});var zT=M((zCe,IB)=>{var Et=np(),Une=qT(),an=Et.Constants,GT=DB();IB.exports=function(t,e){var n=new Une.EntryHeader,r=Buffer.alloc(0),o=Buffer.alloc(0),i=!1,s=null,a=Buffer.alloc(0),c=Buffer.alloc(0),l=!0;let u=t,f=typeof u.decoder=="object"?u.decoder:Et.decoder;l=f.hasOwnProperty("efs")?f.efs:!1;function m(){return!e||!(e instanceof Uint8Array)?Buffer.alloc(0):(c=n.loadLocalHeaderFromBinary(e),e.slice(n.realDataOffset,n.realDataOffset+n.compressedSize))}function d(w){if(n.flags_desc){let y={},S=n.realDataOffset+n.compressedSize;if(e.readUInt32LE(S)==an.LOCSIG||e.readUInt32LE(S)==an.CENSIG)throw Et.Errors.DESCRIPTOR_NOT_EXIST();if(e.readUInt32LE(S)==an.EXTSIG)y.crc=e.readUInt32LE(S+an.EXTCRC),y.compressedSize=e.readUInt32LE(S+an.EXTSIZ),y.size=e.readUInt32LE(S+an.EXTLEN);else if(e.readUInt16LE(S+12)===19280)y.crc=e.readUInt32LE(S+an.EXTCRC-4),y.compressedSize=e.readUInt32LE(S+an.EXTSIZ-4),y.size=e.readUInt32LE(S+an.EXTLEN-4);else throw Et.Errors.DESCRIPTOR_UNKNOWN();if(y.compressedSize!==n.compressedSize||y.size!==n.size||y.crc!==n.crc)throw Et.Errors.DESCRIPTOR_FAULTY();if(Et.crc32(w)!==y.crc)return!1}else if(Et.crc32(w)!==n.localHeader.crc)return!1;return!0}function p(w,y,S){if(typeof y>"u"&&typeof w=="string"&&(S=w,w=void 0),i)return w&&y&&y(Buffer.alloc(0),Et.Errors.DIRECTORY_CONTENT_ERROR()),Buffer.alloc(0);var P=m();if(P.length===0)return w&&y&&y(P),P;if(n.encrypted){if(typeof S!="string"&&!Buffer.isBuffer(S))throw Et.Errors.INVALID_PASS_PARAM();P=GT.ZipCrypto.decrypt(P,n,S)}var D=Buffer.alloc(n.size);switch(n.method){case Et.Constants.STORED:if(P.copy(D),d(D))return w&&y&&y(D),D;throw w&&y&&y(D,Et.Errors.BAD_CRC()),Et.Errors.BAD_CRC();case Et.Constants.DEFLATED:var A=new GT.Inflater(P,n.size);if(w)A.inflateAsync(function(O){O.copy(O,0),y&&(d(O)?y(O):y(O,Et.Errors.BAD_CRC()))});else{if(A.inflate(D).copy(D,0),!d(D))throw Et.Errors.BAD_CRC(`"${f.decode(r)}"`);return D}break;default:throw w&&y&&y(Buffer.alloc(0),Et.Errors.UNKNOWN_METHOD()),Et.Errors.UNKNOWN_METHOD()}}function h(w,y){if((!s||!s.length)&&Buffer.isBuffer(e))return w&&y&&y(m()),m();if(s.length&&!i){var S;switch(n.method){case Et.Constants.STORED:return n.compressedSize=n.size,S=Buffer.alloc(s.length),s.copy(S),w&&y&&y(S),S;default:case Et.Constants.DEFLATED:var P=new GT.Deflater(s);if(w)P.deflateAsync(function(A){S=Buffer.alloc(A.length),n.compressedSize=A.length,A.copy(S),y&&y(S)});else{var D=P.deflate();return n.compressedSize=D.length,D}P=null;break}}else if(w&&y)y(Buffer.alloc(0));else return Buffer.alloc(0)}function g(w,y){return(w.readUInt32LE(y+4)<<4)+w.readUInt32LE(y)}function v(w){try{for(var y=0,S,P,D;y+4<w.length;)S=w.readUInt16LE(y),y+=2,P=w.readUInt16LE(y),y+=2,D=w.slice(y,y+P),y+=P,an.ID_ZIP64===S&&C(D)}catch{throw Et.Errors.EXTRA_FIELD_PARSE_ERROR()}}function C(w){var y,S,P,D;w.length>=an.EF_ZIP64_SCOMP&&(y=g(w,an.EF_ZIP64_SUNCOMP),n.size===an.EF_ZIP64_OR_32&&(n.size=y)),w.length>=an.EF_ZIP64_RHO&&(S=g(w,an.EF_ZIP64_SCOMP),n.compressedSize===an.EF_ZIP64_OR_32&&(n.compressedSize=S)),w.length>=an.EF_ZIP64_DSN&&(P=g(w,an.EF_ZIP64_RHO),n.offset===an.EF_ZIP64_OR_32&&(n.offset=P)),w.length>=an.EF_ZIP64_DSN+4&&(D=w.readUInt32LE(an.EF_ZIP64_DSN),n.diskNumStart===an.EF_ZIP64_OR_16&&(n.diskNumStart=D))}return{get entryName(){return f.decode(r)},get rawEntryName(){return r},set entryName(w){r=Et.toBuffer(w,f.encode);var y=r[r.length-1];i=y===47||y===92,n.fileNameLength=r.length},get efs(){return typeof l=="function"?l(this.entryName):l},get extra(){return a},set extra(w){a=w,n.extraLength=w.length,v(w)},get comment(){return f.decode(o)},set comment(w){if(o=Et.toBuffer(w,f.encode),n.commentLength=o.length,o.length>65535)throw Et.Errors.COMMENT_TOO_LONG()},get name(){var w=f.decode(r);return i?w.substr(w.length-1).split("/").pop():w.split("/").pop()},get isDirectory(){return i},getCompressedData:function(){return h(!1,null)},getCompressedDataAsync:function(w){h(!0,w)},setData:function(w){s=Et.toBuffer(w,Et.decoder.encode),!i&&s.length?(n.size=s.length,n.method=Et.Constants.DEFLATED,n.crc=Et.crc32(w),n.changed=!0):n.method=Et.Constants.STORED},getData:function(w){return n.changed?s:p(!1,null,w)},getDataAsync:function(w,y){n.changed?w(s):p(!0,w,y)},set attr(w){n.attr=w},get attr(){return n.attr},set header(w){n.loadFromBinary(w)},get header(){return n},packCentralHeader:function(){n.flags_efs=this.efs,n.extraLength=a.length;var w=n.centralHeaderToBinary(),y=Et.Constants.CENHDR;return r.copy(w,y),y+=r.length,a.copy(w,y),y+=n.extraLength,o.copy(w,y),w},packLocalHeader:function(){let w=0;n.flags_efs=this.efs,n.extraLocalLength=c.length;let y=n.localHeaderToBinary(),S=Buffer.alloc(y.length+r.length+n.extraLocalLength);return y.copy(S,w),w+=y.length,r.copy(S,w),w+=r.length,c.copy(S,w),w+=c.length,S},toJSON:function(){let w=function(y){return"<"+(y&&y.length+" bytes buffer"||"null")+">"};return{entryName:this.entryName,name:this.name,comment:this.comment,isDirectory:this.isDirectory,header:n.toJSON(),compressedData:w(e),data:w(s)}},toString:function(){return JSON.stringify(this.toJSON(),null,"	")}}}});var TB=M((KCe,bB)=>{var PB=zT(),Mne=qT(),_r=np();bB.exports=function(t,e){var n=[],r={},o=Buffer.alloc(0),i=new Mne.MainHeader,s=!1,a=null;let c=new Set,l=e,{noSort:u,decoder:f}=l;t?p(l.readEntries):s=!0;function m(){let g=new Set;for(let v of Object.keys(r)){let C=v.split("/");if(C.pop(),!!C.length)for(let w=0;w<C.length;w++){let y=C.slice(0,w+1).join("/")+"/";g.add(y)}}for(let v of g)if(!(v in r)){let C=new PB(l);C.entryName=v,C.attr=16,C.temporary=!0,n.push(C),r[C.entryName]=C,c.add(C)}}function d(){if(s=!0,r={},i.diskEntries>(t.length-i.offset)/_r.Constants.CENHDR)throw _r.Errors.DISK_ENTRY_TOO_LARGE();n=new Array(i.diskEntries);for(var g=i.offset,v=0;v<n.length;v++){var C=g,w=new PB(l,t);w.header=t.slice(C,C+=_r.Constants.CENHDR),w.entryName=t.slice(C,C+=w.header.fileNameLength),w.header.extraLength&&(w.extra=t.slice(C,C+=w.header.extraLength)),w.header.commentLength&&(w.comment=t.slice(C,C+w.header.commentLength)),g+=w.header.centralHeaderSize,n[v]=w,r[w.entryName]=w}c.clear(),m()}function p(g){var v=t.length-_r.Constants.ENDHDR,C=Math.max(0,v-65535),w=C,y=t.length,S=-1,P=0;for((typeof l.trailingSpace=="boolean"?l.trailingSpace:!1)&&(C=0),v;v>=w;v--)if(t[v]===80){if(t.readUInt32LE(v)===_r.Constants.ENDSIG){S=v,P=v,y=v+_r.Constants.ENDHDR,w=v-_r.Constants.END64HDR;continue}if(t.readUInt32LE(v)===_r.Constants.END64SIG){w=C;continue}if(t.readUInt32LE(v)===_r.Constants.ZIP64SIG){S=v,y=v+_r.readBigUInt64LE(t,v+_r.Constants.ZIP64SIZE)+_r.Constants.ZIP64LEAD;break}}if(S==-1)throw _r.Errors.INVALID_FORMAT();i.loadFromBinary(t.slice(S,y)),i.commentLength&&(o=t.slice(P+_r.Constants.ENDHDR)),g&&d()}function h(){n.length>1&&!u&&n.sort((g,v)=>g.entryName.toLowerCase().localeCompare(v.entryName.toLowerCase()))}return{get entries(){return s||d(),n.filter(g=>!c.has(g))},get comment(){return f.decode(o)},set comment(g){o=_r.toBuffer(g,f.encode),i.commentLength=o.length},getEntryCount:function(){return s?n.length:i.diskEntries},forEach:function(g){this.entries.forEach(g)},getEntry:function(g){return s||d(),r[g]||null},setEntry:function(g){s||d(),n.push(g),r[g.entryName]=g,i.totalEntries=n.length},deleteFile:function(g,v=!0){s||d();let C=r[g];this.getEntryChildren(C,v).map(y=>y.entryName).forEach(this.deleteEntry)},deleteEntry:function(g){s||d();let v=r[g],C=n.indexOf(v);C>=0&&(n.splice(C,1),delete r[g],i.totalEntries=n.length)},getEntryChildren:function(g,v=!0){if(s||d(),typeof g=="object")if(g.isDirectory&&v){let C=[],w=g.entryName;for(let y of n)y.entryName.startsWith(w)&&C.push(y);return C}else return[g];return[]},getChildCount:function(g){if(g&&g.isDirectory){let v=this.getEntryChildren(g);return v.includes(g)?v.length-1:v.length}return 0},compressToBuffer:function(){s||d(),h();let g=[],v=[],C=0,w=0;i.size=0,i.offset=0;let y=0;for(let D of this.entries){let A=D.getCompressedData();D.header.offset=w;let O=D.packLocalHeader(),L=O.length+A.length;w+=L,g.push(O),g.push(A);let E=D.packCentralHeader();v.push(E),i.size+=E.length,C+=L+E.length,y++}C+=i.mainHeaderSize,i.offset=w,i.totalEntries=y,w=0;let S=Buffer.alloc(C);for(let D of g)D.copy(S,w),w+=D.length;for(let D of v)D.copy(S,w),w+=D.length;let P=i.toBinary();return o&&o.copy(P,_r.Constants.ENDHDR),P.copy(S,w),t=S,s=!1,S},toAsyncBuffer:function(g,v,C,w){try{s||d(),h();let y=[],S=[],P=0,D=0,A=0;i.size=0,i.offset=0;let O=function(L){if(L.length>0){let E=L.shift(),I=E.entryName+E.extra.toString();C&&C(I),E.getCompressedDataAsync(function(R){w&&w(I),E.header.offset=D;let _=E.packLocalHeader(),x=_.length+R.length;D+=x,y.push(_),y.push(R);let b=E.packCentralHeader();S.push(b),i.size+=b.length,P+=x+b.length,A++,O(L)})}else{P+=i.mainHeaderSize,i.offset=D,i.totalEntries=A,D=0;let E=Buffer.alloc(P);y.forEach(function(R){R.copy(E,D),D+=R.length}),S.forEach(function(R){R.copy(E,D),D+=R.length});let I=i.toBinary();o&&o.copy(I,_r.Constants.ENDHDR),I.copy(E,D),t=E,s=!1,g(E)}};O(Array.from(this.entries))}catch(y){v(y)}}}}});var kB=M((XCe,NB)=>{var Jt=np(),cn=require("path"),$ne=zT(),Hne=TB(),Lf=(...t)=>Jt.findLast(t,e=>typeof e=="boolean"),RB=(...t)=>Jt.findLast(t,e=>typeof e=="string"),Bne=(...t)=>Jt.findLast(t,e=>typeof e=="function"),Wne={noSort:!1,readEntries:!1,method:Jt.Constants.NONE,fs:null};NB.exports=function(t,e){let n=null,r=Object.assign(Object.create(null),Wne);t&&typeof t=="object"&&(t instanceof Uint8Array||(Object.assign(r,t),t=r.input?r.input:void 0,r.input&&delete r.input),Buffer.isBuffer(t)&&(n=t,r.method=Jt.Constants.BUFFER,t=void 0)),Object.assign(r,e);let o=new Jt(r);if((typeof r.decoder!="object"||typeof r.decoder.encode!="function"||typeof r.decoder.decode!="function")&&(r.decoder=Jt.decoder),t&&typeof t=="string")if(o.fs.existsSync(t))r.method=Jt.Constants.FILE,r.filename=t,n=o.fs.readFileSync(t);else throw Jt.Errors.INVALID_FILENAME();let i=new Hne(n,r),{canonical:s,sanitize:a,zipnamefix:c}=Jt;function l(d){if(d&&i){var p;if(typeof d=="string"&&(p=i.getEntry(cn.posix.normalize(d))),typeof d=="object"&&typeof d.entryName<"u"&&typeof d.header<"u"&&(p=i.getEntry(d.entryName)),p)return p}return null}function u(d){let{join:p,normalize:h,sep:g}=cn.posix;return p(".",h(g+d.split("\\").join(g)+g))}function f(d){return d instanceof RegExp?function(p){return function(h){return p.test(h)}}(d):typeof d!="function"?()=>!0:d}let m=(d,p)=>{let h=p.slice(-1);return h=h===o.sep?o.sep:"",cn.relative(d,p)+h};return{readFile:function(d,p){var h=l(d);return h&&h.getData(p)||null},childCount:function(d){let p=l(d);if(p)return i.getChildCount(p)},readFileAsync:function(d,p){var h=l(d);h?h.getDataAsync(p):p(null,"getEntry failed for:"+d)},readAsText:function(d,p){var h=l(d);if(h){var g=h.getData();if(g&&g.length)return g.toString(p||"utf8")}return""},readAsTextAsync:function(d,p,h){var g=l(d);g?g.getDataAsync(function(v,C){if(C){p(v,C);return}v&&v.length?p(v.toString(h||"utf8")):p("")}):p("")},deleteFile:function(d,p=!0){var h=l(d);h&&i.deleteFile(h.entryName,p)},deleteEntry:function(d){var p=l(d);p&&i.deleteEntry(p.entryName)},addZipComment:function(d){i.comment=d},getZipComment:function(){return i.comment||""},addZipEntryComment:function(d,p){var h=l(d);h&&(h.comment=p)},getZipEntryComment:function(d){var p=l(d);return p&&p.comment||""},updateFile:function(d,p){var h=l(d);h&&h.setData(p)},addLocalFile:function(d,p,h,g){if(o.fs.existsSync(d)){p=p?u(p):"";let v=cn.win32.basename(cn.win32.normalize(d));p+=h||v;let C=o.fs.statSync(d),w=C.isFile()?o.fs.readFileSync(d):Buffer.alloc(0);C.isDirectory()&&(p+=o.sep),this.addFile(p,w,g,C)}else throw Jt.Errors.FILE_NOT_FOUND(d)},addLocalFileAsync:function(d,p){d=typeof d=="object"?d:{localPath:d};let h=cn.resolve(d.localPath),{comment:g}=d,{zipPath:v,zipName:C}=d,w=this;o.fs.stat(h,function(y,S){if(y)return p(y,!1);v=v?u(v):"";let P=cn.win32.basename(cn.win32.normalize(h));if(v+=C||P,S.isFile())o.fs.readFile(h,function(D,A){return D?p(D,!1):(w.addFile(v,A,g,S),setImmediate(p,void 0,!0))});else if(S.isDirectory())return v+=o.sep,w.addFile(v,Buffer.alloc(0),g,S),setImmediate(p,void 0,!0)})},addLocalFolder:function(d,p,h){if(h=f(h),p=p?u(p):"",d=cn.normalize(d),o.fs.existsSync(d)){let g=o.findFiles(d),v=this;if(g.length)for(let C of g){let w=cn.join(p,m(d,C));h(w)&&v.addLocalFile(C,cn.dirname(w))}}else throw Jt.Errors.FILE_NOT_FOUND(d)},addLocalFolderAsync:function(d,p,h,g){g=f(g),h=h?u(h):"",d=cn.normalize(d);var v=this;o.fs.open(d,"r",function(C){if(C&&C.code==="ENOENT")p(void 0,Jt.Errors.FILE_NOT_FOUND(d));else if(C)p(void 0,C);else{var w=o.findFiles(d),y=-1,S=function(){if(y+=1,y<w.length){var P=w[y],D=m(d,P).split("\\").join("/");D=D.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,""),g(D)?o.fs.stat(P,function(A,O){A&&p(void 0,A),O.isFile()?o.fs.readFile(P,function(L,E){L?p(void 0,L):(v.addFile(h+D,E,"",O),S())}):(v.addFile(h+D+"/",Buffer.alloc(0),"",O),S())}):process.nextTick(()=>{S()})}else p(!0,void 0)};S()}})},addLocalFolderAsync2:function(d,p){let h=this;d=typeof d=="object"?d:{localPath:d},localPath=cn.resolve(u(d.localPath));let{zipPath:g,filter:v,namefix:C}=d;v instanceof RegExp?v=function(S){return function(P){return S.test(P)}}(v):typeof v!="function"&&(v=function(){return!0}),g=g?u(g):"",C=="latin1"&&(C=S=>S.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\x20-\x7E]/g,"")),typeof C!="function"&&(C=S=>S);let w=S=>cn.join(g,C(m(localPath,S))),y=S=>cn.win32.basename(cn.win32.normalize(C(S)));o.fs.open(localPath,"r",function(S){S&&S.code==="ENOENT"?p(void 0,Jt.Errors.FILE_NOT_FOUND(localPath)):S?p(void 0,S):o.findFilesAsync(localPath,function(P,D){if(P)return p(P);D=D.filter(A=>v(w(A))),D.length||p(void 0,!1),setImmediate(D.reverse().reduce(function(A,O){return function(L,E){if(L||E===!1)return setImmediate(A,L,!1);h.addLocalFileAsync({localPath:O,zipPath:cn.dirname(w(O)),zipName:y(O)},A)}},p))})})},addLocalFolderPromise:function(d,p){return new Promise((h,g)=>{this.addLocalFolderAsync2(Object.assign({localPath:d},p),(v,C)=>{v&&g(v),C&&h(this)})})},addFile:function(d,p,h,g){d=c(d);let v=l(d),C=v!=null;C||(v=new $ne(r),v.entryName=d),v.comment=h||"";let w=typeof g=="object"&&g instanceof o.fs.Stats;w&&(v.header.time=g.mtime);var y=v.isDirectory?16:0;let S=v.isDirectory?16384:32768;return w?S|=4095&g.mode:typeof g=="number"?S|=4095&g:S|=v.isDirectory?493:420,y=(y|S<<16)>>>0,v.attr=y,v.setData(p),C||i.setEntry(v),v},getEntries:function(d){return i.password=d,i?i.entries:[]},getEntry:function(d){return l(d)},getEntryCount:function(){return i.getEntryCount()},forEach:function(d){return i.forEach(d)},extractEntryTo:function(d,p,h,g,v,C){g=Lf(!1,g),v=Lf(!1,v),h=Lf(!0,h),C=RB(v,C);var w=l(d);if(!w)throw Jt.Errors.NO_ENTRY();var y=s(w.entryName),S=a(p,C&&!w.isDirectory?C:h?y:cn.basename(y));if(w.isDirectory){var P=i.getEntryChildren(w);return P.forEach(function(O){if(O.isDirectory)return;var L=O.getData();if(!L)throw Jt.Errors.CANT_EXTRACT_FILE();var E=s(O.entryName),I=a(p,h?E:cn.basename(E));let R=v?O.header.fileAttr:void 0;o.writeFileTo(I,L,g,R)}),!0}var D=w.getData(i.password);if(!D)throw Jt.Errors.CANT_EXTRACT_FILE();if(o.fs.existsSync(S)&&!g)throw Jt.Errors.CANT_OVERRIDE();let A=v?d.header.fileAttr:void 0;return o.writeFileTo(S,D,g,A),!0},test:function(d){if(!i)return!1;for(var p in i.entries)try{if(p.isDirectory)continue;var h=i.entries[p].getData(d);if(!h)return!1}catch{return!1}return!0},extractAllTo:function(d,p,h,g){if(h=Lf(!1,h),g=RB(h,g),p=Lf(!1,p),!i)throw Jt.Errors.NO_ZIP();i.entries.forEach(function(v){var C=a(d,s(v.entryName));if(v.isDirectory){o.makeDir(C);return}var w=v.getData(g);if(!w)throw Jt.Errors.CANT_EXTRACT_FILE();let y=h?v.header.fileAttr:void 0;o.writeFileTo(C,w,p,y);try{o.fs.utimesSync(C,v.header.time,v.header.time)}catch{throw Jt.Errors.CANT_EXTRACT_FILE()}})},extractAllToAsync:function(d,p,h,g){if(g=Bne(p,h,g),h=Lf(!1,h),p=Lf(!1,p),!g)return new Promise((S,P)=>{this.extractAllToAsync(d,p,h,function(D){D?P(D):S(this)})});if(!i){g(Jt.Errors.NO_ZIP());return}d=cn.resolve(d);let v=S=>a(d,cn.normalize(s(S.entryName))),C=(S,P)=>new Error(S+': "'+P+'"'),w=[],y=[];i.entries.forEach(S=>{S.isDirectory?w.push(S):y.push(S)});for(let S of w){let P=v(S),D=h?S.header.fileAttr:void 0;try{o.makeDir(P),D&&o.fs.chmodSync(P,D),o.fs.utimesSync(P,S.header.time,S.header.time)}catch{g(C("Unable to create folder",P))}}y.reverse().reduce(function(S,P){return function(D){if(D)S(D);else{let A=cn.normalize(s(P.entryName)),O=a(d,A);P.getDataAsync(function(L,E){if(E)S(E);else if(!L)S(Jt.Errors.CANT_EXTRACT_FILE());else{let I=h?P.header.fileAttr:void 0;o.writeFileToAsync(O,L,p,I,function(R){R||S(C("Unable to write file",O)),o.fs.utimes(O,P.header.time,P.header.time,function(_){_?S(C("Unable to set times",O)):S()})})}})}}},g)()},writeZip:function(d,p){if(arguments.length===1&&typeof d=="function"&&(p=d,d=""),!d&&r.filename&&(d=r.filename),!!d){var h=i.compressToBuffer();if(h){var g=o.writeFileTo(d,h,!0);typeof p=="function"&&p(g?null:new Error("failed"),"")}}},writeZipPromise:function(d,p){let{overwrite:h,perm:g}=Object.assign({overwrite:!0},p);return new Promise((v,C)=>{!d&&r.filename&&(d=r.filename),d||C("ADM-ZIP: ZIP File Name Missing"),this.toBufferPromise().then(w=>{let y=S=>S?v(S):C("ADM-ZIP: Wasn't able to write zip file");o.writeFileToAsync(d,w,h,g,y)},C)})},toBufferPromise:function(){return new Promise((d,p)=>{i.toAsyncBuffer(d,p)})},toBuffer:function(d,p,h,g){return typeof d=="function"?(i.toAsyncBuffer(d,p,h,g),null):i.compressToBuffer()}}}});var AB=M((ZCe,LB)=>{LB.exports=class{constructor(e){if(!(e>0)||(e-1&e)!==0)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}clear(){this.top=this.btm=0,this.next=null,this.buffer.fill(void 0)}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}}});var KT=M((eEe,OB)=>{var FB=AB();OB.exports=class{constructor(e){this.hwm=e||16,this.head=new FB(this.hwm),this.tail=this.head,this.length=0}clear(){this.head=this.tail,this.head.clear(),this.length=0}push(e){if(this.length++,!this.head.push(e)){let n=this.head;this.head=n.next=new FB(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;let e=this.tail.shift();if(e===void 0&&this.tail.next){let n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return e}peek(){let e=this.tail.peek();return e===void 0&&this.tail.next?this.tail.next.peek():e}isEmpty(){return this.length===0}}});var op=M((tEe,UB)=>{function jne(t){return Buffer.isBuffer(t)||t instanceof Uint8Array}function Vne(t){return Buffer.isEncoding(t)}function Yne(t,e,n){return Buffer.alloc(t,e,n)}function qne(t){return Buffer.allocUnsafe(t)}function Gne(t){return Buffer.allocUnsafeSlow(t)}function zne(t,e){return Buffer.byteLength(t,e)}function Kne(t,e){return Buffer.compare(t,e)}function Xne(t,e){return Buffer.concat(t,e)}function Jne(t,e,n,r,o){return xt(t).copy(e,n,r,o)}function Zne(t,e){return xt(t).equals(e)}function Qne(t,e,n,r,o){return xt(t).fill(e,n,r,o)}function ere(t,e,n){return Buffer.from(t,e,n)}function tre(t,e,n,r){return xt(t).includes(e,n,r)}function nre(t,e,n,r){return xt(t).indexOf(e,n,r)}function rre(t,e,n,r){return xt(t).lastIndexOf(e,n,r)}function ore(t){return xt(t).swap16()}function ire(t){return xt(t).swap32()}function sre(t){return xt(t).swap64()}function xt(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)}function are(t,e,n,r){return xt(t).toString(e,n,r)}function cre(t,e,n,r,o){return xt(t).write(e,n,r,o)}function lre(t,e,n){return xt(t).writeDoubleLE(e,n)}function ure(t,e,n){return xt(t).writeFloatLE(e,n)}function fre(t,e,n){return xt(t).writeUInt32LE(e,n)}function dre(t,e,n){return xt(t).writeInt32LE(e,n)}function mre(t,e){return xt(t).readDoubleLE(e)}function pre(t,e){return xt(t).readFloatLE(e)}function hre(t,e){return xt(t).readUInt32LE(e)}function gre(t,e){return xt(t).readInt32LE(e)}function vre(t,e,n){return xt(t).writeDoubleBE(e,n)}function wre(t,e,n){return xt(t).writeFloatBE(e,n)}function yre(t,e,n){return xt(t).writeUInt32BE(e,n)}function Cre(t,e,n){return xt(t).writeInt32BE(e,n)}function Ere(t,e){return xt(t).readDoubleBE(e)}function Sre(t,e){return xt(t).readFloatBE(e)}function _re(t,e){return xt(t).readUInt32BE(e)}function xre(t,e){return xt(t).readInt32BE(e)}UB.exports={isBuffer:jne,isEncoding:Vne,alloc:Yne,allocUnsafe:qne,allocUnsafeSlow:Gne,byteLength:zne,compare:Kne,concat:Xne,copy:Jne,equals:Zne,fill:Qne,from:ere,includes:tre,indexOf:nre,lastIndexOf:rre,swap16:ore,swap32:ire,swap64:sre,toBuffer:xt,toString:are,write:cre,writeDoubleLE:lre,writeFloatLE:ure,writeUInt32LE:fre,writeInt32LE:dre,readDoubleLE:mre,readFloatLE:pre,readUInt32LE:hre,readInt32LE:gre,writeDoubleBE:vre,writeFloatBE:wre,writeUInt32BE:yre,writeInt32BE:Cre,readDoubleBE:Ere,readFloatBE:Sre,readUInt32BE:_re,readInt32BE:xre}});var $B=M((rEe,MB)=>{var Dre=op();MB.exports=class{constructor(e){this.encoding=e}get remaining(){return 0}decode(e){return Dre.toString(e,this.encoding)}flush(){return""}}});var BB=M((iEe,HB)=>{var Ire=op();HB.exports=class{constructor(){this.codePoint=0,this.bytesSeen=0,this.bytesNeeded=0,this.lowerBoundary=128,this.upperBoundary=191}get remaining(){return this.bytesSeen}decode(e){if(this.bytesNeeded===0){let r=!0;for(let o=Math.max(0,e.byteLength-4),i=e.byteLength;o<i&&r;o++)r=e[o]<=127;if(r)return Ire.toString(e,"utf8")}let n="";for(let r=0,o=e.byteLength;r<o;r++){let i=e[r];if(this.bytesNeeded===0){i<=127?n+=String.fromCharCode(i):(this.bytesSeen=1,i>=194&&i<=223?(this.bytesNeeded=2,this.codePoint=i&31):i>=224&&i<=239?(i===224?this.lowerBoundary=160:i===237&&(this.upperBoundary=159),this.bytesNeeded=3,this.codePoint=i&15):i>=240&&i<=244?(i===240&&(this.lowerBoundary=144),i===244&&(this.upperBoundary=143),this.bytesNeeded=4,this.codePoint=i&7):n+="\uFFFD");continue}if(i<this.lowerBoundary||i>this.upperBoundary){this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,n+="\uFFFD";continue}this.lowerBoundary=128,this.upperBoundary=191,this.codePoint=this.codePoint<<6|i&63,this.bytesSeen++,this.bytesSeen===this.bytesNeeded&&(n+=String.fromCodePoint(this.codePoint),this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0)}return n}flush(){let e=this.bytesNeeded>0?"\uFFFD":"";return this.codePoint=0,this.bytesNeeded=0,this.bytesSeen=0,this.lowerBoundary=128,this.upperBoundary=191,e}}});var jB=M((aEe,WB)=>{var Pre=$B(),bre=BB();WB.exports=class{constructor(e="utf8"){switch(this.encoding=Tre(e),this.encoding){case"utf8":this.decoder=new bre;break;case"utf16le":case"base64":throw new Error("Unsupported encoding: "+this.encoding);default:this.decoder=new Pre(this.encoding)}}get remaining(){return this.decoder.remaining}push(e){return typeof e=="string"?e:this.decoder.decode(e)}write(e){return this.push(e)}end(e){let n="";return e&&(n=this.push(e)),n+=this.decoder.flush(),n}};function Tre(t){switch(t=t.toLowerCase(),t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:throw new Error("Unknown encoding: "+t)}}});var uR=M((cEe,dW)=>{var{EventEmitter:Rre}=require("events"),TS=new Error("Stream was destroyed"),XT=new Error("Premature close"),KB=KT(),Nre=jB(),Zt=(1<<29)-1,qs=1,rR=2,Af=4,bv=8,XB=Zt^qs,kre=Zt^rR,Lv=16,ip=32,cp=64,Dl=128,Av=256,oR=512,Ff=1024,JT=2048,iR=4096,sR=8192,ss=16384,xl=32768,RS=65536,Of=131072,JB=Av|oR,Lre=Lv|RS,Are=cp|Lv,Fre=iR|Dl,aR=Av|Of,Ore=Zt^Lv,Ure=Zt^cp,Mre=Zt^(cp|RS),VB=Zt^RS,$re=Zt^Av,Hre=Zt^(Dl|sR),Bre=Zt^Ff,YB=Zt^JB,ZB=Zt^xl,Wre=Zt^ip,QB=Zt^Of,jre=Zt^aR,fc=1<<18,ap=2<<18,Fv=4<<18,Uf=8<<18,Ov=16<<18,Il=32<<18,ZT=64<<18,sp=128<<18,cR=256<<18,Mf=512<<18,NS=1024<<18,Vre=Zt^(fc|cR),eW=Zt^Fv,Yre=Zt^(fc|Mf),qre=Zt^Ov,Gre=Zt^Uf,tW=Zt^sp,zre=Zt^ap,nW=Zt^NS,Tv=Lv|fc,rW=Zt^Tv,lR=ss|Il,Gs=Af|bv|rR,ri=Gs|qs,oW=Gs|lR,Kre=eW&Ure,kS=sp|xl,Xre=kS&rW,iW=ri|Xre,Jre=ri|Ff|ss,qB=ri|ss|Dl,Zre=ri|Ff|Dl,Qre=ri|iR|Dl|sR,eoe=ri|Lv|Ff|ss|RS|Of,toe=Gs|Ff|ss,noe=ip|ri|xl|cp,roe=xl|qs,ooe=ri|Mf|Il,ioe=Uf|Ov,sW=Uf|fc,soe=Uf|Ov|ri|fc,GB=ri|fc|Uf|NS,aoe=Fv|fc,coe=fc|cR,loe=ri|Mf|sW|Il,uoe=Ov|Gs|Mf|Il,foe=ap|ri|sp|Fv,doe=Mf|Il|Gs,xS=Symbol.asyncIterator||Symbol("asyncIterator"),DS=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapWritable:o,byteLength:i,byteLengthWritable:s}={}){this.stream=e,this.queue=new KB,this.highWaterMark=n,this.buffered=0,this.error=null,this.pipeline=null,this.drains=null,this.byteLength=s||i||fW,this.map=o||r,this.afterWrite=hoe.bind(this),this.afterUpdateNextTick=woe.bind(this)}get ended(){return(this.stream._duplexState&Il)!==0}push(e){return(this.stream._duplexState&doe)!==0?!1:(this.map!==null&&(e=this.map(e)),this.buffered+=this.byteLength(e),this.queue.push(e),this.buffered<this.highWaterMark?(this.stream._duplexState|=Uf,!0):(this.stream._duplexState|=ioe,!1))}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Gre),e}end(e){typeof e=="function"?this.stream.once("finish",e):e!=null&&this.push(e),this.stream._duplexState=(this.stream._duplexState|Mf)&eW}autoBatch(e,n){let r=[],o=this.stream;for(r.push(e);(o._duplexState&GB)===sW;)r.push(o._writableState.shift());if((o._duplexState&ri)!==0)return n(null);o._writev(r,n)}update(){let e=this.stream;e._duplexState|=ap;do{for(;(e._duplexState&GB)===Uf;){let n=this.shift();e._duplexState|=coe,e._write(n,this.afterWrite)}(e._duplexState&aoe)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=zre}updateNonPrimary(){let e=this.stream;if((e._duplexState&loe)===Mf){e._duplexState=e._duplexState|fc,e._final(poe.bind(this));return}if((e._duplexState&Gs)===Af){(e._duplexState&kS)===0&&(e._duplexState|=Tv,e._destroy(aW.bind(this)));return}(e._duplexState&iW)===qs&&(e._duplexState=(e._duplexState|Tv)&XB,e._open(cW.bind(this)))}continueUpdate(){return(this.stream._duplexState&sp)===0?!1:(this.stream._duplexState&=tW,!0)}updateCallback(){(this.stream._duplexState&foe)===Fv?this.update():this.updateNextTick()}updateNextTick(){(this.stream._duplexState&sp)===0&&(this.stream._duplexState|=sp,(this.stream._duplexState&ap)===0&&queueMicrotask(this.afterUpdateNextTick))}},QT=class{constructor(e,{highWaterMark:n=16384,map:r=null,mapReadable:o,byteLength:i,byteLengthReadable:s}={}){this.stream=e,this.queue=new KB,this.highWaterMark=n===0?1:n,this.buffered=0,this.readAhead=n>0,this.error=null,this.pipeline=null,this.byteLength=s||i||fW,this.map=o||r,this.pipeTo=null,this.afterRead=goe.bind(this),this.afterUpdateNextTick=voe.bind(this)}get ended(){return(this.stream._duplexState&ss)!==0}pipe(e,n){if(this.pipeTo!==null)throw new Error("Can only pipe to one destination");if(typeof n!="function"&&(n=null),this.stream._duplexState|=oR,this.pipeTo=e,this.pipeline=new tR(this.stream,e,n),n&&this.stream.on("error",zB),kv(e))e._writableState.pipeline=this.pipeline,n&&e.on("error",zB),e.on("finish",this.pipeline.finished.bind(this.pipeline));else{let r=this.pipeline.done.bind(this.pipeline,e),o=this.pipeline.done.bind(this.pipeline,e,null);e.on("error",r),e.on("close",o),e.on("finish",this.pipeline.finished.bind(this.pipeline))}e.on("drain",moe.bind(this)),this.stream.emit("piping",e),e.emit("pipe",this.stream)}push(e){let n=this.stream;return e===null?(this.highWaterMark=0,n._duplexState=(n._duplexState|Ff)&Mre,!1):this.map!==null&&(e=this.map(e),e===null)?(n._duplexState&=VB,this.buffered<this.highWaterMark):(this.buffered+=this.byteLength(e),this.queue.push(e),n._duplexState=(n._duplexState|Dl)&VB,this.buffered<this.highWaterMark)}shift(){let e=this.queue.shift();return this.buffered-=this.byteLength(e),this.buffered===0&&(this.stream._duplexState&=Hre),e}unshift(e){let n=[this.map!==null?this.map(e):e];for(;this.buffered>0;)n.push(this.shift());for(let r=0;r<n.length-1;r++){let o=n[r];this.buffered+=this.byteLength(o),this.queue.push(o)}this.push(n[n.length-1])}read(){let e=this.stream;if((e._duplexState&qB)===Dl){let n=this.shift();return this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=YB),(e._duplexState&JT)!==0&&e.emit("data",n),n}return this.readAhead===!1&&(e._duplexState|=Of,this.updateNextTick()),null}drain(){let e=this.stream;for(;(e._duplexState&qB)===Dl&&(e._duplexState&JB)!==0;){let n=this.shift();this.pipeTo!==null&&this.pipeTo.write(n)===!1&&(e._duplexState&=YB),(e._duplexState&JT)!==0&&e.emit("data",n)}}update(){let e=this.stream;e._duplexState|=ip;do{for(this.drain();this.buffered<this.highWaterMark&&(e._duplexState&eoe)===Of;)e._duplexState|=Lre,e._read(this.afterRead),this.drain();(e._duplexState&Qre)===Fre&&(e._duplexState|=sR,e.emit("readable")),(e._duplexState&Are)===0&&this.updateNonPrimary()}while(this.continueUpdate()===!0);e._duplexState&=Wre}updateNonPrimary(){let e=this.stream;if((e._duplexState&Zre)===Ff&&(e._duplexState=(e._duplexState|ss)&Bre,e.emit("end"),(e._duplexState&oW)===lR&&(e._duplexState|=Af),this.pipeTo!==null&&this.pipeTo.end()),(e._duplexState&Gs)===Af){(e._duplexState&kS)===0&&(e._duplexState|=Tv,e._destroy(aW.bind(this)));return}(e._duplexState&iW)===qs&&(e._duplexState=(e._duplexState|Tv)&XB,e._open(cW.bind(this)))}continueUpdate(){return(this.stream._duplexState&xl)===0?!1:(this.stream._duplexState&=ZB,!0)}updateCallback(){(this.stream._duplexState&noe)===cp?this.update():this.updateNextTick()}updateNextTickIfOpen(){(this.stream._duplexState&roe)===0&&(this.stream._duplexState|=xl,(this.stream._duplexState&ip)===0&&queueMicrotask(this.afterUpdateNextTick))}updateNextTick(){(this.stream._duplexState&xl)===0&&(this.stream._duplexState|=xl,(this.stream._duplexState&ip)===0&&queueMicrotask(this.afterUpdateNextTick))}},eR=class{constructor(e){this.data=null,this.afterTransform=Coe.bind(e),this.afterFinal=null}},tR=class{constructor(e,n,r){this.from=e,this.to=n,this.afterPipe=r,this.error=null,this.pipeToFinished=!1}finished(){this.pipeToFinished=!0}done(e,n){if(n&&(this.error=n),e===this.to&&(this.to=null,this.from!==null)){((this.from._duplexState&ss)===0||!this.pipeToFinished)&&this.from.destroy(this.error||new Error("Writable stream closed prematurely"));return}if(e===this.from&&(this.from=null,this.to!==null)){(e._duplexState&ss)===0&&this.to.destroy(this.error||new Error("Readable stream closed before ending"));return}this.afterPipe!==null&&this.afterPipe(this.error),this.to=this.from=this.afterPipe=null}};function moe(){this.stream._duplexState|=oR,this.updateCallback()}function poe(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Gs)===0&&(e._duplexState|=Il,e.emit("finish")),(e._duplexState&oW)===lR&&(e._duplexState|=Af),e._duplexState&=Yre,(e._duplexState&ap)===0?this.update():this.updateNextTick()}function aW(t){let e=this.stream;!t&&this.error!==TS&&(t=this.error),t&&e.emit("error",t),e._duplexState|=bv,e.emit("close");let n=e._readableState,r=e._writableState;if(n!==null&&n.pipeline!==null&&n.pipeline.done(e,t),r!==null){for(;r.drains!==null&&r.drains.length>0;)r.drains.shift().resolve(!1);r.pipeline!==null&&r.pipeline.done(e,t)}}function hoe(t){let e=this.stream;t&&e.destroy(t),e._duplexState&=Vre,this.drains!==null&&yoe(this.drains),(e._duplexState&soe)===Ov&&(e._duplexState&=qre,(e._duplexState&ZT)===ZT&&e.emit("drain")),this.updateCallback()}function goe(t){t&&this.stream.destroy(t),this.stream._duplexState&=Ore,this.readAhead===!1&&(this.stream._duplexState&Av)===0&&(this.stream._duplexState&=QB),this.updateCallback()}function voe(){(this.stream._duplexState&ip)===0&&(this.stream._duplexState&=ZB,this.update())}function woe(){(this.stream._duplexState&ap)===0&&(this.stream._duplexState&=tW,this.update())}function yoe(t){for(let e=0;e<t.length;e++)--t[e].writes===0&&(t.shift().resolve(!0),e--)}function cW(t){let e=this.stream;t&&e.destroy(t),(e._duplexState&Af)===0&&((e._duplexState&Jre)===0&&(e._duplexState|=cp),(e._duplexState&ooe)===0&&(e._duplexState|=Fv),e.emit("open")),e._duplexState&=rW,e._writableState!==null&&e._writableState.updateCallback(),e._readableState!==null&&e._readableState.updateCallback()}function Coe(t,e){e!=null&&this.push(e),this._writableState.afterWrite(t)}function Eoe(t){this._readableState!==null&&(t==="data"&&(this._duplexState|=JT|aR,this._readableState.updateNextTick()),t==="readable"&&(this._duplexState|=iR,this._readableState.updateNextTick())),this._writableState!==null&&t==="drain"&&(this._duplexState|=ZT,this._writableState.updateNextTick())}var Rv=class extends Rre{constructor(e){super(),this._duplexState=0,this._readableState=null,this._writableState=null,e&&(e.open&&(this._open=e.open),e.destroy&&(this._destroy=e.destroy),e.predestroy&&(this._predestroy=e.predestroy),e.signal&&e.signal.addEventListener("abort",Noe.bind(this))),this.on("newListener",Eoe)}_open(e){e(null)}_destroy(e){e(null)}_predestroy(){}get readable(){return this._readableState!==null?!0:void 0}get writable(){return this._writableState!==null?!0:void 0}get destroyed(){return(this._duplexState&bv)!==0}get destroying(){return(this._duplexState&Gs)!==0}destroy(e){(this._duplexState&Gs)===0&&(e||(e=TS),this._duplexState=(this._duplexState|Af)&Kre,this._readableState!==null&&(this._readableState.highWaterMark=0,this._readableState.error=e),this._writableState!==null&&(this._writableState.highWaterMark=0,this._writableState.error=e),this._duplexState|=rR,this._predestroy(),this._duplexState&=kre,this._readableState!==null&&this._readableState.updateNextTick(),this._writableState!==null&&this._writableState.updateNextTick())}},IS=class t extends Rv{constructor(e){super(e),this._duplexState|=qs|Il|Of,this._readableState=new QT(this,e),e&&(this._readableState.readAhead===!1&&(this._duplexState&=QB),e.read&&(this._read=e.read),e.eagerOpen&&this._readableState.updateNextTick(),e.encoding&&this.setEncoding(e.encoding))}setEncoding(e){let n=new Nre(e),r=this._readableState.map||xoe;return this._readableState.map=o,this;function o(i){let s=n.push(i);return s===""&&(i.byteLength!==0||n.remaining>0)?null:r(s)}}_read(e){e(null)}pipe(e,n){return this._readableState.updateNextTick(),this._readableState.pipe(e,n),e}read(){return this._readableState.updateNextTick(),this._readableState.read()}push(e){return this._readableState.updateNextTickIfOpen(),this._readableState.push(e)}unshift(e){return this._readableState.updateNextTickIfOpen(),this._readableState.unshift(e)}resume(){return this._duplexState|=aR,this._readableState.updateNextTick(),this}pause(){return this._duplexState&=this._readableState.readAhead===!1?jre:$re,this}static _fromAsyncIterator(e,n){let r,o=new t({...n,read(s){e.next().then(i).then(s.bind(null,null)).catch(s)},predestroy(){r=e.return()},destroy(s){if(!r)return s(null);r.then(s.bind(null,null)).catch(s)}});return o;function i(s){s.done?o.push(null):o.push(s.value)}}static from(e,n){if(boe(e))return e;if(e[xS])return this._fromAsyncIterator(e[xS](),n);Array.isArray(e)||(e=e===void 0?[]:[e]);let r=0;return new t({...n,read(o){this.push(r===e.length?null:e[r++]),o(null)}})}static isBackpressured(e){return(e._duplexState&toe)!==0||e._readableState.buffered>=e._readableState.highWaterMark}static isPaused(e){return(e._duplexState&Av)===0}[xS](){let e=this,n=null,r=null,o=null;return this.on("error",l=>{n=l}),this.on("readable",i),this.on("close",s),{[xS](){return this},next(){return new Promise(function(l,u){r=l,o=u;let f=e.read();f!==null?a(f):(e._duplexState&bv)!==0&&a(null)})},return(){return c(null)},throw(l){return c(l)}};function i(){r!==null&&a(e.read())}function s(){r!==null&&a(null)}function a(l){o!==null&&(n?o(n):l===null&&(e._duplexState&ss)===0?o(TS):r({value:l,done:l===null}),o=r=null)}function c(l){return e.destroy(l),new Promise((u,f)=>{if(e._duplexState&bv)return u({value:void 0,done:!0});e.once("close",function(){l?f(l):u({value:void 0,done:!0})})})}}},PS=class extends Rv{constructor(e){super(e),this._duplexState|=qs|ss,this._writableState=new DS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final),e.eagerOpen&&this._writableState.updateNextTick())}cork(){this._duplexState|=NS}uncork(){this._duplexState&=nW,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}static isBackpressured(e){return(e._duplexState&uoe)!==0}static drained(e){if(e.destroyed)return Promise.resolve(!1);let n=e._writableState,o=(koe(e)?Math.min(1,n.queue.length):n.queue.length)+(e._duplexState&cR?1:0);return o===0?Promise.resolve(!0):(n.drains===null&&(n.drains=[]),new Promise(i=>{n.drains.push({writes:o,resolve:i})}))}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},Nv=class extends IS{constructor(e){super(e),this._duplexState=qs|this._duplexState&Of,this._writableState=new DS(this,e),e&&(e.writev&&(this._writev=e.writev),e.write&&(this._write=e.write),e.final&&(this._final=e.final))}cork(){this._duplexState|=NS}uncork(){this._duplexState&=nW,this._writableState.updateNextTick()}_writev(e,n){n(null)}_write(e,n){this._writableState.autoBatch(e,n)}_final(e){e(null)}write(e){return this._writableState.updateNextTick(),this._writableState.push(e)}end(e){return this._writableState.updateNextTick(),this._writableState.end(e),this}},bS=class extends Nv{constructor(e){super(e),this._transformState=new eR(this),e&&(e.transform&&(this._transform=e.transform),e.flush&&(this._flush=e.flush))}_write(e,n){this._readableState.buffered>=this._readableState.highWaterMark?this._transformState.data=e:this._transform(e,this._transformState.afterTransform)}_read(e){if(this._transformState.data!==null){let n=this._transformState.data;this._transformState.data=null,e(null),this._transform(n,this._transformState.afterTransform)}else e(null)}destroy(e){super.destroy(e),this._transformState.data!==null&&(this._transformState.data=null,this._transformState.afterTransform())}_transform(e,n){n(null,e)}_flush(e){e(null)}_final(e){this._transformState.afterFinal=e,this._flush(Soe.bind(this))}},nR=class extends bS{};function Soe(t,e){let n=this._transformState.afterFinal;if(t)return n(t);e!=null&&this.push(e),this.push(null),n(null)}function _oe(...t){return new Promise((e,n)=>lW(...t,r=>{if(r)return n(r);e()}))}function lW(t,...e){let n=Array.isArray(t)?[...t,...e]:[t,...e],r=n.length&&typeof n[n.length-1]=="function"?n.pop():null;if(n.length<2)throw new Error("Pipeline requires at least 2 streams");let o=n[0],i=null,s=null;for(let l=1;l<n.length;l++)i=n[l],kv(o)?o.pipe(i,c):(a(o,!0,l>1,c),o.pipe(i)),o=i;if(r){let l=!1,u=kv(i)||!!(i._writableState&&i._writableState.autoDestroy);i.on("error",f=>{s===null&&(s=f)}),i.on("finish",()=>{l=!0,u||r(s)}),u&&i.on("close",()=>r(s||(l?null:XT)))}return i;function a(l,u,f,m){l.on("error",m),l.on("close",d);function d(){if(u&&l._readableState&&!l._readableState.ended||f&&l._writableState&&!l._writableState.ended)return m(XT)}}function c(l){if(!(!l||s)){s=l;for(let u of n)u.destroy(l)}}}function xoe(t){return t}function uW(t){return!!t._readableState||!!t._writableState}function kv(t){return typeof t._duplexState=="number"&&uW(t)}function Doe(t){return!!t._readableState&&t._readableState.ended}function Ioe(t){return!!t._writableState&&t._writableState.ended}function Poe(t,e={}){let n=t._readableState&&t._readableState.error||t._writableState&&t._writableState.error;return!e.all&&n===TS?null:n}function boe(t){return kv(t)&&t.readable}function Toe(t){return(t._duplexState&qs)!==qs||(t._duplexState&kS)!==0}function Roe(t){return typeof t=="object"&&t!==null&&typeof t.byteLength=="number"}function fW(t){return Roe(t)?t.byteLength:1024}function zB(){}function Noe(){this.destroy(new Error("Stream aborted."))}function koe(t){return t._writev!==PS.prototype._writev&&t._writev!==Nv.prototype._writev}dW.exports={pipeline:lW,pipelinePromise:_oe,isStream:uW,isStreamx:kv,isEnded:Doe,isFinished:Ioe,isDisturbed:Toe,getStreamError:Poe,Stream:Rv,Writable:PS,Readable:IS,Duplex:Nv,Transform:bS,PassThrough:nR}});var mR=M(up=>{var ct=op(),Loe="0000000000000000000",Aoe="7777777777777777777",LS=48,mW=ct.from([117,115,116,97,114,0]),Foe=ct.from([LS,LS]),Ooe=ct.from([117,115,116,97,114,32]),Uoe=ct.from([32,0]),Moe=4095,Uv=257,dR=263;up.decodeLongPath=function(e,n){return lp(e,0,e.length,n)};up.encodePax=function(e){let n="";e.name&&(n+=fR(" path="+e.name+`
`)),e.linkname&&(n+=fR(" linkpath="+e.linkname+`
`));let r=e.pax;if(r)for(let o in r)n+=fR(" "+o+"="+r[o]+`
`);return ct.from(n)};up.decodePax=function(e){let n={};for(;e.length;){let r=0;for(;r<e.length&&e[r]!==32;)r++;let o=parseInt(ct.toString(e.subarray(0,r)),10);if(!o)return n;let i=ct.toString(e.subarray(r+1,o-1)),s=i.indexOf("=");if(s===-1)return n;n[i.slice(0,s)]=i.slice(s+1),e=e.subarray(o)}return n};up.encode=function(e){let n=ct.alloc(512),r=e.name,o="";if(e.typeflag===5&&r[r.length-1]!=="/"&&(r+="/"),ct.byteLength(r)!==r.length)return null;for(;ct.byteLength(r)>100;){let i=r.indexOf("/");if(i===-1)return null;o+=o?"/"+r.slice(0,i):r.slice(0,i),r=r.slice(i+1)}return ct.byteLength(r)>100||ct.byteLength(o)>155||e.linkname&&ct.byteLength(e.linkname)>100?null:(ct.write(n,r),ct.write(n,bl(e.mode&Moe,6),100),ct.write(n,bl(e.uid,6),108),ct.write(n,bl(e.gid,6),116),Yoe(e.size,n,124),ct.write(n,bl(e.mtime.getTime()/1e3|0,11),136),n[156]=LS+joe(e.type),e.linkname&&ct.write(n,e.linkname,157),ct.copy(mW,n,Uv),ct.copy(Foe,n,dR),e.uname&&ct.write(n,e.uname,265),e.gname&&ct.write(n,e.gname,297),ct.write(n,bl(e.devmajor||0,6),329),ct.write(n,bl(e.devminor||0,6),337),o&&ct.write(n,o,345),ct.write(n,bl(hW(n),6),148),n)};up.decode=function(e,n,r){let o=e[156]===0?0:e[156]-LS,i=lp(e,0,100,n),s=Pl(e,100,8),a=Pl(e,108,8),c=Pl(e,116,8),l=Pl(e,124,12),u=Pl(e,136,12),f=Woe(o),m=e[157]===0?null:lp(e,157,100,n),d=lp(e,265,32),p=lp(e,297,32),h=Pl(e,329,8),g=Pl(e,337,8),v=hW(e);if(v===8*32)return null;if(v!==Pl(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if($oe(e))e[345]&&(i=lp(e,345,155,n)+"/"+i);else if(!Hoe(e)){if(!r)throw new Error("Invalid tar header: unknown format.")}return o===0&&i&&i[i.length-1]==="/"&&(o=5),{name:i,mode:s,uid:a,gid:c,size:l,mtime:new Date(1e3*u),type:f,linkname:m,uname:d,gname:p,devmajor:h,devminor:g,pax:null}};function $oe(t){return ct.equals(mW,t.subarray(Uv,Uv+6))}function Hoe(t){return ct.equals(Ooe,t.subarray(Uv,Uv+6))&&ct.equals(Uoe,t.subarray(dR,dR+2))}function Boe(t,e,n){return typeof t!="number"?n:(t=~~t,t>=e?e:t>=0||(t+=e,t>=0)?t:0)}function Woe(t){switch(t){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}function joe(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}function pW(t,e,n,r){for(;n<r;n++)if(t[n]===e)return n;return r}function hW(t){let e=256;for(let n=0;n<148;n++)e+=t[n];for(let n=156;n<512;n++)e+=t[n];return e}function bl(t,e){return t=t.toString(8),t.length>e?Aoe.slice(0,e)+" ":Loe.slice(0,e-t.length)+t+" "}function Voe(t,e,n){e[n]=128;for(let r=11;r>0;r--)e[n+r]=t&255,t=Math.floor(t/256)}function Yoe(t,e,n){t.toString(8).length>11?Voe(t,e,n):ct.write(e,bl(t,11),n)}function qoe(t){let e;if(t[0]===128)e=!0;else if(t[0]===255)e=!1;else return null;let n=[],r;for(r=t.length-1;r>0;r--){let s=t[r];e?n.push(s):n.push(255-s)}let o=0,i=n.length;for(r=0;r<i;r++)o+=n[r]*Math.pow(256,r);return e?o:-1*o}function Pl(t,e,n){if(t=t.subarray(e,e+n),e=0,t[e]&128)return qoe(t);{for(;e<t.length&&t[e]===32;)e++;let r=Boe(pW(t,32,e,t.length),t.length,t.length);for(;e<r&&t[e]===0;)e++;return r===e?0:parseInt(ct.toString(t.subarray(e,r)),8)}}function lp(t,e,n,r){return ct.toString(t.subarray(e,pW(t,0,e,e+n)),r)}function fR(t){let e=ct.byteLength(t),n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,e+n+t}});var CW=M((uEe,yW)=>{var{Writable:Goe,Readable:zoe,getStreamError:gW}=uR(),Koe=KT(),vW=op(),fp=mR(),Xoe=vW.alloc(0),hR=class{constructor(){this.buffered=0,this.shifted=0,this.queue=new Koe,this._offset=0}push(e){this.buffered+=e.byteLength,this.queue.push(e)}shiftFirst(e){return this._buffered===0?null:this._next(e)}shift(e){if(e>this.buffered)return null;if(e===0)return Xoe;let n=this._next(e);if(e===n.byteLength)return n;let r=[n];for(;(e-=n.byteLength)>0;)n=this._next(e),r.push(n);return vW.concat(r)}_next(e){let n=this.queue.peek(),r=n.byteLength-this._offset;if(e>=r){let o=this._offset?n.subarray(this._offset,n.byteLength):n;return this.queue.shift(),this._offset=0,this.buffered-=r,this.shifted+=r,o}return this.buffered-=e,this.shifted+=e,n.subarray(this._offset,this._offset+=e)}},gR=class extends zoe{constructor(e,n,r){super(),this.header=n,this.offset=r,this._parent=e}_read(e){this.header.size===0&&this.push(null),this._parent._stream===this&&this._parent._update(),e(null)}_predestroy(){this._parent.destroy(gW(this))}_detach(){this._parent._stream===this&&(this._parent._stream=null,this._parent._missing=wW(this.header.size),this._parent._update())}_destroy(e){this._detach(),e(null)}},vR=class extends Goe{constructor(e){super(e),e||(e={}),this._buffer=new hR,this._offset=0,this._header=null,this._stream=null,this._missing=0,this._longHeader=!1,this._callback=pR,this._locked=!1,this._finished=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null,this._filenameEncoding=e.filenameEncoding||"utf-8",this._allowUnknownFormat=!!e.allowUnknownFormat,this._unlockBound=this._unlock.bind(this)}_unlock(e){if(this._locked=!1,e){this.destroy(e),this._continueWrite(e);return}this._update()}_consumeHeader(){if(this._locked)return!1;this._offset=this._buffer.shifted;try{this._header=fp.decode(this._buffer.shift(512),this._filenameEncoding,this._allowUnknownFormat)}catch(e){return this._continueWrite(e),!1}if(!this._header)return!0;switch(this._header.type){case"gnu-long-path":case"gnu-long-link-path":case"pax-global-header":case"pax-header":return this._longHeader=!0,this._missing=this._header.size,!0}return this._locked=!0,this._applyLongHeaders(),this._header.size===0||this._header.type==="directory"?(this.emit("entry",this._header,this._createStream(),this._unlockBound),!0):(this._stream=this._createStream(),this._missing=this._header.size,this.emit("entry",this._header,this._stream,this._unlockBound),!0)}_applyLongHeaders(){this._gnuLongPath&&(this._header.name=this._gnuLongPath,this._gnuLongPath=null),this._gnuLongLinkPath&&(this._header.linkname=this._gnuLongLinkPath,this._gnuLongLinkPath=null),this._pax&&(this._pax.path&&(this._header.name=this._pax.path),this._pax.linkpath&&(this._header.linkname=this._pax.linkpath),this._pax.size&&(this._header.size=parseInt(this._pax.size,10)),this._header.pax=this._pax,this._pax=null)}_decodeLongHeader(e){switch(this._header.type){case"gnu-long-path":this._gnuLongPath=fp.decodeLongPath(e,this._filenameEncoding);break;case"gnu-long-link-path":this._gnuLongLinkPath=fp.decodeLongPath(e,this._filenameEncoding);break;case"pax-global-header":this._paxGlobal=fp.decodePax(e);break;case"pax-header":this._pax=this._paxGlobal===null?fp.decodePax(e):Object.assign({},this._paxGlobal,fp.decodePax(e));break}}_consumeLongHeader(){this._longHeader=!1,this._missing=wW(this._header.size);let e=this._buffer.shift(this._header.size);try{this._decodeLongHeader(e)}catch(n){return this._continueWrite(n),!1}return!0}_consumeStream(){let e=this._buffer.shiftFirst(this._missing);if(e===null)return!1;this._missing-=e.byteLength;let n=this._stream.push(e);return this._missing===0?(this._stream.push(null),n&&this._stream._detach(),n&&this._locked===!1):n}_createStream(){return new gR(this,this._header,this._offset)}_update(){for(;this._buffer.buffered>0&&!this.destroying;){if(this._missing>0){if(this._stream!==null){if(this._consumeStream()===!1)return;continue}if(this._longHeader===!0){if(this._missing>this._buffer.buffered)break;if(this._consumeLongHeader()===!1)return!1;continue}let e=this._buffer.shiftFirst(this._missing);e!==null&&(this._missing-=e.byteLength);continue}if(this._buffer.buffered<512)break;if(this._stream!==null||this._consumeHeader()===!1)return}this._continueWrite(null)}_continueWrite(e){let n=this._callback;this._callback=pR,n(e)}_write(e,n){this._callback=n,this._buffer.push(e),this._update()}_final(e){this._finished=this._missing===0&&this._buffer.buffered===0,e(this._finished?null:new Error("Unexpected end of data"))}_predestroy(){this._continueWrite(null)}_destroy(e){this._stream&&this._stream.destroy(gW(this)),e(null)}[Symbol.asyncIterator](){let e=null,n=null,r=null,o=null,i=null,s=this;return this.on("entry",l),this.on("error",m=>{e=m}),this.on("close",u),{[Symbol.asyncIterator](){return this},next(){return new Promise(c)},return(){return f(null)},throw(m){return f(m)}};function a(m){if(!i)return;let d=i;i=null,d(m)}function c(m,d){if(e)return d(e);if(o){m({value:o,done:!1}),o=null;return}n=m,r=d,a(null),s._finished&&n&&(n({value:void 0,done:!0}),n=r=null)}function l(m,d,p){i=p,d.on("error",pR),n?(n({value:d,done:!1}),n=r=null):o=d}function u(){a(e),n&&(e?r(e):n({value:void 0,done:!0}),n=r=null)}function f(m){return s.destroy(m),a(m),new Promise((d,p)=>{if(s.destroyed)return d({value:void 0,done:!0});s.once("close",function(){m?p(m):d({value:void 0,done:!0})})})}}};yW.exports=function(e){return new vR(e)};function pR(){}function wW(t){return t&=511,t&&512-t}});var SW=M((fEe,wR)=>{var EW={S_IFMT:61440,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960};try{wR.exports=require("fs").constants||EW}catch{wR.exports=EW}});var PW=M((dEe,IW)=>{var{Readable:Joe,Writable:Zoe,getStreamError:_W}=uR(),$f=op(),dp=SW(),AS=mR(),Qoe=493,eie=420,xW=$f.alloc(1024),CR=class extends Zoe{constructor(e,n,r){super({mapWritable:nie,eagerOpen:!0}),this.written=0,this.header=n,this._callback=r,this._linkname=null,this._isLinkname=n.type==="symlink"&&!n.linkname,this._isVoid=n.type!=="file"&&n.type!=="contiguous-file",this._finished=!1,this._pack=e,this._openCallback=null,this._pack._stream===null?this._pack._stream=this:this._pack._pending.push(this)}_open(e){this._openCallback=e,this._pack._stream===this&&this._continueOpen()}_continuePack(e){if(this._callback===null)return;let n=this._callback;this._callback=null,n(e)}_continueOpen(){this._pack._stream===null&&(this._pack._stream=this);let e=this._openCallback;if(this._openCallback=null,e!==null){if(this._pack.destroying)return e(new Error("pack stream destroyed"));if(this._pack._finalized)return e(new Error("pack stream is already finalized"));this._pack._stream=this,this._isLinkname||this._pack._encode(this.header),this._isVoid&&(this._finish(),this._continuePack(null)),e(null)}}_write(e,n){if(this._isLinkname)return this._linkname=this._linkname?$f.concat([this._linkname,e]):e,n(null);if(this._isVoid)return e.byteLength>0?n(new Error("No body allowed for this entry")):n();if(this.written+=e.byteLength,this._pack.push(e))return n();this._pack._drain=n}_finish(){this._finished||(this._finished=!0,this._isLinkname&&(this.header.linkname=this._linkname?$f.toString(this._linkname,"utf-8"):"",this._pack._encode(this.header)),DW(this._pack,this.header.size),this._pack._done(this))}_final(e){if(this.written!==this.header.size)return e(new Error("Size mismatch"));this._finish(),e(null)}_getError(){return _W(this)||new Error("tar entry destroyed")}_predestroy(){this._pack.destroy(this._getError())}_destroy(e){this._pack._done(this),this._continuePack(this._finished?null:this._getError()),e()}},ER=class extends Joe{constructor(e){super(e),this._drain=yR,this._finalized=!1,this._finalizing=!1,this._pending=[],this._stream=null}entry(e,n,r){if(this._finalized||this.destroying)throw new Error("already finalized or destroyed");typeof n=="function"&&(r=n,n=null),r||(r=yR),(!e.size||e.type==="symlink")&&(e.size=0),e.type||(e.type=tie(e.mode)),e.mode||(e.mode=e.type==="directory"?Qoe:eie),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),typeof n=="string"&&(n=$f.from(n));let o=new CR(this,e,r);return $f.isBuffer(n)?(e.size=n.byteLength,o.write(n),o.end(),o):(o._isVoid,o)}finalize(){if(this._stream||this._pending.length>0){this._finalizing=!0;return}this._finalized||(this._finalized=!0,this.push(xW),this.push(null))}_done(e){e===this._stream&&(this._stream=null,this._finalizing&&this.finalize(),this._pending.length&&this._pending.shift()._continueOpen())}_encode(e){if(!e.pax){let n=AS.encode(e);if(n){this.push(n);return}}this._encodePax(e)}_encodePax(e){let n=AS.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:n.byteLength,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(AS.encode(r)),this.push(n),DW(this,n.byteLength),r.size=e.size,r.type=e.type,this.push(AS.encode(r))}_doDrain(){let e=this._drain;this._drain=yR,e()}_predestroy(){let e=_W(this);for(this._stream&&this._stream.destroy(e);this._pending.length;){let n=this._pending.shift();n.destroy(e),n._continueOpen()}this._doDrain()}_read(e){this._doDrain(),e()}};IW.exports=function(e){return new ER(e)};function tie(t){switch(t&dp.S_IFMT){case dp.S_IFBLK:return"block-device";case dp.S_IFCHR:return"character-device";case dp.S_IFDIR:return"directory";case dp.S_IFIFO:return"fifo";case dp.S_IFLNK:return"symlink"}return"file"}function yR(){}function DW(t,e){e&=511,e&&t.push(xW.subarray(0,512-e))}function nie(t){return $f.isBuffer(t)?t:$f.from(t)}});var bW=M(SR=>{SR.extract=CW();SR.pack=PW()});var _R=M((wEe,NW)=>{NW.exports=function(e,n,r){e(n),r&&r(n===!0?null:n)}});var OS=M((yEe,LW)=>{"use strict";var kW=_R();LW.exports=function(e,n){if(!e)return function(o,i){return o?kW(i,o,n):i(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(o){return e[o]}));var r=0;return function(o,i){if(o)return kW(i,o,n);r>=e.length?i(!0):i(null,e[r++])}}});var FW=M((CEe,AW)=>{"use strict";var iie=OS();AW.exports=function(t){return iie(Object.keys(t))}});var xR=M((EEe,OW)=>{"use strict";var sie=_R();OW.exports=function(e,n){return function(r,o){if(r)return sie(o,r,n);if(e!=null){var i=e;e=null,o(null,i)}else o(!0)}}});var MW=M((SEe,UW)=>{"use strict";UW.exports=function(e){var n=0;return e=e||1/0,function(r,o){if(r)return o&&o(r);if(n>e)return o(!0);o(null,n++)}}});var HW=M((_Ee,$W)=>{"use strict";$W.exports=function(e){return e=e||Math.random,function(n,r){return n?r&&r(n):r(null,e())}}});var WW=M((xEe,BW)=>{"use strict";BW.exports=function(){return function(e,n){n(!0)}}});var VW=M((DEe,jW)=>{"use strict";jW.exports=function(e){return function(n,r){r(e)}}});var qW=M((IEe,YW)=>{"use strict";YW.exports={keys:FW(),once:xR(),values:OS(),count:MW(),infinite:HW(),empty:WW(),error:VW()}});var mp=M((PEe,GW)=>{"use strict";GW.exports=function(e,n){var r,o,i;n||(i=new Error("no done callback supplied"));function s(a){if(r=a,o)return s.abort();(function c(){for(var l=!0,u=!1;l;)if(u=!1,r(null,function(f,m){if(u=!0,f=f||o){if(l=!1,n)n(f===!0?null:f);else if(f&&f!==!0)throw console.warn(i),f}else e&&e(m)===!1||o?(l=!1,r(o||!0,n||function(){})):l||c()}),!u){l=!1;return}})()}return s.abort=function(a,c){if(typeof a=="function"&&(c=a,a=!0),o=a||!0,r)return r(o,c||function(){})},s}});var KW=M((bEe,zW)=>{"use strict";var aie=mp();zW.exports=function(e){return aie(null,e)}});var JW=M((TEe,XW)=>{"use strict";var cie=mp();XW.exports=function(e){return cie(function(n){console.log(n)},e)}});var pp=M((REe,ZW)=>{ZW.exports=function(e){return e&&(typeof e=="string"?function(n){return n[e]}:typeof e=="object"&&typeof e.exec=="function"?function(n){var r=e.exec(n);return r&&r[0]}:e)}});var tj=M((NEe,ej)=>{"use strict";function QW(t){return t}var lie=pp(),uie=mp();ej.exports=function(e,n){var r=!1;return n?e=lie(e)||QW:(n=e,e=QW),uie(function(o){if(e(o))return r=!0,n(null,o),!1},function(o){r||n(o===!0?null:o,null)})}});var US=M((kEe,nj)=>{"use strict";var fie=mp();nj.exports=function(e,n,r){r||(r=n,n=null);var o=fie(function(i){n=e(n,i)},function(i){r(i,n)});return arguments.length===2?function(i){i(null,function(s,a){if(s)return r(s===!0?null:s);n=a,o(i)})}:o}});var DR=M((LEe,rj)=>{"use strict";var die=US();rj.exports=function(e){return die(function(n,r){return n.push(r),n},[],e)}});var ij=M((AEe,oj)=>{"use strict";var mie=DR();oj.exports=function(){return e=>{let n,r,o=new Promise((i,s)=>{n=i,r=s});return mie((i,s)=>{i?r(i):n(s)})(e),o}}});var aj=M((FEe,sj)=>{"use strict";var pie=US();sj.exports=function(e){return pie(function(n,r){return n+r},"",e)}});var lj=M((OEe,cj)=>{"use strict";cj.exports={drain:mp(),onEnd:KW(),log:JW(),find:tj(),reduce:US(),collect:DR(),collectAsPromise:ij(),concat:aj()}});var fj=M((UEe,uj)=>{"use strict";function hie(t){return t}var gie=pp();uj.exports=function(e){return e?(e=gie(e),function(n){return function(r,o){n(r,function(i,s){try{s=i?null:e(s)}catch(a){return n(a,function(){return o(a)})}o(i,s)})}}):hie}});var mj=M((MEe,dj)=>{"use strict";function vie(t){return t}var wie=pp();dj.exports=function(e){if(!e)return vie;e=wie(e);var n=!1,r,o;return function(i){return function s(a,c){if(o)return c(o);a?(o=a,n?i(a,function(l){n?r=c:c(a)}):i(a,function(l){c(a)})):i(null,function(l,u){l?c(l):o?c(o):(n=!0,e(u,function(f,m){n=!1,o?(c(o),r&&r(o)):f?s(f,c):c(null,m)}))})}}}});var IR=M(($Ee,pj)=>{var yie=pp();function Cie(t){return t}pj.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(n){return e.test(n)}:yie(e)||Cie}});var MS=M((HEe,hj)=>{"use strict";var Eie=IR();hj.exports=function(e){return e=Eie(e),function(n){return function r(o,i){for(var s,a=!0;a;)a=!1,s=!0,n(o,function(c,l){if(!c&&!e(l))return s?a=!0:r(c,i);i(c,l)}),s=!1}}}});var vj=M((BEe,gj)=>{"use strict";var Sie=IR(),_ie=MS();gj.exports=function(e){return e=Sie(e),_ie(function(n){return!e(n)})}});var yj=M((WEe,wj)=>{"use strict";wj.exports=function(e,n){var r=!1;function o(i){r||!n||(r=!0,n(i===!0?null:i))}return function(i){return function(s,a){return s&&o(s),i(s,function(c,l){c?o(c):e&&e(l),a(c,l)})}}}});var Ej=M((jEe,Cj)=>{"use strict";Cj.exports=function(e,n){n=n||{};var r=n.last||!1,o=!1;if(typeof e=="number"){r=!0;var i=e;e=function(){return--i}}return function(s){function a(c){s(!0,function(l){r=!1,c(l||!0)})}return function(c,l){o&&!c?r?a(l):l(o):(o=c)?s(o,l):s(null,function(u,f){(o=o||u)?l(o):e(f)?l(null,f):(o=!0,r?l(null,f):a(l))})}}}});var PR=M((VEe,Sj)=>{"use strict";function xie(t){return t}var Die=pp(),Iie=MS();Sj.exports=function(e,n){e=Die(e)||xie;var r={};return Iie(function(o){var i=e(o);return r[i]?!!n:(r[i]=!0,!n)})}});var xj=M((YEe,_j)=>{"use strict";var Pie=PR();_j.exports=function(e){return Pie(e,!0)}});var Ij=M((qEe,Dj)=>{"use strict";var bie=OS(),Tie=xR();Dj.exports=function(){return function(e){var n;return function(r,o){r?n?n(r,function(a){e(a||r,o)}):e(r,o):n?i():s();function i(){n(null,function(a,c){a?a===!0?s():e(!0,function(l){o(a)}):o(null,c)})}function s(){n=null,e(null,function(a,c){if(a)return o(a);c&&typeof c=="object"?c=bie(c):typeof c!="function"&&(c=Tie(c)),n=c,i()})}}}}});var bj=M((GEe,Pj)=>{"use strict";Pj.exports={map:fj(),asyncMap:mj(),filter:MS(),filterNot:vj(),through:yj(),take:Ej(),unique:PR(),nonUnique:xj(),flatten:Ij()}});var bR=M((zEe,Tj)=>{"use strict";Tj.exports=function t(e){var n=arguments.length;if(typeof e=="function"&&e.length===1){for(var r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return function(a){if(r==null)throw new TypeError("partial sink should only be called once!");var c=r;switch(r=null,n){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var i=e;i&&typeof i.source=="function"&&(i=i.source);for(var o=1;o<n;o++){var s=arguments[o];typeof s=="function"?i=s(i):s&&typeof s=="object"&&(s.sink(i),i=s.source)}return i}});var $v=M((Hf,Lj)=>{"use strict";var Rj=qW(),Nj=lj(),kj=bj();Hf=Lj.exports=bR();Hf.pull=Hf;for(as in Rj)Hf[as]=Rj[as];var as;for(as in kj)Hf[as]=kj[as];var as;for(as in Nj)Hf[as]=Nj[as];var as});var $R=M((_Se,tV)=>{var SSe=tV.exports=function(t){(function e(){var n=!0,r=!1,o=!1;do o=!0,n=!1,t.call(this,function(){o?n=!0:e()}),o=!1;while(n)})()}});var rV=M((xSe,nV)=>{var qie=$R();nV.exports=function(t,e){return function(n){var r=[],o,i;function s(l){r.push(l)}t=t||function(l){this.queue(l)},e=e||function(){this.queue(null)};var a={emit:function(l,u){l=="data"&&s(u),l=="end"&&(o=!0,s(null)),l=="error"&&(i=u)},queue:s},c;return function(l,u){if(o=o||l,l)return n(l,function(){if(c){var f=c;c=null,f(l)}u(l)});c=u,qie(function f(m){if(c)if(u=c,i)c=null,u(i);else if(r.length){var d=r.shift();c=null,u(d===null,d)}else n(o,function(p,h){if(p&&p!==!0)return i=p,m();if(o=o||p)e.call(a);else if(h!==null&&(t.call(a,h),i||o))return n(i||o,function(){c=null,u(i||o)});m(f)})})}}}});var iV=M((DSe,oV)=>{oV.exports=function(){var t=[],e=0;function n(){return t.reduce(function(r,o){return r+o.length},0)}return{length:e,data:this,add:function(r){if(!Buffer.isBuffer(r))throw new Error("data must be a buffer, was: "+JSON.stringify(r));return this.length=e=e+r.length,t.push(r),this},has:function(r){return r==null?e>0:e>=r},get:function(r){var o;if(r==null||r===e){e=0;var i=t;return t=[],i.length==1?i[0]:Buffer.concat(i)}else if(t.length>1&&r<=(o=t[0].length)){var s=t[0].slice(0,r);return r===o?t.shift():t[0]=t[0].slice(r,o),e-=r,s}else if(r<e){for(var a=[],c=0;c+t[0].length<r;){var l=t.shift();c+=l.length,a.push(l)}return c<r&&(a.push(t[0].slice(0,r-c)),t[0]=t[0].slice(r-c,t[0].length),this.length=e=e-r),Buffer.concat(a)}else throw new Error("could not get "+r+" bytes")}}}});var lV=M((ISe,cV)=>{"use strict";var Gie=iV();function zie(t){return Number.isFinite(t)}function sV(t){return typeof t=="function"}function aV(t,e){return e?function(n,r){var o=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),r)},e);t(n,function(i,s){clearTimeout(o),r(i,s)})}:t}cV.exports=function(t){var e=[],n,r,o=!1,i=Gie(),s,a,c;function l(){for(;e.length;)if(e[0].length==null&&i.has(1))e.shift().cb(null,i.get());else if(i.has(e[0].length)){var m=e.shift();m.cb(null,i.get(m.length))}else if(s==!0&&e[0].length&&i.length<e[0].length){var d="stream ended with:"+i.length+" but wanted:"+e[0].length;e.shift().cb(new Error(d))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!i.has(1)||c}function u(){var m=l();m&&!o&&n&&!o&&!a&&(o=!0,r(null,function(d,p){if(o=!1,d)return s=d,l();i.add(p),u()}))}function f(m){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}r=aV(m,t),n=m,u()}return f.abort=function(m,d){c=m||!0,n?(o=!0,n(c,function(){for(;e.length;)e.shift().cb(c);d&&d(c)})):d()},f.read=function(m,d,p){if(sV(d)&&(p=d,d=t),sV(p))e.push({length:zie(m)?m:null,cb:p}),u();else return a=!0,function(h,g){if(o||i.has(1)){if(h)return n(h,g);e.push({length:null,cb:g}),u()}else aV(n,d)(h,function(v,C){g(v,C)})}},f}});var EV=M((Wf,CV)=>{var Kie=rV(),Xie=lV(),uV=KC(),fV=0,dV=1,mV=2,pV="GOODBYE";function hV(t){let e=Buffer.alloc(9),n=0,r=t.value!==void 0?t.value:t.end;return typeof t=="string"&&t===pV?(e.fill(0),[e,null]):(typeof r=="string"?(n=dV,r=Buffer.from(r,"utf-8")):Buffer.isBuffer(r)?n=fV:(n=mV,r=Buffer.from(JSON.stringify(r),"utf-8")),n=t.stream<<3|t.end<<2|n,e[0]=n,e.writeUInt32BE(r.length,1),e.writeInt32BE(t.req||0,5),[e,r])}function gV(t){if(t.length!==9)throw new Error("expected header to be 9 bytes long");let e=t[0],n=t.readUInt32BE(1);return{req:t.readInt32BE(5),stream:!!(e&8),end:!!(e&4),value:null,length:n,type:e&3}}function vV(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(e.type===fV)e.value=t;else if(e.type===dV)e.value=t.toString();else if(e.type===mV)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function wV(t){return Kie(function(n){t&&t("encoded: %o",n);let[r,o]=hV(n);this.queue(r),o!==null&&this.queue(o)})}function yV(t){let e=Xie(),n=!1;return function(o){return e(o),function(s,a){if(n)return a(!0);if(s)return e.abort(s,a);e.read(9,function(l,u){if(l)return a(l);let f=gV(u);if(f.length===0)return n=!0,a(null,pV);e.read(f.length,function(d,p){if(d)return a(d);try{vV(p,f)}catch(h){return a(h)}t&&t("decoded: %o",f),a(null,f)})})}}}Wf=CV.exports=function(e,n){let r=n===!0?uV("packet-stream-codec"):typeof n=="string"?uV(n):null;return{source:wV(r)(e.source),sink(o){return e.sink(yV(r)(o))}}};Wf.encodePair=hV;Wf.decodeHead=gV;Wf.decodeBody=vV;Wf.encode=wV;Wf.decode=yV});var HR=M((PSe,SV)=>{function Jie(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}function Zie(t){console.error("packet-stream asked to read after closed",t)}SV.exports={flat:Jie,closedread:Zie}});var DV=M((bSe,xV)=>{var{flat:_V,closedread:Qie}=HR();function WS(t,e,n){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=n}WS.prototype.write=function(t,e){let n=this._ps;e?(this.writeEnd=e,n&&(n.read({req:this.id,stream:!0,end:!0,value:_V(e)}),this.readEnd&&this.destroy(e),n._maybedone(e))):n&&n.read({req:this.id,stream:!0,end:!1,value:t})};WS.prototype.end=function(t){this.write(null,_V(t||!0))};WS.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=Qie,this._ps=null)};xV.exports=WS});var bV=M((TSe,PV)=>{var IV=DV(),{flat:BR,closedread:ese}=HR();function Ui(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests=new Map,this._instreams=new Map,this._outstreams=new Map,this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}Ui.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};Ui.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));let n=this._req_counter++;this._requests.set(n,(r,o)=>{this._requests.delete(n),e(r,o),this._maybedone(r)}),this.read({req:n,stream:!1,end:!1,value:t})};Ui.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");let t=this._req_counter++,e=new IV(t,this,()=>{this._outstreams.delete(t)});return this._outstreams.set(t,e),e};Ui.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};Ui.prototype.destroy=function(t){t=t||BR(t),this.ended=t,this._closing=!0;let e=t===!0?new Error("unexpected end of parent stream"):t,n=0;this._requests.forEach(r=>{n++,r(e)}),this._instreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),this._outstreams.forEach(r=>{n++,r.writeEnd=!0,r.destroy(e)}),n===0&&t===!0&&(e=null),this._maybedone(e)};Ui.prototype._maybedone=function(t){this._closed||!this._closing||this._requests.size!==0||this._instreams.size!==0||this._outstreams.size!==0||(this.read(null,t||!0),this._closed=!0,this._closecbs.forEach(e=>{e(t)}),this.opts=null,this._closecbs.length=0,this.read=ese,this._requests.clear(),this._instreams.clear(),this._outstreams.clear())};Ui.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};Ui.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};Ui.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};Ui.prototype._onrequest=function(t){let e=t.req*-1;if(t.req<0)this._requests.has(e)&&this._requests.get(e)(t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){let n=!1;this.opts.request(t.value,(r,o)=>{if(n)throw new Error("cb called twice from local api");n=!0,r?this.read({value:BR(r),end:!0,req:e}):this.read({value:o,end:!1,req:e}),this._maybedone()})}else{if(this.ended){let n=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:BR(n),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};Ui.prototype._onstream=function(t){if(t.req<0){let e=t.req*-1,n=this._outstreams.get(e);if(!n)return console.error("no stream for incoming msg",t);t.end?(n.writeEnd&&this._outstreams.delete(e),n.readEnd=!0,n.read(null,t.value),this._maybedone()):n.read(t.value)}else{let e=t.req,n=this._instreams.get(e);n||(n=new IV(e*-1,this,()=>{this._instreams.delete(e)}),this._instreams.set(e,n),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)),t.end?(n.writeEnd&&this._instreams.delete(e),n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};PV.exports=t=>new Ui(t)});var RV=M((RSe,jv)=>{"use strict";var tse=$v();function nse(t){let e=!1;return(n,r)=>{e||(e=!0,t(n,r))}}function WR(t,e){let n=[],r=!1,o=!1,i,s,a=nse((c,l)=>{e&&e(c,l),t=null,e=null,i=null,s&&s(c||!0,()=>{})});return t.read=function(c,l){if(r=r||l,i){let u=i;i=null,u(r,c)}else!r&&!o&&n.push(c);r&&a(r!==!0?r:null)},{source(c,l){c?(t&&t.write(null,c),l(c),n.length=0,o=!0,a(c!==!0?c:null)):n.length?l(null,n.shift()):r?l(r):i=l},sink(c){if(r)return s=null,c(r,()=>{});s=c,tse.drain(l=>{if(r)return!1;t.write(l)},l=>{t&&!t.writeEnd&&t.write(null,l||!0),a&&a(l)})(c)}}}function TV(t,e){return WR(t,n=>{t.writeEnd||t.write(null,n||!0),e&&e(n)})}function rse(t){return TV(t).source}function ose(t,e){return TV(t,e).sink}jv.exports=WR;jv.exports.source=rse;jv.exports.sink=ose;jv.exports.duplex=WR});var kV=M((NSe,NV)=>{NV.exports=function(e){var n,r,o;function i(s){return function(a,c){s(a,function(l,u){if(l&&!o)return o=!0,c(null,e);l&&n?c(l):l?r=c:c(null,u)})}}return i.end=function(){return n=!0,r&&r(n),i},i}});var AV=M((kSe,LV)=>{var ise=kV(),jR=$v();LV.exports=function(t,e){e=e||"GOODBYE";var n=ise(e);return{source:jR(t.source,n),sink:jR(jR.filter(function(r){if(r!==e)return!0;n.end()}),t.sink)}}});var Vv=M(ls=>{"use strict";var jS=$v();function sse(t){return t?Object.keys(t).length===0:!0}ls.set=function(e,n,r){let o,i;for(let s=0;s<n.length;s++){let a=n[s];e[a]=e[a]||{},o=e,i=a,e=e[a]}o[i]=r};ls.get=function(e,n){if(typeof n=="string")return e[n];let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],e==null)return e}return r};ls.prefix=function(e,n){let r;for(let o=0;o<n.length;o++){let i=n[o];if(r=e=e[i],typeof e!="object")return e}return typeof r!="object"?!!r:!1};function ase(t,e){for(let n in e){let r=e[n];t[r]||(t[r]={}),t=t[r]}return t}function cse(t,e){(function n(r,o){let i=e[o];if(r)e.length-1===o?delete r[i]:o<e.length&&n(r[i],o+1);else return;sse(r[i])&&delete r[i]})(t,0)}function lse(t,e){for(let n in e)t[n]=e[n];return t}ls.mount=function(e,n,r){if(!Array.isArray(n))throw new Error("path must be array of strings");return lse(ase(e,n),r)};ls.unmount=function(e,n){return cse(e,n)};var VS=t=>t==="source",YS=t=>t==="sink",VR=t=>t==="duplex",use=t=>t==="sync",fse=t=>t==="async",FV=t=>use(t)||fse(t),dse=t=>VS(t)||YS(t)||VR(t);ls.isRequest=FV;ls.isStream=dse;function YR(t){return function(e){e(t||!0,()=>{})}}function OV(t){return{source:jS.error(t),sink:YR(t)}}ls.errorAsStream=function(e,n){return VS(e)?jS.error(n):YS(e)?YR(n):OV(n)};ls.errorAsStreamOrCb=function(e,n,r){return FV(e)?r(n):VR(e)?OV(n):VS(e)?jS.error(n):YS(e)?YR(n):r(n)};ls.pipeToStream=function(e,n,r){VS(e)?n(r):YS(e)?r(n):VR(e)&&jS(n,r,n)}});var qR=M((ASe,UV)=>{"use strict";function mse(t){return typeof t=="string"?[`Error: ${t}`]:t.stack?t.stack.split(`
`):[`${t.name}: ${t.message}`]}UV.exports=function(e,n){let r=new Error(n),o=r.stack.split(`
`);o.splice(1,1);let i=mse(e);i[0]="  "+i[0];for(let s=1;s<o.length;s++)if(i.includes(o[s])){o.splice(s);break}return r.stack=o.concat(i).join(`
`),r}});var BV=M((FSe,HV)=>{"use strict";var pse=bV(),GR=RV(),hse=AV(),vp=Vv(),MV=qR(),$V=KC()("muxrpc:psc");HV.exports=function(e,n,r){let o=pse({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,l=s.args,u=!1,f=!1;l.push((m,d)=>{f=!0,u=!0,a(m,d)});try{e("async",c,l)}catch(m){if(u||f)throw MV(m,"no callback provided to muxrpc async funtion");a(m)}},stream(s){s.read=function(c,l){if(l)return s.write(null,l);let{name:u,type:f,args:m}=c,d,p;if(s.read=null,!vp.isStream(f))return s.write(null,new Error(`unsupported stream type: ${f}`));try{p=e(f,u,m)}catch(v){d=v}let g=GR[f==="source"?"sink":f==="sink"?"source":"duplex"](s);return vp.pipeToStream(f,g,d?vp.errorAsStream(f,d):p)}},close(s){if(o=null,i.ended=!0,!i.closed&&(i.closed=!0,r)){let a=r;r=null,a(s)}}}),i=hse(GR(o,()=>{}));return i=n?n(i,$V.enabled?$V.namespace:!1):i,i.remoteCall=function(s,a,c,l){if(a==="emit")return o.message(c);if(!(vp.isRequest(s)||vp.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(vp.isRequest(s))return o.request({name:a,args:c},l);let u=o.stream(),f=GR[s](u,l);return u.write({name:a,args:c,type:s}),f},i.isOpen=function(){return!o.ended},i.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!o){a&&a();return}if(s){o.destroy(s),a&&a();return}return o.close(c=>{if(a)a(c);else if(c)throw MV(c,"no callback provided for muxrpc close")}),this},i.closed=!1,i}});var jV=M((OSe,WV)=>{"use strict";var gse=qR(),vse=Vv();function zR(t,e,n,r){for(let o in e){let i=e[o],s=n?n.concat(o):[o];if(i&&typeof i=="object"){let a=i;t[o]=zR({},a,s,r)}else{let a=i;t[o]=(...c)=>r(a,s,c)}}return t}function wse(t){if(t)throw gse(t,"callback not provided")}function yse(t,e,n,r){t=t||{};function o(i,s,a){let c=typeof a[a.length-1]=="function"?a.pop():i==="sync"||i==="async"?null:wse;if(typeof c=="function"){let l;try{l=n(i,s,a,c)}catch(u){return vse.errorAsStreamOrCb(i,u,c)}return l}else return new Promise((l,u)=>{n(i,s,a,(f,m)=>{f?u(f):l(m)})})}return r?o("async","manifest",[function(i,s){if(i)return r(i);zR(t,s,null,o),r(null,s,t)}]):zR(t,e,null,o),t}WV.exports=yse});var qV=M((USe,YV)=>{"use strict";var qS=Vv();function VV(t){return Array.isArray(t)?t:t.split(".")}function Cse(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}YV.exports=function(e){if(Cse(e))return e;if(typeof e=="function")return{pre:e};let n=null,r={};function o(i){if(i.allow){n={};for(let s of i.allow)qS.set(n,VV(s),!0)}else n=null;if(i.deny)for(let s of i.deny)qS.set(r,VV(s),!0);else r={};return this}return e&&o(e),o.pre=i=>{if(i=Array.isArray(i)?i:[i],n&&!qS.prefix(n,i))return new Error(`method:${i} is not in list of allowed methods`);if(r&&qS.prefix(r,i))return new Error(`method:${i} is on list of disallowed methods`)},o.post=()=>{},o.test=i=>o.pre(i),o.get=()=>({allow:n,deny:r}),o}});var zV=M((MSe,GV)=>{"use strict";var Ese=qV(),KR=Vv();GV.exports=function(e,n,r){r=Ese(r);function o(s,a){return s===KR.get(n,a)}function i(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&o("sync",a)){let l=c.pop(),u;try{u=KR.get(e,a).apply(this,c)}catch(f){return l(f)}return l(null,u)}if(!o(s,a))throw new Error(`no ${s}:${a}`);return KR.get(e,a).apply(this,c)}return function(a,c,l){let u=r.pre(c,l);if(u)throw u;return i.call(this,a,c,l)}}});var JV=M(($Se,XV)=>{"use strict";var Sse=EV(),_se=require("events").EventEmitter,xse=BV(),Dse=jV(),Ise=zV();function KV(t,e,n,r,o,i,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new _se;i||(i=Sse);let l,u={_emit(m,d){return c&&c._emit(m,d),u},id:r},f=xse(Ise(n,e,o).bind(u),i,m=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),l)){let d=l;l=null,d(m)}});if(Dse(c,t,(m,d,p,h)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(m,d,p,h)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>u.id),Object.__defineSetter__.call(c,"id",d=>{u.id=d});let m=!0;c.createStream=d=>{if(l=d,m)return m=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(m,d){return f.close(m,d),this},c}XV.exports=function(t,e,n){return arguments.length>3?KV.apply(this,arguments):function(r,o,i){return KV(t,e,r,i,o,n,!0)}}});var XS=M((mc,eY)=>{var HSe=bR(),Pse=$R();function ZV(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function QV(t,e,n){var r,o=!1,i;function s(){i||(i=!0,n&&n(r===!0?null:r))}function a(){o||(o=!0,l(),r?s():t(r=!0,s))}function c(u){l(),r||t(r=u,s)}function l(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){Pse(function(u){t(null,function(f,m){if(r=r||f,f===!0)return e._isStdio?s():e.end();if(r=r||f)return ZV(e),s(r);if(e._isStdio)e.write(m,function(){u()});else{var d=e.write(m);d===!1?e.once("drain",u):u()}})})})}function bse(t){var e=!1,n=!1,r;function o(){var i=t.read();if(i!==null&&r){var s=r;r=null,s(null,i)}}return t.on("readable",function(){n=!0,r&&o()}).on("end",function(){e=!0,r&&r(e)}).on("error",function(i){e=i,r&&r(e)}),function(i,s){r=s,e?s(e):n&&o()}}function GS(t){var e=[],n=[],r,o=!1,i;function s(){for(;(e.length||r)&&n.length;)n.shift()(e.length?null:r,e.shift());!e.length&&o&&(o=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(o=!0,t.pause())}),t.on("end",function(){r=!0,s()}),t.on("close",function(){r=!0,s()}),t.on("error",function(a){r=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let u=function(){for(;n.length;)n.shift()(a);c(a)};var l=u;if(r)return u();t.once("close",u),ZV(t)}else n.push(c),s()}}var Tse=GS,zS=function(t,e){return function(n){return QV(n,t,e)}},KS=function(t){return GS(t)};mc=eY.exports=function(t,e){return t.writable&&t.write?t.readable?function(n){return QV(n,t,e),GS(t)}:zS(t,e):KS(t)};mc.sink=zS;mc.source=KS;mc.read=Tse;mc.read1=GS;mc.read2=bse;mc.duplex=function(t,e){return{source:KS(t),sink:zS(t,e)}};mc.transform=function(t){return function(e){var n=KS(t);return zS(t)(e),n}}});var nY=M((BSe,JS)=>{var Rse=require("stream");JS.exports=XR;JS.exports.source=function(t){return XR(null,t)};JS.exports.sink=function(t){return XR(t,null)};var tY=typeof setImmediate>"u"?process.nextTick:setImmediate;function XR(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var n=[],r=[],o,i,s=new Rse;s.writable=s.readable=!0,s.write=function(g){return n.length?n.shift()(null,g):r.push(g),n.length||(i=!0),!!n.length},s.end=function(){e?r.length?h():e(o=!0,n.length?n.shift():function(){}):n.length&&n.shift()(!0)},s.source=function(g,v){r.length?(v(null,r.shift()),r.length||s.emit("drain")):((o=o||g)?v(o):n.push(v),i&&(i=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],l=[],u=!1,f=!1,m=!1;if(s.sink=function(g){e=g,tY(h)},e){s.sink(e),s.paused=!0;var d=s.on.bind(s);s.on=(g,v)=>{var C=d(g,v);return g==="data"&&s.paused&&tY(s.resume.bind(s)),C};var p=s.pipe.bind(s);s.pipe=function(g,v){var C=p(g,v);return s.paused&&s.resume(),C}}function h(){if(f=!1,!(!e||m)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(u)return s.emit("end");m=!0,e(null,function g(v,C){m=!1,s.paused?(v===!0?u=v:v?s.emit("error",v):c.push(C),f=!0):v&&(o=v)!==!0?s.emit("error",v):(o=o||v)?s.emit("end"):(s.emit("data",C),m=!0,e(null,g))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,h(),s},s.destroy=function(){!o&&e&&e(o=!0,function(){}),o=!0,n.length&&n.shift()(!0),s.emit("close")},s}});var oY=M((WSe,rY)=>{rY.exports=Nse;function Nse(t,e){typeof t=="function"&&(e=t,t=!1);var n=[],r,o;function i(f,m){f&&(r=f,o&&u(r)),o=m,l()}var s;function a(f){s=s||f||!0,l()}function c(f){if(!s){if(o){u(r,f);return}n.push(f)}}if(t)return{push:c,end:a,source:i,buffer:n};return i.push=c,i.end=a,i.buffer=n,i;function l(){o&&(r?u(r):!n.length&&s?u(s):n.length&&u(null,n.shift()))}function u(f,m){var d=o;if(f&&e){var p=e;e=null,p(f===!0?null:f)}o=null,d(f,m)}}});var mN=M((Lxe,OY)=>{"use strict";var AY=require("child_process"),fae=1024*1024,FY={exec(t,e){AY.exec(t,{maxBuffer:2*fae,windowsHide:!0},e)},spawn(t,e,n){return AY.spawn(t,e,n)},stripLine(t,e){let n=0;for(;e-- >0;){let r=t.indexOf(`
`,n);r>=0&&(n=r+1)}return n>0?t.substring(n):t},split(t,e){let n=t.trim().split(/\s+/);return n.length>e&&(n[e-1]=n.slice(e-1).join(" ")),n},extractColumns(t,e,n){let r=t.split(/(\r\n|\n|\r)/),o=[];return n||(n=Math.max.apply(null,e)+1),r.forEach(i=>{let s=FY.split(i,n),a=[];e.forEach(c=>{a.push(s[c]||"")}),o.push(a)}),o},parseTable(t){let e=t.split(/(\r\n\r\n|\r\n\n|\n\r\n|\n\n)/).filter(n=>n&&n.trim().length>0).map(n=>n.split(/(\r\n|\n|\r)/).filter(r=>r.trim().length>0));return e.forEach(n=>{for(let r=0;n[r];){let o=n[r];o.startsWith(" ")?(n[r-1]+=o.trimLeft(),n.splice(r,1)):r+=1}}),e.map(n=>{let r={};return n.forEach(o=>{let i=o.indexOf(":"),s=o.slice(0,i).trim();r[s]=o.slice(i+1).trim()}),r})}};OY.exports=FY});var MY=M((UY,C_)=>{(function(t,e){"use strict";typeof define=="function"&&define.amd?define(e):typeof C_=="object"&&C_.exports?C_.exports=e():t.log=e()})(UY,function(){"use strict";var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},i=null;function s(p,h){var g=p[h];if(typeof g.bind=="function")return g.bind(p);try{return Function.prototype.bind.call(g,p)}catch{return function(){return Function.prototype.apply.apply(g,[p,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(p){return p==="debug"&&(p="log"),typeof console===e?!1:p==="trace"&&n?a:console[p]!==void 0?s(console,p):console.log!==void 0?s(console,"log"):t}function l(){for(var p=this.getLevel(),h=0;h<r.length;h++){var g=r[h];this[g]=h<p?t:this.methodFactory(g,p,this.name)}if(this.log=this.debug,typeof console===e&&p<this.levels.SILENT)return"No console available for logging"}function u(p){return function(){typeof console!==e&&(l.call(this),this[p].apply(this,arguments))}}function f(p,h,g){return c(p)||u.apply(this,arguments)}function m(p,h){var g=this,v,C,w,y="loglevel";typeof p=="string"?y+=":"+p:typeof p=="symbol"&&(y=void 0);function S(L){var E=(r[L]||"silent").toUpperCase();if(!(typeof window===e||!y)){try{window.localStorage[y]=E;return}catch{}try{window.document.cookie=encodeURIComponent(y)+"="+E+";"}catch{}}}function P(){var L;if(!(typeof window===e||!y)){try{L=window.localStorage[y]}catch{}if(typeof L===e)try{var E=window.document.cookie,I=encodeURIComponent(y),R=E.indexOf(I+"=");R!==-1&&(L=/^([^;]+)/.exec(E.slice(R+I.length+1))[1])}catch{}return g.levels[L]===void 0&&(L=void 0),L}}function D(){if(!(typeof window===e||!y)){try{window.localStorage.removeItem(y)}catch{}try{window.document.cookie=encodeURIComponent(y)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function A(L){var E=L;if(typeof E=="string"&&g.levels[E.toUpperCase()]!==void 0&&(E=g.levels[E.toUpperCase()]),typeof E=="number"&&E>=0&&E<=g.levels.SILENT)return E;throw new TypeError("log.setLevel() called with invalid level: "+L)}g.name=p,g.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},g.methodFactory=h||f,g.getLevel=function(){return w??C??v},g.setLevel=function(L,E){return w=A(L),E!==!1&&S(w),l.call(g)},g.setDefaultLevel=function(L){C=A(L),P()||g.setLevel(L,!1)},g.resetLevel=function(){w=null,D(),l.call(g)},g.enableAll=function(L){g.setLevel(g.levels.TRACE,L)},g.disableAll=function(L){g.setLevel(g.levels.SILENT,L)},g.rebuild=function(){if(i!==g&&(v=A(i.getLevel())),l.call(g),i===g)for(var L in o)o[L].rebuild()},v=A(i?i.getLevel():"WARN");var O=P();O!=null&&(w=A(O)),l.call(g)}i=new m,i.getLogger=function(h){if(typeof h!="symbol"&&typeof h!="string"||h==="")throw new TypeError("You must supply a name when creating a logger.");var g=o[h];return g||(g=o[h]=new m(h,i.methodFactory)),g};var d=typeof window!==e?window.log:void 0;return i.noConflict=function(){return typeof window!==e&&window.log===i&&(window.log=d),i},i.getLoggers=function(){return o},i.default=i,i})});var pN=M((Axe,$Y)=>{"use strict";var dae=MY();$Y.exports=dae});var BY=M((Fxe,HY)=>{"use strict";var mae=require("os"),E_=require("fs"),Mi=mN(),pae=pN(),hae=t=>new Promise((e,n)=>{E_.existsSync(t)?e():E_.mkdir(t,r=>{r?n(r):e()})}),hN={darwin(t){return new Promise((e,n)=>{Mi.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(r,o,i){if(r)n(r);else{if(r=i.toString().trim(),r){n(r);return}let s=Mi.stripLine(o.toString(),2),a=Mi.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let l=String(c[1]).match(/\.(\d+)$/);return!!(l&&l[1]===String(t))});a&&a[2].length?e(parseInt(a[2],10)):n(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,n)=>{Mi.exec("netstat -tunlp",function(o,i,s){if(o)n(o);else{let a=s.toString().trim();a&&pae.warn(a);let c=Mi.stripLine(i.toString(),2),l=Mi.extractColumns(c,[3,6],7).find(u=>{let f=String(u[0]).match(/:(\d+)$/);return!!(f&&f[1]===String(t))});if(l&&l[1]){let u=l[1].split("/",1)[0];u.length?e(parseInt(u,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,n)=>{Mi.exec("netstat -ano",function(r,o,i){if(r)n(r);else{if(r=i.toString().trim(),r){n(r);return}let s=Mi.stripLine(o.toString(),4),a=Mi.extractColumns(s,[1,4],5).find(c=>{let l=String(c[0]).match(/:(\d+)$/);return!!(l&&l[1]===String(t))});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):n(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,n)=>{let r=mae.tmpdir()+"/.find-process",o=r+"/"+process.pid,i='netstat -tunp >> "'+o+'"';hae(r).then(()=>{Mi.exec(i,()=>{E_.readFile(o,"utf8",(s,a)=>{if(E_.unlink(o,()=>{}),s)n(s);else{a=Mi.stripLine(a,2);let c=Mi.extractColumns(a,[3,6],7).find(l=>{let u=String(l[0]).match(/:(\d+)$/);return!!(u&&u[1]===String(t))});if(c&&c[1]){let l=c[1].split("/",1)[0];l.length?e(parseInt(l,10)):n(new Error(`pid of port (${t}) not found`))}else n(new Error(`pid of port (${t}) not found`))}})})})})}};function gae(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in hN))return r(new Error(`platform ${e} is unsupported`));let o=hN[e];typeof o=="string"&&(o=hN[o]),o(t).then(n,r)})}HY.exports=gae});var YY=M((Oxe,VY)=>{"use strict";var S_=require("path"),Ml=mN();function gN(t,e){return e?t&&t.match?t.match(e):!1:!0}function WY(t){let e=t.split(S_.sep),n=e[e.length-1];n&&(e[e.length-1]=n.split(" ")[0]);let r=[];for(let o of e){let i=o.indexOf(" -");if(i>=0){r.push(o.substring(0,i).trim());break}else if(o.endsWith(" ")){r.push(o.trim());break}r.push(o)}return r.join(S_.sep)}function jY(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return S_.basename(t.substring(0,e))}return S_.basename(t)}var vN={darwin(t){return new Promise((e,n)=>{let r;"pid"in t?r=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:r="ps ax -ww -o pid,ppid,uid,gid,args",Ml.exec(r,function(o,i,s){if(o)"pid"in t?e([]):n(o);else{if(o=s.toString().trim(),o){n(o);return}let a=Ml.stripLine(i.toString(),1),l=Ml.extractColumns(a,[0,1,2,3,4],5).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[4]&&t.name?gN(u[4],t.name):!!u[0]).map(u=>{let f=String(u[4]),m=WY(f);return{pid:parseInt(u[0],10),ppid:parseInt(u[1],10),uid:parseInt(u[2],10),gid:parseInt(u[3],10),name:jY(m),bin:m,cmd:u[4]}});t.config.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,n)=>{let r="[Console]::OutputEncoding = [System.Text.Encoding]::UTF8; Get-CimInstance -className win32_process | select Name,ProcessId,ParentProcessId,CommandLine,ExecutablePath",o=[],i=Ml.spawn("powershell.exe",["/c",r],{detached:!1,windowsHide:!0});i.stdout.on("data",s=>{o.push(s.toString())}),i.on("error",s=>{n(new Error("Command '"+r+"' failed with reason: "+s.toString()))}),i.on("close",s=>{if(s!==0)return n(new Error("Command '"+r+"' terminated with code: "+s));let a=Ml.parseTable(o.join("")).filter(c=>{if("pid"in t)return c.ProcessId===String(t.pid);if(t.name){let l=c.Name||"";return t.config.strict?l===t.name||l.endsWith(".exe")&&l.slice(0,-4)===t.name:gN(c.CommandLine||l,t.name)}else return!0}).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name||"",cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,n)=>{Ml.exec("ps",function(o,i,s){if(o)"pid"in t?e([]):n(o);else{if(o=s.toString().trim(),o){n(o);return}let a=Ml.stripLine(i.toString(),1),l=Ml.extractColumns(a,[0,3],4).filter(u=>u[0]&&t.pid?u[0]===String(t.pid):u[1]&&t.name?gN(u[1],t.name):!!u[0]).map(u=>{let f=String(u[1]),m=WY(f);return{pid:parseInt(u[0],10),name:jY(m),bin:m,cmd:f}});t.config.strict&&t.name&&(l=l.filter(u=>u.name===t.name)),e(l)}})})}};function vae(t){let e=process.platform;return new Promise((n,r)=>{if(!(e in vN))return r(new Error(`platform ${e} is unsupported`));let o=vN[e];typeof o=="string"&&(o=vN[o]),o(t).then(i=>{if(t.skipSelf){let s=i.filter(a=>a.pid!==process.pid);n(s)}else n(i)},r)})}VY.exports=vae});var zY=M((Uxe,GY)=>{"use strict";var wae=BY(),qY=YY(),yae=pN(),wN={port(t,e){return wae(t).then(n=>wN.pid(n,e),()=>[])},pid(t,e){return qY({pid:t,config:e})},name(t,e){return qY({name:t,config:e,skipSelf:!0})}};function Cae(t,e,n){let r=Object.assign({logLevel:"warn",strict:typeof n=="boolean"?n:!1},n);return yae.setLevel(r.logLevel),new Promise((o,i)=>{if(!(t in wN))i(new Error(`do not support find by "${t}"`));else{let s=/^\d+$/.test(e);t==="pid"&&!s?i(new Error("pid must be a number")):t==="port"&&!s?i(new Error("port must be a number")):wN[t](e,r).then(o,i)}})}GY.exports=Cae});var XY=M((Mxe,KY)=>{"use strict";KY.exports=zY()});var Yp,Sc,ea,vs,qp,Iw,yk=Z(()=>{Yp="function",Sc="object",ea="undefined",vs="prototype",qp=Object,Iw=qp[vs]});function ta(t,e){return t||e}function An(t,e){return t[e]}function Gn(t,e){try{return{v:t.apply(this,e)}}catch(n){return{e:n}}}function bfe(t,e){var n=Gn(t);return n.e?e:n.v}function _x(t){return function(e){return typeof e===t}}function k3(t){var e="[object "+t+"]";return function(n){return!!(n&&xx(n)===e)}}function xx(t){return Ok[Sx].call(t)}function Uk(t,e){return typeof t===e}function Ve(t){return typeof t===cd||t===cd}function Tfe(t){return!Dx(t)}function ne(t){return t===kn||Ve(t)}function Rfe(t){return t===kn||!Dx(t)}function Dx(t){return!!t||t!==Mo}function Nfe(t){return!Ck&&(Ck=["string","number","boolean",cd,"symbol","bigint"]),t!==bw&&Ck.indexOf(t)!==-1}function Qt(t){return!t&&ne(t)?!1:!!t&&typeof t===bw}function mo(t){return!!(t&&t.then&&Re(t.then))}function Mk(t){return!t||!ws(t)}function ws(t){return!(!t||bfe(function(){return!(t&&0+t)},!t))}function mr(t,e){return!!t&&Ok.hasOwnProperty[Dr](t,e)}function kfe(t,e){return mr(t,e)||!!Px(t,e)}function _e(t,e,n){if(t&&Qt(t)){for(var r in t)if(ys(t,r)&&e[Dr](n||t,r,t[r])===-1)break}}function L3(t){var e={};if(e[px.c]=!0,e[px.e]=!0,t.l){e.get=function(){return t.l.v};var n=Px(t.l,"v");n&&n.set&&(e.set=function(r){t.l.v=r})}return _e(t,function(r,o){e[px[r]]=Tfe(o)?e[px[r]]:o}),e}function $k(t,e,n,r,o,i){var s={e:i,c:o};return n&&(s.g=n),r&&(s.s=r),$o(t,e,L3(s))}function vt(t,e,n){return $o(t,e,L3(n))}function F3(t,e,n,r,o){var i={};return _e(t,function(s,a){yx(i,s,e?a:s),yx(i,a,n?a:s)}),r?r(i):i}function yx(t,e,n,r){$o(t,e,{value:n,enumerable:!0,writable:!1})}function pe(t,e){var n=Ak,r=Ok[Sx][Dr](t);r===Lfe&&(t={stack:_n(t.stack),message:_n(t.message),name:_n(t.name)});try{n=JSON.stringify(t,kn,e?typeof e=="number"?e:4:Mo),n=(n?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):kn)||_n(t)}catch(o){n=" - "+pe(o,e)}return r+": "+n}function un(t){throw new Error(t)}function Pr(t){throw new TypeError(t)}function U3(t){return t}function Afe(t){return t[kk]||kn}function Cs(t){return O3&&_e(t,function(e,n){(we(n)||Qt(n))&&Cs(n)}),po(t)}function M3(t){return F3(t,1,0,po)}function Ffe(t){return F3(t,0,0,po)}function Ofe(t){var e={};return _e(t,function(n,r){yx(e,n,r[1]),yx(e,r[0],r[1])}),po(e)}function $3(t){return Ofe(t)}function B3(){var t;return typeof globalThis!==cd&&(t=globalThis),!t&&typeof self!==cd&&(t=self),!t&&typeof window!==cd&&(t=window),!t&&typeof global!==cd&&(t=global),t}function W3(){if(!Ek){var t=Gn(B3).v||{};Ek=t[D3]=t[D3]||{}}return Ek}function Jp(t,e,n){var r=e?e[t]:kn;return function(o){var i=(o?o[t]:kn)||r;if(i||n){var s=arguments;return(i||n).apply(o,i?xc[Dr](s,1):s)}Pr('"'+_n(t)+'" not defined for '+pe(o))}}function Ufe(t){return function(e){return e[t]}}function Mfe(t,e,n){return ne(t)&&Pr("Invalid "+pe(t)),n<0?Ak:(e=e||0,e<0&&(e=oa(e+t[ld],0)),Ve(n)?I3(t,e):I3(t,e,e+n))}function dd(t,e){return zn(t,0,e)}function $fe(){if(!Sk){var t=W3();Sk=t.gblSym=t.gblSym||{k:{},s:{}}}return Sk}function Bk(t){var e={description:_n(t),toString:function(){return Fk+"("+t+")"}};return e[Pfe]=!0,e}function Hfe(t){var e=$fe();if(!ys(e.k,t)){var n=Bk(t),r=br(e.s).length;n[P3]=function(){return r+"_"+n[Sx]()},e.k[t]=n,e.s[n[P3]()]=_n(t)}return e.k[t]}function Bfe(t){!hx&&(hx={});var e,n=H3[t];return n&&(e=hx[n]=hx[n]||Bk(Fk+"."+n)),e}function ru(){Ln=W3()}function j3(t){var e={};return!Ln&&ru(),e.b=Ln.lzy,$o(e,"v",{configurable:!0,get:function(){var n=t();return Ln.lzy||$o(e,"v",{value:n}),e.b=Ln.lzy,n}}),e}function di(t){return $o({toJSON:function(){return t}},"v",{value:t})}function Nw(t,e){var n;return function(){return!Ln&&ru(),(!n||Ln.lzy)&&(n=di(Gn(t,e).v)),n.v}}function ho(t){return!Ln&&ru(),(!Pw||t===!1||Ln.lzy)&&(Pw=di(Gn(B3).v||kn)),Pw.v}function pt(t,e){var n;if(!Pw||e===!1?n=ho(e):n=Pw.v,n&&n[t])return n[t];if(t===V3)try{return window}catch{}return kn}function md(){return!!fn()}function Zp(){return!!Fn()}function kw(){return!!Kn()}function Wk(){return!!bx()}function Tx(){return zp=di(Gn(pt,[Fk]).v),zp}function Wfe(t){var e=(Ln.lzy?0:zp)||Tx();return e.v?e.v[t]:Mo}function q3(){return!!jfe()}function jfe(){return!Ln&&ru(),((Ln.lzy?0:zp)||Tx()).v}function Lw(t,e){var n=H3[t];!Ln&&ru();var r=(Ln.lzy?0:zp)||Tx();return r.v?r.v[n||t]:e?Mo:Bfe(t)}function Qp(t,e){!Ln&&ru();var n=(Ln.lzy?0:zp)||Tx();return n.v?n.v(t):e?kn:Bk(t)}function Rx(t){return!Ln&&ru(),_k=(Ln.lzy?0:_k)||di(Gn(Wfe,["for"]).v),(_k.v||Hfe)(t)}function Cx(t){return!!t&&Re(t.next)}function jk(t){return!Rfe(t)&&Re(t[Lw(3)])}function Nx(t,e,n){if(t&&(Cx(t)||(!gx&&(gx=di(Lw(3))),t=t[gx.v]?t[gx.v]():kn),Cx(t))){var r=Mo,o=Mo;try{for(var i=0;!(o=t.next()).done&&e[Dr](n||t,o.value,i,t)!==-1;)i++}catch(s){r={e:s},t.throw&&(o=kn,t.throw(r))}finally{try{o&&!o.done&&t.return&&t.return(o)}finally{if(r)throw r.e}}}}function Gp(t,e,n){return t.apply(e,n)}function Es(t,e){return!Ve(e)&&t&&(we(e)?Gp(t.push,t,e):Cx(e)||jk(e)?Nx(e,function(n){t.push(n)}):t.push(e)),t}function J(t,e,n){if(t)for(var r=t[ld]>>>0,o=0;o<r&&!(o in t&&e[Dr](n||t,t[o],o,t)===-1);o++);}function eh(t,e,n){return((t?t.slice:kn)||xc).apply(t,xc[Dr](arguments,1))}function Vfe(t,e,n){return ut(t,e,n)!==-1}function Yfe(t){if(!t)return{};var e=typeof t;e!==bw&&e!==Ex&&Pr("Prototype must be an Object or function: "+pe(t));function n(){}return n[_c]=t,new n}function G3(t,e){var n=fi.setPrototypeOf||function(r,o){var i;!xk&&(xk=di((i={},i[kk]=[],i instanceof Array))),xk.v?r[kk]=o:_e(o,function(s,a){return r[s]=a})};return n(t,e)}function qfe(t,e,n){Gn(vt,[e,wx,{v:t,c:!0,e:!1}]),e=G3(e,n);function r(){this[vx]=e,Gn(vt,[this,wx,{v:t,c:!0,e:!1}])}return e[_c]=n===kn?sa(n):(r[_c]=n[_c],new r),e}function b3(t,e){e&&(t[wx]=e)}function Yk(t,e,n){var r=n||Error,o=r[_c][wx],i=Error.captureStackTrace;return qfe(t,function(){var s=this,a=arguments;try{Gn(b3,[r,t]);var c=Gp(r,s,xc[Dr](a))||s;if(c!==s){var l=Lk(s);l!==Lk(c)&&G3(c,l)}return i&&i(c,s[vx]),e&&e(c,a),c}finally{Gn(b3,[r,o])}},r)}function dn(){return(Date.now||Gfe)()}function Gfe(){return new Date().getTime()}function zfe(t){return function(n){return ne(n)&&Pr("strTrim called ["+pe(n)+"]"),n&&n.replace&&(n=n.replace(t,Ak)),n}}function Tr(t){if(!t||typeof t!==bw)return!1;Pk||(Pk=Zp()?Fn():!0);var e=!1;if(t!==Pk){Ik||(Dk=Function[_c][Sx],Ik=Dk[Dr](fi));try{var n=Lk(t);e=!n,e||(mr(n,vx)&&(n=n[vx]),e=!!(n&&typeof n===Ex&&Dk[Dr](n)===Ik))}catch{}}return e}function Xfe(t){return t.value&&X3(t),!0}function Jfe(t,e,n,r){var o;return J(t,function(i){if(i.k===e)return o=i,-1}),o||(o={k:e,v:e},t.push(o),r(o)),o.v}function qk(t,e,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],s={handler:n.handler,src:n.src,path:i},a=typeof e,c=!1,l=e===kn;l||(e&&a===bw?c=Tr(e):l=Nfe(a));var u={type:a,isPrim:l,isPlain:c,value:e,result:e,path:i,origin:n.src,copy:function(f,m){return qk(t,f,m?s:n,m)},copyTo:function(f,m){return K3(t,f,m,s)}};return u.isPrim?o&&o[Dr](n,u)?u.result:e:Jfe(t,e,i,function(f){vt(u,"result",{g:function(){return f.v},s:function(p){f.v=p}});for(var m=0,d=o;!(d||(m<T3.length?T3[m++]:Xfe))[Dr](n,u);)d=kn})}function K3(t,e,n,r){if(!ne(n))for(var o in n)e[o]=qk(t,n[o],r,o);return e}function Zfe(t,e,n){var r={handler:n,src:e,path:[]};return K3([],t,e,r)}function Qfe(t,e){var n={handler:e,src:t};return qk([],t,n)}function ede(t){var e=t.value;if(we(e)){var n=t.result=[];return n.length=e.length,t.copyTo(n,e),!0}return!1}function tde(t){var e=t.value;return Ix(e)?(t.result=new Date(e.getTime()),!0):!1}function nde(t){return t.type===Ex}function X3(t){var e=t.value;if(e&&t.isPlain){var n=t.result={};return t.copyTo(n,e),!0}return!1}function rde(t,e){return J(e,function(n){Zfe(t,n)}),t}function Gk(t,e,n,r,o,i,s){return rde(Qfe(t)||{},xc[Dr](arguments))}function ou(){return!Ln&&ru(),(!bk||Ln.lzy)&&(bk=di(Gn(pt,["performance"]).v)),bk.v}function Fw(){var t=ou();return t&&t.now?t.now():dn()}function ode(t,e,n){ke(t)||Pr("'"+pe(t)+"' is not a string");var r=ke(e)?e:_n(e),o=!Ve(n)&&n<t[ld]?n:t[ld];return zn(t,o-r[ld],o)===r}function ide(t,e,n){ke(t)||Pr("'"+pe(t)+"' is not a string");var r=ke(e)?e:_n(e),o=n>0?n:0;return zn(t,o,o+r[ld])===r}function ade(t,e,n){var r=!0,o=t?e(kn):kn,i;function s(){return r=!1,o&&o[Rk]&&o[Rk](),i}function a(){o&&n(o),o=kn}function c(){return o=e(o),r||s(),i}function l(u){!u&&o&&a(),u&&!o&&c()}return i={cancel:a,refresh:c},i[Nk]=function(){return o&&o[Nk]?o[Nk]():r},i[Tk]=function(){return r=!0,o&&o[Tk]&&o[Tk](),i},i[Rk]=s,i=$o(i,sde,{get:function(){return!!o},set:l}),{h:i,dn:function(){o=kn}}}function zk(t,e,n){var r=we(e),o=r?e.length:0,i=(o>0?e[0]:r?Mo:e)||setTimeout,s=(o>1?e[1]:Mo)||clearTimeout,a=n[0];n[0]=function(){c.dn(),Gp(a,Mo,xc[Dr](arguments))};var c=ade(t,function(l){if(l){if(l.refresh)return l.refresh(),l;Gp(s,Mo,[l])}return Gp(i,Mo,n)},function(l){Gp(s,Mo,[l])});return c.h}function mi(t,e){return zk(!0,Mo,xc[Dr](arguments))}function Z3(t,e,n){return zk(!0,t,xc[Dr](arguments,1))}function Q3(t,e){return zk(!1,Mo,xc[Dr](arguments))}var Mo,kn,Ak,Ex,bw,_c,kk,cd,vx,Fk,Pfe,ld,wx,Dr,Sx,fi,Ok,R3,ud,Tw,N3,Rw,xc,Ck,ke,Re,we,Ix,Ir,na,fd,Px,ys,px,$o,A3,_n,Lfe,O3,Kp,br,po,Hk,Lk,H3,D3,Ek,Xp,ra,oa,I3,zn,ia,P3,Sk,hx,Ln,V3,Pw,fn,Fn,Kn,bx,Y3,zp,_k,gx,ut,Dc,Vk,Aw,sa,xk,Kfe,Ze,go,z3,Dk,Ik,Pk,T3,th,bk,J3,pd,vo,nh,Tk,Rk,Nk,sde,Le=Z(()=>{Mo=void 0,kn=null,Ak="",Ex="function",bw="object",_c="prototype",kk="__proto__",cd="undefined",vx="constructor",Fk="Symbol",Pfe="_polyfill",ld="length",wx="name",Dr="call",Sx="toString",fi=ta(Object),Ok=An(fi,_c),R3=ta(String),ud=An(R3,_c),Tw=ta(Math),N3=ta(Array),Rw=An(N3,_c),xc=An(Rw,"slice");ke=_x("string"),Re=_x(Ex);we=An(N3,"isArray"),Ix=k3("Date"),Ir=_x("number"),na=_x("boolean"),fd=k3("Error");Px=An(fi,"getOwnPropertyDescriptor");ys=ta(An(fi,"hasOwn"),kfe);px={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};$o=An(fi,"defineProperty"),A3=An(fi,"defineProperties");_n=ta(R3),Lfe="[object Error]";O3=An(fi,"freeze");Kp=An(fi,"assign"),br=An(fi,"keys");po=ta(O3,U3),Hk=ta(An(fi,"seal"),U3),Lk=ta(An(fi,"getPrototypeOf"),Afe);H3=Ffe({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),D3="__tsUtils$gblCfg";Xp=Jp;ra=An(Tw,"min"),oa=An(Tw,"max"),I3=Xp("slice",ud),zn=Xp("substring",ud),ia=Jp("substr",ud,Mfe);P3="_urid";V3="window";fn=Nw(pt,["document"]);Fn=Nw(pt,[V3]);Kn=Nw(pt,["navigator"]);bx=Nw(pt,["history"]),Y3=Nw(function(){return!!Gn(function(){return process&&(process.versions||{}).node}).v});ut=Xp("indexOf",Rw),Dc=Xp("map",Rw);Vk=Jp("includes",Rw,Vfe),Aw=Xp("reduce",Rw),sa=ta(An(fi,"create"),Yfe);Kfe=zfe(/^\s+|(?=\s)\s+$/g),Ze=Jp("trim",ud,Kfe),go=An(Tw,"floor"),z3=An(Tw,"ceil");T3=[ede,X3,nde,tde];th=Ufe(ld);J3=An(Tw,"round"),pd=Jp("endsWith",ud,ode);vo=Xp("indexOf",ud),nh=Jp("startsWith",ud,ide);Tk="ref",Rk="unref",Nk="hasRef",sde="enabled"});function Ho(t,e){typeof e!==Yp&&e!==null&&Pr("Class extends value "+String(e)+" is not a constructor or null"),Kk(t,e);function n(){this.constructor=t}t[vs]=e===null?sa(e):(n[vs]=e[vs],new n)}function kx(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var Zbe,Qbe,ez,lde,ji,Kk,tz=Z(()=>{Le();yk();Zbe=(ho()||{}).Symbol,Qbe=(ho()||{}).Reflect,ez="hasOwnProperty",lde=function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Iw[ez].call(e,o)&&(t[o]=e[o])}return t},ji=Kp||lde,Kk=function(t,e){return Kk=qp.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r[ez](o)&&(n[o]=r[o])},Kk(t,e)}});var nz=Z(()=>{});var Bo=Z(()=>{yk();tz();nz();Le()});function Ox(t){return t&&(t===rL[Ic]||t===Array[Ic])}function oL(t){return Ox(t)||t===Function[Ic]}function hd(t){var e;if(t){if(Uw)return Uw(t);var n=t[nL]||t[Ic]||(t[Ux]?t[Ux][Ic]:null);e=t[Ax]||n,mr(t,Ax)||(delete t[Xk],e=t[Ax]=t[Xk]||t[Ax],t[Xk]=n)}return e}function Hx(t,e){var n=[];if(iz)n=iz(t);else for(var r in t)typeof r=="string"&&mr(t,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)e(n[o])}function iL(t,e,n){return e!==Ux&&typeof t[e]===Mx&&(n||mr(t,e))&&e!==nL&&e!==Ic}function Bx(t){Pr("DynamicProto: "+t)}function fde(t){var e=sa(null);return Hx(t,function(n){!e[n]&&iL(t,n,!1)&&(e[n]=t[n])}),e}function sL(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}function dde(t,e,n,r){function o(c,l,u){var f=l[u];if(f[Zk]&&r){var m=c[$x]||{};m[Ow]!==!1&&(f=(m[l[rh]]||{})[u]||f)}return function(){return f.apply(c,arguments)}}var i=sa(null);Hx(n,function(c){i[c]=o(e,n,c)});for(var s=hd(t),a=[];s&&!oL(s)&&!sL(a,s);)Hx(s,function(c){!i[c]&&iL(s,c,!Uw)&&(i[c]=o(e,s,c))}),a.push(s),s=hd(s);return i}function mde(t,e,n,r){var o=null;if(t&&mr(n,rh)){var i=t[$x]||sa(null);if(o=(i[n[rh]]||sa(null))[e],o||Bx("Missing ["+e+"] "+Mx),!o[Qk]&&i[Ow]!==!1){for(var s=!mr(t,e),a=hd(t),c=[];s&&a&&!oL(a)&&!sL(c,a);){var l=a[e];if(l){s=l===r;break}c.push(a),a=hd(a)}try{s&&(t[e]=o),o[Qk]=1}catch{i[Ow]=!1}}}return o}function pde(t,e,n){var r=e[t];return r===n&&(r=hd(e)[t]),typeof r!==Mx&&Bx("["+t+"] is not a "+Mx),r}function hde(t,e,n,r,o){function i(c,l){var u=function(){var f=mde(this,l,c,u)||pde(l,c,u);return f.apply(this,arguments)};return u[Zk]=1,u}if(!Ox(t)){var s=n[$x]=n[$x]||sa(null);if(!Ox(s)){var a=s[e]=s[e]||sa(null);s[Ow]!==!1&&(s[Ow]=!!o),Ox(a)||Hx(n,function(c){iL(n,c,!1)&&n[c]!==r[c]&&(a[c]=n[c],delete n[c],(!mr(t,c)||t[c]&&!t[c][Zk])&&(t[c]=i(t,c)))})}}}function gde(t,e){if(Uw){for(var n=[],r=hd(e);r&&!oL(r)&&!sL(n,r);){if(r===t)return!0;n.push(r),r=hd(r)}return!1}return!0}function Jk(t,e){return mr(t,Ic)?t.name||e||rz:((t||{})[Ux]||{}).name||e||rz}function Xe(t,e,n,r){mr(t,Ic)||Bx("theClass is an invalid class definition.");var o=t[Ic];gde(o,e)||Bx("["+Jk(t)+"] not in hierarchy of ["+Jk(e)+"]");var i=null;mr(o,rh)?i=o[rh]:(i=ude+Jk(t,"_")+"$"+tL.n,tL.n++,o[rh]=i);var s=Xe[az],a=!!s[Fx];a&&r&&r[Fx]!==void 0&&(a=!!r[Fx]);var c=fde(e),l=dde(o,e,c,a);n(e,l);var u=!!Uw&&!!s[eL];u&&r&&(u=!!r[eL]),hde(o,i,e,c,u!==!1)}var Lx,Ux,Ic,Mx,$x,Zk,rh,ude,Qk,Ow,az,rz,nL,Ax,oz,Xk,Fx,eL,rL,Uw,iz,sz,tL,pr=Z(()=>{Le();Ux="constructor",Ic="prototype",Mx="function",$x="_dynInstFuncs",Zk="_isDynProxy",rh="_dynClass",ude="_dynCls$",Qk="_dynInstChk",Ow=Qk,az="_dfOpts",rz="_unknown_",nL="__proto__",Ax="_dyn"+nL,oz="__dynProto$Gbl",Xk="_dynInstProto",Fx="useBaseInst",eL="setInstFuncs",rL=Object,Uw=rL.getPrototypeOf,iz=rL.getOwnPropertyNames,sz=ho(),tL=sz[oz]||(sz[oz]={o:(Lx={},Lx[eL]=!0,Lx[Fx]=!0,Lx),n:1e3});Xe[az]=tL.o});var aL,cz=Z(()=>{aL=100});var mn,cL,Mw=Z(()=>{Le();mn=M3,cL=$3});var Ss,vde,lz=Z(()=>{Mw();Ss=mn({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),vde=mn({Unknown:0,NonRetryableStatus:1,CleanStorage:2,MaxInStorageTimeExceeded:3})});var pi,lL=Z(()=>{Mw();pi=mn({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2})});var Wo,de,oh,Pc,aa,iu,Ye,ca,Lt,bc,Tc,la,ih,sh,jo,gd,$w,su,wo,Xn,Wx,au,uL,Vi,Hw,ah,jx,ua,hi,ch,fa,Vo,cu,vd,gi,lu,Bw,Yi,_s,vi,lh,wd,fL,Ww,uu,yd,xs,dL,uh,Vx,Cd,Ed,Yx,Dt=Z(()=>{Wo="toLowerCase",de="length",oh="warnToConsole",Pc="throwInternal",aa="watch",iu="apply",Ye="push",ca="splice",Lt="logger",bc="cancel",Tc="initialize",la="identifier",ih="removeNotificationListener",sh="addNotificationListener",jo="isInitialized",gd="value",$w="getNotifyMgr",su="getPlugin",wo="name",Xn="processNext",Wx="getProcessTelContext",au="enabled",uL="stopPollingInternalLogs",Vi="unload",Hw="onComplete",ah="version",jx="loggingLevelConsole",ua="createNew",hi="teardown",ch="messageId",fa="message",Vo="diagLog",cu="_doTeardown",vd="update",gi="getNext",lu="setNextPlugin",Bw="userAgent",Yi="split",_s="replace",vi="type",lh="evtName",wd="status",fL="getAllResponseHeaders",Ww="isChildEvt",uu="data",yd="getCtx",xs="setCtx",dL="itemsReceived",uh="urlString",Vx="headers",Cd="timeout",Ed="traceFlags",Yx="getAttribute"});function uz(t,e){mL||(mL=Yk("AggregationError",function(r,o){o[de]>1&&(r.errors=o[1])}));var n=t||"One or more errors occurred.";throw J(e,function(r,o){n+=`
`.concat(o," > ").concat(pe(r))}),new mL(n,e||[])}var mL,fz=Z(()=>{Le();Dt()});function wi(t,e){return hz(t,function(n){return e?e({status:"fulfilled",rejected:!1,value:n}):n},function(n){return e?e({status:EL,rejected:!0,reason:n}):n})}function hz(t,e,n,r){var o=t;try{if(mo(t))(e||n)&&(o=t.then(e,n));else try{e&&(o=e(t))}catch(i){if(n)o=n(i);else throw i}}finally{r&&wde(o,r)}return o}function wde(t,e){var n=t;return e&&(mo(t)?t.finally?n=t.finally(e):n=t.then(function(r){return e(),r},function(r){throw e(),r}):e()),n}function yde(t,e,n,r){pL=pL||{toString:function(){return"[[PromiseState]]"}},hL=hL||{toString:function(){return"[[PromiseResult]]"}},gL=gL||{toString:function(){return"[[PromiseIsHandled]]"}};var o={};o[pL]={get:e},o[hL]={get:n},o[gL]={get:r},A3(t,o)}function Cde(t){var e;return t&&t.createEvent&&(e=t.createEvent("Event")),!!e&&e.initEvent}function Ede(t,e,n,r){var o=fn();!qx&&(qx=di(!!Gn(Cde,[o]).v));var i=qx.v?o.createEvent("Event"):r?new Event(e):{};if(n&&n(i),qx.v&&i.initEvent(e,!1,!0),i&&t[mz])t[mz](i);else{var s=t["on"+e];if(s)s(i);else{var a=pt("console");a&&(a.error||a.log)(e,pe(i))}}}function pz(t){return Re(t)?t.toString():pe(t)}function wz(t,e,n){var r=eh(arguments,3),o=0,i=!1,s,a=[],c=_de++,l=jw.length>0?jw[jw.length-1]:void 0,u=!1,f=null,m;function d(S,P){try{jw.push(c),u=!0,f&&f.cancel(),f=null;var D=t(function(A,O){a.push(function(){try{var L=o===2?S:P,E=Ve(L)?s:Re(L)?L(s):L;mo(E)?E.then(A,O):L?A(E):o===3?O(E):A(E)}catch(I){O(I)}}),i&&v()},r);return D}finally{jw.pop()}}function p(S){return d(void 0,S)}function h(S){var P=S,D=S;return Re(S)&&(P=function(A){return S&&S(),A},D=function(A){throw S&&S(),A}),d(P,D)}function g(){return gz[o]}function v(){if(a.length>0){var S=a.slice();a=[],u=!0,f&&f.cancel(),f=null,e(S)}}function C(S,P){return function(D){if(o===P){if(S===2&&mo(D)){o=1,D.then(C(2,1),C(3,1));return}o=S,i=!0,s=D,v(),!u&&S===3&&!f&&(f=mi(w,xde))}}}function w(){if(!u)if(u=!0,Y3())process.emit(vz,s,m);else{var S=Fn()||ho();!vL&&(vL=di(Gn(pt,[Gx+"RejectionEvent"]).v)),Ede(S,Sde,function(P){return vt(P,"promise",{g:function(){return m}}),P.reason=s,P},!!vL.v)}}m={then:d,catch:p,finally:h},$o(m,"state",{get:g}),dz&&yde(m,g,function(){return xx(s)},function(){return u}),q3()&&(m[Lw(11)]="IPromise");function y(){return"IPromise"+(dz?"["+c+(Ve(l)?"":":"+l)+"]":"")+" "+g()+(i?" - "+pz(s):"")}return m.toString=y,function(){Re(n)||Pr(Gx+": executor is not a function - "+pz(n));var P=C(3,0);try{n.call(m,C(2,0),P)}catch(D){P(D)}}(),m}function Dde(t){return function(e){var n=eh(arguments,1);return t(function(r,o){try{var i=[],s=1;Nx(e,function(a,c){a&&(s++,hz(a,function(l){i[c]=l,--s===0&&r(i)},o))}),s--,s===0&&r(i)}catch(a){o(a)}},n)}}function Ide(t){return di(function(e){var n=eh(arguments,1);return t(function(r,o){var i=[],s=1;function a(c,l){s++,wi(c,function(u){u.rejected?i[l]={status:EL,reason:u.reason}:i[l]={status:"fulfilled",value:u.value},--s===0&&r(i)})}try{we(e)?J(e,a):jk(e)?Nx(e,a):Pr("Input is not an iterable"),s--,s===0&&r(i)}catch(c){o(c)}},n)})}function yz(t){J(t,function(e){try{e()}catch{}})}function Pde(t){var e=Ir(t)?t:0;return function(n){mi(function(){yz(n)},e)}}function Cz(t,e){return wz(Cz,Pde(e),t,e)}function bde(t,e){!wL&&(wL=di(Gn(pt,[Gx]).v||null));var n=wL.v;if(!n)return Cz(t);Re(t)||Pr(Gx+": executor is not a function - "+pe(t));var r=0;function o(){return gz[r]}var i=new n(function(s,a){function c(u){r=2,s(u)}function l(u){r=3,a(u)}t(c,l)});return $o(i,"state",{get:o}),i}function Vw(t){return wz(Vw,yz,t)}function Ez(t,e){return!yL&&(yL=Ide(Vw)),yL.v(t,e)}function qi(t,e){return!CL&&(CL=di(bde)),CL.v.call(this,t,e)}var Gx,EL,pL,hL,gL,dz,gz,mz,qx,vz,Sde,jw,_de,xde,vL,wL,yL,CL,Sz,OTe,Sd=Z(()=>{Le();Gx="Promise",EL="rejected";dz=!1;gz=["pending","resolving","resolved",EL],mz="dispatchEvent";vz="unhandledRejection",Sde=vz.toLowerCase(),jw=[],_de=0,xde=10;Sz=Dde(qi),OTe=Lw(11)});var yi,Ae,_d,pn,zx,Yw,Rc,xd,Yo,Dd,fh,fu,dh,da,Kx,Xx,Jx,mh,Zx,Qx,_z,On=Z(()=>{yi=void 0,Ae="",_d="channels",pn="core",zx="createPerfMgr",Yw="disabled",Rc="extensionConfig",xd="extensions",Yo="processTelemetry",Dd="priority",fh="eventsSent",fu="eventsDiscarded",dh="eventsSendRequest",da="perfEvent",Kx="offlineEventsStored",Xx="offlineBatchSent",Jx="offlineBatchDrop",mh="getPerfMgr",Zx="domain",Qx="path",_z="Not dynamic - "});function Gi(t){return!ne(t)}function Id(t){var e=t;return e&&ke(e)&&(e=e[_s](Rde,function(n,r){return r.toUpperCase()}),e=e[_s](Nde,"_"),e=e[_s](kde,function(n,r){return"_"+r})),e}function xn(t,e){return t&&e?vo(t,e)!==-1:!1}function Ci(t){return t&&t.toISOString()||""}function At(t){return fd(t)?t[wo]:Ae}function zi(t,e,n,r,o){var i=n;return t&&(i=t[e],i!==n&&(!o||o(i))&&(!r||r(n))&&(i=n,t[e]=i)),i}function qw(t,e,n){var r;return t?(r=t[e],!r&&ne(r)&&(r=Ve(n)?{}:n,t[e]=r)):r=Ve(n)?{}:n,r}function Dz(t,e){var n=null,r=null;return Re(t)?n=t:r=t,function(){var o=arguments;if(n&&(r=n()),r)return r[e][iu](r,o)}}function SL(t,e,n){if(t&&e&&Qt(t)&&Qt(e)){var r=function(i){if(ke(i)){var s=e[i];Re(s)?(!n||n(i,!0,e,t))&&(t[i]=Dz(e,i)):(!n||n(i,!1,e,t))&&(ys(t,i)&&delete t[i],vt(t,i,{g:function(){return e[i]},s:function(a){e[i]=a}}))}};for(var o in e)r(o)}return t}function Nc(t,e,n,r,o){t&&e&&n&&(o!==!1||Ve(t[e]))&&(t[e]=Dz(n,r))}function Ei(t,e,n,r){return t&&e&&Qt(t)&&we(n)&&J(n,function(o){ke(o)&&Nc(t,o,e,o,r)}),t}function _L(t){return function(){function e(){var n=this;t&&_e(t,function(r,o){n[r]=o})}return e}()}function qo(t){return t&&Kp&&(t=qp(Kp({},t))),t}function eD(t,e,n,r,o,i){var s=arguments,a=s[0]||{},c=s[de],l=!1,u=1;for(c>0&&na(a)&&(l=a,a=s[u]||{},u++),Qt(a)||(a={});u<c;u++){var f=s[u],m=we(f),d=Qt(f);for(var p in f){var h=m&&p in f||d&&ys(f,p);if(h){var g=f[p],v=void 0;if(l&&g&&((v=we(g))||Tr(g))){var C=a[p];v?we(C)||(C=[]):Tr(C)||(C={}),g=eD(l,C,g)}g!==void 0&&(a[p]=g)}}}return a}function Ds(t){try{return t.responseText}catch{}return null}function Pd(t,e){return t?"XDomainRequest,Response:"+Ds(t)||"":e}function kc(t,e){return t?"XMLHttpRequest,Status:"+t[wd]+",Response:"+Ds(t)||t.response||"":e}function Lc(t,e){return e&&(Ir(e)?t=[e].concat(t):we(e)&&(t=e.concat(t))),t}function xL(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,Lde,r),n&&s(a,xz,n),a.open(t,e,!o),n&&s(a,xz,n),!o&&i&&s(a,Ade,i),a}function tD(t){var e={};if(ke(t)){var n=Ze(t)[Yi](/[\r\n]+/);J(n,function(r){if(r){var o=r.indexOf(": ");if(o!==-1){var i=Ze(r.substring(0,o))[Wo](),s=Ze(r.substring(o+1));e[i]=s}else e[Ze(r)]=1}})}return e}function ph(t,e,n){if(!t[n]&&e&&e.getResponseHeader){var r=e.getResponseHeader(n);r&&(t[n]=Ze(r))}return t}function Ac(t,e){var n={};return t[fL]?n=tD(t[fL]()):e&&(n=ph(n,t,Ude),n=ph(n,t,Fde),n=ph(n,t,Ode)),n}var Tde,Rde,Nde,kde,jTe,Lde,xz,Ade,Fde,Ode,Ude,ma=Z(()=>{Bo();Le();Dt();On();Tde="getPrototypeOf",Rde=/-([a-z])/g,Nde=/([^\w\d_$])/g,kde=/^(\d+[\w\d_$])/,jTe=Object[Tde];Lde="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",xz="withCredentials",Ade="timeout";Fde="kill-duration",Ode="kill-duration-seconds",Ude="time-delta-millis"});function Tz(t,e){var n=!1;if(t){try{if(n=e in t,!n){var r=t[vs];r&&(n=e in r)}}catch{}if(!n)try{var o=new t;n=!Ve(o[e])}catch{}}return n}function RL(t){bz=t}function bd(t){if(t&&bz){var e=pt("__mockLocation");if(e)return e}return typeof location===Sc&&location?location:pt($de)}function Gw(){return typeof console!==ea?console:pt(Hde)}function pa(){return!!(typeof JSON===Sc&&JSON||pt(Iz)!==null)}function Rr(){return pa()?JSON||pt(Iz):null}function zw(){return pt(Bde)}function Kw(){return pt(Wde)}function du(){var t=Kn();return t&&t.product?t.product===jde:!1}function mu(){var t=Kn();if(t&&(t[Bw]!==IL||DL===null)){IL=t[Bw];var e=(IL||Ae)[Wo]();DL=xn(e,bL)||xn(e,TL)}return DL}function Xw(t){if(t===void 0&&(t=null),!t){var e=Kn()||{};t=e?(e.userAgent||Ae)[Wo]():Ae}var n=(t||Ae)[Wo]();if(xn(n,bL)){var r=fn()||{};return oa(parseInt(n[Yi](bL)[1]),r[Mde]||0)}else if(xn(n,TL)){var o=parseInt(n[Yi](TL)[1]);if(o)return o+4}return null}function Go(t){return(PL===null||t===!1)&&(PL=kw()&&!!Kn().sendBeacon),PL}function Fc(t){var e=!1;try{e=!!pt("fetch");var n=pt("Request");e&&t&&n&&(e=Tz(n,"keepalive"))}catch{}return e}function Jw(){return hh===null&&(hh=typeof XDomainRequest!==ea,hh&&gh()&&(hh=hh&&!Tz(pt(Pz),"withCredentials"))),hh}function gh(){var t=!1;try{var e=pt(Pz);t=!!e}catch{}return t}function Rz(t,e){if(t)for(var n=0;n<t[de];n++){var r=t[n];if(r[wo]&&r[wo]===e)return r}return{}}function NL(t){var e=fn();return e&&t?Rz(e.querySelectorAll("meta"),t).content:null}function kL(t){var e,n=ou();if(n){var r=n.getEntriesByType("navigation")||[];e=Rz((r[de]>0?r[0]:{}).serverTiming,t).description}return e}var Mde,$de,Hde,Iz,Bde,Wde,jde,bL,TL,Pz,DL,IL,bz,hh,PL,pu=Z(()=>{"use strict";Bo();Le();Dt();ma();On();Mde="documentMode",$de="location",Hde="console",Iz="JSON",Bde="crypto",Wde="msCrypto",jde="ReactNative",bL="msie",TL="trident/",Pz="XMLHttpRequest",DL=null,IL=null,bz=!1,hh=null,PL=null});function Vde(t){t<0&&(t>>>=0),Zw=kz+t&hu,Qw=Lz-t&hu,Az=!0}function Yde(){try{var t=dn()&2147483647;Vde((Math.random()*Nz^t)+t)}catch{}}function ey(t){return t>0?go(Oc()/hu*(t+1))>>>0:0}function Oc(t){var e=0,n=zw()||Kw();return n&&n.getRandomValues&&(e=n.getRandomValues(new Uint32Array(1))[0]&hu),e===0&&mu()&&(Az||Yde(),e=Fz()&hu),e===0&&(e=go(Nz*Math.random()|0)),t||(e>>>=0),e}function Fz(t){Qw=36969*(Qw&65535)+(Qw>>16)&hu,Zw=18e3*(Zw&65535)+(Zw>>16)&hu;var e=(Qw<<16)+(Zw&65535)>>>0&hu|0;return t||(e>>>=0),e}function ty(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=Oc()>>>0,r=0,o=Ae;o[de]<t;)r++,o+=e.charAt(n&63),n>>>=6,r===5&&(n=(Oc()<<2&4294967295|n&3)>>>0,r=0);return o}var Nz,hu,kz,Lz,Az,Zw,Qw,nD=Z(()=>{Le();Dt();pu();On();Nz=4294967296,hu=4294967295,kz=123456789,Lz=987654321,Az=!1,Zw=kz,Qw=Lz});function Uz(t){return t.nodeType===1||t.nodeType===9||!+t.nodeType}function zde(t,e){var n=e[t.id];if(!n){n={};try{Uz(e)&&vt(e,t.id,{e:!1,v:n})}catch{}}return n}function Nr(t,e){return e===void 0&&(e=!1),Id(t+Gde+++(e?"."+Oz:Ae)+qde)}function rD(t){var e={id:Nr("_aiData-"+(t||Ae)+"."+Oz),accept:function(n){return Uz(n)},get:function(n,r,o,i){var s=n[e.id];return s?s[Id(r)]:(i&&(s=zde(e,n),s[Id(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return e}var Oz,qde,Gde,vh=Z(()=>{Le();ma();On();nD();Oz="3.3.6",qde="."+ty(6),Gde=0});function oD(t){return t&&Qt(t)&&(t.isVal||t.fb||ys(t,"v")||ys(t,"mrg")||ys(t,"ref")||t.set)}function Mz(t,e,n){var r,o=n.dfVal||Dx;if(e&&n.fb){var i=n.fb;we(i)||(i=[i]);for(var s=0;s<i[de];s++){var a=i[s],c=e[a];if(o(c)?r=c:t&&(c=t.cfg[a],o(c)&&(r=c),t.set(t.cfg,_n(a),c)),o(r))break}}return!o(r)&&o(n.v)&&(r=n.v),r}function LL(t,e,n){var r=n;if(n&&oD(n)&&(r=Mz(t,e,n)),r){oD(r)&&(r=LL(t,e,r));var o;we(r)?(o=[],o[de]=r[de]):Tr(r)&&(o={}),o&&(_e(r,function(i,s){s&&oD(s)&&(s=LL(t,e,s)),o[i]=s}),r=o)}return r}function ny(t,e,n,r){var o,i,s,a=r,c,l,u,f;oD(a)?(o=a.isVal,i=a.set,u=a.rdOnly,f=a.blkVal,c=a.mrg,l=a.ref,!l&&Ve(l)&&(l=!!c),s=Mz(t,e,a)):s=r,f&&t.blkVal(e,n);var m,d=!0,p=e[n];(p||!ne(p))&&(m=p,d=!1,o&&m!==s&&!o(m)&&(m=s,d=!0),i&&(m=i(m,s,e),d=m===s)),d?s?m=LL(t,e,s):m=s:(Tr(m)||we(s))&&c&&s&&(Tr(s)||we(s))&&_e(s,function(h,g){ny(t,m,h,g)}),t.set(e,n,m),l&&t.ref(e,n),u&&t.rdOnly(e,n)}var AL=Z(()=>{Le();Dt()});function FL(t){if(t){var e;if(we(t)?(e=[],e[de]=t[de]):Tr(t)&&(e={}),e)return _e(t,function(n,r){e[n]=FL(r)}),e}return t}function ry(t){if(t){var e=t[ha]||t;if(e.cfg&&(e.cfg===t||e.cfg[ha]===e))return e}return null}function oy(t){if(t&&(Tr(t)||we(t)))try{t[$z]=!0}catch{}return t}function OL(t){if(t)try{t[Hz]=!0}catch{}return t}function iD(t,e,n){var r=!1;return n&&!t[e.blkVal]&&(r=n[Hz],!r&&!n[$z]&&(r=Tr(n)||we(n))),r}function sD(t){Pr("InvalidAccess:"+t)}var ha,$z,Hz,aD=Z(()=>{Le();Dt();ha=Rx("[[ai_dynCfg_1]]"),$z=Rx("[[ai_blkDynCfg_1]]"),Hz=Rx("[[ai_frcDynCfg_1]]")});function Xde(t,e,n){we(e)&&J(Kde,function(r){var o=e[r];e[r]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=o[iu](this,i);return iy(t,e,n,"Patching"),a}})}function cD(t,e){var n=Px(t,e);return n&&n.get}function Jde(t,e,n,r){var o={n,h:[],trk:function(l){l&&l.fn&&(ut(o.h,l)===-1&&o.h[Ye](l),t.trk(l,o))},clr:function(l){var u=ut(o.h,l);u!==-1&&o.h[ca](u,1)}},i=!0,s=!1;function a(){i&&(s=s||iD(a,t,r),r&&!r[ha]&&s&&(r=iy(t,r,n,"Converting")),i=!1);var l=t.act;return l&&o.trk(l),r}a[t.prop]={chng:function(){t.add(o)}};function c(l){if(r!==l){a[t.ro]&&!t.upd&&sD("["+n+"] is read-only:"+pe(e)),i&&(s=s||iD(a,t,r),i=!1);var u=s&&a[t.rf];if(s)if(u){_e(r,function(m){r[m]=l?l[m]:yi});try{_e(l,function(m,d){sy(t,r,m,d)}),l=r}catch(m){wh((t.hdlr||{})[Lt],n,"Assigning",m),s=!1}}else r&&r[ha]&&_e(r,function(m){var d=cD(r,m);if(d){var p=d[t.prop];p&&p.chng()}});if(l!==r){var f=l&&iD(a,t,l);!u&&f&&(l=iy(t,l,n,"Converting")),r=l,s=f}t.add(o)}}vt(e,o.n,{g:a,s:c})}function sy(t,e,n,r){if(e){var o=cD(e,n),i=o&&!!o[t.prop];i?e[n]=r:Jde(t,e,n,r)}return e}function lD(t,e,n,r){if(e){var o=cD(e,n),i=o&&!!o[t.prop],s=r&&r[0],a=r&&r[1],c=r&&r[2];if(!i){if(c)try{oy(e)}catch(l){wh((t.hdlr||{})[Lt],n,"Blocking",l)}try{sy(t,e,n,e[n]),o=cD(e,n)}catch(l){wh((t.hdlr||{})[Lt],n,"State",l)}}s&&(o[t.rf]=s),a&&(o[t.ro]=a),c&&(o[t.blkVal]=!0)}return e}function iy(t,e,n,r){try{_e(e,function(o,i){sy(t,e,o,i)}),e[ha]||($o(e,ha,{get:function(){return t.hdlr}}),Xde(t,e,n))}catch(o){wh((t.hdlr||{})[Lt],n,r,o)}return e}var Kde,wh,Bz=Z(()=>{Le();On();Dt();aD();Kde=["push","pop","shift","unshift","splice"],wh=function(t,e,n,r){t&&t[Pc](3,108,"".concat(n," [").concat(e,"] failed - ")+pe(r))}});function Wz(t){var e=Qp(ay+"get"+t.uid+cy),n=Qp(ay+"ro"+t.uid+cy),r=Qp(ay+"rf"+t.uid+cy),o=Qp(ay+"blkVal"+t.uid+cy),i=Qp(ay+"dtl"+t.uid+cy),s=null,a=null,c;function l(d,p){var h=c.act;try{c.act=d,d&&d[i]&&(J(d[i],function(v){v.clr(d)}),d[i]=[]),p({cfg:t.cfg,set:t.set.bind(t),setDf:t.setDf.bind(t),ref:t.ref.bind(t),rdOnly:t.rdOnly.bind(t)})}catch(v){var g=t[Lt];throw g&&g[Pc](1,107,pe(v)),v}finally{c.act=h||null}}function u(){if(s){var d=s;s=null,a&&a[bc](),a=null;var p=[];if(J(d,function(h){if(h&&(h[i]&&(J(h[i],function(g){g.clr(h)}),h[i]=null),h.fn))try{l(h,h.fn)}catch(g){p[Ye](g)}}),s)try{u()}catch(h){p[Ye](h)}p[de]>0&&uz("Watcher error(s): ",p)}}function f(d){if(d&&d.h[de]>0){s||(s=[]),a||(a=mi(function(){a=null,u()},0));for(var p=0;p<d.h[de];p++){var h=d.h[p];h&&ut(s,h)===-1&&s[Ye](h)}}}function m(d,p){if(d){var h=d[i]=d[i]||[];ut(h,p)===-1&&h[Ye](p)}}return c={prop:e,ro:n,rf:r,blkVal:o,hdlr:t,add:f,notify:u,use:l,trk:m},c}var ay,cy,jz=Z(()=>{Le();fz();Dt();ay="[[ai_",cy="]]"});function Zde(t,e){var n={fn:e,rm:function(){n.fn=null,t=null,e=null}};return vt(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),t.use(n,e),n}function Qde(t,e,n){var r=ry(e);if(r)return r;var o=Nr("dyncfg",!0),i=e&&n!==!1?e:FL(e),s;function a(){s.notify()}function c(g,v,C){try{g=sy(s,g,v,C)}catch(w){wh(t,v,"Setting value",w)}return g[v]}function l(g){return Zde(s,g)}function u(g,v){s.use(null,function(C){var w=s.upd;try{Ve(v)||(s.upd=v),g(C)}finally{s.upd=w}})}function f(g,v){var C;return lD(s,g,v,(C={},C[0]=!0,C))[v]}function m(g,v){var C;return lD(s,g,v,(C={},C[1]=!0,C))[v]}function d(g,v){var C;return lD(s,g,v,(C={},C[2]=!0,C))[v]}function p(g,v){return v&&_e(v,function(C,w){ny(h,g,C,w)}),g}var h={uid:null,cfg:i,logger:t,notify:a,set:c,setDf:p,watch:l,ref:f,rdOnly:m,blkVal:d,_block:u};return vt(h,"uid",{c:!1,e:!1,w:!1,v:o}),s=Wz(h),iy(s,i,"config","Creating"),h}function eme(t,e){t?(t[oh](e),t[Pc](2,108,e)):sD(e)}function jt(t,e,n,r){var o=Qde(n,t||{},r);return e&&o.setDf(o.cfg,e),o}function Un(t,e,n){var r=t[ha]||t;return r.cfg&&(r.cfg===t||r.cfg[ha]===r)?r[aa](e):(eme(n,_z+pe(t)),jt(t,null,n)[aa](e))}var gu=Z(()=>{Le();vh();On();Dt();AL();Bz();jz();aD()});function Uc(t,e){if(t&&t[Vi])return t[Vi](e)}function uD(t,e,n){var r;return n||(r=qi(function(o){n=o})),t&&th(t)>0?wi(Uc(t[0],e),function(){uD(eh(t,1),e,n)}):n(),r}var UL=Z(()=>{Sd();Le();Dt()});var Vz,ML,$L=Z(()=>{Vz=500,ML="Microsoft_ApplicationInsights_BypassAjaxInstrumentation"});function tme(t,e,n){return!t&&ne(t)?e:na(t)?t:_n(t)[Wo]()==="true"}function HL(t){return{mrg:!0,v:t}}function yh(t,e,n){return{fb:n,isVal:t,v:e}}function Ki(t,e){return{fb:e,set:tme,v:!!t}}var BL=Z(()=>{Le();Dt()});function nme(t,e){return function(){var n=arguments,r=jL(e);if(r){var o=r.listener;o&&o[t]&&o[t][iu](o,n)}}}function rme(){var t=pt("Microsoft");return t&&(dD=t.ApplicationInsights),dD}function jL(t){var e=dD;return!e&&t.disableDbgExt!==!0&&(e=dD||rme()),e?e.ChromeDbgExt:null}function Yz(t){if(!fD){fD={};for(var e=0;e<WL[de];e++)fD[WL[e]]=nme(WL[e],t)}return fD}var WL,dD,fD,VL=Z(()=>{Le();Dt();On();WL=[fh,fu,dh,da],dD=null});function qz(t){return t?'"'+t[_s](/\"/g,Ae)+'"':Ae}function YL(t,e){var n=Gw();if(n){var r="log";n[t]&&(r=t),Re(n[r])&&n[r](e)}}function Is(t,e){return(t||{})[Lt]||new vu(e)}function qL(t){return t||new vu}function ae(t,e,n,r,o,i){i===void 0&&(i=!1),qL(t)[Pc](e,n,r,o,i)}function yo(t,e){qL(t)[oh](e)}function GL(t,e,n){qL(t).logInternalMessage(e,n)}var Ch,Gz,ome,ime,sme,ame,cme,Td,vu,Ps=Z(()=>{"use strict";pr();Le();gu();Dt();VL();pu();On();Gz="warnToConsole",ome="AI (Internal): ",ime="AI: ",sme="AITR_",ame={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},cme=(Ch={},Ch[0]=null,Ch[1]="errorToConsole",Ch[2]=Gz,Ch[3]="debugToConsole",Ch);Td=function(){function t(e,n,r,o){r===void 0&&(r=!1);var i=this;i[ch]=e,i[fa]=(r?ime:ome)+e;var s=Ae;pa()&&(s=Rr().stringify(o));var a=(n?" message:"+qz(n):Ae)+(o?" props:"+qz(s):Ae);i[fa]+=a}return t.dataType="MessageData",t}();vu=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},o,i,s,a,c;Xe(t,this,function(l){c=f(e||{}),l.consoleLoggingLevel=function(){return o},l[Pc]=function(p,h,g,v,C){C===void 0&&(C=!1);var w=new Td(h,g,C,v);if(a)throw pe(w);var y=cme[p]||Gz;if(Ve(w[fa]))d("throw"+(p===1?"Critical":"Warning"),w);else{if(C){var S=+w[ch];!r[S]&&o>=p&&(l[y](w[fa]),r[S]=!0)}else o>=p&&l[y](w[fa]);u(p,w)}},l.debugToConsole=function(p){YL("debug",p),d("warning",p)},l[oh]=function(p){YL("warn",p),d("warning",p)},l.errorToConsole=function(p){YL("error",p),d("error",p)},l.resetInternalMessageCount=function(){n=0,r={}},l.logInternalMessage=u,l[Vi]=function(p){c&&c.rm(),c=null};function u(p,h){if(!m()){var g=!0,v=sme+h[ch];if(r[v]?g=!1:r[v]=!0,g&&(p<=i&&(l.queue[Ye](h),n++,d(p===1?"error":"warn",h)),n===s)){var C="Internal events throttle limit per PageView reached for this app.",w=new Td(23,C,!1);l.queue[Ye](w),p===1?l.errorToConsole(C):l[oh](C)}}}function f(p){return Un(jt(p,ame,l).cfg,function(h){var g=h.cfg;o=g[jx],i=g.loggingLevelTelemetry,s=g.maxMessageLimit,a=g.enableDebug})}function m(){return n>=s}function d(p,h){var g=jL(e||{});g&&g[Vo]&&g[Vo](p,h)}})}return t.__ieDyn=1,t}()});function QL(){!ga&&(ga=j3(function(){return fn()}))}function ume(t,e){var n=Mc[wu]||hD[wu];return n||(n=Mc[wu]=Mc(t,e),hD[wu]=n),n}function pD(t){return t?t.isEnabled():!0}function r4(t,e){return e&&t&&we(t.ignoreCookies)?ut(t.ignoreCookies,e)!==-1:!1}function fme(t,e){return e&&t&&we(t.blockedCookies)&&ut(t.blockedCookies,e)!==-1?!0:r4(t,e)}function Qz(t,e){var n=e[au];if(ne(n)){var r=void 0;Ve(t[Xz])||(r=!t[Xz]),Ve(t[JL])||(r=!t[JL]),n=r}return n}function eA(t,e){var n;if(t)n=t.getCookieMgr();else if(e){var r=e.cookieCfg;r&&r[wu]?n=r[wu]:n=Mc(e)}return n||(n=ume(e,(t||{})[Lt])),n}function Mc(t,e){var n,r,o,i,s,a,c,l;t=jt(t||hD,null,e).cfg,i=Un(t,function(f){f.setDf(f.cfg,lme),n=f.ref(f.cfg,"cookieCfg"),r=n[Qx]||"/",o=n[Zx],s=Qz(t,n)!==!1,a=n.getCookie||dme,c=n.setCookie||n4,l=n.delCookie||n4},e);var u={isEnabled:function(){var f=Qz(t,n)!==!1&&s&&Eh(e),m=hD[wu];return f&&m&&u!==m&&(f=pD(m)),f},setEnabled:function(f){s=f!==!1,n[au]=f},set:function(f,m,d,p,h){var g=!1;if(pD(u)&&!fme(n,f)){var v={},C=Ze(m||Ae),w=vo(C,";");if(w!==-1&&(C=Ze(dd(m,w)),v=o4(zn(m,w+1))),zi(v,Zx,p||o,ws,Ve),!ne(d)){var y=mu();if(Ve(v[KL])){var S=dn(),P=S+d*1e3;if(P>0){var D=new Date;D.setTime(P),zi(v,KL,e4(D,y?zz:Kz)||e4(D,y?zz:Kz)||Ae,ws)}}y||zi(v,"max-age",Ae+d,null,Ve)}var A=bd();A&&A.protocol==="https:"&&(zi(v,"secure",null,null,Ve),XL===null&&(XL=!gD((Kn()||{})[Bw])),XL&&zi(v,"SameSite","None",null,Ve)),zi(v,Qx,h||r,null,Ve),c(f,t4(C,v)),g=!0}return g},get:function(f){var m=Ae;return pD(u)&&!r4(n,f)&&(m=a(f)),m},del:function(f,m){var d=!1;return pD(u)&&(d=u.purge(f,m)),d},purge:function(f,m){var d,p=!1;if(Eh(e)){var h=(d={},d[Qx]=m||"/",d[KL]="Thu, 01 Jan 1970 00:00:01 GMT",d);mu()||(h["max-age"]="0"),l(f,t4(Ae,h)),p=!0}return p},unload:function(f){i&&i.rm(),i=null}};return u[wu]=u,u}function Eh(t){if(mD===null){mD=!1,!ga&&QL();try{var e=ga.v||{};mD=e[ZL]!==void 0}catch(n){ae(t,2,68,"Cannot access document.cookie - "+At(n),{exception:pe(n)})}}return mD}function o4(t){var e={};if(t&&t[de]){var n=Ze(t)[Yi](";");J(n,function(r){if(r=Ze(r||Ae),r){var o=vo(r,"=");o===-1?e[r]=null:e[Ze(dd(r,o))]=Ze(zn(r,o+1))}})}return e}function e4(t,e){return Re(t[e])?t[e]():null}function t4(t,e){var n=t||Ae;return _e(e,function(r,o){n+="; "+r+(ne(o)?Ae:"="+o)}),n}function dme(t){var e=Ae;if(!ga&&QL(),ga.v){var n=ga.v[ZL]||Ae;Jz!==n&&(Zz=o4(n),Jz=n),e=Ze(Zz[t]||Ae)}return e}function n4(t,e){!ga&&QL(),ga.v&&(ga.v[ZL]=t+"="+e)}function gD(t){return ke(t)?!!(xn(t,"CPU iPhone OS 12")||xn(t,"iPad; CPU OS 12")||xn(t,"Macintosh; Intel Mac OS X 10_14")&&xn(t,"Version/")&&xn(t,"Safari")||xn(t,"Macintosh; Intel Mac OS X 10_14")&&pd(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||xn(t,"Chrome/5")||xn(t,"Chrome/6")||xn(t,"UnrealEngine")&&!xn(t,"Chrome")||xn(t,"UCBrowser/12")||xn(t,"UCBrowser/11")):!1}var zL,Rd,zz,Kz,ZL,KL,Xz,JL,wu,mD,XL,Jz,ga,Zz,hD,lme,tA=Z(()=>{Le();BL();gu();Dt();Ps();pu();ma();On();zz="toGMTString",Kz="toUTCString",ZL="cookie",KL="expires",Xz="isCookieUseDisabled",JL="disableCookiesUsage",wu="_ckMgr",mD=null,XL=null,Jz=null,Zz={},hD={},lme=(zL={cookieCfg:HL((Rd={},Rd[Zx]={fb:"cookieDomain",dfVal:Gi},Rd.path={fb:"cookiePath",dfVal:Gi},Rd.enabled=yi,Rd.ignoreCookies=yi,Rd.blockedCookies=yi,Rd)),cookieDomain:yi,cookiePath:yi},zL[JL]=yi,zL)});function pme(t){t.h=null;var e=t.cb;t.cb=[],J(e,function(n){Gn(n.fn,[n.arg])})}function yu(t,e,n,r){J(t,function(o){o&&o[e]&&(n?(n.cb[Ye]({fn:r,arg:o}),n.h=n.h||mi(pme,0,n)):Gn(r,[o]))})}var mme,ly,nA=Z(()=>{pr();Sd();Le();gu();Dt();On();mme={perfEvtsSendAll:!1};ly=function(){function t(e){this.listeners=[];var n,r,o=[],i={h:null,cb:[]},s=jt(e,mme);r=s[aa](function(a){n=!!a.cfg.perfEvtsSendAll}),Xe(t,this,function(a){vt(a,"listeners",{g:function(){return o}}),a[sh]=function(c){o[Ye](c)},a[ih]=function(c){for(var l=ut(o,c);l>-1;)o[ca](l,1),l=ut(o,c)},a[fh]=function(c){yu(o,fh,i,function(l){l[fh](c)})},a[fu]=function(c,l){yu(o,fu,i,function(u){u[fu](c,l)})},a[dh]=function(c,l){yu(o,dh,l?i:null,function(u){u[dh](c,l)})},a[da]=function(c){c&&(n||!c[Ww]())&&yu(o,da,null,function(l){c.isAsync?mi(function(){return l[da](c)},0):l[da](c)})},a[Kx]=function(c){c&&c[de]&&yu(o,Kx,i,function(l){l[Kx](c)})},a[Xx]=function(c){c&&c[uu]&&yu(o,Xx,i,function(l){l[Xx](c)})},a[Jx]=function(c,l){if(c>0){var u=l||0;yu(o,Jx,i,function(f){f[Jx](c,u)})}},a[Vi]=function(c){var l=function(){r&&r.rm(),r=null,o=[],i.h&&i.h[bc](),i.h=null,i.cb=[]},u;if(yu(o,"unload",null,function(f){var m=f[Vi](c);m&&(u||(u=[]),u[Ye](m))}),u)return qi(function(f){return wi(Sz(u),function(){l(),f()})});l()}})}return t.__ieDyn=1,t}()});function hn(t,e,n,r,o){if(t){var i=t;if(i[mh]&&(i=i[mh]()),i){var s=void 0,a=i[yd](rA);try{if(s=i.create(e(),r,o),s){if(a&&s[xs]&&(s[xs](Nd[oA],a),a[yd]&&a[xs])){var c=a[yd](Nd[uy]);c||(c=[],a[xs](Nd[uy],c)),c[Ye](s)}return i[xs](rA,s),n(s)}}catch(l){s&&s[xs]&&s[xs]("exception",l)}finally{s&&i.fire(s),i[xs](rA,a)}}}return n()}function iA(){return hme}var Sh,oA,uy,hme,Nd,fy,rA,vD=Z(()=>{pr();Le();Dt();On();Sh="ctx",oA="ParentContextKey",uy="ChildrenContextKey",hme=null,Nd=function(){function t(e,n,r){var o=this;if(o.start=dn(),o[wo]=e,o.isAsync=r,o[Ww]=function(){return!1},Re(n)){var i;vt(o,"payload",{g:function(){return!i&&Re(n)&&(i=n(),n=null),i}})}o[yd]=function(s){return s?s===t[oA]||s===t[uy]?o[s]:(o[Sh]||{})[s]:null},o[xs]=function(s,a){if(s)if(s===t[oA])o[s]||(o[Ww]=function(){return!0}),o[s]=a;else if(s===t[uy])o[s]=a;else{var c=o[Sh]=o[Sh]||{};c[s]=a}},o.complete=function(){var s=0,a=o[yd](t[uy]);if(we(a))for(var c=0;c<a[de];c++){var l=a[c];l&&(s+=l.time)}o.time=dn()-o.start,o.exTime=o.time-s,o.complete=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),fy=function(){function t(e){this.ctx={},Xe(t,this,function(n){n.create=function(r,o,i){return new Nd(r,o,i)},n.fire=function(r){r&&(r.complete(),e&&Re(e[da])&&e[da](r))},n[xs]=function(r,o){if(r){var i=n[Sh]=n[Sh]||{};i[r]=o}},n[yd]=function(r){return(n[Sh]||{})[r]}})}return t.__ieDyn=1,t}(),rA="CoreUtils.doPerf"});function dy(){var t=kd();return zn(t,0,8)+"-"+zn(t,8,12)+"-"+zn(t,12,16)+"-"+zn(t,16,20)+"-"+zn(t,20)}function kd(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=Ae,n,r=0;r<4;r++)n=Oc(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+(Oc()&3)|0];return ia(e,0,8)+ia(e,9,4)+"4"+ia(e,13,3)+o+ia(e,16,3)+ia(e,19,12)}var sA=Z(()=>{"use strict";Le();On();nD()});function $c(t,e,n){return t&&t[de]===e&&t!==n?!!t.match(/^[\da-f]*$/i):!1}function s4(t,e,n){return $c(t,e)?t:n}function a4(t){(isNaN(t)||t<0||t>255)&&(t=1);for(var e=t.toString(16);e[de]<2;)e="0"+e;return e}function my(t,e,n,r){return{version:$c(r,2,cA)?r:aA,traceId:va(t)?t:kd(),spanId:wa(e)?e:dd(kd(),16),traceFlags:n>=0&&n<=255?n:1}}function Ld(t,e){if(!t||(we(t)&&(t=t[0]||""),!t||!ke(t)||t[de]>8192))return null;if(t.indexOf(",")!==-1){var n=t[Yi](",");t=n[e>0&&n[de]>e?e:0]}var r=gme.exec(Ze(t));return!r||r[1]===cA||r[2]===wD||r[3]===yD?null:{version:(r[1]||Ae)[Wo](),traceId:(r[2]||Ae)[Wo](),spanId:(r[3]||Ae)[Wo](),traceFlags:parseInt(r[4],16)}}function va(t){return $c(t,32,wD)}function wa(t){return $c(t,16,yD)}function _h(t){return!(!t||!$c(t[ah],2,cA)||!$c(t.traceId,32,wD)||!$c(t.spanId,16,yD)||!$c(a4(t[Ed]),2))}function py(t){return _h(t)?(t[Ed]&i4)===i4:!1}function hy(t){if(t){var e=a4(t[Ed]);$c(e,2)||(e="01");var n=t[ah]||aA;return n!=="00"&&n!=="ff"&&(n=aA),"".concat(n.toLowerCase(),"-").concat(s4(t.traceId,32,wD).toLowerCase(),"-").concat(s4(t.spanId,16,yD).toLowerCase(),"-").concat(e.toLowerCase())}return""}function gy(t){var e="traceparent",n=Ld(NL(e),t);return n||(n=Ld(kL(e),t)),n}function lA(t){var e=t.getElementsByTagName("script"),n=[];return J(e,function(r){var o=r[Yx]("src");if(o){var i=r[Yx]("crossorigin"),s=r.hasAttribute("async")===!0,a=r.hasAttribute("defer")===!0,c=r[Yx]("referrerpolicy"),l={url:o};i&&(l.crossOrigin=i),s&&(l.async=s),a&&(l.defer=a),c&&(l.referrerPolicy=c),n[Ye](l)}}),n}var gme,aA,cA,wD,yD,i4,uA=Z(()=>{Le();Dt();sA();pu();On();gme=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,aA="00",cA="ff",wD="00000000000000000000000000000000",yD="0000000000000000",i4=1});function Hc(t){return vme.get(t,"state",{},!0)}function fA(t,e){for(var n=[],r=null,o=t[gi](),i;o;){var s=o[su]();if(s){r&&r[lu]&&s[Yo]&&r[lu](s),i=Hc(s);var a=!!i[jo];s[jo]&&(a=s[jo]()),a||n[Ye](s),r=s,o=o[gi]()}}J(n,function(c){var l=t[pn]();c[Tc](t.getCfg(),l,e,t[gi]()),i=Hc(c),!c[pn]&&!i[pn]&&(i[pn]=l),i[jo]=!0,delete i[hi]})}function CD(t){return t.sort(function(e,n){var r=0;if(n){var o=n[Yo];e[Yo]?r=o?e[Dd]-n[Dd]:1:o&&(r=-1)}else r=e?1:-1;return r})}function c4(t){var e={};return{getName:function(){return e[wo]},setName:function(n){t&&t.setName(n),e[wo]=n},getTraceId:function(){return e.traceId},setTraceId:function(n){t&&t.setTraceId(n),va(n)&&(e.traceId=n)},getSpanId:function(){return e.spanId},setSpanId:function(n){t&&t.setSpanId(n),wa(n)&&(e.spanId=n)},getTraceFlags:function(){return e[Ed]},setTraceFlags:function(n){t&&t.setTraceFlags(n),e[Ed]=n}}}var vme,dA=Z(()=>{"use strict";Le();Dt();vh();On();uA();vme=rD("plugin")});function yme(t,e,n){for(;t;){if(t[su]()===n)return t;t=t[gi]()}return Cu([n],e.config||{},e)}function mA(t,e,n,r){var o=null,i=[];e||(e=jt({},null,n[Lt])),r!==null&&(o=r?yme(t,n,r):t);var s={_next:c,ctx:{core:function(){return n},diagLog:function(){return Is(n,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:u,getConfig:f,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(d){o=d},iterate:m,onComplete:a}};function a(d,p){for(var h=[],g=2;g<arguments.length;g++)h[g-2]=arguments[g];d&&i[Ye]({func:d,self:Ve(p)?s.ctx:p,args:h})}function c(){var d=o;if(o=d?d[gi]():null,!d){var p=i;p&&p[de]>0&&(J(p,function(h){try{h.func.call(h.self,h.args)}catch(g){ae(n[Lt],2,73,"Unexpected Exception during onComplete - "+pe(g))}}),i=[])}return d}function l(d,p){var h=null,g=e.cfg;if(g&&d){var v=g[Rc];!v&&p&&(v={}),g[Rc]=v,v=e.ref(g,Rc),v&&(h=v[d],!h&&p&&(h={}),v[d]=h,h=e.ref(v,d))}return h}function u(d,p){var h=l(d,!0);return p&&_e(p,function(g,v){if(ne(h[g])){var C=e.cfg[g];(C||!ne(C))&&(h[g]=C)}ny(e,h,g,v)}),e.setDf(h,p)}function f(d,p,h){h===void 0&&(h=!1);var g,v=l(d,!1),C=e.cfg;return v&&(v[p]||!ne(v[p]))?g=v[p]:(C[p]||!ne(C[p]))&&(g=C[p]),g||!ne(g)?g:h}function m(d){for(var p;p=s._next();){var h=p[su]();h&&d(h)}}return s}function Co(t,e,n,r){var o=jt(e),i=mA(t,o,n,r),s=i.ctx;function a(l){var u=i._next();return u&&u[Yo](l,s),!u}function c(l,u){return l===void 0&&(l=null),we(l)&&(l=Cu(l,o.cfg,n,u)),Co(l||s[gi](),o.cfg,n,u)}return s[Xn]=a,s[ua]=c,s}function xh(t,e,n){var r=jt(e.config),o=mA(t,r,e,n),i=o.ctx;function s(c){var l=o._next();return l&&l[Vi](i,c),!l}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=Cu(c,r.cfg,e,l)),xh(c||i[gi](),e,l)}return i[Xn]=s,i[ua]=a,i}function vy(t,e,n){var r=jt(e.config),o=mA(t,r,e,n),i=o.ctx;function s(c){return i.iterate(function(l){Re(l[vd])&&l[vd](i,c)})}function a(c,l){return c===void 0&&(c=null),we(c)&&(c=Cu(c,r.cfg,e,l)),vy(c||i[gi](),e,l)}return i[Xn]=s,i[ua]=a,i}function Cu(t,e,n,r){var o=null,i=!r;if(we(t)&&t[de]>0){var s=null;J(t,function(a){if(!i&&r===a&&(i=!0),i&&a&&Re(a[Yo])){var c=Cme(a,e,n);o||(o=c),s&&s._setNext(c),s=c}})}return r&&!o?Cu([r],e,n):o}function Cme(t,e,n){var r=null,o=Re(t[Yo]),i=Re(t[lu]),s;t?s=t[la]+"-"+t[Dd]+"-"+f4++:s="Unknown-0-"+f4++;var a={getPlugin:function(){return t},getNext:function(){return r},processTelemetry:u,unload:f,update:m,_id:s,_setNext:function(d){r=d}};function c(){var d;return t&&Re(t[u4])&&(d=t[u4]()),d||(d=Co(a,e,n)),d}function l(d,p,h,g,v){var C=!1,w=t?t[la]:wme,y=d[l4];return y||(y=d[l4]={}),d.setNext(r),t&&hn(d[pn](),function(){return w+":"+h},function(){y[s]=!0;try{var S=r?r._id:Ae;S&&(y[S]=!1),C=p(d)}catch(D){var P=r?y[r._id]:!0;P&&(C=!0),(!r||!P)&&ae(d[Vo](),1,73,"Plugin ["+w+"] failed during "+h+" - "+pe(D)+", run flags: "+pe(y))}},g,v),C}function u(d,p){p=p||c();function h(g){if(!t||!o)return!1;var v=Hc(t);return v[hi]||v[Yw]?!1:(i&&t[lu](r),t[Yo](d,g),!0)}l(p,h,"processTelemetry",function(){return{item:d}},!d.sync)||p[Xn](d)}function f(d,p){function h(){var g=!1;if(t){var v=Hc(t),C=t[pn]||v[pn];t&&(!C||C===d.core())&&!v[hi]&&(v[pn]=null,v[hi]=!0,v[jo]=!1,t[hi]&&t[hi](d,p)===!0&&(g=!0))}return g}l(d,h,"unload",function(){},p.isAsync)||d[Xn](p)}function m(d,p){function h(){var g=!1;if(t){var v=Hc(t),C=t[pn]||v[pn];t&&(!C||C===d.core())&&!v[hi]&&t[vd]&&t[vd](d,p)===!0&&(g=!0)}return g}l(d,h,"update",function(){},!1)||d[Xn](p)}return po(a)}var wme,l4,u4,f4,pA,ED=Z(()=>{"use strict";Le();AL();gu();Dt();Ps();ma();On();vD();dA();wme="TelemetryPluginChain",l4="_hasRun",u4="_getTelCtx",f4=0;pA=function(){function t(e,n,r,o){var i=this,s=Co(e,n,r,o);Ei(i,s,br(s))}return t}()});function Ad(){var t=[];function e(r){r&&t[Ye](r)}function n(r,o){J(t,function(i){try{i(r,o)}catch(s){ae(r[Vo](),2,73,"Unexpected error calling unload handler - "+pe(s))}}),t=[]}return{add:e,run:n}}var SD=Z(()=>{Le();Dt();Ps()});function hA(t,e){wy=t,yy=e}function Cy(){var t=[];function e(r){var o=t;t=[],J(o,function(i){try{(i.rm||i.remove).call(i)}catch(s){ae(r,2,73,"Unloading:"+pe(s))}}),wy&&o[de]>wy&&(yy?yy("doUnload",o):ae(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected."))}function n(r){r&&(Es(t,r),wy&&t[de]>wy&&(yy?yy("Add",t):ae(null,1,48,"Max unload hooks exceeded. An excessive number of unload hooks has been detected.")))}return{run:e,add:n}}var wy,yy,_D=Z(()=>{Le();Dt();Ps()});var gA,Eu,Eme,Bc,vA=Z(()=>{"use strict";pr();Le();gu();Dt();Ps();ma();On();ED();SD();_D();Eu="getPlugin",Eme=(gA={},gA[Rc]={isVal:Gi,v:{}},gA),Bc=function(){function t(){var e=this,n,r,o,i,s;l(),Xe(t,e,function(u){u[Tc]=function(f,m,d,p){c(f,m,p),n=!0},u[hi]=function(f,m){var d=u[pn];if(!d||f&&d!==f[pn]())return;var p,h=!1,g=f||xh(null,d,o&&o[Eu]?o[Eu]():o),v=m||{reason:0,isAsync:!1};function C(){h||(h=!0,i.run(g,m),s.run(g[Vo]()),p===!0&&g[Xn](v),l())}return!u[cu]||u[cu](g,v,C)!==!0?C():p=!0,p},u[vd]=function(f,m){var d=u[pn];if(!d||f&&d!==f[pn]())return;var p,h=!1,g=f||vy(null,d,o&&o[Eu]?o[Eu]():o),v=m||{reason:0};function C(){h||(h=!0,c(g.getCfg(),g.core(),g[gi]()))}return!u._doUpdate||u._doUpdate(g,v,C)!==!0?C():p=!0,p},Nc(u,"_addUnloadCb",function(){return i},"add"),Nc(u,"_addHook",function(){return s},"add"),vt(u,"_unloadHooks",{g:function(){return s}})}),e[Vo]=function(u){return a(u)[Vo]()},e[jo]=function(){return n},e.setInitialized=function(u){n=u},e[lu]=function(u){o=u},e[Xn]=function(u,f){f?f[Xn](u):o&&Re(o[Yo])&&o[Yo](u,null)},e._getTelCtx=a;function a(u){u===void 0&&(u=null);var f=u;if(!f){var m=r||Co(null,{},e[pn]);o&&o[Eu]?f=m[ua](null,o[Eu]):f=m[ua](null,o)}return f}function c(u,f,m){jt(u,Eme,Is(f)),!m&&f&&(m=f[Wx]()[gi]());var d=o;o&&o[Eu]&&(d=o[Eu]()),e[pn]=f,r=Co(m,u,f,d)}function l(){n=!1,e[pn]=null,r=null,o=null,s=Cy(),i=Ad()}}return t.__ieDyn=1,t}()});function Sme(t,e,n){var r={id:e,fn:n};Es(t,r);var o={remove:function(){J(t,function(i,s){if(i.id===r.id)return t[ca](s,1),-1})}};return o}function _me(t,e,n){for(var r=!1,o=t[de],i=0;i<o;++i){var s=t[i];if(s)try{if(s.fn[iu](null,[e])===!1){r=!0;break}}catch(a){ae(n,2,64,"Telemetry initializer failed: "+At(a),{exception:pe(a)},!0)}}return!r}var d4,m4=Z(()=>{Bo();pr();Le();Dt();vA();Ps();ma();On();d4=function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,o;i(),Xe(e,n,function(s,a){s.addTelemetryInitializer=function(c){return Sme(o,r++,c)},s[Yo]=function(c,l){_me(o,c,l?l[Vo]():s[Vo]())&&s[Xn](c,l)},s[cu]=function(){i()}});function i(){r=0,o=[]}return n}return e.__ieDyn=1,e}(Bc)});function bme(t,e){return new fy(e)}function Tme(t,e,n){var r=[],o=[],i={};return J(n,function(s){(ne(s)||ne(s[Tc]))&&un(v4);var a=s[Dd],c=s[la];s&&a&&(ne(i[a])?i[a]=c:yo(t,"Two extensions have same priority #"+a+" - "+i[a]+", "+c)),!a||a<e?r[Ye](s):o[Ye](s)}),{core:r,channels:o}}function h4(t,e){var n=!1;return J(e,function(r){if(r===t)return n=!0,-1}),n}function yA(t,e,n,r){n&&_e(n,function(o,i){r&&Tr(i)&&Tr(e[o])&&yA(t,e[o],i,r),r&&Tr(i)&&Tr(e[o])?yA(t,e[o],i,r):t.set(e,o,i)})}function g4(t,e){var n=null,r=-1;return J(t,function(o,i){if(o.w===e)return n=o,r=i,-1}),{i:r,l:n}}function Rme(t,e){var n=g4(t,e).l;return n||(n={w:e,rm:function(){var r=g4(t,e);r.i!==-1&&t[ca](r.i,1)}},t[Ye](n)),n}function Nme(t,e,n){J(e,function(r){var o=Un(t,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function kme(t,e,n,r){return e.add(t[aa](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[ih](r),r=null),n&&!r&&i!==!0&&(r=Yz(o.cfg),n[sh](r))})),r}function Lme(t){return vt({rm:function(){t.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(t)+">"}})}var Su,v4,xme,p4,Dme,Ime,Pme,wA,Wc,w4=Z(()=>{"use strict";Bo();pr();Sd();Le();gu();lL();Dt();UL();$L();tA();vh();VL();Ps();ma();On();nA();vD();ED();dA();m4();SD();_D();v4="Plugins must provide initialize method",xme="_notificationManager",p4="SDK is still unloading...",Dme="SDK is not initialized",Ime=100,Pme=5e4,wA=Cs((Su={cookieCfg:{}},Su[xd]={rdOnly:!0,ref:!0,v:[]},Su[_d]={rdOnly:!0,ref:!0,v:[]},Su[Rc]={ref:!0,v:{}},Su[zx]=yi,Su.loggingLevelConsole=0,Su.diagnosticLogInterval=yi,Su));Wc=function(){function t(){var e,n,r,o,i,s,a,c,l,u,f,m,d,p,h,g,v,C,w,y,S,P,D,A,O,L,E,I,R,_,x,b,N;Xe(t,this,function(k){V(),k._getDbgPlgTargets=function(){return[D,o]},k[jo]=function(){return n},k.activeStatus=function(){return L},k._setPendingStatus=function(){L=3},k[Tc]=function(j,ie,xe,le){d&&un(p4),k[jo]()&&un("Core cannot be initialized more than once"),e=jt(j,wA,xe||k[Lt],!1),j=e.cfg,Ct(e[aa](function(rt){var gt=rt.cfg,yn=L===3;if(!yn){I=gt.initInMemoMaxSize||Ime;var Wn=gt.instrumentationKey,Ur=gt.endpointUrl;if(ne(Wn)){S=null,L=pi.INACTIVE;var Mr="Please provide instrumentation key";n?(ae(r,1,100,Mr),H()):un(Mr);return}var Ii=[];if(mo(Wn)?(Ii[Ye](Wn),S=null):S=Wn,mo(Ur)?(Ii[Ye](Ur),E=null):E=Ur,Ii[de]){R=!1,L=3;var tr=Gi(gt.initTimeOut)?gt.initTimeOut:Pme,qa=Ez(Ii);_=mi(function(){_=null,R||$()},tr),wi(qa,function(ee){try{if(R)return;if(!ee.rejected){var se=ee[gd];if(se&&se[de]){var ve=se[0];if(S=ve&&ve[gd],se[de]>1){var Te=se[1];E=Te&&Te[gd]}}S&&(j.instrumentationKey=S,j.endpointUrl=E)}$()}catch{R||$()}})}else $();var B=rt.ref(rt.cfg,Rc);_e(B,function(ee){rt.ref(B,ee)})}})),i=le,w=kme(e,C,i&&k[$w](),w),Kt(),k[Lt]=xe;var Ie=j[xd];if(u=[],u[Ye].apply(u,kx(kx([],ie,!1),Ie,!1)),f=j[_d],Ue(null),(!m||m[de]===0)&&un("No "+_d+" available"),f&&f[de]>1){var Qe=k[su]("TeeChannelController");(!Qe||!Qe.plugin)&&ae(r,1,28,"TeeChannel required")}Nme(j,P,r),P=null,n=!0,L===pi.ACTIVE&&H()},k.getChannels=function(){var j=[];return m&&J(m,function(ie){j[Ye](ie)}),po(j)},k.track=function(j){hn(k[mh](),function(){return"AppInsightsCore:track"},function(){j===null&&(Pt(j),un("Invalid telemetry item")),!j[wo]&&ne(j[wo])&&(Pt(j),un("telemetry name required")),j.iKey=j.iKey||S,j.time=j.time||Ci(new Date),j.ver=j.ver||"4.0",!d&&k[jo]()&&L===pi.ACTIVE?ce()[Xn](j):L!==pi.INACTIVE&&o[de]<=I&&o[Ye](j)},function(){return{item:j}},!j.sync)},k[Wx]=ce,k[$w]=function(){return i||(i=new ly(e.cfg),k[xme]=i),i},k[sh]=function(j){k.getNotifyMgr()[sh](j)},k[ih]=function(j){i&&i[ih](j)},k.getCookieMgr=function(){return c||(c=Mc(e.cfg,k[Lt])),c},k.setCookieMgr=function(j){c!==j&&(Uc(c,!1),c=j)},k[mh]=function(){return s||a||iA()},k.setPerfMgr=function(j){s=j},k.eventCnt=function(){return o[de]},k.releaseQueue=function(){if(n&&o[de]>0){var j=o;o=[],L===2?J(j,function(ie){ie.iKey=ie.iKey||S,ce()[Xn](ie)}):ae(r,2,20,"core init status is not active")}},k.pollInternalLogs=function(j){return h=j||null,N=!1,x&&x[bc](),G(!0)};function $(){R=!0,ne(S)?(L=pi.INACTIVE,ae(r,1,112,"ikey can't be resolved from promises")):L=pi.ACTIVE,H()}function H(){n&&(k.releaseQueue(),k.pollInternalLogs())}function G(j){if((!x||!x[au])&&!N){var ie=j||r&&r.queue[de]>0;ie&&(b||(b=!0,Ct(e[aa](function(xe){var le=xe.cfg.diagnosticLogInterval;(!le||!(le>0))&&(le=1e4);var Ie=!1;x&&(Ie=x[au],x[bc]()),x=Q3(bn,le),x.unref(),x[au]=Ie}))),x[au]=!0)}return x}k[uL]=function(){N=!0,x&&x[bc](),bn()},Ei(k,function(){return p},["addTelemetryInitializer"]),k[Vi]=function(j,ie,xe){j===void 0&&(j=!0),n||un(Dme),d&&un(p4);var le={reason:50,isAsync:j,flushComplete:!1},Ie;j&&!ie&&(Ie=qi(function(gt){ie=gt}));var Qe=xh(Rt(),k);Qe[Hw](function(){C.run(k[Lt]),uD([c,i,r],j,function(){V(),ie&&ie(le)})},k);function rt(gt){le.flushComplete=gt,d=!0,v.run(Qe,le),k[uL](),Qe[Xn](le)}return bn(),wn(j,rt,6,xe)||rt(!1),Ie},k[su]=st,k.addPlugin=function(j,ie,xe,le){if(!j){le&&le(!1),nt(v4);return}var Ie=st(j[la]);if(Ie&&!ie){le&&le(!1),nt("Plugin ["+j[la]+"] is already loaded!");return}var Qe={reason:16};function rt(Wn){u[Ye](j),Qe.added=[j],Ue(Qe),le&&le(!0)}if(Ie){var gt=[Ie.plugin],yn={reason:2,isAsync:!!xe};no(gt,yn,function(Wn){Wn?(Qe.removed=gt,Qe.reason|=32,rt(!0)):le&&le(!1)})}else rt(!1)},k.updateCfg=function(j,ie){ie===void 0&&(ie=!0);var xe;if(k[jo]()){xe={reason:1,cfg:e.cfg,oldCfg:Gk({},e.cfg),newConfig:Gk({},j),merge:ie},j=xe.newConfig;var le=e.cfg;j[xd]=le[xd],j[_d]=le[_d]}e._block(function(Ie){var Qe=Ie.cfg;yA(Ie,Qe,j,ie),ie||_e(Qe,function(rt){ys(j,rt)||Ie.set(Qe,rt,yi)}),Ie.setDf(Qe,wA)},!0),e.notify(),xe&&ht(xe)},k.evtNamespace=function(){return g},k.flush=wn,k.getTraceCtx=function(j){return y||(y=c4()),y},k.setTraceCtx=function(j){y=j||null},k.addUnloadHook=Ct,Nc(k,"addUnloadCb",function(){return v},"add"),k.onCfgChange=function(j){var ie;return n?ie=Un(e.cfg,j,k[Lt]):ie=Rme(P,j),Lme(ie)},k.getWParam=function(){return md()||e.cfg.enableWParam?0:-1};function q(){var j={};A=[];var ie=function(xe){xe&&J(xe,function(le){if(le[la]&&le[ah]&&!j[le.identifier]){var Ie=le[la]+"="+le[ah];A[Ye](Ie),j[le.identifier]=le}})};ie(m),f&&J(f,function(xe){ie(xe)}),ie(u)}function V(){n=!1,e=jt({},wA,k[Lt]),e.cfg[jx]=1,vt(k,"config",{g:function(){return e.cfg},s:function(ie){k.updateCfg(ie,!1)}}),vt(k,"pluginVersionStringArr",{g:function(){return A||q(),A}}),vt(k,"pluginVersionString",{g:function(){return O||(A||q(),O=A.join(";")),O||Ae}}),vt(k,"logger",{g:function(){return r||(r=new vu(e.cfg),e[Lt]=r),r},s:function(ie){e[Lt]=ie,r!==ie&&(Uc(r,!1),r=ie)}}),k[Lt]=new vu(e.cfg),D=[];var j=k.config[xd]||[];j.splice(0,j[de]),Es(j,D),p=new d4,o=[],Uc(i,!1),i=null,s=null,a=null,Uc(c,!1),c=null,l=null,u=[],f=null,m=null,d=!1,h=null,g=Nr("AIBaseCore",!0),v=Ad(),y=null,S=null,C=Cy(),P=[],O=null,A=null,N=!1,x=null,b=!1,L=0,E=null,I=null,R=!1,_=null}function ce(){var j=Co(Rt(),e.cfg,k);return j[Hw](G),j}function Ue(j){var ie=Tme(k[Lt],Vz,u);l=null,O=null,A=null,m=(f||[])[0]||[],m=CD(Es(m,ie[_d]));var xe=Es(CD(ie[pn]),m);D=po(xe);var le=k.config[xd]||[];le.splice(0,le[de]),Es(le,D);var Ie=ce();m&&m[de]>0&&fA(Ie[ua](m),xe),fA(Ie,xe),j&&ht(j)}function st(j){var ie=null,xe=null,le=[];return J(D,function(Ie){if(Ie[la]===j&&Ie!==p)return xe=Ie,-1;Ie.getChannel&&le[Ye](Ie)}),!xe&&le[de]>0&&J(le,function(Ie){if(xe=Ie.getChannel(j),!xe)return-1}),xe&&(ie={plugin:xe,setEnabled:function(Ie){Hc(xe)[Yw]=!Ie},isEnabled:function(){var Ie=Hc(xe);return!Ie[hi]&&!Ie[Yw]},remove:function(Ie,Qe){Ie===void 0&&(Ie=!0);var rt=[xe],gt={reason:1,isAsync:Ie};no(rt,gt,function(yn){yn&&Ue({reason:32,removed:rt}),Qe&&Qe(yn)})}}),ie}function Rt(){if(!l){var j=(D||[]).slice();ut(j,p)===-1&&j[Ye](p),l=Cu(CD(j),e.cfg,k)}return l}function no(j,ie,xe){if(j&&j[de]>0){var le=Cu(j,e.cfg,k),Ie=xh(le,k);Ie[Hw](function(){var Qe=!1,rt=[];J(u,function(yn,Wn){h4(yn,j)?Qe=!0:rt[Ye](yn)}),u=rt,O=null,A=null;var gt=[];f&&(J(f,function(yn,Wn){var Ur=[];J(yn,function(Mr){h4(Mr,j)?Qe=!0:Ur[Ye](Mr)}),gt[Ye](Ur)}),f=gt),xe&&xe(Qe),G()}),Ie[Xn](ie)}else xe(!1)}function bn(){if(r&&r.queue){var j=r.queue.slice(0);r.queue[de]=0,J(j,function(ie){var xe={name:h||"InternalMessageId: "+ie[ch],iKey:S,time:Ci(new Date),baseType:Td.dataType,baseData:{message:ie[fa]}};k.track(xe)})}}function wn(j,ie,xe,le){var Ie=1,Qe=!1,rt=null;le=le||5e3;function gt(){Ie--,Qe&&Ie===0&&(rt&&rt[bc](),rt=null,ie&&ie(Qe),ie=null)}if(m&&m[de]>0){var yn=ce()[ua](m);yn.iterate(function(Wn){if(Wn.flush){Ie++;var Ur=!1;Wn.flush(j,function(){Ur=!0,gt()},xe)||Ur||(j&&rt==null?rt=mi(function(){rt=null,gt()},le):gt())}})}return Qe=!0,gt(),!0}function Kt(){var j;Ct(e[aa](function(ie){var xe=ie.cfg.enablePerfMgr;if(xe){var le=ie.cfg[zx];(j!==le||!j)&&(le||(le=bme),qw(ie.cfg,zx,le),j=le,a=null),!s&&!a&&Re(le)&&(a=le(k,k[$w]()))}else a=null,j=null}))}function ht(j){var ie=vy(Rt(),k);ie[Hw](G),(!k._updateHook||k._updateHook(ie,j)!==!0)&&ie[Xn](j)}function nt(j){var ie=k[Lt];ie?(ae(ie,2,73,j),G()):un(j)}function Pt(j){var ie=k[$w]();ie&&ie[fu]([j],2)}function Ct(j){C.add(j)}})}return t.__ieDyn=1,t}()});function Fd(t,e){try{if(t&&t!==""){var n=Rr().parse(t);if(n&&n[dL]&&n[dL]>=n.itemsAccepted&&n.itemsReceived-n.itemsAccepted===n.errors[de])return n}}catch(r){ae(e,1,43,"Cannot parse the response. "+(r[wo]||pe(r)),{response:t})}return null}var y4=Z(()=>{Le();Dt();Ps();pu()});var ya,Ame,C4,CA,Od,E4=Z(()=>{pr();Sd();Le();Dt();$L();Ps();pu();ma();ya="",Ame="NoResponseBody",C4="&"+Ame+"=true",CA="POST",Od=function(){function t(){var e=0,n,r,o,i,s,a,c,l,u,f,m,d,p,h;Xe(t,this,function(g,v){var C=!0;R(),g[Tc]=function(_,x){o=x,r&&ae(o,1,28,"Sender is already initialized"),g.SetConfig(_),r=!0},g._getDbgPlgTargets=function(){return[r,i,a,n]},g.SetConfig=function(_){try{if(s=_.senderOnCompleteCallBack||{},a=!!_.disableCredentials,c=_.fetchCredentials,i=!!_.isOneDs,n=!!_.enableSendPromise,u=!!_.disableXhr,f=!!_.disableBeacon,m=!!_.disableBeaconSync,h=_.timeWrapper,p=!!_.addNoResponse,d=!!_.disableFetchKeepAlive,l={sendPOST:L},i||(C=!1),a){var x=bd();x&&x.protocol&&x.protocol[Wo]()==="file:"&&(C=!1)}return!0}catch{}return!1},g.getSyncFetchPayload=function(){return e},g.getSenderInst=function(_,x){return _&&_[de]?P(_,x):null},g.getFallbackInst=function(){return l},g[cu]=function(_,x){R()};function w(_,x){D(x,200,{},_)}function y(_,x){ae(o,2,26,"Failed to send telemetry.",{message:_}),D(x,400,{})}function S(_){y("No endpoint url is provided for the batch",_)}function P(_,x){for(var b=0,N=null,k=0;N==null&&k<_[de];)b=_[k],!u&&b===1?Jw()?N=I:gh()&&(N=L):b===2&&Fc(x)&&(!x||!d)?N=E:b===3&&Go()&&(x?!m:!f)&&(N=O),k++;return N?{_transport:b,_isSync:x,sendPOST:N}:null}function D(_,x,b,N){try{_&&_(x,b,N)}catch{}}function A(_,x){var b=Kn(),N=_[uh];if(!N)return S(x),!0;N=_[uh]+(p?C4:ya);var k=_[uu],$=i?k:new Blob([k],{type:"text/plain;charset=UTF-8"}),H=b.sendBeacon(N,$);return H}function O(_,x,b){var N=_[uu];try{if(N)if(A(_,x))w(ya,x);else{var k=s&&s.beaconOnRetry;k&&Re(k)?k(_,x,A):(l&&l.sendPOST(_,x,!0),ae(o,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch($){i&&yo(o,"Failed to send telemetry using sendBeacon API. Ex:"+pe($)),D(x,i?0:400,{},ya)}}function L(_,x,b){var N,k,$,H=_[Vx]||{};!b&&n&&(N=qi(function(ce,Ue){k=ce,$=Ue})),i&&b&&_.disableXhrSync&&(b=!1);var G=_[uh];if(!G){S(x),k&&k(!1);return}var q=xL(CA,G,C,!0,b,_[Cd]);i||q.setRequestHeader("Content-type","application/json"),J(br(H),function(ce){q.setRequestHeader(ce,H[ce])}),q.onreadystatechange=function(){i||(V(q),q.readyState===4&&k&&k(!0))},q.onload=function(){i&&V(q)};function V(ce){var Ue=s&&s.xhrOnComplete,st=Ue&&Re(Ue);if(st)Ue(ce,x,_);else{var Rt=Ds(ce);D(x,ce[wd],Ac(ce,i),Rt)}}return q.onerror=function(ce){D(x,i?q[wd]:400,Ac(q,i),i?ya:kc(q)),$&&$(ce)},q.ontimeout=function(){D(x,i?q[wd]:500,Ac(q,i),i?ya:kc(q)),k&&k(!1)},q.send(_[uu]),N}function E(_,x,b){var N,k=_[uh],$=_[uu],H=i?$:new Blob([$],{type:"application/json"}),G,q,V,ce=new Headers,Ue=$[de],st=!1,Rt=!1,no=_[Vx]||{},bn=(N={method:CA,body:H},N[ML]=!0,N);_.headers&&br(_.headers)[de]>0&&(J(br(no),function(nt){ce.append(nt,no[nt])}),bn[Vx]=ce),c?bn.credentials=c:C&&i&&(bn.credentials="include"),b&&(bn.keepalive=!0,e+=Ue,i?_._sendReason===2&&(st=!0,p&&(k+=C4)):st=!0);var wn=new Request(k,bn);try{wn[ML]=!0}catch{}if(!b&&n&&(G=qi(function(nt,Pt){q=nt,V=Pt})),!k){S(x),q&&q(!1);return}function Kt(nt){D(x,i?0:400,{},i?ya:nt)}function ht(nt,Pt,Ct){var j=nt[wd],ie=s.fetchOnComplete;ie&&Re(ie)?ie(nt,x,Ct||ya,Pt):D(x,j,{},Ct||ya)}try{wi(fetch(i?k:wn,i?bn:null),function(nt){if(b&&(e-=Ue,Ue=0),!Rt)if(Rt=!0,nt.rejected)Kt(nt.reason&&nt.reason[fa]),V&&V(nt.reason);else{var Pt=nt[gd];try{!i&&!Pt.ok?(Kt(Pt.statusText),q&&q(!1)):i&&!Pt.body?(ht(Pt,null,ya),q&&q(!0)):wi(Pt.text(),function(Ct){ht(Pt,_,Ct[gd]),q&&q(!0)})}catch(Ct){Kt(pe(Ct)),V&&V(Ct)}}})}catch(nt){Rt||(Kt(pe(nt)),V&&V(nt))}return st&&!Rt&&(Rt=!0,D(x,200,{}),q&&q(!0)),i&&!Rt&&_[Cd]>0&&h&&h.set(function(){Rt||(Rt=!0,D(x,500,{}),q&&q(!0))},_[Cd]),G}function I(_,x,b){var N=Fn(),k=new XDomainRequest,$=_[uu];k.onload=function(){var ce=Ds(k),Ue=s&&s.xdrOnComplete;Ue&&Re(Ue)?Ue(k,x,_):D(x,200,{},ce)},k.onerror=function(){D(x,400,{},i?ya:Pd(k))},k.ontimeout=function(){D(x,500,{})},k.onprogress=function(){};var H=N&&N.location&&N.location.protocol||"",G=_[uh];if(!G){S(x);return}if(!i&&G.lastIndexOf(H,0)!==0){var q="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";ae(o,2,40,". "+q),y(q,x);return}var V=i?G:G[_s](/^(https?:)/,"");k.open(CA,V),_[Cd]&&(k[Cd]=_[Cd]),k.send($),i&&b?h&&h.set(function(){k.send($)},0):k.send($)}function R(){e=0,r=!1,n=!1,o=null,i=null,s=null,a=null,c=null,l=null,u=!1,f=!1,m=!1,d=!1,p=!1,h=null}})}return t.__ieDyn=1,t}()});function I4(t){return t&&t[_s]?t[_s](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ae):t}function ID(t,e){if(e){var n=Ae;we(e)?(n=Ae,J(e,function(o){o=I4(o),o&&(o[0]!=="."&&(o="."+o),n+=o)})):n=I4(e),n&&(n[0]!=="."&&(n="."+n),t=(t||Ae)+n)}var r=Mme.exec(t||Ae)||[];return{type:r[1],ns:(r[2]||Ae).replace(Fme,".").replace(Ome,Ae)[Yi](".").sort().join(".")}}function EA(t,e,n){var r=[],o=Sy.get(t,xD,{},!1),i=ID(e,n);return _e(o,function(s,a){J(a,function(c){(!i[vi]||i[vi]===c[lh][vi])&&(!i.ns||i.ns===i.ns)&&r[Ye]({name:c.evtName[vi]+(c[lh].ns?"."+c[lh].ns:Ae),handler:c.handler})})}),r}function A4(t,e,n){n===void 0&&(n=!0);var r=Sy.get(t,xD,{},n),o=r[e];return o||(o=r[e]=[]),o}function F4(t,e,n,r){t&&e&&e[vi]&&(t[D4]?t[D4](e[vi],n,r):t[x4]&&t[x4](b4+e[vi],n))}function $me(t,e,n,r){var o=!1;return t&&e&&e[vi]&&n&&(t[_4]?(t[_4](e[vi],n,r),o=!0):t[S4]&&(t[S4](b4+e[vi],n),o=!0)),o}function P4(t,e,n,r){for(var o=e[de];o--;){var i=e[o];i&&(!n.ns||n.ns===i[lh].ns)&&(!r||r(i))&&(F4(t,i[lh],i.handler,i.capture),e[ca](o,1))}}function Hme(t,e,n){if(e[vi])P4(t,A4(t,e[vi]),e,n);else{var r=Sy.get(t,xD,{});_e(r,function(o,i){P4(t,i,e,n)}),br(r)[de]===0&&Sy.kill(t,xD)}}function Si(t,e){var n;return e?(we(e)?n=[t].concat(e):n=[t,e],n=ID("xx",n).ns[Yi](".")):n=t,n}function Ca(t,e,n,r,o){o===void 0&&(o=!1);var i=!1;if(t)try{var s=ID(e,r);if(i=$me(t,s,n,o),i&&Sy.accept(t)){var a={guid:Ume++,evtName:s,handler:n,capture:o};A4(t,s.type)[Ye](a)}}catch{}return i}function jc(t,e,n,r,o){if(o===void 0&&(o=!1),t)try{var i=ID(e,r),s=!1;Hme(t,i,function(a){return i.ns&&!n||a.handler===n?(s=!0,!0):!1}),s||F4(t,i,n,o)}catch{}}function SA(t,e,n,r){return r===void 0&&(r=!1),Ca(t,e,n,null,r)}function _A(t,e,n,r){r===void 0&&(r=!1),jc(t,e,n,null,r)}function PD(t,e,n){var r=!1,o=Fn();o&&(r=Ca(o,t,e,n),r=Ca(o.body,t,e,n)||r);var i=fn();return i&&(r=Ca(i,t,e,n)||r),r}function bD(t,e,n){var r=Fn();r&&(jc(r,t,e,n),jc(r.body,t,e,n));var o=fn();o&&jc(o,t,e,n)}function Dh(t,e,n,r){var o=!1;return e&&t&&t[de]>0&&J(t,function(i){i&&(!n||ut(n,i)===-1)&&(o=PD(i,e,r)||o)}),o}function TD(t,e,n,r){var o=!1;return e&&t&&we(t)&&(o=Dh(t,e,n,r),!o&&n&&n[de]>0&&(o=Dh(t,e,null,r))),o}function _u(t,e,n){t&&we(t)&&J(t,function(r){r&&bD(r,e,n)})}function _y(t,e,n){return TD([N4,R4,DD],t,e,n)}function xy(t,e){_u([N4,R4,DD],t,e)}function Ih(t,e,n){function r(s){var a=fn();t&&a&&a.visibilityState==="hidden"&&t(s)}var o=Si(k4,n),i=Dh([DD],t,e,o);return(!e||ut(e,Ey)===-1)&&(i=Dh([Ey],r,e,o)||i),!i&&e&&(i=Ih(t,null,n)),i}function Dy(t,e){var n=Si(k4,e);_u([DD],t,n),_u([Ey],null,n)}function Ph(t,e,n){function r(s){var a=fn();t&&a&&a.visibilityState==="visible"&&t(s)}var o=Si(L4,n),i=Dh([T4],t,e,o);return i=Dh([Ey],r,e,o)||i,!i&&e&&(i=Ph(t,null,n)),i}function Iy(t,e){var n=Si(L4,e);_u([T4],t,n),_u([Ey],null,n)}var b4,S4,_4,x4,D4,xD,Ey,DD,T4,R4,N4,k4,L4,Fme,Ome,Ume,Sy,Mme,O4=Z(()=>{Le();Dt();vh();On();b4="on",S4="attachEvent",_4="addEventListener",x4="detachEvent",D4="removeEventListener",xD="events",Ey="visibilitychange",DD="pagehide",T4="pageshow",R4="unload",N4="beforeunload",k4=Nr("aiEvtPageHide"),L4=Nr("aiEvtPageShow"),Fme=/\.[\.]+/g,Ome=/[\.]+$/,Ume=1,Sy=rD("events"),Mme=/^([^.]*)(?:\.(.+)|)/});var xA,U4=Z(()=>{Mw();xA=mn({DISABLED:0,CRITICAL:1,WARNING:2,DEBUG:3})});var wt=Z(()=>{cz();lz();lL();w4();vA();nD();sA();UL();ma();y4();E4();Le();Mw();O4();pu();Bo();nA();vD();Ps();ED();U4();tA();vh();SD();_D();uA();gu();aD();BL()});var Ea,M4,DA,RD,ND=Z(()=>{Ea="",M4="https://browser.events.data.microsoft.com/OneCollector/1.0/",DA="version",RD="properties"});var IA,bh,Sa,PA,Vt,Vc,kD,LD,AD,FD,Py,OD=Z(()=>{IA="initialize",bh="indexOf",Sa="timings",PA="pollInternalLogs",Vt="value",Vc="length",kD="processTelemetryStart",LD="handleField",AD="rmSanitizer",FD="rmFieldSanitizer",Py="canHandle"});function hr(t){return!(t===Ea||ne(t))}function UD(t){if(t){var e=vo(t,"-");if(e>-1)return dd(t,e)}return Ea}function j4(){return bA===null&&(bA=!Ve(Uint8Array)&&!Yme()&&!du()),bA}function MD(t){return!!(t&&Ir(t)&&t>=1&&t<=4)}function $D(t,e,n){if(!e&&!hr(e)||typeof t!="string")return null;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||we(e))e={value:e};else if(r==="object"&&!H4.call(e,"value"))e={value:n?JSON.stringify(e):e};else if(ne(e[Vt])||e[Vt]===Ea||!ke(e[Vt])&&!Ir(e[Vt])&&!na(e[Vt])&&!we(e[Vt]))return null;if(we(e[Vt])&&!RA(e[Vt]))return null;if(!ne(e.kind)){if(we(e[Vt])||!by(e.kind))return null;e[Vt]=e[Vt].toString()}return e}function Rh(t,e,n){var r=-1;if(!Ve(t))if(e>0&&(e===32?r=8192:e<=13&&(r=e<<5)),Vme(n))r===-1&&(r=0),r|=n;else{var o=jme[_a(t)]||-1;r!==-1&&o!==-1?r|=o:o===6&&(r=o)}return r}function V4(t,e,n){n===void 0&&(n=!0);var r;return t&&(r=t.get(e),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||Ea}function Y4(t){t===void 0&&(t="D");var e=dy();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,Ea)),e}function Ud(t,e,n,r,o){var i={},s=!1,a=0,c=arguments[Vc],l=arguments;for(na(l[0])&&(s=l[0],a++);a<c;a++){var t=l[a];_e(t,function(f,m){s&&m&&Qt(m)?we(m)?(i[f]=i[f]||[],J(m,function(d,p){d&&Qt(d)?i[f][p]=Ud(!0,i[f][p],d):i[f][p]=d})):i[f]=Ud(!0,i[f],m):i[f]=m})}return i}function by(t){return t===0||t>0&&t<=13||t===32}function Vme(t){return t>=0&&t<=9}function Yme(){var t=Kn();if(!Ve(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[bh]("safari")>=0||e[bh]("firefox")>=0)&&e[bh]("chrome")<0)return!0}return!1}function RA(t){return t[Vc]>0}function Ty(t,e){var n=t;n[Sa]=n[Sa]||{},n[Sa][kD]=n[Sa][kD]||{},n[Sa][kD][e]=zo()}function _a(t){var e=0;if(t!=null){var n=typeof t;n==="string"?e=1:n==="number"?e=2:n==="boolean"?e=3:n===Sc&&(e=4,we(t)?(e=4096,t[Vc]>0&&(e|=_a(t[0]))):H4.call(t,"value")&&(e=8192|_a(t[Vt])))}return e}function HD(){return!!pt("chrome")}function q4(t,e,n,r,o,i){r===void 0&&(r=!1),o===void 0&&(o=!1);function s(c,l,u){try{c[l]=u}catch{}}var a=new XMLHttpRequest;return r&&s(a,Bme,r),n&&s(a,$4,n),a.open(t,e,!o),n&&s(a,$4,n),!o&&i&&s(a,Wme,i),a}function xu(t){return t>0}var Yc,TA,Th,H4,Bme,$4,Wme,jme,bA,B4,W4,zo,BD=Z(()=>{wt();Bo();Le();ND();OD();TA="4.3.6",Th="1DS-Web-JS-"+TA,H4=Iw.hasOwnProperty,Bme="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",$4="withCredentials",Wme="timeout",jme=(Yc={},Yc[0]=0,Yc[2]=6,Yc[1]=1,Yc[3]=7,Yc[4098]=6,Yc[4097]=1,Yc[4099]=7,Yc),bA=null,B4=md(),W4=Zp();zo=Fw});function Gme(t){return t&&(!t.getProperty||!t.setProperty)&&un("Invalid property storage override passed."),!0}var qme,G4,z4=Z(()=>{Bo();pr();wt();Le();ND();BD();OD();qme=Cs({endpointUrl:M4,propertyStorageOverride:{isVal:Gme}});G4=function(t){Ho(e,t);function e(){var n=t.call(this)||this;return Xe(e,n,function(r,o){r[IA]=function(i,s,a,c){hn(r,function(){return"AppInsightsCore.initialize"},function(){try{o[IA](jt(i,qme,a||r.logger,!1).cfg,s,a,c)}catch(f){var l=r.logger,u=pe(f);u[bh]("channels")!==-1&&(u+=`
 - Channels must be provided through config.channels only!`),ae(l,1,514,"SDK Initialization Failed - no telemetry will be sent: "+u)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},r.track=function(i){hn(r,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s[Sa]=s[Sa]||{},s[Sa].trackStart=zo(),MD(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=Th;var c=s.baseData=s.baseData||{};c[RD]=c[RD]||{};var l=c[RD];l[DA]=l[DA]||r.pluginVersionString||Ea}o.track(s)},function(){return{item:i}},!i.sync)},r[PA]=function(i){return o[PA](i||"InternalLog")}}),n}return e.__ieDyn=1,e}(Wc)});var K4,X4,J4,Z4,Q4,e6=Z(()=>{wt();K4=mn({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,Pii_IPv6ScrubLastHextets:14,Pii_DropValue:15,CustomerContent_GenericContent:32}),X4=mn({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),J4=mn({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),Z4=mn({Normal:1,Critical:2}),Q4=mn({NONE:0,ERROR:1,WARNING:2,INFORMATION:3})});function t6(t){return t=="__proto__"||t=="constructor"||t=="prototype"}var n6,r6=Z(()=>{wt();Le();ND();BD();OD();n6=function(){function t(e){var n=this,r={},o=[],i=[];e&&i.push(e);function s(u,f){var m,d=r[u];if(d&&(m=d[f]),!m&&m!==null){if(ke(u)&&ke(f))if(i[Vc]>0){for(var p=0;p<i[Vc];p++)if(i[p][LD](u,f)){m={canHandle:!0,fieldHandler:i[p]};break}}else o[Vc]===0&&(m={canHandle:!0});if(!m&&m!==null){m=null;for(var p=0;p<o[Vc];p++)if(o[p][LD](u,f)){m={canHandle:!0,handler:o[p],fieldHandler:null};break}}if(!d){if(t6(u))return null;d=r[u]={}}if(t6(f))return null;d[f]=m}return m}n.clearCache=function(){r={}},n.addSanitizer=function(u){u&&(Vk(o,u)||o.push(u),r={})},n.addFieldSanitizer=function(u){u&&(Vk(i,u)||i.push(u),r={})},n[AD]=function(u){if(u){var f=ut(o,u);f!==-1&&(o.splice(f,1),r={}),J(o,function(m){m&&m[AD]&&m[AD](u)})}},n[FD]=function(u){if(u){var f=ut(i,u);f!==-1&&(i.splice(f,1),r={}),J(o,function(m){m&&m[FD]&&m[FD](u)})}},n.isEmpty=function(){return th(o)+th(i)===0},n[LD]=function(u,f){var m=s(u,f);return m?m[Py]:!1},n[Vt]=function(u,f,m,d){var p=s(u,f);if(p&&p[Py]){if(!p[Py])return null;if(p.handler)return p.handler[Vt](u,f,m,d);if(!ke(f)||ne(m)||m===Ea)return null;var h=null,g=_a(m);if((g&8192)===8192){var v=g&-8193;if(h=m,!hr(h[Vt])||v!==1&&v!==2&&v!==3&&(v&4096)!==4096)return null}else g===1||g===2||g===3||(g&4096)===4096?h=c(u,f,m):g===4&&(h=c(u,f,d?JSON.stringify(m):m));if(h)return a(p,u,f,g,h,d)}return null},n.property=function(u,f,m,d){var p=s(u,f);if(!p||!p[Py]||!ke(f)||ne(m)||!hr(m[Vt]))return null;var h=_a(m[Vt]);return h===0?null:a(p,u,f,h,m,d)};function a(u,f,m,d,p,h){if(u.handler)return u.handler.property(f,m,p,h);if(!ne(p.kind)){if((d&4096)===4096||!by(p.kind))return null;p[Vt]=p[Vt].toString()}return l(u.fieldHandler,f,m,d,p)}function c(u,f,m){return hr(m)?{value:m}:null}function l(u,f,m,d,p){if(p&&u){var h=u.getSanitizer(f,m,d,p.kind,p.propertyType);if(h)if(d===4){var g={},v=p[Vt];_e(v,function(w,y){var S=f+"."+m;if(hr(y)){var P=c(S,w,y);P=l(u,S,w,_a(y),P),P&&(g[w]=P[Vt])}}),p[Vt]=g}else{var C={path:f,name:m,type:d,prop:p,sanitizer:n};p=h.call(n,C)}}return p}}return t.getFieldType=_a,t}()});var o6={};Ug(o6,{ActiveStatus:()=>pi,AppInsightsCore:()=>G4,BaseTelemetryPlugin:()=>Bc,DiagnosticLogger:()=>vu,EventLatency:()=>X4,EventPersistence:()=>Z4,EventPropertyType:()=>J4,EventsDiscardedReason:()=>Ss,FullVersionString:()=>Th,InternalAppInsightsCore:()=>Wc,LoggingSeverity:()=>xA,MinChannelPriorty:()=>aL,NotificationManager:()=>ly,PerfEvent:()=>Nd,PerfManager:()=>fy,ProcessTelemetryContext:()=>pA,SenderPostManager:()=>Od,TraceLevel:()=>Q4,Undefined:()=>ea,ValueKind:()=>K4,ValueSanitizer:()=>n6,Version:()=>TA,_InternalLogMessage:()=>Td,__getRegisteredEvents:()=>EA,_appendHeader:()=>ph,_getAllResponseHeaders:()=>Ac,_logInternalMessage:()=>GL,_testHookMaxUnloadHooksCb:()=>hA,_throwInternal:()=>ae,_warnToConsole:()=>yo,addEventHandler:()=>PD,addEventListeners:()=>TD,addPageHideEventListener:()=>Ih,addPageShowEventListener:()=>Ph,addPageUnloadEventListener:()=>_y,areCookiesSupported:()=>Eh,arrForEach:()=>J,arrIndexOf:()=>ut,arrMap:()=>Dc,arrReduce:()=>Aw,attachEvent:()=>SA,blockDynamicConversion:()=>oy,convertAllHeadersToMap:()=>tD,cookieAvailable:()=>Eh,createCookieMgr:()=>Mc,createDynamicConfig:()=>jt,createEnumStyle:()=>mn,createGuid:()=>Y4,createProcessTelemetryContext:()=>Co,createTraceParent:()=>my,createUniqueNamespace:()=>Nr,createUnloadHandlerContainer:()=>Ad,dateNow:()=>dn,detachEvent:()=>_A,disallowsSameSiteNone:()=>gD,doPerf:()=>hn,dumpObj:()=>pe,eventOff:()=>jc,eventOn:()=>Ca,extend:()=>Ud,findW3cTraceParent:()=>gy,forceDynamicConversion:()=>OL,formatErrorMessageXdr:()=>Pd,formatErrorMessageXhr:()=>kc,formatTraceParent:()=>hy,generateW3CId:()=>kd,getCommonSchemaMetaData:()=>Rh,getConsole:()=>Gw,getCookieValue:()=>V4,getCrypto:()=>zw,getDocument:()=>fn,getDynamicConfigHandler:()=>ry,getExceptionName:()=>At,getFieldValueType:()=>_a,getGlobal:()=>ho,getGlobalInst:()=>pt,getHistory:()=>bx,getIEVersion:()=>Xw,getISOString:()=>Ci,getJSON:()=>Rr,getLocation:()=>bd,getMsCrypto:()=>Kw,getNavigator:()=>Kn,getPerformance:()=>ou,getResponseText:()=>Ds,getSetValue:()=>qw,getTenantId:()=>UD,getTime:()=>zo,getWindow:()=>Fn,hasDocument:()=>md,hasHistory:()=>Wk,hasJSON:()=>pa,hasNavigator:()=>kw,hasOwnProperty:()=>mr,hasWindow:()=>Zp,isArray:()=>we,isArrayValid:()=>RA,isBeaconsSupported:()=>Go,isBoolean:()=>na,isChromium:()=>HD,isDate:()=>Ix,isDocumentObjectAvailable:()=>B4,isError:()=>fd,isFetchSupported:()=>Fc,isFunction:()=>Re,isGreaterThanZero:()=>xu,isIE:()=>mu,isLatency:()=>MD,isNotTruthy:()=>Mk,isNullOrUndefined:()=>ne,isNumber:()=>Ir,isObject:()=>Qt,isReactNative:()=>du,isSampledFlag:()=>py,isString:()=>ke,isTruthy:()=>ws,isTypeof:()=>Uk,isUint8ArrayAvailable:()=>j4,isUndefined:()=>Ve,isValidSpanId:()=>wa,isValidTraceId:()=>va,isValidTraceParent:()=>_h,isValueAssigned:()=>hr,isValueKind:()=>by,isWindowObjectAvailable:()=>W4,isXhrSupported:()=>gh,mergeEvtNamespace:()=>Si,newGuid:()=>dy,newId:()=>ty,normalizeJsName:()=>Id,objDefineAccessors:()=>$k,objForEachKey:()=>_e,objFreeze:()=>po,objKeys:()=>br,objSeal:()=>Hk,onConfigChange:()=>Un,openXhr:()=>q4,optimizeObject:()=>qo,parseResponse:()=>Fd,parseTraceParent:()=>Ld,perfNow:()=>Fw,prependTransports:()=>Lc,proxyAssign:()=>SL,proxyFunctionAs:()=>Nc,proxyFunctions:()=>Ei,random32:()=>Oc,randomValue:()=>ey,removeEventHandler:()=>bD,removeEventListeners:()=>_u,removePageHideEventListener:()=>Dy,removePageShowEventListener:()=>Iy,removePageUnloadEventListener:()=>xy,safeGetCookieMgr:()=>eA,safeGetLogger:()=>Is,sanitizeProperty:()=>$D,setEnableEnvMocks:()=>RL,setProcessTelemetryTimings:()=>Ty,setValue:()=>zi,strContains:()=>xn,strEndsWith:()=>pd,strFunction:()=>Yp,strObject:()=>Sc,strPrototype:()=>vs,strStartsWith:()=>nh,strTrim:()=>Ze,strUndefined:()=>ea,throwError:()=>un,toISOString:()=>Ci,useXDomainRequest:()=>Jw});var Md=Z(()=>{z4();e6();r6();wt();BD()});var $d,WD,jD,NA=Z(()=>{$d="REAL_TIME",WD="NEAR_REAL_TIME",jD="BEST_EFFORT"});var bs,VD,i6,kA,s6,a6,LA,YD,Ry,Nh,c6,l6,u6,qD,AA,GD,zD,KD,Ny,FA,OA,f6,kh,UA,XD,ky=Z(()=>{bs="",VD="drop",i6="send",kA="requeue",s6="rspFail",a6="oth",LA="no-cache, no-store",YD="application/x-json-stream",Ry="cache-control",Nh="content-type",c6="kill-tokens",l6="kill-duration",u6="time-delta-millis",qD="client-version",AA="client-id",GD="time-delta-to-apply-millis",zD="upload-time",KD="apikey",Ny="AuthMsaDeviceTicket",FA="WebAuthToken",OA="AuthXToken",f6="NoResponseBody",kh="msfpc",UA="trace",XD="user"});var Ly,JD,ZD,Ay,ze,xa,_i,gn,Da,Jn,Ia,QD,Hd,eI,Bd,tI,nI,d6,MA,$A,m6,rI,HA,BA,p6,WA,jA,VA,oI,iI,sI,Fy,YA,Ts,Lh,Jr,Ko,Oy,Ah,Uy,h6,aI,cI,Fh,qA,My,lI,uI,fI,dI,$y,g6,GA,v6,w6,Hy,Du,Wd,Oh=Z(()=>{Ly="allowRequestSending",JD="shouldAddClockSkewHeaders",ZD="getClockSkewHeaderValue",Ay="setClockSkew",ze="length",xa="concat",_i="iKey",gn="count",Da="events",Jn="push",Ia="split",QD="toLowerCase",Hd="hdrs",eI="useHdrs",Bd="initialize",tI="setTimeoutOverride",nI="clearTimeoutOverride",d6="payloadPreprocessor",MA="overrideEndpointUrl",$A="avoidOptions",m6="disableEventTimings",rI="enableCompoundKey",HA="disableXhrSync",BA="disableFetchKeepAlive",p6="addNoResponse",WA="useSendBeacon",jA="fetchCredentials",VA="alwaysUseXhrOverride",oI="serializeOfflineEvt",iI="getOfflineRequestDetails",sI="createPayload",Fy="createOneDSPayload",YA="payloadBlob",Ts="headers",Lh="_thePayload",Jr="batches",Ko="sendType",Oy="canSendRequest",Ah="sendQueuedRequests",Uy="setUnloading",h6="isTenantKilled",aI="sendSynchronousBatch",cI="_transport",Fh="getWParam",qA="isBeacon",My="timings",lI="isTeardown",uI="_sendReason",fI="setKillSwitchTenants",dI="_backOffTransmission",$y="identifier",g6="ignoreMc1Ms0CookieProcessing",GA="autoFlushEventsLimit",v6="disableAutoBatchFlushLimit",w6="overrideInstrumentationKey",Hy="sendAttempt",Du="latency",Wd="sync"});function C6(t){var e=(t.ext||{}).intweb;return e&&hr(e[kh])?e[kh]:null}function y6(t){for(var e=null,n=0;e===null&&n<t[ze];n++)e=C6(t[n]);return e}var Iu,mI=Z(()=>{Md();ky();Oh();Iu=function(){function t(e,n){var r=n?[][xa](n):[],o=this,i=y6(r);o[_i]=function(){return e},o.Msfpc=function(){return i||bs},o[gn]=function(){return r[ze]},o[Da]=function(){return r},o.addEvent=function(s){return s?(r[Jn](s),i||(i=C6(s)),!0):!1},o[Ia]=function(s,a){var c;if(s<r[ze]){var l=r[ze]-s;ne(a)||(l=a<l?a:l),c=r.splice(s,l),i=y6(r)}return new t(e,c)}}return t.create=function(e,n){return new t(e,n)},t}()});var E6,S6=Z(()=>{pr();Oh();E6=function(){function t(){var e=!0,n=!0,r=!0,o="use-collector-delta",i=!1;Xe(t,this,function(s){s[Ly]=function(){return e},s.firstRequestSent=function(){r&&(r=!1,i||(e=!1))},s[JD]=function(){return n},s[ZD]=function(){return o},s[Ay]=function(a){i||(a?(o=a,n=!0,i=!0):n=!1,e=!0)}})}return t.__ieDyn=1,t}()});var zme,_6,x6=Z(()=>{pr();Md();Oh();zme=1e3,_6=function(){function t(){var e={};function n(r){var o=[];return r&&J(r,function(i){o[Jn](Ze(i))}),o}Xe(t,this,function(r){r[fI]=function(o,i){if(o&&i)try{var s=n(o[Ia](","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*zme,c=0;c<s[ze];++c)e[s[c]]=dn()+a}catch{return[]}return[]},r[h6]=function(o){var i=e,s=Ze(o);return i[s]!==void 0&&i[s]>dn()?!0:(delete i[s],!1)}})}return t.__ieDyn=1,t}()});function I6(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function pI(t){var e=0,n=D6*Kme,r=D6*Xme,o=go(Math.random()*(r-n))+n;return e=Math.pow(2,t)*o,ra(e,Jme)}var Kme,Xme,D6,Jme,zA=Z(()=>{Le();Kme=.8,Xme=1.2,D6=3e3,Jme=6e5});function npe(t,e,n,r,o){if(o&&e){var i=t(o.value,o.kind,o.propertyType);if(i>-1){var s=e[P6];s||(s=e[P6]={f:{}});var a=s[hI];if(a||(a=s[hI]={}),n)for(var c=0;c<n.length;c++){var l=n[c];a[l]||(a[l]={f:{}});var u=a[l][hI];u||(u=a[l][hI]={}),a=u}a=a[r]={},we(o.value)?a.a={t:i}:a.t=i}}}var Zme,Qme,b6,T6,epe,P6,hI,tpe,R6,N6=Z(()=>{pr();Md();mI();ky();Le();Zme=20,Qme=3984588,b6=65e3,T6=2e6,epe=ra(T6,b6),P6="metadata",hI="f",tpe=/\./,R6=function(){function t(e,n,r,o,i,s){var a="data",c="baseData",l="ext",u=!!o,f=!0,m=n,d={},p=!!s,h=i||Rh;Xe(t,this,function(g){g.createPayload=function(w,y,S,P,D,A){return{apiKeys:[],payloadBlob:bs,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:w,isTeardown:y,isSync:S,isBeacon:P,sendType:A,sendReason:D}},g.appendPayload=function(w,y,S){var P=w&&y&&!w.overflow;return P&&hn(e,function(){return"Serializer:appendPayload"},function(){for(var D=y.events(),A=w.payloadBlob,O=w.numEvents,L=!1,E=[],I=[],R=w.isBeacon,_=R?b6:Qme,x=R?epe:T6,b=0,N=0;b<D.length;){var k=D[b];if(k){if(O>=S){w.overflow=y.split(b);break}var $=g.getEventBlob(k);if($&&$.length<=x){var H=$.length,G=A.length;if(G+H>_){w.overflow=y.split(b);break}A&&(A+=`
`),A+=$,N++,N>Zme&&(ia(A,0,1),N=0),L=!0,O++}else $?E.push(k):I.push(k),D.splice(b,1),b--}b++}if(E.length>0&&w.sizeExceed.push(Iu.create(y.iKey(),E)),I.length>0&&w.failedEvts.push(Iu.create(y.iKey(),I)),L){w.batches.push(y),w.payloadBlob=A,w.numEvents=O;var q=y.iKey();ut(w.apiKeys,q)===-1&&w.apiKeys.push(q)}},function(){return{payload:w,theBatch:{iKey:y.iKey(),evts:y.events()},max:S}}),P},g.getEventBlob=function(w){try{return hn(e,function(){return"Serializer.getEventBlob"},function(){var y={};y.name=w.name,y.time=w.time,y.ver=w.ver,y.iKey="o:"+UD(w.iKey);var S={},P;p||(P=function(L,E,I){npe(h,S,L,E,I)});var D=w[l];D&&(y[l]=S,_e(D,function(L,E){var I=S[L]={};C(E,I,"ext."+L,!0,null,null,!0)}));var A=y[a]={};A.baseType=w.baseType;var O=A[c]={};return C(w.baseData,O,c,!1,[c],P,f),C(w.data,A,a,!1,[],P,f),JSON.stringify(y)},function(){return{item:w}})}catch{return null}};function v(w,y){var S=d[w];return S===void 0&&(w.length>=7&&(S=nh(w,"ext.metadata")||nh(w,"ext.web")),d[w]=S),S}function C(w,y,S,P,D,A,O){_e(w,function(L,E){var I=null;if(E||hr(E)){var R=S,_=L,x=D,b=y;if(u&&!P&&tpe.test(L)){var N=L.split("."),k=N.length;if(k>1){x&&(x=x.slice());for(var $=0;$<k-1;$++){var H=N[$];b=b[H]=b[H]||{},R+="."+H,x&&x.push(H)}_=N[k-1]}}var G=P&&v(R,_);if(!G&&m&&m.handleField(R,_)?I=m.value(R,_,E,r):I=$D(_,E,r),I){var q=I.value;if(b[_]=q,A&&A(x,_,I),O&&typeof q=="object"&&!we(q)){var V=x;V&&(V=V.slice(),V.push(_)),C(E,q,R+"."+_,P,V,A,O)}}}})}})}return t.__ieDyn=1,t}()});function Uh(t,e){return{set:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return Z3([t,e],n,r,o)}}}var KA=Z(()=>{Le()});function Vd(t,e,n){JA[t]=e,n!==!1&&(ZA[e]=t)}function gI(t,e){var n=!1;if(t&&e){var r=br(t);if(r&&r[ze]>0)for(var o=e[QD](),i=0;i<r[ze];i++){var s=r[i];if(s&&mr(e,s)&&s[QD]()===o){n=!0;break}}}return n}function Mh(t,e,n,r){e&&n&&n[ze]>0&&(r&&JA[e]?(t[Hd][JA[e]]=n,t[eI]=!0):t.url+="&"+e+"="+n)}function spe(t,e,n){for(var r=0;r<t[ze];r++)if(t[r].name===e){t[r].value=n;return}t[Jn]({name:e,value:n})}function ape(t,e){for(var n=0;n<t[ze];n++)if(t[n].name===e){t.splice(n,1);return}}var jd,XA,rpe,ope,ipe,JA,ZA,k6,L6=Z(()=>{pr();Md();Le();S6();mI();ky();x6();zA();N6();KA();Oh();XA="sendAttempt",rpe="&"+f6+"=true",ope="?cors=true&"+Nh[QD]()+"="+YD,ipe=(jd={},jd[1]=kA,jd[100]=kA,jd[200]="sent",jd[8004]=VD,jd[8003]=VD,jd),JA={},ZA={};Vd(Ny,Ny,!1);Vd(qD,qD);Vd(AA,"Client-Id");Vd(KD,KD);Vd(GD,GD);Vd(zD,zD);Vd(OA,OA);k6=function(){function t(e,n,r,o){var i,s,a,c,l=!1,u,f,m,d,p,h,g,v,C,w,y,S,P,D,A,O,L,E,I,R,_,x,b,N,k,$,H,G;Xe(t,this,function(q){Rt();var V=!0;q[Bd]=function(B,ee,se){N||(p=ee,S=ee.getCookieMgr(),f=se,m=f.diagLog(),Es(R,Un(B,function(ve){var Te,Ge=ve.cfg,ye=ve.cfg.extensionConfig[se.identifier];k=Uh(ye[tI],ye[nI]),hr(Ge.anonCookieName)?spe(g,"anoncknm",Ge.anonCookieName):ape(g,"anoncknm"),_=ye[d6],x=ye.payloadListener;var T=ye.httpXHROverride,F=ye[MA]?ye[MA]:Ge.endpointUrl;i=F+ope,D=Ve(ye[$A])?!0:!ye[$A],y=!ye[m6];var W=ye.valueSanitizer,z=ye.stringifyObjects,X=!!Ge[rI];Ve(ye[rI])||(X=!!ye[rI]),A=ye.xhrTimeout,O=!!ye[HA],L=!!ye[BA],I=ye[p6]!==!1,$=!!ye.excludeCsMetaData,ee.getPlugin("LocalStorage")&&(L=!0),l=!du(),w=new R6(p,W,z,X,Rh,$),ne(ye[WA])||(l=!!ye[WA]),ye[jA]&&(G=ye[jA]);var re=Ue();H?H.SetConfig(re):(H=new Od,H[Bd](re,m));var ue=T,Me=ye[VA]?T:null,Je=ye[VA]?T:null,Ne=[3,2];if(!T){h=!1;var _o=[];du()?(_o=[2,1],Ne=[2,1,3]):_o=[1,2,3],_o=Lc(_o,ye.transports),T=ce(_o,!1),T||yo(m,"No available transport to send events"),ue=ce(_o,!0)}Me||(Ne=Lc(Ne,ye.unloadTransports),Me=ce(Ne,!0)),E=!h&&(l&&Go()||!L&&Fc(!0)),d=(Te={},Te[0]=T,Te[1]=ue||ce([1,2,3],!0),Te[2]=Me||ue||ce([1],!0),Te[3]=Je||ce([2,3],!0)||ue||ce([1],!0),Te)})),N=!0)},q.addResponseHandler=function(B){return b[Jn](B),{rm:function(){var ee=b.indexOf(B);ee>=0&&b.splice(ee,1)}}},q[oI]=function(B){try{if(w)return w.getEventBlob(B)}catch{}return bs},q[iI]=function(){try{var B=w&&w[sI](0,!1,!1,!1,1,0);return le(B,D)}catch{}return null},q[Fy]=function(B,ee){try{var se=[];J(B,function(T){ee&&(T=qo(T));var F=Iu.create(T[_i],[T]);se[Jn](F)});for(var ve=null;se[ze]>0&&w;){var Te=se.shift();Te&&Te[gn]()>0&&(ve=ve||w[sI](0,!1,!1,!1,1,0),w.appendPayload(ve,Te,e))}var Ge=le(ve,D),ye={data:ve[YA],urlString:Ge.url,headers:Ge[Hd],timeout:A,disableXhrSync:O,disableFetchKeepAlive:L};return D&&(gI(ye[Ts],Ry)||(ye[Ts][Ry]=LA),gI(ye[Ts],Nh)||(ye[Ts][Nh]=YD)),ye}catch{}return null};function ce(B,ee){try{return H&&H.getSenderInst(B,ee)}catch{}return null}q._getDbgPlgTargets=function(){return[d[0],s,w,d,Ue(),i]};function Ue(){try{var B={xdrOnComplete:st,fetchOnComplete:no,xhrOnComplete:bn,beaconOnRetry:Kt},ee={enableSendPromise:!1,isOneDs:!0,disableCredentials:!V,fetchCredentials:G,disableXhr:!1,disableBeacon:!l,disableBeaconSync:!l,disableFetchKeepAlive:L,timeWrapper:k,addNoResponse:I,senderOnCompleteCallBack:B};return ee}catch{}return null}function st(B,ee,se){var ve=Ds(B);wn(ee,200,{},ve),Ii(ve)}function Rt(){var B;i=null,s=new _6,a=!1,c=new E6,l=!1,u=0,f=null,m=null,d=null,p=null,h=!0,g=[],v={},C=[],w=null,y=!1,S=null,P=!1,D=!1,A=B,O=B,L=B,E=B,I=B,R=[],_=B,x=B,b=[],N=!1,k=Uh(),$=!1,H=null}function no(B,ee,se,ve){var Te=function(T,F,W){wn(ee,T,F,W),Ii(W)},Ge={},ye=B[Ts];ye&&ye.forEach(function(T,F){Ge[F]=T}),Te(B.status,Ge,se||bs)}function bn(B,ee,se){var ve=Ds(B);wn(ee,B.status,Ac(B,!0),ve),Ii(ve)}function wn(B,ee,se,ve){try{B(ee,se,ve)}catch(Te){ae(m,2,518,pe(Te))}}function Kt(B,ee,se){var ve=B,Te=200,Ge=ve[Lh],ye=B.urlString+(I?rpe:bs);try{var T=Kn();if(Ge){var F=!!p.getPlugin("LocalStorage"),W=[],z=[];J(Ge[Jr],function(X){if(W&&X&&X[gn]()>0)for(var re=X[Da](),ue=0;ue<re[ze];ue++)if(T.sendBeacon(ye,w.getEventBlob(re[ue])))z[Jn](X[ue]);else{W[Jn](X[Ia](ue));break}else W[Jn](X[Ia](0))}),z[ze]>0&&(Ge.sentEvts=z),F||tr(W,8003,Ge[Ko],!0)}else Te=0}catch(X){yo(m,"Failed to send telemetry using sendBeacon API. Ex:"+pe(X)),Te=0}finally{wn(ee,Te,{},bs)}}function ht(B){return B===2||B===3}function nt(B){return P&&ht(B)&&(B=2),B}q.addHeader=function(B,ee){v[B]=ee},q.removeHeader=function(B){delete v[B]},q[Oy]=function(){return Pt()&&c[Ly]()},q[Ah]=function(B,ee){Ve(B)&&(B=0),P&&(B=nt(B),ee=2),j(C,B,0)&&xe(Ct(),0,!1,B,ee||0)},q.isCompletelyIdle=function(){return!a&&u===0&&C[ze]===0},q[Uy]=function(B){P=B},q.addBatch=function(B){if(B&&B[gn]()>0){if(s.isTenantKilled(B[_i]()))return!1;C[Jn](B)}return!0},q.teardown=function(){C[ze]>0&&xe(Ct(),0,!0,2,2),J(R,function(B){B&&B.rm&&B.rm()}),R=[]},q.pause=function(){a=!0},q.resume=function(){a=!1,q[Ah](0,4)},q[aI]=function(B,ee,se){B&&B[gn]()>0&&(ne(ee)&&(ee=1),P&&(ee=nt(ee),se=2),xe([B],0,!1,ee,se||0))};function Pt(){return!a&&u<n}function Ct(){var B=C;return C=[],B}function j(B,ee,se){var ve=!1;return B&&B[ze]>0&&!a&&d[ee]&&w&&(ve=ee!==0||Pt()&&(se>0||c[Ly]())),ve}function ie(B){var ee={};return B&&J(B,function(se,ve){ee[ve]={iKey:se[_i](),evts:se[Da]()}}),ee}function xe(B,ee,se,ve,Te){if(!(!B||B[ze]===0)){if(a){tr(B,1,ve);return}ve=nt(ve);try{var Ge=B,ye=ve!==0;hn(p,function(){return"HttpManager:_sendBatches"},function(T){T&&(B=B.slice(0));for(var F=[],W=null,z=zo(),X=d[ve]||(ye?d[1]:d[0]),re=X&&X[cI],ue=E&&(P||ht(ve)||re===3||X._isSync&&re===2);j(B,ve,ee);){var Me=B.shift();Me&&Me[gn]()>0&&(s.isTenantKilled(Me[_i]())?F[Jn](Me):(W=W||w[sI](ee,se,ye,ue,Te,ve),w.appendPayload(W,Me,e)?W.overflow!==null&&(B=[W.overflow][xa](B),W.overflow=null,Qe(W,z,zo(),Te),z=zo(),W=null):(Qe(W,z,zo(),Te),z=zo(),B=[Me][xa](B),W=null)))}W&&Qe(W,z,zo(),Te),B[ze]>0&&(C=B[xa](C)),tr(F,8004,ve)},function(){return{batches:ie(Ge),retryCount:ee,isTeardown:se,isSynchronous:ye,sendReason:Te,useSendBeacon:ht(ve),sendType:ve}},!ye)}catch(T){ae(m,2,48,"Unexpected Exception sending batch: "+pe(T))}}}function le(B,ee){var se={url:i,hdrs:{},useHdrs:!1};ee?(se[Hd]=Ud(se[Hd],v),se.useHdrs=br(se.hdrs)[ze]>0):_e(v,function(T,F){ZA[T]?Mh(se,ZA[T],F,!1):(se[Hd][T]=F,se[eI]=!0)}),Mh(se,AA,"NO_AUTH",ee),Mh(se,qD,Th,ee);var ve=bs;J(B.apiKeys,function(T){ve[ze]>0&&(ve+=","),ve+=T}),Mh(se,KD,ve,ee),Mh(se,zD,dn().toString(),ee);var Te=Mr(B);if(hr(Te)&&(se.url+="&ext.intweb.msfpc="+Te),c[JD]()&&Mh(se,GD,c[ZD](),ee),p[Fh]){var Ge=p[Fh]();Ge>=0&&(se.url+="&w="+Ge)}for(var ye=0;ye<g[ze];ye++)se.url+="&"+g[ye].name+"="+g[ye].value;return se}function Ie(B,ee,se){B[ee]=B[ee]||{},B[ee][f.identifier]=se}function Qe(B,ee,se,ve){if(B&&B.payloadBlob&&B.payloadBlob[ze]>0){var Te=!!_,Ge=d[B.sendType];!ht(B[Ko])&&B[qA]&&B.sendReason===2&&(Ge=d[2]||d[3]||Ge);var ye=D;(B.isBeacon||Ge[cI]===3)&&(ye=!1);var T=le(B,ye);ye=ye||T[eI];var F=zo();hn(p,function(){return"HttpManager:_doPayloadSend"},function(){for(var W=0;W<B.batches[ze];W++)for(var z=B[Jr][W],X=z[Da](),re=0;re<X[ze];re++){var ue=X[re];if(y){var Me=ue[My]=ue[My]||{};Ie(Me,"sendEventStart",F),Ie(Me,"serializationStart",ee),Ie(Me,"serializationCompleted",se)}ue[XA]>0?ue[XA]++:ue[XA]=1}tr(B[Jr],1e3+(ve||0),B[Ko],!0);var Je={data:B[YA],urlString:T.url,headers:T[Hd],_thePayload:B,_sendReason:ve,timeout:A,disableXhrSync:O,disableFetchKeepAlive:L};ye&&(gI(Je[Ts],Ry)||(Je[Ts][Ry]=LA),gI(Je[Ts],Nh)||(Je[Ts][Nh]=YD));var Ne=null;Ge&&(Ne=function(_o){c.firstRequestSent();var Ga=function(As,kC){gt(As,kC,B,ve)},xo=B[lI]||B.isSync;try{Ge.sendPOST(_o,Ga,xo),x&&x(Je,_o,xo,B[qA])}catch(As){yo(m,"Unexpected exception sending payload. Ex:"+pe(As)),wn(Ga,0,{})}}),hn(p,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Ne)if(B[Ko]===0&&u++,Te&&!B.isBeacon&&Ge[cI]!==3){var _o={data:Je.data,urlString:Je.urlString,headers:Ud({},Je[Ts]),timeout:Je.timeout,disableXhrSync:Je[HA],disableFetchKeepAlive:Je[BA]},Ga=!1;hn(p,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{_(_o,function(xo){Ga=!0,!h&&!xo[Lh]&&(xo[Lh]=xo[Lh]||Je[Lh],xo[uI]=xo[uI]||Je[uI]),Ne(xo)},B.isSync||B[lI])}catch{Ga||Ne(Je)}})}else Ne(Je)})},function(){return{thePayload:B,serializationStart:ee,serializationCompleted:se,sendReason:ve}},B.isSync)}B.sizeExceed&&B.sizeExceed[ze]>0&&tr(B.sizeExceed,8003,B[Ko]),B.failedEvts&&B.failedEvts[ze]>0&&tr(B.failedEvts,8002,B[Ko])}function rt(B,ee){y&&J(B,function(se){var ve=se[My]=se[My]||{};Ie(ve,"sendEventCompleted",ee)})}function gt(B,ee,se,ve){var Te=9e3,Ge=null,ye=!1,T=!1;try{var F=!0;if(typeof B!==ea){if(ee){c[Ay](ee[u6]);var W=ee[l6]||ee["kill-duration-seconds"];J(s[fI](ee[c6],W),function(X){J(se[Jr],function(re){if(re[_i]()===X){Ge=Ge||[];var ue=re[Ia](0);se.numEvents-=ue[gn](),Ge[Jn](ue)}})})}if(B==200||B==204){Te=200;return}(!I6(B)||se.numEvents<=0)&&(F=!1),Te=9e3+B%1e3}if(F){Te=100;var z=se.retryCnt;se[Ko]===0&&(z<r?(ye=!0,Ur(function(){se[Ko]===0&&u--,xe(se[Jr],z+1,se[lI],P?2:se[Ko],5)},P,pI(z))):(T=!0,P&&(Te=8001)))}}finally{ye||(c[Ay](),yn(se,Te,ve,T)),tr(Ge,8004,se[Ko])}}function yn(B,ee,se,ve){try{ve&&f[dI]();var Te=B[Jr];ee===200&&(Te=B.sentEvts||B[Jr],!ve&&!B.isSync&&f._clearBackOff(),Wn(Te)),tr(Te,ee,B[Ko],!0)}finally{B[Ko]===0&&(u--,se!==5&&q.sendQueuedRequests(B[Ko],se))}}function Wn(B){if(y){var ee=zo();J(B,function(se){se&&se[gn]()>0&&rt(se[Da](),ee)})}}function Ur(B,ee,se){ee?B():k.set(B,se)}function Mr(B){for(var ee=0;ee<B.batches[ze];ee++){var se=B[Jr][ee].Msfpc();if(se)return encodeURIComponent(se)}return bs}function Ii(B){var ee=b;try{for(var se=0;se<ee[ze];se++)try{ee[se](B)}catch(Te){ae(m,1,519,"Response handler failed: "+Te)}if(B){var ve=JSON.parse(B);hr(ve.webResult)&&hr(ve.webResult[kh])&&S.set("MSFPC",ve.webResult[kh],365*86400)}}catch{}}function tr(B,ee,se,ve){if(B&&B[ze]>0&&o){var Te=o[qa(ee)];if(Te){var Ge=se!==0;hn(p,function(){return"HttpManager:_sendBatchesNotification"},function(){Ur(function(){try{Te.call(o,B,ee,Ge,se)}catch(ye){ae(m,1,74,"send request notification failed: "+ye)}},ve||Ge,0)},function(){return{batches:ie(B),reason:ee,isSync:Ge,sendSync:ve,sendType:se}},!Ge)}}}function qa(B){var ee=ipe[B];return hr(ee)||(ee=a6,B>=9e3&&B<=9999?ee=s6:B>=8e3&&B<=8999?ee=VD:B>=1e3&&B<=1999&&(ee=i6)),ee}})}return t.__ieDyn=1,t}()});function mpe(t){return t&&t.sendPOST}var cpe,A6,lpe,U6,M6,upe,F6,fpe,QA,Yd,O6,Mn,dpe,$6,H6=Z(()=>{Bo();pr();Md();Sd();Le();NA();mI();L6();ky();zA();KA();Oh();cpe=.25,A6=500,lpe=20,U6=6,M6=2,upe=4,F6=2,fpe=1,QA=1e4,Yd="eventsDiscarded",O6="",Mn=void 0,dpe=Cs({eventsLimitInMem:{isVal:xu,v:QA},immediateEventLimit:{isVal:xu,v:500},autoFlushEventsLimit:{isVal:xu,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:mpe,v:Mn},overrideInstrumentationKey:Mn,overrideEndpointUrl:Mn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Mn,clearTimeoutOverride:Mn,payloadPreprocessor:Mn,payloadListener:Mn,disableEventTimings:Mn,valueSanitizer:Mn,stringifyObjects:Mn,enableCompoundKey:Mn,disableOptimizeObj:!1,fetchCredentials:Mn,transports:Mn,unloadTransports:Mn,useSendBeacon:Mn,disableFetchKeepAlive:Mn,avoidOptions:!1,xhrTimeout:Mn,disableXhrSync:Mn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:Ir,v:U6},maxUnloadEventRetryAttempts:{isVal:Ir,v:M6},addNoResponse:Mn,excludeCsMetaData:Mn});$6=function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.6";var r,o=!1,i=[],s,a=!1,c=0,l,u=0,f,m={},d=$d,p,h,g,v,C,w,y,S,P,D,A,O,L,E,I,R,_,x,b,N,k,$;return Xe(e,n,function(H,G){nt(),H._getDbgPlgTargets=function(){return[C,r]},H[Bd]=function(T,F,W){hn(F,function(){return"PostChannel:initialize"},function(){G[Bd](T,F,W),b=F.getNotifyMgr();try{I=Si(Nr(H[$y]),F.evtNamespace&&F.evtNamespace()),H._addHook(Un(T,function(z){var X=z.cfg,re=Co(null,X,F);r=re.getExtCfg(H[$y],dpe),R=Uh(r[tI],r[nI]),A=!r.disableOptimizeObj&&HD(),_=r[g6],V(F),f=r.eventsLimitInMem,l=r.immediateEventLimit,y=r[GA],L=r.maxEventRetryAttempts,E=r.maxUnloadEventRetryAttempts,x=r[v6],mo(X.endpointUrl)?H.pause():a&&H.resume(),ye(),k=r[w6],$=!!r.disableTelemetry,N&&q();var ue=X.disablePageUnloadEvents||[];N=_y(st,ue,I),N=Ih(st,ue,I)||N,N=Ph(Rt,X.disablePageShowEvents,I)||N})),C[Bd](T,H.core,H)}catch(z){throw H.setInitialized(!1),z}},function(){return{theConfig:T,core:F,extensions:W}})},H.processTelemetry=function(T,F){Ty(T,H[$y]),F=F||H._getTelCtx(F);var W=T;!$&&!o&&(k&&(W[_i]=k),bn(W,!0),O?j(2,2):ht()),H.processNext(W,F)},H.getOfflineSupport=function(){try{var T=C&&C[iI]();if(C)return{getUrl:function(){return T?T.url:null},serialize:Ue,batch:ce,shouldProcess:function(F){return!$},createPayload:function(F){return null},createOneDSPayload:function(F){if(C[Fy])return C[Fy](F,A)}}}catch{}return null},H._doTeardown=function(T,F){j(2,2),o=!0,C.teardown(),q(),nt()};function q(){xy(null,I),Dy(null,I),Iy(null,I)}function V(T){var F=T[Fh];T[Fh]=function(){var W=0;return _&&(W=W|2),W|F.call(T)}}function ce(T){var F=O6;return T&&T[ze]&&J(T,function(W){F&&(F+=`
`),F+=W}),F}function Ue(T){var F=O6;try{no(T),F=C[oI](T)}catch{}return F}function st(T){var F=T||Fn().event;F.type!=="beforeunload"&&(O=!0,C[Uy](O)),j(2,2)}function Rt(T){O=!1,C[Uy](O)}function no(T){T.ext&&T.ext[UA]&&delete T.ext[UA],T.ext&&T.ext[XD]&&T.ext[XD].id&&delete T.ext[XD].id,A&&(T.ext=qo(T.ext),T.baseData&&(T.baseData=qo(T.baseData)),T.data&&(T.data=qo(T.data)))}function bn(T,F){if(T[Hy]||(T[Hy]=0),T[Du]||(T[Du]=1),no(T),T[Wd]){if(g||a)T[Du]=3,T[Wd]=!1;else if(C){A&&(T=qo(T)),C[aI](Iu.create(T[_i],[T]),T[Wd]===!0?1:T[Wd],3);return}}var W=T[Du],z=u,X=f;W===4&&(z=c,X=l);var re=!1;if(z<X)re=!Ie(T,F);else{var ue=1,Me=lpe;W===4&&(ue=4,Me=1),re=!0,Qe(T[_i],T[Du],ue,Me)&&(re=!Ie(T,F))}re&&qa(Yd,[T],Ss.QueueFull)}H.setEventQueueLimits=function(T,F){r.eventsLimitInMem=f=xu(T)?T:QA,r[GA]=y=xu(F)?F:0,ye();var W=u>T;if(!W&&S>0)for(var z=1;!W&&z<=3;z++){var X=w[z];X&&X[Jr]&&J(X[Jr],function(re){re&&re[gn]()>=S&&(W=!0)})}le(!0,W)},H.pause=function(){Ct(),a=!0,C&&C.pause()},H.resume=function(){a=!1,C&&C.resume(),ht()},H._loadTransmitProfiles=function(T){Ur(),_e(T,function(F,W){var z=W[ze];if(z>=2){var X=z>2?W[2]:0;if(W.splice(0,z-2),W[1]<0&&(W[0]=-1),W[1]>0&&W[0]>0){var re=W[0]/W[1];W[0]=z3(re)*W[1]}X>=0&&W[1]>=0&&X>W[1]&&(X=W[1]),W[Jn](X),m[F]=W}})},H.flush=function(T,F,W){T===void 0&&(T=!0);var z;if(!a)if(W=W||1,T)F||(z=qi(function(re){F=re})),s==null?(Ct(),gt(1,0,W),s=Pt(function(){s=null,yn(F,W)},0)):i[Jn](F);else{var X=Ct();wn(1,1,W),F&&F(),X&&ht()}return z},H.setMsaAuthTicket=function(T){C.addHeader(Ny,T)},H.setAuthPluginHeader=function(T){C.addHeader(FA,T)},H.removeAuthPluginHeader=function(){C.removeHeader(FA)},H.hasEvents=Kt,H._setTransmitProfile=function(T){d!==T&&m[T]!==void 0&&(Ct(),d=T,ht())},Ei(H,function(){return C},["addResponseHandler"]);function wn(T,F,W){var z=gt(T,F,W);return C[Ah](F,W),z}function Kt(){return u>0}function ht(){if(P>=0&&gt(P,0,D)&&C[Ah](0,D),c>0&&!h&&!a){var T=m[d][2];T>=0&&(h=Pt(function(){h=null,wn(4,0,1),ht()},T))}var F=m[d][1];!p&&!s&&F>=0&&!a&&(Kt()?p=Pt(function(){p=null,wn(v===0?3:1,0,1),v++,v%=2,ht()},F):v=0)}H[dI]=function(){g<upe&&(g++,Ct(),ht())},H._clearBackOff=function(){g&&(g=0,Ct(),ht())};function nt(){r=null,o=!1,i=[],s=null,a=!1,c=0,l=500,u=0,f=QA,m={},d=$d,p=null,h=null,g=0,v=0,w={},y=0,N=!1,S=0,P=-1,D=null,A=!0,O=!1,L=U6,E=M6,I=null,k=null,$=!1,R=Uh(),C=new k6(A6,F6,fpe,{requeue:Ii,send:ee,sent:se,drop:ve,rspFail:Te,oth:Ge}),Mr(),ie(),ye()}function Pt(T,F){F===0&&g&&(F=1);var W=1e3;return g&&(W=pI(g-1)),R.set(T,F*W)}function Ct(){return p!==null?(p.cancel(),p=null,v=0,!0):!1}function j(T,F){Ct(),s&&(s.cancel(),s=null),a||wn(1,T,F)}function ie(){w[4]={batches:[],iKeyMap:{}},w[3]={batches:[],iKeyMap:{}},w[2]={batches:[],iKeyMap:{}},w[1]={batches:[],iKeyMap:{}}}function xe(T,F,W){var z=w[F];z||(F=1,z=w[F]);var X=z.iKeyMap[T];return!X&&W&&(X=Iu.create(T),z.batches[Jn](X),z.iKeyMap[T]=X),X}function le(T,F){C[Oy]()&&!g&&(y>0&&u>y&&(F=!0),F&&s==null&&H.flush(T,function(){},20))}function Ie(T,F){A&&(T=qo(T));var W=T[Du],z=xe(T[_i],W,!0);return z.addEvent(T)?(W!==4?(u++,F&&T[Hy]===0&&le(!T.sync,S>0&&z[gn]()>=S)):c++,!0):!1}function Qe(T,F,W,z){for(;W<=F;){var X=xe(T,F,!0);if(X&&X[gn]()>0){var re=X[Ia](0,z),ue=re[gn]();if(ue>0)return W===4?c-=ue:u-=ue,B(Yd,[re],Ss.QueueFull),!0}W++}return rt(),!1}function rt(){for(var T=0,F=0,W=function(X){var re=w[X];re&&re[Jr]&&J(re[Jr],function(ue){X===4?T+=ue[gn]():F+=ue[gn]()})},z=1;z<=4;z++)W(z);u=F,c=T}function gt(T,F,W){var z=!1,X=F===0;return!X||C[Oy]()?hn(H.core,function(){return"PostChannel._queueBatches"},function(){for(var re=[],ue=4;ue>=T;){var Me=w[ue];Me&&Me.batches&&Me.batches[ze]>0&&(J(Me[Jr],function(Je){C.addBatch(Je)?z=z||Je&&Je[gn]()>0:re=re[xa](Je[Da]()),ue===4?c-=Je[gn]():u-=Je[gn]()}),Me[Jr]=[],Me.iKeyMap={}),ue--}re[ze]>0&&qa(Yd,re,Ss.KillSwitch),z&&P>=T&&(P=-1,D=0)},function(){return{latency:T,sendType:F,sendReason:W}},!X):(P=P>=0?ra(P,T):T,D=oa(D,W)),z}function yn(T,F){wn(1,0,F),rt(),Wn(function(){T&&T(),i[ze]>0?s=Pt(function(){s=null,yn(i.shift(),F)},0):(s=null,ht())})}function Wn(T){C.isCompletelyIdle()?T():s=Pt(function(){s=null,Wn(T)},cpe)}function Ur(){Ct(),Mr(),d=$d,ht()}function Mr(){m={},m[$d]=[2,1,0],m[WD]=[6,3,0],m[jD]=[18,9,0]}function Ii(T,F){var W=[],z=L;O&&(z=E),J(T,function(X){X&&X[gn]()>0&&J(X[Da](),function(re){re&&(re[Wd]&&(re[Du]=4,re[Wd]=!1),re[Hy]<z?(Ty(re,H[$y]),bn(re,!1)):W[Jn](re))})}),W[ze]>0&&qa(Yd,W,Ss.NonRetryableStatus),O&&j(2,2)}function tr(T,F){var W=b||{},z=W[T];if(z)try{z.apply(W,F)}catch(X){ae(H.diagLog(),1,74,T+" notification failed: "+X)}}function qa(T,F){for(var W=[],z=2;z<arguments.length;z++)W[z-2]=arguments[z];F&&F[ze]>0&&tr(T,[F][xa](W))}function B(T,F){for(var W=[],z=2;z<arguments.length;z++)W[z-2]=arguments[z];F&&F[ze]>0&&J(F,function(X){X&&X[gn]()>0&&tr(T,[X.events()][xa](W))})}function ee(T,F,W){T&&T[ze]>0&&tr("eventsSendRequest",[F>=1e3&&F<=1999?F-1e3:0,W!==!0])}function se(T,F){B("eventsSent",T,F),ht()}function ve(T,F){B(Yd,T,F>=8e3&&F<=8999?F-8e3:Ss.Unknown)}function Te(T){B(Yd,T,Ss.NonRetryableStatus),ht()}function Ge(T,F){B(Yd,T,Ss.Unknown),ht()}function ye(){x?S=0:S=oa(A6*(F6+1),f/6)}}),n}return e.__ieDyn=1,e}(Bc)});var B6={};Ug(B6,{BE_PROFILE:()=>jD,NRT_PROFILE:()=>WD,PostChannel:()=>$6,RT_PROFILE:()=>$d});var W6=Z(()=>{NA();H6()});var V6=M(Pa=>{"use strict";var ppe=Pa&&Pa.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),hpe=Pa&&Pa.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),j6=Pa&&Pa.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ppe(e,t,n);return hpe(e,t),e};Object.defineProperty(Pa,"__esModule",{value:!0});Pa.oneDataSystemClientFactory=void 0;var gpe=async(t,e,n)=>{let r=await Promise.resolve().then(()=>j6((Md(),Mg(o6)))),o=await Promise.resolve().then(()=>j6((W6(),Mg(B6)))),i=new r.AppInsightsCore,s=new o.PostChannel,a={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(n){a.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:n};a.extensionConfig[s.identifier]=u}let l=e.workspace.getConfiguration("telemetry").get("internalTesting");return i.initialize(a,[]),i.addTelemetryInitializer(u=>{u.ext=u.ext??{},u.ext.web=u.ext.web??{},u.ext.web.consentDetails='{"GPC_DataSharingOptIn":false}',l&&(u.ext.utc=u.ext.utc??{},u.ext.utc.flags=8462029)}),i},vpe=async(t,e,n)=>{let r=await gpe(t,e,n);return{logEvent:(s,a)=>{try{r==null||r.track({name:s,baseData:{name:s,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements}})}catch(c){throw new Error(`Failed to log event to app insights!
`+c.message)}},flush:async()=>{try{return new Promise((a,c)=>{if(!r){a();return}r.flush(!0,l=>{if(!l){c("Failed to flush app 1DS!");return}})})}catch(s){throw new Error(`Failed to flush 1DS!
`+s.message)}},dispose:async()=>new Promise(a=>{if(!r){a();return}r.unload(!1,()=>{a(),r=void 0},1e3)})}};Pa.oneDataSystemClientFactory=vpe});var Y6,$h,Hh,By,Pu,Rs,Zn,vI,Xi=Z(()=>{Y6="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",$h="sampleRate",Hh="ProcessLegacy",By="http.method",Pu="https://dc.services.visualstudio.com",Rs="/v2/track",Zn="not_specified",vI="iKey"});var qd,eF=Z(()=>{wt();qd=cL({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]})});var qc,be,ba,bu,Tu,wI,Ru,Nu,yI,CI,Gd,Bh,zd,tF,gr,Wy,kr,Zr,jy,Vy,Wh,Kd,EI,Xd,Yy,qy,Ta,Jd,jh,Zd,Lr=Z(()=>{qc="split",be="length",ba="toLowerCase",bu="ingestionendpoint",Tu="toString",wI="removeItem",Ru="message",Nu="count",yI="preTriggerDate",CI="getUTCDate",Gd="stringify",Bh="pathname",zd="match",tF="correlationHeaderExcludePatterns",gr="name",Wy="extensionConfig",kr="properties",Zr="measurements",jy="sizeInBytes",Vy="typeName",Wh="exceptions",Kd="severityLevel",EI="problemGroup",Xd="parsedStack",Yy="hasFullStack",qy="assembly",Ta="fileName",Jd="line",jh="aiDataContract",Zd="duration"});function SI(t,e,n){var r=e[be],o=nF(t,e);if(o[be]!==r){for(var i=0,s=o;n[s]!==void 0;)i++,s=zn(o,0,147)+rF(i);o=s}return o}function nF(t,e){var n;return e&&(e=Ze(_n(e)),e[be]>150&&(n=zn(e,0,150),ae(t,2,57,"name is too long.  It has been truncated to 150 characters.",{name:e},!0))),n||e}function St(t,e,n){n===void 0&&(n=1024);var r;return e&&(n=n||1024,e=Ze(_n(e)),e[be]>n&&(r=zn(e,0,n),ae(t,2,61,"string value is too long. It has been truncated to "+n+" characters.",{value:e},!0))),r||e}function ku(t,e){return DI(t,e,2048,66)}function Vh(t,e){var n;return e&&e[be]>32768&&(n=zn(e,0,32768),ae(t,2,56,"message is too long, it has been truncated to 32768 characters.",{message:e},!0)),n||e}function _I(t,e){var n;if(e){var r=""+e;r[be]>32768&&(n=zn(r,0,32768),ae(t,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:e},!0))}return n||e}function Qr(t,e){if(e){var n={};_e(e,function(r,o){if(Qt(o)&&pa())try{o=Rr()[Gd](o)}catch(i){ae(t,2,49,"custom property is not valid",{exception:i},!0)}o=St(t,o,8192),r=SI(t,r,n),n[r]=o}),e=n}return e}function eo(t,e){if(e){var n={};_e(e,function(r,o){r=SI(t,r,n),n[r]=o}),e=n}return e}function xI(t,e){return e&&DI(t,e,128,69)[Tu]()}function DI(t,e,n,r){var o;return e&&(e=Ze(_n(e)),e[be]>n&&(o=zn(e,0,n),ae(t,2,r,"input is too long, it has been truncated to "+n+" characters.",{data:e},!0))),o||e}function rF(t){var e="00"+t;return ia(e,e[be]-3)}var Ji=Z(()=>{wt();Le();Lr()});function Qd(t){var e=G6,n=wpe,r=n[e];return q6.createElement?n[e]||(r=n[e]=q6.createElement("a")):r={host:oF(t,!0)},r.href=t,e++,e>=n[be]&&(e=0),G6=e,r}function z6(t){var e,n=Qd(t);return n&&(e=n.href),e}function K6(t){var e,n=Qd(t);return n&&(e=n[Bh]),e}function X6(t,e){return t?t.toUpperCase()+" "+e:e}function oF(t,e){var n=Gy(t,e)||"";if(n){var r=n[zd](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[be]>3&&ke(r[2])&&r[2][be]>0)return r[2]+(r[3]||"")}return n}function Gy(t,e){var n=null;if(t){var r=t[zd](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(r!=null&&r[be]>2&&ke(r[2])&&r[2][be]>0&&(n=r[2]||"",e&&r[be]>2)){var o=(r[1]||"")[ba](),i=r[3]||"";(o==="http"&&i===":80"||o==="https"&&i===":443")&&(i=""),n+=i}}return n}var q6,G6,wpe,iF=Z(()=>{wt();Lr();q6=fn()||{},G6=0,wpe=[null,null,null,null,null]});function zy(t){return ut(ype,t[ba]())!==-1}function J6(t){sF=t}function Z6(){return sF}function Q6(t,e,n){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t[tF]){for(var r=0;r<t.correlationHeaderExcludePatterns[be];r++)if(t[tF][r].test(e))return!1}var o=Qd(e).host[ba]();if(o&&(vo(o,":443")!==-1||vo(o,":80")!==-1)&&(o=(Gy(e,!0)||"")[ba]()),(!t||!t.enableCorsCorrelation)&&o&&o!==n)return!1;var i=t&&t.correlationHeaderDomains;if(i){var s;if(J(i,function(l){var u=new RegExp(l.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));s=s||u.test(o)}),!s)return!1}var a=t&&t.correlationHeaderExcludedDomains;if(!a||a[be]===0)return!0;for(var r=0;r<a[be];r++){var c=new RegExp(a[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(c.test(o))return!1}return o&&o[be]>0}function eK(t){if(t){var e=aF(t,qd[1]);if(e&&e!==sF)return e}}function aF(t,e){if(t)for(var n=t[qc](","),r=0;r<n[be];++r){var o=n[r][qc]("=");if(o[be]===2&&o[0]===e)return o[1]}}function tK(t,e,n,r){var o,i=r,s=r;if(e&&e[be]>0){var a=Qd(e);if(o=a.host,!i)if(a[Bh]!=null){var c=a.pathname[be]===0?"/":a[Bh];c.charAt(0)!=="/"&&(c="/"+c),s=a[Bh],i=St(t,n?n+" "+c:c)}else i=St(t,e)}else o=r,i=r;return{target:o,name:i,data:s}}function nK(){var t=ou();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return dn()}function rK(t,e){var n=null;return t!==0&&e!==0&&!ne(t)&&!ne(e)&&(n=e-t),n}function oK(t,e){var n=t||{};return{getName:function(){return n[gr]},setName:function(r){e&&e.setName(r),n[gr]=r},getTraceId:function(){return n.traceID},setTraceId:function(r){e&&e.setTraceId(r),va(r)&&(n.traceID=r)},getSpanId:function(){return n.parentID},setSpanId:function(r){e&&e.setSpanId(r),wa(r)&&(n.parentID=r)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(r){e&&e.setTraceFlags(r),n.traceFlags=r}}}var ype,sF,cF=Z(()=>{wt();Le();Xi();eF();Ji();iF();Lr();ype=[Pu+Rs,"https://breeze.aimon.applicationinsights.io"+Rs,"https://dc-int.services.visualstudio.com"+Rs],sF="cid-v1:"});var Yh,iK,sK,lF=Z(()=>{wt();Yh=mn({LocalStorage:0,SessionStorage:1}),iK=mn({AI:0,AI_AND_W3C:1,W3C:2}),sK=mn({Normal:1,Critical:2})});function uF(){return qh()?II(Yh.LocalStorage):null}function II(t){try{if(ne(ho()))return null;var e=new Date()[Tu](),n=pt(t===Yh.LocalStorage?"localStorage":"sessionStorage"),r=aK+e;n.setItem(r,e);var o=n.getItem(r)!==e;if(n[wI](r),!o)return n}catch{}return null}function fF(){return em()?II(Yh.SessionStorage):null}function cK(){Lu=!1,Au=!1}function PI(t){aK=t||""}function lK(){Lu=qh(!0),Au=em(!0)}function qh(t){return(t||Lu===void 0)&&(Lu=!!II(Yh.LocalStorage)),Lu}function bI(t,e){var n=uF();if(n!==null)try{return n.getItem(e)}catch(r){Lu=!1,ae(t,2,1,"Browser failed read of local storage. "+At(r),{exception:pe(r)})}return null}function TI(t,e,n){var r=uF();if(r!==null)try{return r.setItem(e,n),!0}catch(o){Lu=!1,ae(t,2,3,"Browser failed write to local storage. "+At(o),{exception:pe(o)})}return!1}function uK(t,e){var n=uF();if(n!==null)try{return n[wI](e),!0}catch(r){Lu=!1,ae(t,2,5,"Browser failed removal of local storage item. "+At(r),{exception:pe(r)})}return!1}function em(t){return(t||Au===void 0)&&(Au=!!II(Yh.SessionStorage)),Au}function fK(){var t=[];return em()&&_e(pt("sessionStorage"),function(e){t.push(e)}),t}function RI(t,e){var n=fF();if(n!==null)try{return n.getItem(e)}catch(r){Au=!1,ae(t,2,2,"Browser failed read of session storage. "+At(r),{exception:pe(r)})}return null}function NI(t,e,n){var r=fF();if(r!==null)try{return r.setItem(e,n),!0}catch(o){Au=!1,ae(t,2,4,"Browser failed write to session storage. "+At(o),{exception:pe(o)})}return!1}function kI(t,e){var n=fF();if(n!==null)try{return n[wI](e),!0}catch(r){Au=!1,ae(t,2,6,"Browser failed removal of session storage item. "+At(r),{exception:pe(r)})}return!1}var Lu,Au,aK,dF=Z(()=>{wt();lF();Lr();Lu=void 0,Au=void 0,aK=""});var Cpe,dK,mK=Z(()=>{wt();Le();dF();Lr();Cpe="appInsightsThrottle",dK=function(){function t(e,n){var r=this,o,i,s,a,c,l,u,f=!1,m=!1;p(),r._getDbgPlgTargets=function(){return[u]},r.getConfig=function(){return s},r.canThrottle=function(_){var x=E(_),b=h(_);return C(b,o,x)},r.isTriggered=function(_){return I(_)},r.isReady=function(){return f},r.flush=function(_){try{var x=R(_);if(x&&x[be]>0){var b=x.slice(0);return u[_]=[],J(b,function(N){d(N.msgID,N[Ru],N.severity,!1)}),!0}}catch{}return!1},r.flushAll=function(){try{if(u){var _=!0;return _e(u,function(x){var b=r.flush(parseInt(x));_=_&&b}),_}}catch{}return!1},r.onReadyState=function(_,x){return x===void 0&&(x=!0),f=ne(_)?!0:_,f&&x?r.flushAll():null},r.sendMessage=function(_,x,b){return d(_,x,b,!0)};function d(_,x,b,N){if(f){var k=L(_);if(!k)return;var $=h(_),H=E(_),G=C($,o,H),q=!1,V=0,ce=I(_);try{G&&!ce?(V=ra($.limit.maxSendNumber,H[Nu]+1),H[Nu]=0,q=!0,c[_]=!0,H[yI]=new Date):(c[_]=G,H[Nu]+=1);var Ue=w(_);D(i,Ue,H);for(var st=0;st<V;st++)O(_,i,x,b)}catch{}return{isThrottled:q,throttleNum:V}}else if(N){var Rt=R(_);Rt.push({msgID:_,message:x,severity:b})}return null}function p(){i=Is(e),c={},a={},u={},s={},g(109),l=Gi(n)?n:"",e.addUnloadHook(Un(e.config,function(_){var x=_.cfg;o=qh();var b=x.throttleMgrCfg||{};_e(b,function(N,k){g(parseInt(N),k)})}))}function h(_){return s[_]||s[109]}function g(_,x){var b,N;try{var k=x||{},$={};$.disabled=!!k.disabled;var H=k.interval||{};m=(H==null?void 0:H.daysOfMonth)&&(H==null?void 0:H.daysOfMonth[be])>0,$.interval=v(H);var G={samplingRate:((b=k.limit)===null||b===void 0?void 0:b.samplingRate)||100,maxSendNumber:((N=k.limit)===null||N===void 0?void 0:N.maxSendNumber)||1};$.limit=G,s[_]=$}catch{}}function v(_){_=_||{};var x=_==null?void 0:_.monthInterval,b=_==null?void 0:_.dayInterval;return ne(x)&&ne(b)&&(_.monthInterval=3,m||(_.daysOfMonth=[28],m=!0)),_={monthInterval:_==null?void 0:_.monthInterval,dayInterval:_==null?void 0:_.dayInterval,daysOfMonth:_==null?void 0:_.daysOfMonth},_}function C(_,x,b){if(_&&!_.disabled&&x&&Gi(b)){var N=P(),k=b.date,$=_.interval,H=1;if($!=null&&$.monthInterval){var G=(N.getUTCFullYear()-k.getUTCFullYear())*12+N.getUTCMonth()-k.getUTCMonth();H=A($.monthInterval,0,G)}var q=1;if(m)q=ut($.daysOfMonth,N[CI]());else if($!=null&&$.dayInterval){var V=go((N.getTime()-k.getTime())/864e5);q=A($.dayInterval,0,V)}return H>=0&&q>=0}return!1}function w(_,x){var b=Gi(x)?x:"";return _?Cpe+b+"-"+_:null}function y(_){try{if(_){var x=new Date;return _.getUTCFullYear()===x.getUTCFullYear()&&_.getUTCMonth()===x.getUTCMonth()&&_[CI]()===x[CI]()}}catch{}return!1}function S(_,x,b){try{var N={date:P(),count:0};if(_){var k=JSON.parse(_),$={date:P(k.date)||N.date,count:k[Nu]||N[Nu],preTriggerDate:k.preTriggerDate?P(k[yI]):void 0};return $}else return D(x,b,N),N}catch{}return null}function P(_){try{if(_){var x=new Date(_);if(!isNaN(x.getDate()))return x}else return new Date}catch{}return null}function D(_,x,b){try{return TI(_,x,Ze(JSON[Gd](b)))}catch{}return!1}function A(_,x,b){return _<=0?1:b>=x&&(b-x)%_==0?go((b-x)/_)+1:-1}function O(_,x,b,N){ae(x,N||1,_,b)}function L(_){try{var x=h(_);return ey(1e6)<=x.limit.samplingRate}catch{}return!1}function E(_){try{var x=a[_];if(!x){var b=w(_,l);x=S(bI(i,b),i,b),a[_]=x}return a[_]}catch{}return null}function I(_){var x=c[_];if(ne(x)){x=!1;var b=E(_);b&&(x=y(b[yI])),c[_]=x}return c[_]}function R(_){return u=u||{},ne(u[_])&&(u[_]=[]),u[_]}}return t}()});function tm(t){if(!t)return{};var e=t[qc](Epe),n=Aw(e,function(o,i){var s=i[qc](Spe);if(s[be]===2){var a=s[0][ba](),c=s[1];o[a]=c}return o},{});if(br(n)[be]>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n[bu]=n[bu]||"https://"+r+"dc."+n.endpointsuffix}n[bu]=n[bu]||Pu,pd(n[bu],"/")&&(n[bu]=n[bu].slice(0,-1))}return n}var Epe,Spe,pK,hK=Z(()=>{wt();Xi();Lr();Epe=";",Spe="=";pK={parse:tm}});var LI,gK=Z(()=>{wt();Xi();Lr();Ji();LI=function(){function t(e,n,r){var o=this,i=this;i.ver=1,i.sampleRate=100,i.tags={},i[gr]=St(e,r)||Zn,i.data=n,i.time=Ci(new Date),i[jh]={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1}}return t}()});var Ra,vK=Z(()=>{Xi();Lr();Ji();Ra=function(){function t(e,n,r,o){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var i=this;i.ver=2,i[gr]=St(e,n)||Zn,i[kr]=Qr(e,r),i[Zr]=eo(e,o)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}()});function Npe(t){return t.replace(/(\(anonymous\))/,"<anonymous>")}function kpe(t){return vo(t,"[native")<0}function gF(t,e){var n=t;return n&&!ke(n)&&(JSON&&JSON[Gd]?(n=JSON[Gd](t),e&&(!n||n==="{}")&&(Re(t[Tu])?n=t[Tu]():n=""+t)):n=""+t+" - (Missing JSON.stringify)"),n||""}function xK(t,e){var n=t;return t&&(n&&!ke(n)&&(n=t[hF]||t[_K]||n),n&&!ke(n)&&(n=gF(n,!0)),t.filename&&(n=n+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&vo(n||"",e)===-1&&(n=e+": "+n),n||""}function Lpe(t){try{if(Qt(t))return"hasFullStack"in t&&"typeName"in t}catch{}return!1}function Ape(t){try{if(Qt(t))return"ver"in t&&"exceptions"in t&&"properties"in t}catch{}return!1}function EK(t){return t&&t.src&&ke(t.src)&&t.obj&&we(t.obj)}function nm(t){var e=t||"";ke(e)||(ke(e[Zi])?e=e[Zi]:e=""+e);var n=e[qc](`
`);return{src:e,obj:n}}function Fpe(t){for(var e=[],n=t[qc](`
`),r=0;r<n[be];r++){var o=n[r];n[r+1]&&(o+="@"+n[r+1],r++),e.push(o)}return{src:t,obj:e}}function DK(t){var e=null;if(t)try{if(t[Zi])e=nm(t[Zi]);else if(t[Gh]&&t[Gh][Zi])e=nm(t[Gh][Zi]);else if(t.exception&&t.exception[Zi])e=nm(t.exception[Zi]);else if(EK(t))e=t;else if(EK(t[pF]))e=t[pF];else if(Fn()&&Fn().opera&&t[hF])e=Fpe(t[Ru]);else if(t.reason&&t.reason[Zi])e=nm(t.reason[Zi]);else if(ke(t))e=nm(t);else{var n=t[hF]||t[_K]||"";ke(t[yK])&&(n&&(n+=`
`),n+=" from "+t[yK]),n&&(e=nm(n))}}catch(r){e=nm(r)}return e||{src:"",obj:null}}function Ope(t){var e="";return t&&(t.obj?e=t.obj.join(`
`):e=t.src||""),e}function Upe(t){var e,n=t.obj;if(n&&n[be]>0){e=[];var r=0,o=!1,i=0;J(n,function(h){if(o||Bpe(h)){var g=_n(h);o=!0;var v=Wpe(g,r);v&&(i+=v[jy],e.push(v),r++)}});var s=32*1024;if(i>s)for(var a=0,c=e[be]-1,l=0,u=a,f=c;a<c;){var m=e[a][jy],d=e[c][jy];if(l+=m+d,l>s){var p=f-u+1;e.splice(u,p);break}u=a,f=c,a++,c--}}return e}function AI(t){var e="";if(t&&(e=t.typeName||t[gr]||"",!e))try{var n=/function (.{1,200})\(/,r=n.exec(t.constructor[Tu]());e=r&&r[be]>1?r[1]:""}catch{}return e}function mF(t){if(t)try{if(!ke(t)){var e=AI(t),n=gF(t,!1);return(!n||n==="{}")&&(t[Gh]&&(t=t[Gh],e=AI(t)),n=gF(t,!0)),vo(n,e)!==0&&e!=="String"?e+":"+n:n}}catch{}return""+(t||"")}function $pe(){var t=this,e=we(t[Xd])&&Dc(t[Xd],function(r){return Vpe(r)}),n={id:t.id,outerId:t.outerId,typeName:t[Vy],message:t[Ru],hasFullStack:t[Yy],stack:t[Zi],parsedStack:e||void 0};return n}function IK(t,e,n){var r,o,i,s,a,c,l,u;if(Lpe(e))s=e[Vy],a=e[Ru],l=e[Zi],u=e[Xd]||[],c=e[Yy];else{var f=e,m=f&&f.evt;fd(f)||(f=f[Gh]||m||f),s=St(t,AI(f))||Zn,a=Vh(t,xK(e||f,s))||Zn;var d=e[pF]||DK(e);u=Upe(d),we(u)&&Dc(u,function(p){p[qy]=St(t,p[qy]),p[Ta]=St(t,p[Ta])}),l=_I(t,Ope(d)),c=we(u)&&u[be]>0,n&&(n[Vy]=n[Vy]||s)}return r={},r[jh]=Mpe,r.id=o,r.outerId=i,r.typeName=s,r.message=a,r[Yy]=c,r.stack=l,r.parsedStack=u,r.toInterface=$pe,r}function Hpe(t,e){var n=we(e[Xd])&&Dc(e[Xd],function(o){return jpe(o)})||e[Xd],r=IK(t,ji(ji({},e),{parsedStack:n}));return r}function PK(t,e){var n=e[zd](Tpe);if(n&&n[be]>=4)t[Ta]=n[1],t[Jd]=parseInt(n[2]);else{var r=e[zd](Rpe);r&&r[be]>=3?(t[Ta]=r[1],t[Jd]=parseInt(r[2])):t[Ta]=e}}function SK(t,e,n){var r=t[Ta];e.fn&&n&&n[be]>e.fn&&(e.ln&&n[be]>e.ln?(r=Ze(n[e.fn]||""),t[Jd]=parseInt(Ze(n[e.ln]||""))||0):r=Ze(n[e.fn]||"")),r&&PK(t,r)}function Bpe(t){var e=!1;if(t&&ke(t)){var n=Ze(t);n&&(e=xpe.test(n))}return e}function Wpe(t,e){var n,r;if(t&&ke(t)&&Ze(t)){r=(n={},n[jh]=bK,n.level=e,n.assembly=Ze(t),n.method=wK,n.fileName="",n.line=0,n.sizeInBytes=0,n);for(var o=0;o<CK[be];){var i=CK[o];if(i.chk&&!i.chk(t))break;i.pre&&(t=i.pre(t));var s=t[zd](i.re);if(s&&s[be]>=i.len){i.m&&(r.method=Ze(s[i.m]||wK)),i.hdl?i.hdl(r,i,s):i.fn&&(i.ln?(r[Ta]=Ze(s[i.fn]||""),r[Jd]=parseInt(Ze(s[i.ln]||""))||0):PK(r,s[i.fn]||""));break}o++}}return TK(r)}function jpe(t){var e,n=(e={},e[jh]=bK,e.level=t.level,e.method=t.method,e.assembly=t[qy],e.fileName=t[Ta],e.line=t[Jd],e.sizeInBytes=0,e);return TK(n)}function TK(t){var e=_pe;return t&&(e+=t.method[be],e+=t.assembly[be],e+=t.fileName[be],e+=t.level.toString()[be],e+=t.line.toString()[be],t[jy]=e),t}function Vpe(t){return{level:t.level,method:t.method,assembly:t[qy],fileName:t[Ta],line:t[Jd]}}var _pe,xpe,Dpe,Ipe,Ppe,bpe,Tpe,Rpe,wK,Gh,Zi,pF,yK,hF,_K,CK,Fu,Mpe,bK,RK=Z(()=>{Bo();wt();Le();Xi();Lr();Ji();_pe=58,xpe=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,Dpe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,Ipe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,Ppe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,bpe=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,Tpe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,Rpe=/([^\(\s\n]+):([0-9]+)$/,wK="<no_method>",Gh="error",Zi="stack",pF="stackDetails",yK="errorSrc",hF="message",_K="description",CK=[{re:Dpe,len:5,m:1,fn:2,ln:3,col:4},{chk:kpe,pre:Npe,re:Ipe,len:4,m:1,fn:2,ln:3},{re:Ppe,len:3,m:1,fn:2,hdl:SK},{re:bpe,len:2,fn:1,hdl:SK}];Fu=function(){function t(e,n,r,o,i,s){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var a=this;a.ver=2,Ape(n)?(a[Wh]=n[Wh]||[],a[kr]=n[kr],a[Zr]=n[Zr],n[Kd]&&(a[Kd]=n[Kd]),n.id&&(a.id=n.id,n[kr].id=n.id),n[EI]&&(a[EI]=n[EI]),ne(n.isManual)||(a.isManual=n.isManual)):(r||(r={}),s&&(r.id=s),a[Wh]=[IK(e,n,r)],a[kr]=Qr(e,r),a[Zr]=eo(e,o),i&&(a[Kd]=i),s&&(a.id=s))}return t.CreateAutoException=function(e,n,r,o,i,s,a,c){var l=AI(i||s||e);return{message:xK(e,l),url:n,lineNumber:r,columnNumber:o,error:mF(i||s||e),evt:mF(s||e),typeName:l,stackDetails:DK(a||i||s),errorSrc:c}},t.CreateFromInterface=function(e,n,r,o){var i=n[Wh]&&Dc(n[Wh],function(a){return Hpe(e,a)}),s=new t(e,ji(ji({},n),{exceptions:i}),r,o);return s},t.prototype.toInterface=function(){var e=this,n=e.exceptions,r=e.properties,o=e.measurements,i=e.severityLevel,s=e.problemGroup,a=e.id,c=e.isManual,l=n instanceof Array&&Dc(n,function(u){return u.toInterface()})||void 0;return{ver:"4.0",exceptions:l,severityLevel:i,properties:r,measurements:o,problemGroup:s,id:a,isManual:c}},t.CreateSimpleException=function(e,n,r,o,i,s){var a;return{exceptions:[(a={},a[Yy]=!0,a.message=e,a.stack=i,a.typeName=n,a)]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t.formatError=mF,t}(),Mpe=po({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});bK=po({level:1,method:1,assembly:0,fileName:0,line:0})});var NK,kK=Z(()=>{NK=function(){function t(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return t}()});var Na,LK=Z(()=>{Xi();Lr();kK();Ji();Na=function(){function t(e,n,r,o,i,s,a,c,l){this.aiDataContract={ver:1,metrics:1,properties:0};var u=this;u.ver=2;var f=new NK;f[Nu]=o>0?o:void 0,f.max=isNaN(s)||s===null?void 0:s,f.min=isNaN(i)||i===null?void 0:i,f[gr]=St(e,n)||Zn,f.value=r,f.stdDev=isNaN(a)||a===null?void 0:a,u.metrics=[f],u[kr]=Qr(e,c),u[Zr]=eo(e,l)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}()});function AK(t,e){return e===void 0&&(e=!1),t==null?e:t.toString()[ba]()==="true"}function zh(t){(isNaN(t)||t<0)&&(t=0),t=J3(t);var e=Ky+t%1e3,n=Ky+go(t/1e3)%60,r=Ky+go(t/(1e3*60))%60,o=Ky+go(t/(1e3*60*60))%24,i=go(t/(1e3*60*60*24));return e=e[be]===1?"00"+e:e[be]===2?"0"+e:e,n=n[be]<2?"0"+n:n,r=r[be]<2?"0"+r:r,o=o[be]<2?"0"+o:o,(i>0?i+".":Ky)+o+":"+r+":"+n+"."+e}function FK(t,e){var n=null;return J(t,function(r){if(r.identifier===e)return n=r,-1}),n}function OK(t,e,n,r,o){return!o&&ke(t)&&(t==="Script error."||t==="Script error")}var Ky,FI=Z(()=>{wt();Le();Lr();Ky=""});var Ou,UK=Z(()=>{Xi();FI();Lr();Ji();Ou=function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var c=this;c.ver=2,c.id=xI(e,a),c.url=ku(e,r),c[gr]=St(e,n)||Zn,isNaN(o)||(c[Zd]=zh(o)),c[kr]=Qr(e,i),c[Zr]=eo(e,s)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}()});var Uu,MK=Z(()=>{FI();cF();Lr();Ji();Uu=function(){function t(e,n,r,o,i,s,a,c,l,u,f,m){l===void 0&&(l="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var d=this;d.ver=2,d.id=n,d[Zd]=zh(i),d.success=s,d.resultCode=a+"",d.type=St(e,l);var p=tK(e,r,c,o);d.data=ku(e,o)||p.data,d.target=St(e,p.target),u&&(d.target="".concat(d.target," | ").concat(u)),d[gr]=St(e,p[gr]),d[kr]=Qr(e,f),d[Zr]=eo(e,m)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}()});var Mu,$K=Z(()=>{Xi();Lr();Ji();Mu=function(){function t(e,n,r,o,i){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var s=this;s.ver=2,n=n||Zn,s[Ru]=Vh(e,n),s[kr]=Qr(e,o),s[Zr]=eo(e,i),r&&(s[Kd]=r)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}()});var $u,HK=Z(()=>{Xi();Lr();Ji();$u=function(){function t(e,n,r,o,i,s,a){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var c=this;c.ver=2,c.url=ku(e,r),c[gr]=St(e,n)||Zn,c[kr]=Qr(e,i),c[Zr]=eo(e,s),a&&(c.domProcessing=a.domProcessing,c[Zd]=a[Zd],c.networkConnect=a.networkConnect,c.perfTotal=a.perfTotal,c.receivedResponse=a.receivedResponse,c.sentRequest=a.sentRequest)}return t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}()});var ka,BK=Z(()=>{ka=function(){function t(e,n){this.aiDataContract={baseType:1,baseData:1},this.baseType=e,this.baseData=n}return t}()});var OI,WK=Z(()=>{wt();OI=mn({Verbose:0,Information:1,Warning:2,Error:3,Critical:4})});var jK,VK=Z(()=>{wt();Lr();jK=function(){function t(){}return t.getConfig=function(e,n,r,o){o===void 0&&(o=!1);var i;return r&&e[Wy]&&e[Wy][r]&&!ne(e[Wy][r][n])?i=e[Wy][r][n]:i=e[n],ne(i)?o:i},t}()});function Bu(t){var e="ai."+t+".";return function(n){return e+n}}var Xy,Qn,UI,Kh,vF,Hu,rm,Jy,Xh,wF=Z(()=>{Bo();wt();Xy=Bu("application"),Qn=Bu("device"),UI=Bu("location"),Kh=Bu("operation"),vF=Bu("session"),Hu=Bu("user"),rm=Bu("cloud"),Jy=Bu("internal"),Xh=function(t){Ho(e,t);function e(){return t.call(this)||this}return e}(_L({applicationVersion:Xy("ver"),applicationBuild:Xy("build"),applicationTypeId:Xy("typeId"),applicationId:Xy("applicationId"),applicationLayer:Xy("layer"),deviceId:Qn("id"),deviceIp:Qn("ip"),deviceLanguage:Qn("language"),deviceLocale:Qn("locale"),deviceModel:Qn("model"),deviceFriendlyName:Qn("friendlyName"),deviceNetwork:Qn("network"),deviceNetworkName:Qn("networkName"),deviceOEMName:Qn("oemName"),deviceOS:Qn("os"),deviceOSVersion:Qn("osVersion"),deviceRoleInstance:Qn("roleInstance"),deviceRoleName:Qn("roleName"),deviceScreenResolution:Qn("screenResolution"),deviceType:Qn("type"),deviceMachineName:Qn("machineName"),deviceVMName:Qn("vmName"),deviceBrowser:Qn("browser"),deviceBrowserVersion:Qn("browserVersion"),locationIp:UI("ip"),locationCountry:UI("country"),locationProvince:UI("province"),locationCity:UI("city"),operationId:Kh("id"),operationName:Kh("name"),operationParentId:Kh("parentId"),operationRootId:Kh("rootId"),operationSyntheticSource:Kh("syntheticSource"),operationCorrelationVector:Kh("correlationVector"),sessionId:vF("id"),sessionIsFirst:vF("isFirst"),sessionIsNew:vF("isNew"),userAccountAcquisitionDate:Hu("accountAcquisitionDate"),userAccountId:Hu("accountId"),userAgent:Hu("userAgent"),userId:Hu("id"),userStoreRegion:Hu("storeRegion"),userAuthUserId:Hu("authUserId"),userAnonymousUserAcquisitionDate:Hu("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Hu("authUserAcquisitionDate"),cloudName:rm("name"),cloudRole:rm("role"),cloudRoleVer:rm("roleVer"),cloudRoleInstance:rm("roleInstance"),cloudEnvironment:rm("environment"),cloudLocation:rm("location"),cloudDeploymentUnit:rm("deploymentUnit"),internalNodeName:Jy("nodeName"),internalSdkVersion:Jy("sdkVersion"),internalAgentVersion:Jy("agentVersion"),internalSnippet:Jy("snippet"),internalSdkSrc:Jy("sdkSrc")}))});function yF(t,e,n,r,o,i){n=St(r,n)||Zn,(ne(t)||ne(e)||ne(n))&&un("Input doesn't contain all required fields");var s="";t[vI]&&(s=t[vI],delete t[vI]);var a={name:n,time:Ci(new Date),iKey:s,ext:i||{},tags:[],data:{},baseType:e,baseData:t};return ne(o)||_e(o,function(c,l){a.data[c]=l}),a}var YK,qK=Z(()=>{wt();Xi();Ji();YK=function(){function t(){}return t.create=yF,t}()});var GK,Dn,zK=Z(()=>{wF();GK={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Dn=new Xh});function KK(t){var e=null;if(Re(Event))e=new Event(t);else{var n=fn();n&&n.createEvent&&(e=n.createEvent("Event"),e.initEvent(t,!0,!0))}return e}var XK=Z(()=>{wt()});function JK(t,e){jc(t,null,null,e)}function MI(t){var e=fn(),n=Kn(),r=!1,o=[],i=1;n&&!ne(n.onLine)&&!n.onLine&&(i=2);var s=0,a=m(),c=Si(Nr("OfflineListener"),t);try{if(u(Fn())&&(r=!0),e){var l=e.body||e;l.ononline&&u(l)&&(r=!0)}}catch{r=!1}function u(w){var y=!1;return w&&(y=Ca(w,"online",h,c),y&&Ca(w,"offline",g,c)),y}function f(){return a}function m(){return!(s===2||i===2)}function d(){var w=m();a!==w&&(a=w,J(o,function(y){var S={isOnline:a,rState:i,uState:s};try{y(S)}catch{}}))}function p(w){s=w,d()}function h(){i=1,d()}function g(){i=2,d()}function v(){var w=Fn();if(w&&r){if(JK(w,c),e){var y=e.body||e;Ve(y.ononline)||JK(y,c)}r=!1}}function C(w){return o.push(w),{rm:function(){var y=o.indexOf(w);if(y>-1)return o.splice(y,1)}}}return{isOnline:f,isListening:function(){return r},unload:v,addListener:C,setOnlineState:p}}var ZK=Z(()=>{wt()});var QK={};Ug(QK,{AnalyticsPluginIdentifier:()=>qpe,BreezeChannelIdentifier:()=>CF,ConfigurationManager:()=>jK,ConnectionStringParser:()=>pK,ContextTagKeys:()=>Xh,CtxTagKeys:()=>Dn,DEFAULT_BREEZE_ENDPOINT:()=>Pu,DEFAULT_BREEZE_PATH:()=>Rs,Data:()=>ka,DisabledPropertyName:()=>Y6,DistributedTracingModes:()=>iK,Envelope:()=>LI,Event:()=>Ra,EventPersistence:()=>sK,Exception:()=>Fu,Extensions:()=>GK,HttpMethod:()=>By,Metric:()=>Na,PageView:()=>Ou,PageViewPerformance:()=>$u,ProcessLegacy:()=>Hh,PropertiesPluginIdentifier:()=>Ype,RemoteDependencyData:()=>Uu,RequestHeaders:()=>qd,SampleRate:()=>$h,SeverityLevel:()=>OI,TelemetryItemCreator:()=>YK,ThrottleMgr:()=>dK,Trace:()=>Mu,correlationIdCanIncludeCorrelationHeader:()=>Q6,correlationIdGetCorrelationContext:()=>eK,correlationIdGetCorrelationContextValue:()=>aF,correlationIdGetPrefix:()=>Z6,correlationIdSetPrefix:()=>J6,createDistributedTraceContextFromTrace:()=>oK,createDomEvent:()=>KK,createOfflineListener:()=>MI,createTelemetryItem:()=>yF,createTraceParent:()=>my,dataSanitizeException:()=>_I,dataSanitizeId:()=>xI,dataSanitizeInput:()=>DI,dataSanitizeKey:()=>nF,dataSanitizeKeyAndAddUniqueness:()=>SI,dataSanitizeMeasurements:()=>eo,dataSanitizeMessage:()=>Vh,dataSanitizeProperties:()=>Qr,dataSanitizeString:()=>St,dataSanitizeUrl:()=>ku,dateTimeUtilsDuration:()=>rK,dateTimeUtilsNow:()=>nK,dsPadNumber:()=>rF,findAllScripts:()=>lA,findW3cTraceParent:()=>gy,formatTraceParent:()=>hy,getExtensionByName:()=>FK,isBeaconApiSupported:()=>Go,isCrossOriginError:()=>OK,isInternalApplicationInsightsEndpoint:()=>zy,isSampledFlag:()=>py,isValidSpanId:()=>wa,isValidTraceId:()=>va,isValidTraceParent:()=>_h,msToTimeSpan:()=>zh,parseConnectionString:()=>tm,parseTraceParent:()=>Ld,strNotSpecified:()=>Zn,stringToBoolOrDefault:()=>AK,urlGetAbsoluteUrl:()=>z6,urlGetCompleteUrl:()=>X6,urlGetPathName:()=>K6,urlParseFullHost:()=>Gy,urlParseHost:()=>oF,urlParseUrl:()=>Qd,utlCanUseLocalStorage:()=>qh,utlCanUseSessionStorage:()=>em,utlDisableStorage:()=>cK,utlEnableStorage:()=>lK,utlGetLocalStorage:()=>bI,utlGetSessionStorage:()=>RI,utlGetSessionStorageKeys:()=>fK,utlRemoveSessionStorage:()=>kI,utlRemoveStorage:()=>uK,utlSetLocalStorage:()=>TI,utlSetSessionStorage:()=>NI,utlSetStoragePrefix:()=>PI});var Ype,CF,qpe,Gc=Z(()=>{cF();mK();hK();eF();Xi();gK();vK();RK();LK();UK();MK();$K();HK();BK();WK();VK();wF();Ji();qK();zK();lF();FI();wt();XK();dF();iF();ZK();Ype="AppInsightsPropertiesPlugin",CF="AppInsightsChannelPlugin",qpe="ApplicationInsightsAnalytics"});var SF=M($I=>{"use strict";Object.defineProperty($I,"__esModule",{value:!0});$I.TelemetryUtil=void 0;var EF=class t{static applyReplacements(e,n){for(let r of Object.keys(e))for(let o of n)o.lookup.test(r)&&(o.replacementString!==void 0?e[r]=o.replacementString:delete e[r])}static shouldUseOneDataSystemSDK(e){return e.length===74&&e[32]==="-"&&e[41]==="-"&&e[46]==="-"&&e[51]==="-"&&e[56]==="-"&&e[69]==="-"}static getAdditionalCommonProperties(e){return{"common.os":e.platform,"common.nodeArch":e.architecture,"common.platformversion":(e.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),"common.telemetryclientversion":"0.9.8"}}static getInstance(){return t._instance||(t._instance=new t),t._instance}};$I.TelemetryUtil=EF});var Wu,e5=Z(()=>{Wu="duration"});var $n,HI,Xo,La,om,qe,ju,Vu,Qi,Yu,zc,Kc,Xc,es,Zy,qu,Jh,im,Qy,Zh,Jc,Gu,Qh,eg,Ar,BI,tg,ng,rg,WI,_F,jI,VI,xF,DF,Ns,IF,PF,eC,zu,YI,tC,qI,GI,zI,og,t5,Ku=Z(()=>{$n="tags",HI="deviceType",Xo="data",La="name",om="traceID",qe="length",ju="stringify",Vu="measurements",Qi="dataType",Yu="envelopeType",zc="toString",Kc="enqueue",Xc="count",es="push",Zy="emitLineDelimitedJson",qu="clear",Jh="markAsSent",im="clearSent",Qy="bufferOverride",Zh="BUFFER_KEY",Jc="SENT_BUFFER_KEY",Gu="concat",Qh="MAX_BUFFER_SIZE",eg="triggerSend",Ar="diagLog",BI="initialize",tg="_sender",ng="endpointUrl",rg="instrumentationKey",WI="customHeaders",_F="maxBatchSizeInBytes",jI="onunloadDisableBeacon",VI="isBeaconApiDisabled",xF="alwaysUseXhrOverride",DF="enableSessionStorageBuffer",Ns="_buffer",IF="onunloadDisableFetch",PF="disableSendBeaconSplit",eC="getSenderInst",zu="_onError",YI="_onPartialSuccess",tC="_onSuccess",qI="itemsReceived",GI="itemsAccepted",zI="baseType",og="sampleRate",t5="getHashCodeScore"});function In(t,e,n){return zi(t,e,n,ws)}function Gpe(t,e,n){var r=n[$n]=n[$n]||{},o=e.ext=e.ext||{},i=e[$n]=e[$n]||[],s=o.user;s&&(In(r,Dn.userAuthUserId,s.authId),In(r,Dn.userId,s.id||s.localId));var a=o.app;a&&In(r,Dn.sessionId,a.sesId);var c=o.device;c&&(In(r,Dn.deviceId,c.id||c.localId),In(r,Dn[HI],c.deviceClass),In(r,Dn.deviceIp,c.ip),In(r,Dn.deviceModel,c.model),In(r,Dn[HI],c[HI]));var l=e.ext.web;if(l){In(r,Dn.deviceLanguage,l.browserLang),In(r,Dn.deviceBrowserVersion,l.browserVer),In(r,Dn.deviceBrowser,l.browser);var u=n[Xo]=n[Xo]||{},f=u[Yt]=u[Yt]||{},m=f[vr]=f[vr]||{};In(m,"domain",l.domain),In(m,"isManual",l.isManual?n5:null),In(m,"screenRes",l.screenRes),In(m,"userConsent",l.userConsent?n5:null)}var d=o.os;d&&(In(r,Dn.deviceOS,d[La]),In(r,Dn.deviceOSVersion,d.osVer));var p=o.trace;p&&(In(r,Dn.operationParentId,p.parentID),In(r,Dn.operationName,St(t,p[La])),In(r,Dn.operationId,p[om]));for(var h={},g=i[qe]-1;g>=0;g--){var v=i[g];_e(v,function(w,y){h[w]=y}),i.splice(g,1)}_e(i,function(w,y){h[w]=y});var C=ji(ji({},r),h);C[Dn.internalSdkVersion]||(C[Dn.internalSdkVersion]=St(t,"javascript:".concat(zpe.Version),64)),n[$n]=qo(C)}function Xu(t,e,n){ne(t)||_e(t,function(r,o){Ir(o)?n[r]=o:ke(o)?e[r]=o:pa()&&(e[r]=Rr()[ju](o))})}function sm(t,e){ne(t)||_e(t,function(n,r){t[n]=r||e})}function am(t,e,n,r){var o=new LI(t,r,e);In(o,"sampleRate",n[$h]),(n[Yt]||{}).startTime&&(o.time=Ci(n[Yt].startTime)),o.iKey=n.iKey;var i=n.iKey.replace(/-/g,"");return o[La]=o[La].replace("{0}",i),Gpe(t,n,o),n[$n]=n[$n]||[],qo(o)}function cm(t,e){ne(e[Yt])&&ae(t,1,46,"telemetryItem.baseData cannot be null.")}function r5(t,e,n){cm(t,e);var r=e[Yt][Vu]||{},o=e[Yt][vr]||{};Xu(e[Xo],o,r),ne(n)||sm(o,n);var i=e[Yt];if(ne(i))return yo(t,"Invalid input for dependency data"),null;var s=i[vr]&&i[vr][By]?i[vr][By]:"GET",a=new Uu(t,i.id,i.target,i[La],i[Wu],i.success,i.responseCode,s,i.type,i.correlationContext,o,r),c=new ka(Uu[Qi],a);return am(t,Uu[Yu],e,c)}function TF(t,e,n){cm(t,e);var r={},o={};e[bF]!==Ra[Qi]&&(r.baseTypeSource=e[bF]),e[bF]===Ra[Qi]?(r=e[Yt][vr]||{},o=e[Yt][Vu]||{}):e[Yt]&&Xu(e[Yt],r,o),Xu(e[Xo],r,o),ne(n)||sm(r,n);var i=e[Yt][La],s=new Ra(t,i,r,o),a=new ka(Ra[Qi],s);return am(t,Ra[Yu],e,a)}function o5(t,e,n){cm(t,e);var r=e[Yt][Vu]||{},o=e[Yt][vr]||{};Xu(e[Xo],o,r),ne(n)||sm(o,n);var i=e[Yt],s=Fu.CreateFromInterface(t,i,o,r),a=new ka(Fu[Qi],s);return am(t,Fu[Yu],e,a)}function i5(t,e,n){cm(t,e);var r=e[Yt],o=r[vr]||{},i=r[Vu]||{};Xu(e[Xo],o,i),ne(n)||sm(o,n);var s=new Na(t,r[La],r.average,r.sampleCount,r.min,r.max,r.stdDev,o,i),a=new ka(Na[Qi],s);return am(t,Na[Yu],e,a)}function s5(t,e,n){cm(t,e);var r,o=e[Yt];!ne(o)&&!ne(o[vr])&&!ne(o[vr][Wu])?(r=o[vr][Wu],delete o[vr][Wu]):!ne(e[Xo])&&!ne(e[Xo][Wu])&&(r=e[Xo][Wu],delete e[Xo][Wu]);var i=e[Yt],s;((e.ext||{}).trace||{})[om]&&(s=e.ext.trace[om]);var a=i.id||s,c=i[La],l=i.uri,u=i[vr]||{},f=i[Vu]||{};if(ne(i.refUri)||(u.refUri=i.refUri),ne(i.pageType)||(u.pageType=i.pageType),ne(i.isLoggedIn)||(u.isLoggedIn=i.isLoggedIn[zc]()),!ne(i[vr])){var m=i[vr];_e(m,function(h,g){u[h]=g})}Xu(e[Xo],u,f),ne(n)||sm(u,n);var d=new Ou(t,c,l,r,u,f,a),p=new ka(Ou[Qi],d);return am(t,Ou[Yu],e,p)}function a5(t,e,n){cm(t,e);var r=e[Yt],o=r[La],i=r.uri||r.url,s=r[vr]||{},a=r[Vu]||{};Xu(e[Xo],s,a),ne(n)||sm(s,n);var c=new $u(t,o,i,void 0,s,a,r),l=new ka($u[Qi],c);return am(t,$u[Yu],e,l)}function c5(t,e,n){cm(t,e);var r=e[Yt].message,o=e[Yt].severityLevel,i=e[Yt][vr]||{},s=e[Yt][Vu]||{};Xu(e[Xo],i,s),ne(n)||sm(i,n);var a=new Mu(t,r,o,i,s),c=new ka(Mu[Qi],a);return am(t,Mu[Yu],e,c)}var bF,Yt,vr,n5,zpe,l5=Z(()=>{Bo();Gc();wt();e5();Ku();bF="baseType",Yt="baseData",vr="properties",n5="true";zpe={Version:"3.3.6"}});var u5,KI,Kpe,RF,f5=Z(()=>{Bo();pr();Gc();wt();Ku();u5=function(){function t(e,n){var r=[],o=!1,i=n.maxRetryCnt;this._get=function(){return r},this._set=function(s){return r=s,r},Xe(t,this,function(s){s[Kc]=function(a){if(s[Xc]()>=n.eventsLimitInMem){o||(ae(e,2,105,"Maximum in-memory buffer size reached: "+s[Xc](),!0),o=!0);return}a.cnt=a.cnt||0,!(!ne(i)&&a.cnt>i)&&r[es](a)},s[Xc]=function(){return r[qe]},s.size=function(){for(var a=r[qe],c=0;c<r[qe];c++)a+=r[c].item[qe];return n[Zy]||(a+=2),a},s[qu]=function(){r=[],o=!1},s.getItems=function(){return r.slice(0)},s.batchPayloads=function(a){if(a&&a[qe]>0){var c=[];J(a,function(u){c[es](u.item)});var l=n[Zy]?c.join(`
`):"["+c.join(",")+"]";return l}return null},s.createNew=function(a,c,l){var u=r.slice(0);a=a||e,c=c||{};var f=l?new RF(a,c):new KI(a,c);return J(u,function(m){f[Kc](m)}),f}})}return t.__ieDyn=1,t}(),KI=function(t){Ho(e,t);function e(n,r){var o=t.call(this,n,r)||this;return Xe(e,o,function(i,s){i[Jh]=function(a){s[qu]()},i[im]=function(a){}}),o}return e.__ieDyn=1,e}(u5),Kpe=["AI_buffer","AI_sentBuffer"],RF=function(t){Ho(e,t);function e(r,o){var i=t.call(this,r,o)||this,s=!1,a=o==null?void 0:o.namePrefix,c=o[Qy]||{getItem:RI,setItem:NI},l=c.getItem,u=c.setItem,f=o.maxRetryCnt;return Xe(e,i,function(m,d){var p=y(e[Zh]),h=y(e[Jc]),g=D(),v=h[Gu](g),C=m._set(p[Gu](v));C[qe]>e[Qh]&&(C[qe]=e[Qh]),P(e[Jc],[]),P(e[Zh],C),m[Kc]=function(O){if(m[Xc]()>=e[Qh]){s||(ae(r,2,67,"Maximum buffer size reached: "+m[Xc](),!0),s=!0);return}O.cnt=O.cnt||0,!(!ne(f)&&O.cnt>f)&&(d[Kc](O),P(e[Zh],m._get()))},m[qu]=function(){d[qu](),P(e[Zh],m._get()),P(e[Jc],[]),s=!1},m[Jh]=function(O){P(e[Zh],m._set(w(O,m._get())));var L=y(e[Jc]);L instanceof Array&&O instanceof Array&&(L=L[Gu](O),L[qe]>e[Qh]&&(ae(r,1,67,"Sent buffer reached its maximum size: "+L[qe],!0),L[qe]=e[Qh]),P(e[Jc],L))},m[im]=function(O){var L=y(e[Jc]);L=w(O,L),P(e[Jc],L)},m.createNew=function(O,L,E){E=!!E;var I=m._get().slice(0),R=y(e[Jc]).slice(0);O=O||r,L=L||{},m[qu]();var _=E?new e(O,L):new KI(O,L);return J(I,function(x){_[Kc](x)}),E&&_[Jh](R),_};function w(O,L){var E=[],I=[];return J(O,function(R){I[es](R.item)}),J(L,function(R){!Re(R)&&ut(I,R.item)===-1&&E[es](R)}),E}function y(O){var L=O;return L=a?a+"_"+L:L,S(L)}function S(O){try{var L=l(r,O);if(L){var E=Rr().parse(L);if(ke(E)&&(E=Rr().parse(E)),E&&we(E))return E}}catch(I){ae(r,1,42," storage key: "+O+", "+At(I),{exception:pe(I)})}return[]}function P(O,L){var E=O;try{E=a?a+"_"+E:E;var I=JSON[ju](L);u(r,E,I)}catch(R){u(r,E,JSON[ju]([])),ae(r,2,41," storage key: "+E+", "+At(R)+". Buffer cleared",{exception:pe(R)})}}function D(){var O=[];try{return J(Kpe,function(L){var E=A(L);if(O=O[Gu](E),a){var I=a+"_"+L,R=A(I);O=O[Gu](R)}}),O}catch(L){ae(r,2,41,"Transfer events from previous buffers: "+At(L)+". previous Buffer items can not be removed",{exception:pe(L)})}return[]}function A(O){try{var L=S(O),E=[];return J(L,function(I){var R={item:I,cnt:0};E[es](R)}),kI(r,O),E}catch{}return[]}}),i}var n;return n=e,e.VERSION="_1",e.BUFFER_KEY="AI_buffer"+n.VERSION,e.SENT_BUFFER_KEY="AI_sentBuffer"+n.VERSION,e.MAX_BUFFER_SIZE=2e3,e}(u5)});var d5,m5=Z(()=>{pr();wt();Ku();d5=function(){function t(e){Xe(t,this,function(n){n.serialize=function(s){var a=r(s,"root");try{return Rr()[ju](a)}catch(c){ae(e,1,48,c&&Re(c[zc])?c[zc]():"Error serializing object",null,!0)}};function r(s,a){var c="__aiCircularRefCheck",l={};if(!s)return ae(e,1,48,"cannot serialize object because it is null or undefined",{name:a},!0),l;if(s[c])return ae(e,2,50,"Circular reference detected while serializing object",{name:a},!0),l;if(!s.aiDataContract){if(a==="measurements")l=i(s,"number",a);else if(a==="properties")l=i(s,"string",a);else if(a==="tags")l=i(s,"string",a);else if(we(s))l=o(s,a);else{ae(e,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:a},!0);try{Rr()[ju](s),l=s}catch(u){ae(e,1,48,u&&Re(u[zc])?u[zc]():"Error serializing object",null,!0)}}return l}return s[c]=!0,_e(s.aiDataContract,function(u,f){var m=Re(f)?f()&1:f&1,d=Re(f)?f()&4:f&4,p=f&2,h=s[u]!==void 0,g=Qt(s[u])&&s[u]!==null;if(m&&!h&&!p)ae(e,1,24,"Missing required field specification. The field is required but not present on source",{field:u,name:a});else if(!d){var v=void 0;g?p?v=o(s[u],u):v=r(s[u],u):v=s[u],v!==void 0&&(l[u]=v)}}),delete s[c],l}function o(s,a){var c;if(s)if(!we(s))ae(e,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:a},!0);else{c=[];for(var l=0;l<s[qe];l++){var u=s[l],f=r(u,a+"["+l+"]");c[es](f)}}return c}function i(s,a,c){var l;return s&&(l={},_e(s,function(u,f){if(a==="string")f===void 0?l[u]="undefined":f===null?l[u]="null":f[zc]?l[u]=f[zc]():l[u]="invalid field: toString() is not defined.";else if(a==="number")if(f===void 0)l[u]="undefined";else if(f===null)l[u]="null";else{var m=parseFloat(f);l[u]=m}else l[u]="invalid field: "+c+" is of unknown type.",ae(e,1,l[u],null,!0)})),l}})}return t.__ieDyn=1,t}()});var Xpe,p5,h5=Z(()=>{Ku();Xpe=8,p5=function(){function t(){}return t.prototype.getHashCodeScore=function(e){var n=this.getHashCode(e)/t.INT_MAX_VALUE;return n*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e[qe]<Xpe;)e=e[Gu](e);for(var n=5381,r=0;r<e[qe];++r)n=(n<<5)+n+e.charCodeAt(r),n=n&n;return Math.abs(n)},t.INT_MAX_VALUE=2147483647,t}()});var g5,v5=Z(()=>{Gc();Ku();h5();g5=function(){function t(){var e=this,n=new p5,r=new Xh;e.getSamplingScore=function(o){var i=0;return o[$n]&&o[$n][r.userId]?i=n.getHashCodeScore(o[$n][r.userId]):o.ext&&o.ext.user&&o.ext.user.id?i=n[t5](o.ext.user.id):o[$n]&&o[$n][r.operationId]?i=n.getHashCodeScore(o[$n][r.operationId]):o.ext&&o.ext.telemetryTrace&&o.ext.telemetryTrace[om]?i=n.getHashCodeScore(o.ext.telemetryTrace[om]):i=Math.random()*100,i}}return t}()});var w5,y5=Z(()=>{Gc();wt();Ku();v5();w5=function(){function t(e,n){this.INT_MAX_VALUE=2147483647;var r=n||Is(null);(e>100||e<0)&&(r.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this[og]=e,this.samplingScoreGenerator=new g5}return t.prototype.isSampledIn=function(e){var n=this[og],r=!1;return n==null||n>=100||e.baseType===Na[Qi]?!0:(r=this.samplingScoreGenerator.getSamplingScore(e)<n,r)},t}()});function E5(t){try{return t.responseText}catch{}return null}function Zpe(t){return t&&t.sendPOST}function Qpe(t){return!isNaN(t)&&t>0&&t<=100}var Mt,Zc,Aa,C5,Jpe,S5,ehe,nC,_5=Z(()=>{Bo();pr();Gc();wt();Le();l5();f5();m5();y5();Ku();Aa=void 0,C5="",Jpe=65e3;S5=Cs((Mt={endpointUrl:yh(ws,Pu+Rs)},Mt[Zy]=Ki(),Mt.maxBatchInterval=15e3,Mt[_F]=102400,Mt.disableTelemetry=Ki(),Mt[DF]=Ki(!0),Mt.isRetryDisabled=Ki(),Mt[VI]=Ki(!0),Mt[PF]=Ki(!0),Mt.disableXhr=Ki(),Mt[IF]=Ki(),Mt[jI]=Ki(),Mt[rg]=Aa,Mt.namePrefix=Aa,Mt.samplingPercentage=yh(Qpe,100),Mt[WI]=Aa,Mt.convertUndefined=Aa,Mt.eventsLimitInMem=1e4,Mt[Qy]=!1,Mt.httpXHROverride={isVal:Zpe,v:Aa},Mt[xF]=Ki(),Mt.transports=Aa,Mt.retryCodes=Aa,Mt.maxRetryCnt={isVal:Ir,v:10},Mt));ehe=(Zc={},Zc[Ra.dataType]=TF,Zc[Mu.dataType]=c5,Zc[Ou.dataType]=s5,Zc[$u.dataType]=a5,Zc[Fu.dataType]=o5,Zc[Na.dataType]=i5,Zc[Uu.dataType]=r5,Zc),nC=function(t){Ho(e,t);function e(){var n=t.call(this)||this;n.priority=1001,n.identifier=CF;var r,o,i,s,a,c,l,u,f=0,m,d,p,h,g,v,C,w,y,S,P,D,A,O,L,E,I,R,_,x,b,N,k,$,H,G,q;return Xe(e,n,function(V,ce){ye(),V.pause=function(){ee(),s=!0},V.resume=function(){s&&(s=!1,o=null,rt(),B())},V.flush=function(T,F,W){if(T===void 0&&(T=!0),!s){ee();try{return V[eg](T,null,W||1)}catch(z){ae(V[Ar](),1,22,"flush failed, telemetry will not be collected: "+At(z),{exception:pe(z)})}}},V.onunloadFlush=function(){if(!s)if(C||x)try{return V[eg](!0,Wn,2)}catch(T){ae(V[Ar](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+At(T),{exception:pe(T)})}else V.flush(!1)},V.addHeader=function(T,F){u[T]=F},V[BI]=function(T,F,W,z){V.isInitialized()&&ae(V[Ar](),1,28,"Sender is already initialized"),ce[BI](T,F,W,z);var X=V.identifier;c=new d5(F.logger),r=0,o=null,i=0,V[tg]=null,l=0;var re=V[Ar]();p=Si(Nr("Sender"),F.evtNamespace&&F.evtNamespace()),d=MI(p),V._addHook(Un(T,function(ue){var Me=ue.cfg;Me.storagePrefix&&PI(Me.storagePrefix);var Je=Co(null,Me,F),Ne=Je.getExtCfg(X,S5),_o=Ne[ng];if(h&&_o===h){var Ga=Me[ng];Ga&&Ga!==_o&&(Ne[ng]=Ga)}mo(Ne[rg])&&(Ne[rg]=Me[rg]),vt(V,"_senderConfig",{g:function(){return Ne}}),g!==Ne[ng]&&(h=g=Ne[ng]),F.activeStatus()===pi.PENDING?V.pause():F.activeStatus()===pi.ACTIVE&&V.resume(),S&&S!==Ne[WI]&&J(S,function(Cr){delete u[Cr.header]}),v=Ne[_F],C=(Ne[jI]===!1||Ne[VI]===!1)&&Go(),w=Ne[jI]===!1&&Go(),y=Ne[VI]===!1&&Go(),x=Ne[xF],b=!!Ne.disableXhr,q=Ne.retryCodes;var xo=Ne[Qy],As=!!Ne[DF]&&(!!xo||em()),kC=Ne.namePrefix,R7=As!==E||As&&R!==kC||As&&I!==xo;if(V[Ns]){if(R7)try{V[Ns]=V[Ns].createNew(re,Ne,As)}catch(Cr){ae(V[Ar](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+At(Cr),{exception:pe(Cr)})}rt()}else V[Ns]=As?new RF(re,Ne):new KI(re,Ne);R=kC,E=As,I=xo,N=!Ne[IF]&&Fc(!0),H=!!Ne[PF],V._sample=new w5(Ne.samplingPercentage,re),D=Ne[rg],!mo(D)&&!Ge(D,Me)&&ae(re,1,100,"Invalid Instrumentation key "+D),S=Ne[WI],ke(h)&&!zy(h)&&S&&S[qe]>0?J(S,function(Cr){n.addHeader(Cr.header,Cr.value)}):S=null,_=Ne.enableSendPromise;var u1=st();G?G.SetConfig(u1):(G=new Od,G[BI](u1,re));var LC=Ne.httpXHROverride,AC=null,Og=null,N7=Lc([3,1,2],Ne.transports);AC=G&&G[eC](N7,!1);var oP=G&&G.getFallbackInst();k=function(Cr,ff){return le(oP,Cr,ff)},$=function(Cr,ff){return le(oP,Cr,ff,!1)},AC=x?LC:AC||LC||oP,V[tg]=function(Cr,ff){return le(AC,Cr,ff)},N&&(m=Ii);var iP=Lc([3,1],Ne.unloadTransports);N||(iP=iP.filter(function(Cr){return Cr!==2})),Og=G&&G[eC](iP,!0),Og=x?LC:Og||LC,(x||Ne.unloadTransports||!m)&&Og&&(m=function(Cr,ff){return le(Og,Cr,ff)}),m||(m=k),P=Ne.disableTelemetry,A=Ne.convertUndefined||Aa,O=Ne.isRetryDisabled,L=Ne.maxBatchInterval}))},V.processTelemetry=function(T,F){F=V._getTelCtx(F);var W=F[Ar]();try{var z=ht(T,W);if(!z)return;var X=nt(T,W);if(!X)return;var re=c.serialize(X),ue=V[Ns];rt(re);var Me={item:re,cnt:0};ue[Kc](Me),B()}catch(Je){ae(W,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+At(Je),{exception:pe(Je)})}V.processNext(T,F)},V.isCompletelyIdle=function(){return!s&&f===0&&V._buffer[Xc]()===0},V.getOfflineListener=function(){return d},V._xhrReadyStateChange=function(T,F,W){if(!Mr(F))return Rt(T,F,W)},V[eg]=function(T,F,W){T===void 0&&(T=!0);var z;if(!s)try{var X=V[Ns];if(P)X[qu]();else{if(X[Xc]()>0){var re=X.getItems();Te(W||0,T),F?z=F.call(V,re,T):z=V[tg](re,T)}i=+new Date}ee()}catch(Me){var ue=Xw();(!ue||ue>9)&&ae(V[Ar](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+At(Me),{exception:pe(Me)})}return z},V.getOfflineSupport=function(){return{getUrl:function(){return h},createPayload:j,serialize:Pt,batch:Ct,shouldProcess:function(T){return!!ht(T)}}},V._doTeardown=function(T,F){V.onunloadFlush(),Uc(d,!1),ye()},V[zu]=function(T,F,W){if(!Mr(T))return no(T,F,W)},V[YI]=function(T,F){if(!Mr(T))return bn(T,F)},V[tC]=function(T,F){if(!Mr(T))return wn(T,F)},V._xdrOnLoad=function(T,F){if(!Mr(F))return Ue(T,F)};function Ue(T,F){var W=E5(T);if(T&&(W+""=="200"||W===""))r=0,V[tC](F,0);else{var z=Fd(W);z&&z[qI]&&z[qI]>z[GI]&&!O?V[YI](F,z):V[zu](F,Pd(T))}}function st(){try{var T={xdrOnComplete:function(W,z,X){var re=Kt(X);if(re)return Ue(W,re)},fetchOnComplete:function(W,z,X,re){var ue=Kt(re);if(ue)return gt(W.status,ue,W.url,ue[qe],W.statusText,X||"")},xhrOnComplete:function(W,z,X){var re=Kt(X);if(re)return Rt(W,re,re[qe])},beaconOnRetry:function(W,z,X){return Ur(W,z,X)}},F={enableSendPromise:_,isOneDs:!1,disableCredentials:!1,disableXhr:b,disableBeacon:!y,disableBeaconSync:!w,senderOnCompleteCallBack:T};return F}catch{}return null}function Rt(T,F,W){T.readyState===4&&gt(T.status,F,T.responseURL,W,kc(T),E5(T)||T.response)}function no(T,F,W){ae(V[Ar](),2,26,"Failed to send telemetry.",{message:F}),V._buffer&&V._buffer[im](T)}function bn(T,F){for(var W=[],z=[],X=F.errors.reverse(),re=0,ue=X;re<ue.length;re++){var Me=ue[re],Je=T.splice(Me.index,1)[0];se(Me.statusCode)?z[es](Je):W[es](Je)}T[qe]>0&&V[tC](T,F[GI]),W[qe]>0&&V[zu](W,kc(null,["partial success",F[GI],"of",F.itemsReceived].join(" "))),z[qe]>0&&(tr(z),ae(V[Ar](),2,40,"Partial success. Delivered: "+T[qe]+", Failed: "+W[qe]+". Will retry to send "+z[qe]+" our of "+F[qI]+" items"))}function wn(T,F){V._buffer&&V._buffer[im](T)}function Kt(T){try{if(T){var F=T,W=F.oriPayload;return W&&W[qe]?W:null}}catch{}return null}function ht(T,F){if(P)return!1;if(!T)return F&&ae(F,1,7,"Cannot send empty telemetry"),!1;if(T.baseData&&!T[zI])return F&&ae(F,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(T[zI]||(T[zI]="EventData"),!V[tg])return F&&ae(F,1,28,"Sender was not initialized"),!1;if(ie(T))T[$h]=V._sample[og];else return F&&ae(F,2,33,"Telemetry item was sampled out and not sent",{SampleRate:V._sample[og]}),!1;return!0}function nt(T,F){var W=T.iKey||D,z=e.constructEnvelope(T,W,F,A);if(!z){ae(F,1,47,"Unable to create an AppInsights envelope");return}var X=!1;if(T[$n]&&T[$n][Hh]&&(J(T[$n][Hh],function(re){try{re&&re(z)===!1&&(X=!0,yo(F,"Telemetry processor check returns false"))}catch(ue){ae(F,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+At(ue),{exception:pe(ue)},!0)}}),delete T[$n][Hh]),!X)return z}function Pt(T){var F=C5,W=V[Ar]();try{var z=ht(T,W),X=null;z&&(X=nt(T,W)),X&&(F=c.serialize(X))}catch{}return F}function Ct(T){var F=C5;return T&&T[qe]&&(F="["+T.join(",")+"]"),F}function j(T){var F=Qe();return{urlString:h,data:T,headers:F}}function ie(T){return V._sample.isSampledIn(T)}function xe(T,F,W,z){F===200&&T?V._onSuccess(T,T[qe]):z&&V[zu](T,z)}function le(T,F,W,z){z===void 0&&(z=!0);var X=function(Me,Je,Ne){return xe(F,Me,Je,Ne)},re=Ie(F),ue=T&&T.sendPOST;return ue&&re?(z&&V._buffer[Jh](F),ue(re,X,!W)):null}function Ie(T){if(we(T)&&T[qe]>0){var F=V[Ns].batchPayloads(T),W=Qe(),z={data:F,urlString:h,headers:W,disableXhrSync:b,disableFetchKeepAlive:!N,oriPayload:T};return z}return null}function Qe(){try{var T=u||{};return zy(h)&&(T[qd[6]]=qd[7]),T}catch{}return null}function rt(T){var F=T?T[qe]:0;return V[Ns].size()+F>v?((!d||d.isOnline())&&V[eg](!0,null,10),!0):!1}function gt(T,F,W,z,X,re){var ue=null;if(V._appId||(ue=Fd(re),ue&&ue.appId&&(V._appId=ue.appId)),(T<200||T>=300)&&T!==0){if((T===301||T===307||T===308)&&!yn(W)){V[zu](F,X);return}if(d&&!d.isOnline()){if(!O){var Me=10;tr(F,Me),ae(V[Ar](),2,40,". Offline - Response Code: ".concat(T,". Offline status: ").concat(!d.isOnline(),". Will retry to send ").concat(F.length," items."))}return}!O&&se(T)?(tr(F),ae(V[Ar](),2,40,". Response code "+T+". Will retry to send "+F[qe]+" items.")):V[zu](F,X)}else yn(W),T===206?(ue||(ue=Fd(re)),ue&&!O?V[YI](F,ue):V[zu](F,X)):(r=0,V[tC](F,z))}function yn(T){return l>=10?!1:!ne(T)&&T!==""&&T!==h?(h=T,++l,!0):!1}function Wn(T,F){if(m)m(T,!1);else{var W=G&&G[eC]([3],!0);return le(W,T,F)}}function Ur(T,F,W){var z=T,X=z&&z.oriPayload;if(H)$&&$(X,!0),ae(V[Ar](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var re=[],ue=0;ue<X[qe];ue++){var Me=X[ue],Je=[Me],Ne=Ie(Je);W(Ne,F)?V._onSuccess(Je,Je[qe]):re[es](Me)}re[qe]>0&&($&&$(re,!0),ae(V[Ar](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}function Mr(T){try{if(T&&T[qe])return ke(T[0])}catch{}return null}function Ii(T,F){var W=null;if(we(T)){for(var z=T[qe],X=0;X<T[qe];X++)z+=T[X].item[qe];var re=G.getSyncFetchPayload();re+z<=Jpe?W=2:Go()?W=3:(W=1,ae(V[Ar](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var ue=G&&G[eC]([W],!0);return le(ue,T,F)}return null}function tr(T,F){if(F===void 0&&(F=1),!(!T||T[qe]===0)){var W=V[Ns];W[im](T),r++;for(var z=0,X=T;z<X.length;z++){var re=X[z];re.cnt=re.cnt||0,re.cnt++,W[Kc](re)}qa(F),B()}}function qa(T){var F=10,W;if(r<=1)W=F;else{var z=(Math.pow(2,r)-1)/2,X=go(Math.random()*z*F)+1;X=T*X,W=oa(ra(X,3600),F)}var re=dn()+W*1e3;o=re}function B(){if(!a&&!s){var T=o?oa(0,o-dn()):0,F=oa(L,T);a=mi(function(){a=null,V[eg](!0,null,1)},F)}}function ee(){a&&a.cancel(),a=null,o=null}function se(T){return ne(q)?T===401||T===408||T===429||T===500||T===502||T===503||T===504:q[qe]&&q.indexOf(T)>-1}function ve(){var T="getNotifyMgr";return V.core[T]?V.core[T]():V.core._notificationManager}function Te(T,F){var W=ve();if(W&&W.eventsSendRequest)try{W.eventsSendRequest(T,F)}catch(z){ae(V[Ar](),1,74,"send request notification failed: "+At(z),{exception:pe(z)})}}function Ge(T,F){var W=F.disableInstrumentationKeyValidation,z=ne(W)?!1:W;if(z)return!0;var X="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",re=new RegExp(X);return re.test(T)}function ye(){V[tg]=null,V[Ns]=null,V._appId=null,V._sample=null,u={},d=null,r=0,o=null,i=null,s=!1,a=null,c=null,l=0,f=0,m=null,p=null,h=null,g=null,v=0,C=!1,S=null,P=!1,D=null,A=Aa,O=!1,E=null,R=Aa,b=!1,N=!1,H=!1,k=null,$=null,G=null,vt(V,"_senderConfig",{g:function(){return eD({},S5)}})}}),n}return e.constructEnvelope=function(n,r,o,i){var s;r!==n.iKey&&!ne(r)?s=ji(ji({},n),{iKey:r}):s=n;var a=ehe[s.baseType]||TF;return a(o,s,i)},e}(Bc)});var NF=Z(()=>{_5()});var lm,rC,ig,sg,x5=Z(()=>{lm="instrumentationKey",rC="connectionString",ig="endpointUrl",sg="userOverrideEndpointUrl"});var D5={};Ug(D5,{AppInsightsCore:()=>Wc,ApplicationInsights:()=>rhe,Sender:()=>nC,SeverityLevel:()=>OI,arrForEach:()=>J,isNullOrUndefined:()=>ne,proxyFunctions:()=>Ei,throwError:()=>un});function nhe(t){return t&&t>0}var ag,kF,the,rhe,I5=Z(()=>{pr();NF();Gc();wt();Sd();Le();x5();wt();Gc();NF();kF=void 0,the=(ag={diagnosticLogInterval:yh(nhe,1e4)},ag[rC]=kF,ag.endpointUrl=kF,ag[lm]=kF,ag.extensionConfig={},ag);rhe=function(){function t(e){var n=new Wc,r;(ne(e)||ne(e[lm])&&ne(e[rC]))&&un("Invalid input configuration"),Xe(t,this,function(i){vt(i,"config",{g:function(){return r}}),s(),i.initialize=s,i.track=o,Ei(i,n,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function s(){var a=jt(e||{},the);r=a.cfg,n.addUnloadHook(Un(a,function(){var c=r[rC];if(mo(c)){var l=Vw(function(d,p){wi(c,function(h){var g=h.value,v=r[lm];if(!h.rejected&&g){r[rC]=g;var C=tm(g);v=C.instrumentationkey||v}d(v)})}),u=Vw(function(d,p){wi(c,function(h){var g=h.value,v=r[ig];if(!h.rejected&&g){var C=tm(g),w=C.ingestionendpoint;v=w?w+Rs:v}d(v)})});r[lm]=l,r[ig]=r[sg]||u}if(ke(c)){var f=tm(c),m=f.ingestionendpoint;r[ig]=r[sg]?r[sg]:m+Rs,r[lm]=f.instrumentationkey||r[lm]}r[ig]=r[sg]?r[sg]:r[ig]})),n.initialize(r,[new nC])}});function o(i){i&&(i.baseData=i.baseData||{},i.baseType=i.baseType||"EventData"),n.track(i)}}return t.__ieDyn=1,t}()});var P5=M(Fa=>{"use strict";var ohe=Fa&&Fa.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ihe=Fa&&Fa.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),she=Fa&&Fa.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ohe(e,t,n);return ihe(e,t),e};Object.defineProperty(Fa,"__esModule",{value:!0});Fa.appInsightsClientFactory=void 0;var ahe=(Gc(),Mg(QK)),che=SF(),lhe=async(t,e,n,r,o)=>{let i;try{let a=await Promise.resolve().then(()=>she((I5(),Mg(D5)))),c={};if(r){let f={alwaysUseXhrOverride:!0,httpXHROverride:r};c[ahe.BreezeChannelIdentifier]=f}let l;t.startsWith("InstrumentationKey=")||(l=t);let u=l?{instrumentationKey:l}:{connectionString:t};i=new a.ApplicationInsights({...u,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,extensionConfig:c})}catch(a){return Promise.reject(a)}return{logEvent:(a,c)=>{let l={...c==null?void 0:c.properties,...c==null?void 0:c.measurements};o!=null&&o.length&&che.TelemetryUtil.applyReplacements(l,o),i==null||i.track({name:a,data:l,baseType:"EventData",ext:{user:{id:e,authId:e},app:{sesId:n}},baseData:{name:a,properties:c==null?void 0:c.properties,measurements:c==null?void 0:c.measurements}})},flush:async()=>{i==null||i.flush(!1)},dispose:async()=>new Promise(c=>{i==null||i.unload(!0,()=>{c(),i=void 0},1e3)})}};Fa.appInsightsClientFactory=lhe});var b5=M(XI=>{"use strict";Object.defineProperty(XI,"__esModule",{value:!0});XI.BaseTelemetryReporter=void 0;var LF=class{constructor(e,n,r){this.telemetrySender=e,this.vscodeAPI=n,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this._onDidChangeTelemetryLevel=new this.vscodeAPI.EventEmitter,this.onDidChangeTelemetryLevel=this._onDidChangeTelemetryLevel.event,this.telemetryLogger=this.vscodeAPI.env.createTelemetryLogger(this.telemetrySender,r),this.updateUserOptIn(),this.telemetryLogger.onDidChangeEnableStates(()=>{this.updateUserOptIn()})}updateUserOptIn(){this.errorOptIn=this.telemetryLogger.isErrorsEnabled,this.userOptIn=this.telemetryLogger.isUsageEnabled,(this.telemetryLogger.isErrorsEnabled||this.telemetryLogger.isUsageEnabled)&&this.telemetrySender.instantiateSender(),this._onDidChangeTelemetryLevel.fire(this.telemetryLevel)}get telemetryLevel(){return this.errorOptIn&&this.userOptIn?"all":this.errorOptIn?"error":"off"}internalSendTelemetryEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logUsage(e,{properties:n,measurements:r})}sendTelemetryEvent(e,n,r){this.internalSendTelemetryEvent(e,n,r,!1)}sendRawTelemetryEvent(e,n,r){let o={...n};for(let i of Object.keys(o??{})){let s=o[i];typeof i=="string"&&s!==void 0&&(o[i]=new this.vscodeAPI.TelemetryTrustedValue(typeof s=="string"?s:s.value))}this.sendTelemetryEvent(e,o,r)}sendDangerousTelemetryEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryEvent(e,n,r,!0)}internalSendTelemetryErrorEvent(e,n,r,o){o?this.telemetrySender.sendEventData(e,{properties:n,measurements:r}):this.telemetryLogger.logError(e,{properties:n,measurements:r})}sendTelemetryErrorEvent(e,n,r){this.internalSendTelemetryErrorEvent(e,n,r,!1)}sendDangerousTelemetryErrorEvent(e,n,r){this.telemetrySender.instantiateSender(),this.internalSendTelemetryErrorEvent(e,n,r,!0)}async dispose(){return await this.telemetrySender.dispose(),this.telemetryLogger.dispose(),Promise.all(this.disposables.map(e=>e.dispose()))}};XI.BaseTelemetryReporter=LF});var T5=M(JI=>{"use strict";Object.defineProperty(JI,"__esModule",{value:!0});JI.BaseTelemetrySender=void 0;var Qc;(function(t){t[t.NOT_INSTANTIATED=0]="NOT_INSTANTIATED",t[t.INSTANTIATING=1]="INSTANTIATING",t[t.INSTANTIATED=2]="INSTANTIATED"})(Qc||(Qc={}));var AF=class{constructor(e,n){this._instantiationStatus=Qc.NOT_INSTANTIATED,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=n,this._key=e}sendEventData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Qc.INSTANTIATED&&this._eventQueue.push({eventName:e,data:n});return}this._telemetryClient.logEvent(e,n)}sendErrorData(e,n){if(!this._telemetryClient){this._instantiationStatus!==Qc.INSTANTIATED&&this._exceptionQueue.push({exception:e,data:n});return}let r={stack:e.stack,message:e.message,name:e.name};if(n){let o=n.properties||n;n.properties={...o,...r}}else n={properties:r};this._telemetryClient.logEvent("unhandlederror",n)}async flush(){var e;return(e=this._telemetryClient)==null?void 0:e.flush()}async dispose(){this._telemetryClient&&(await this._telemetryClient.dispose(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:e,data:n})=>this.sendEventData(e,n)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:e,data:n})=>this.sendErrorData(e,n)),this._exceptionQueue=[]}instantiateSender(){this._instantiationStatus===Qc.NOT_INSTANTIATED&&(this._instantiationStatus=Qc.INSTANTIATING,this._clientFactory(this._key).then(e=>{this._telemetryClient=e,this._instantiationStatus=Qc.INSTANTIATED,this._flushQueues()}).catch(e=>{console.error(e),this._instantiationStatus=Qc.INSTANTIATED}))}};JI.BaseTelemetrySender=AF});var k5=M(el=>{"use strict";var uhe=el&&el.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),fhe=el&&el.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),UF=el&&el.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&uhe(e,t,n);return fhe(e,t),e};Object.defineProperty(el,"__esModule",{value:!0});var dhe=UF(require("https")),FF=UF(require("os")),ZI=UF(require("vscode")),mhe=V6(),phe=P5(),hhe=b5(),ghe=T5(),R5=SF();function N5(){return{sendPOST:(e,n)=>{let r={method:"POST",headers:{...e.headers,"Content-Type":"application/json","Content-Length":Buffer.byteLength(e.data)}};try{let o=dhe.request(e.urlString,r,i=>{i.on("data",function(s){n(i.statusCode??200,i.headers,s.toString())}),i.on("error",function(){n(0,{})})});o.write(e.data,i=>{i&&n(0,{})}),o.end()}catch{n(0,{})}}}}var OF=class extends hhe.BaseTelemetryReporter{constructor(e,n){let r=s=>(0,phe.appInsightsClientFactory)(s,ZI.env.machineId,ZI.env.sessionId,N5(),n);R5.TelemetryUtil.shouldUseOneDataSystemSDK(e)&&(r=s=>(0,mhe.oneDataSystemClientFactory)(s,ZI,N5()));let o={release:FF.release(),platform:FF.platform(),architecture:FF.arch()},i=new ghe.BaseTelemetrySender(e,r);if(e&&e.indexOf("AIF-")===0)throw new Error("AIF keys are no longer supported. Please switch to 1DS keys for 1st party extensions");super(i,ZI,{additionalCommonProperties:R5.TelemetryUtil.getAdditionalCommonProperties(o)})}};el.default=OF});var $F=M(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.TargetPopulation=Ju.Filters=Ju.VSCodeFilterProvider=void 0;var QI=require("vscode"),MF=class t{constructor(e,n,r){this.extensionName=e,this.extensionVersion=n,this.targetPopulation=r}static trimVersionSuffix(e){let n=/\-[a-zA-Z0-9]+$/;return e.split(n)[0]}getFilterValue(e){switch(e){case Oa.ApplicationVersion:return t.trimVersionSuffix(QI.version);case Oa.Build:return QI.env.appName;case Oa.ClientId:return QI.env.machineId;case Oa.ExtensionName:return this.extensionName;case Oa.ExtensionVersion:return t.trimVersionSuffix(this.extensionVersion);case Oa.Language:return QI.env.language;case Oa.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,n=Object.values(Oa);for(let r of n)e.set(r,this.getFilterValue(r));return e}};Ju.VSCodeFilterProvider=MF;var Oa;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Oa||(Ju.Filters=Oa={}));var L5;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(L5||(Ju.TargetPopulation=L5={}))});var A5=M(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});e0.BaseFeatureProvider=void 0;var HF=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};e0.BaseFeatureProvider=HF});var F5=M(t0=>{"use strict";Object.defineProperty(t0,"__esModule",{value:!0});t0.FilteredFeatureProvider=void 0;var vhe=A5(),BF=class extends vhe.BaseFeatureProvider{constructor(e,n){super(e),this.telemetry=e,this.filterProviders=n,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let n of this.filterProviders){let r=n.getFilters();for(let o of r.keys()){let i=r.get(o);e.set(o,i)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let n=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",n]])),this.cachedTelemetryEvents.push(e)}};t0.FilteredFeatureProvider=BF});var O5=M(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.TasApiFeatureProvider=Zu.TASAPI_FETCHERROR_EVENTNAME=void 0;var whe=F5();Zu.TASAPI_FETCHERROR_EVENTNAME="call-tas-error";var WF="ErrorType",jF=class extends whe.FilteredFeatureProvider{constructor(e,n,r){super(n,r),this.httpClient=e,this.telemetry=n,this.filterProviders=r}async fetch(){let e=this.getFilters(),n={};for(let a of e.keys()){let c=e.get(a);n[a]=c}let r;try{r=await this.httpClient.get({headers:n})}catch(a){let c=a,l=new Map;c.responseReceived&&!c.responseOk?l.set(WF,"ServerError"):c.responseReceived===!1?l.set(WF,"NoResponse"):l.set(WF,"GenericError"),this.telemetry.postEvent(Zu.TASAPI_FETCHERROR_EVENTNAME,l)}if(!r)throw Error(Zu.TASAPI_FETCHERROR_EVENTNAME);e.keys.length>0&&this.PostEventToTelemetry(n);let o=r.data,i=o.Configs,s=[];for(let a of i)if(a.Parameters)for(let c of Object.keys(a.Parameters)){let l=c+(a.Parameters[c]?"":"cf");s.includes(l)||s.push(l)}return{features:s,assignmentContext:o.AssignmentContext,configs:i}}};Zu.TasApiFeatureProvider=jF});var U5=M(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});lg.HttpClient=lg.FetchError=void 0;var cg=class extends Error{constructor(e,n,r){super(e),this.responseReceived=n,this.responseOk=r}};lg.FetchError=cg;var VF=class{constructor(e){this.endpoint=e}async get(e){let n=await fetch(this.endpoint,{method:"GET",headers:e==null?void 0:e.headers});if(!n)throw new cg("No response received",!1);if(!n.ok)throw new cg("Response not ok",!0,!1);let r=await n.json();if(!r)throw new cg("No data received",!1);return{data:r}}};lg.HttpClient=VF});var M5=M(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});n0.MemoryKeyValueStorage=void 0;var YF=class{constructor(){this.storage=new Map}async getValue(e,n){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(n||void 0)}setValue(e,n){this.storage.set(e,n)}};n0.MemoryKeyValueStorage=YF});var $5=M(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});r0.ExperimentationServiceBase=void 0;var yhe=M5(),qF=class{get features(){return this._features}set features(e){this._features=e,this.telemetry&&this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext)}constructor(e,n,r,o,i){this.telemetry=e,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=r,this.storageKey=o,this.storage=i,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(i=new yhe.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((s,a)=>{this.resolveInitialFetchPromise=s})}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch{}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});try{this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));let n=await this.fetchPromise;this.updateFeatures(n,e)}catch{}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,n=!1){let r={features:[],assignmentContext:"",configs:[]};for(let o of e){for(let i of o.features)r.features.includes(i)||r.features.push(i);for(let i of o.configs){let s=r.configs.find(a=>a.Id===i.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),i.Parameters):r.configs.push(i)}r.assignmentContext+=o.assignmentContext}(n||!this.featuresConsumed)&&(this.features=r),this.storage&&this.storage.setValue(this.storageKey,r)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let n=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),n.features.includes(e)}getTreatmentVariable(e,n){this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${n}`);let r=this.features.configs.find(o=>o.Id===e);return r==null?void 0:r.Parameters[n]}async getTreatmentVariableAsync(e,n,r){if(r){let o=this.featuresConsumed,i=this.getTreatmentVariable(e,n);if(i===void 0)this.featuresConsumed=o;else return i}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,n)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let n of e)this.featureProviders.push(n)}};r0.ExperimentationServiceBase=qF});var H5=M(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});o0.PollingService=void 0;var GF=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};o0.PollingService=GF});var B5=M(i0=>{"use strict";Object.defineProperty(i0,"__esModule",{value:!0});i0.ExperimentationServiceAutoPolling=void 0;var Che=$5(),Ehe=H5(),zF=class extends Che.ExperimentationServiceBase{constructor(e,n,r,o,i,s,a){if(super(e,o,i,s,a),this.telemetry=e,this.filterProviders=n,this.refreshRateMs=r,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=i,this.storageKey=s,this.storage=a,r<1e3&&r!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");r>0&&(this.pollingService=new Ehe.PollingService(r),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let n=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),n}else return await super.getFeaturesAsync(e)}};i0.ExperimentationServiceAutoPolling=zF});var W5=M(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0});a0.ExperimentationService=void 0;var She=O5(),_he=U5(),xhe=B5(),s0=class extends xhe.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage),this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new She.TasApiFeatureProvider(new _he.HttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};a0.ExperimentationService=s0;s0.REFRESH_RATE_IN_MINUTES=30});var j5=M(c0=>{"use strict";Object.defineProperty(c0,"__esModule",{value:!0});c0.ExperimentationService=void 0;var Dhe=W5();Object.defineProperty(c0,"ExperimentationService",{enumerable:!0,get:function(){return Dhe.ExperimentationService}})});var V5=M(l0=>{"use strict";Object.defineProperty(l0,"__esModule",{value:!0});l0.MementoKeyValueStorage=void 0;var KF=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,n){return await this.mementoGlobalStorage.get(e)||n}setValue(e,n){this.mementoGlobalStorage.update(e,n)}};l0.MementoKeyValueStorage=KF});var Y5=M(JF=>{"use strict";Object.defineProperty(JF,"__esModule",{value:!0});var XF=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,n){}getTreatmentVariableAsync(e,n){return Promise.resolve(void 0)}};JF.default=XF});var G5=M(ug=>{"use strict";Object.defineProperty(ug,"__esModule",{value:!0});ug.getExperimentationServiceAsync=ug.getExperimentationService=void 0;var Ihe=$F(),Phe=j5(),ZF=require("vscode"),bhe=V5(),The=Y5(),Rhe="https://default.exp-tas.com/vscode/ab",Nhe="query-expfeature",khe="abexp.assignmentcontext",Lhe="VSCode.ABExp.FeatureData",Ahe=1e3*60*30;function q5(t,e,n,r,o,...i){if(!o)throw new Error("Memento storage was not provided.");let s=ZF.workspace.getConfiguration("telemetry");if(!(ZF.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):ZF.env.isTelemetryEnabled))return new The.default;let l=[new Ihe.VSCodeFilterProvider(t,e,n),...i],u=new bhe.MementoKeyValueStorage(o);return new Phe.ExperimentationService({filterProviders:l,telemetry:r,storageKey:Lhe,keyValueStorage:u,featuresTelemetryPropertyName:"",assignmentContextTelemetryPropertyName:khe,telemetryEventName:Nhe,endpoint:Rhe,refetchInterval:Ahe})}ug.getExperimentationService=q5;async function Fhe(t,e,n,r,o,...i){let s=q5(t,e,n,r,o,...i);return await s.initializePromise,s}ug.getExperimentationServiceAsync=Fhe});var K5=M(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.TargetPopulation=Qu.getExperimentationServiceAsync=Qu.getExperimentationService=void 0;var z5=G5();Object.defineProperty(Qu,"getExperimentationService",{enumerable:!0,get:function(){return z5.getExperimentationService}});Object.defineProperty(Qu,"getExperimentationServiceAsync",{enumerable:!0,get:function(){return z5.getExperimentationServiceAsync}});var Ohe=$F();Object.defineProperty(Qu,"TargetPopulation",{enumerable:!0,get:function(){return Ohe.TargetPopulation}})});var g7=M((kVe,Mve)=>{Mve.exports={name:"remote-containers",displayName:"%displayName%",description:"%description%",version:"0.413.0",publisher:"ms-vscode-remote",icon:"resources/dev-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.99.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"%capabilities.untrustedWorkspaces.description%"},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","devcontainer","development container","continueOn"],aiKey:"0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",activationEvents:["onStartupFinished","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost"],main:"./dist/extension/extension",l10n:"./l10n",enabledApiProposals:["resolvers","tunnels","workspaceTrust","terminalDimensions","contribEditSessions","contribViewsRemote","contribRemoteHelp"],contributes:{continueEditSession:[{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"},{command:"remote-containers.openRepositoryFromGitWithEditSession",group:"0_local@2",when:"git.state == initialized && gitOpenRepositoryCount != 0 && remoteName =~ /(codespaces*.*|tunnel)/ && false",qualifiedName:"%continueEditSession.containerVolume%",remoteGroup:"remote_30_dev-container_2_actions@8"}],languages:[{id:"jsonc",filenames:["devcontainer-feature.json",".devcontainer-internal.json"]}],jsonValidation:[{fileMatch:"devcontainer-feature.json",url:"https://raw.githubusercontent.com/devcontainers/spec/main/schemas/devContainerFeature.schema.json"}],configuration:{title:"%configuration.title%",properties:{"remote.containers.defaultExtensions":{scope:"application",deprecationMessage:"%configuration.defaultExtensions.deprecationMessage%",markdownDeprecationMessage:"%configuration.defaultExtensions.markdownDeprecationMessage%"},"dev.containers.defaultExtensions":{scope:"application",type:"array",description:"%configuration.defaultExtensions.description%",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"%configuration.defaultExtensions.errorMessage%"}},"dev.containers.defaultFeatures":{scope:"application",type:"object",description:"%configuration.defaultFeatures%",default:{}},"remote.containers.workspaceMountConsistency":{scope:"application",deprecationMessage:"%configuration.workspaceMountConsistency.deprecationMessage%",markdownDeprecationMessage:"%configuration.workspaceMountConsistency.markdownDeprecationMessage%"},"dev.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["%configuration.workspaceMountConsistency.consistent%","%configuration.workspaceMountConsistency.cached%","%configuration.workspaceMountConsistency.delegated%"],description:"%configuration.workspaceMountConsistency.description%",default:"cached"},"dev.containers.gpuAvailability":{scope:"machine",type:"string",enum:["all","detect","none"],enumDescriptions:["%configuration.gpuAvailability.all%","%configuration.gpuAvailability.detect%","%configuration.gpuAvailability.none%"],description:"%configuration.gpuAvailability.description%",default:"detect"},"remote.containers.cacheVolume":{scope:"application",deprecationMessage:"%configuration.cacheVolume.deprecationMessage%",markdownDeprecationMessage:"%configuration.cacheVolume.markdownDeprecationMessage%"},"dev.containers.cacheVolume":{scope:"application",type:"boolean",description:"%configuration.cacheVolume.description%",default:!0},"remote.containers.copyGitConfig":{scope:"machine",deprecationMessage:"%configuration.copyGitConfig.deprecationMessage%",markdownDeprecationMessage:"%configuration.copyGitConfig.markdownDeprecationMessage%"},"dev.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"%configuration.copyGitConfig.markdownDescription%",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",deprecationMessage:"%configuration.gitCredentialHelperConfigLocation.deprecationMessage%",markdownDeprecationMessage:"%configuration.gitCredentialHelperConfigLocation.markdownDeprecationMessage%"},"dev.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["%configuration.gitCredentialHelperConfigLocation.system%","%configuration.gitCredentialHelperConfigLocation.global%","%configuration.gitCredentialHelperConfigLocation.none%"],description:"%configuration.gitCredentialHelperConfigLocation.description%",default:"global"},"dev.containers.dockerCredentialHelper":{scope:"machine",type:"boolean",markdownDescription:"%configuration.dockerCredentialHelper.markdownDescription%",default:!0},"dev.containers.mountWaylandSocket":{scope:"application",ignoreSync:!0,type:"boolean",markdownDescription:"%configuration.mountWaylandSocket.markdownDescription%",default:!0},"remote.containers.logLevel":{scope:"application",deprecationMessage:"%configuration.logLevel.deprecationMessage%",markdownDeprecationMessage:"%configuration.logLevel.markdownDeprecationMessage%"},"dev.containers.logLevel":{scope:"application",type:"string",description:"%configuration.logLevel.description%",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",deprecationMessage:"%configuration.dockerPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerPath.markdownDeprecationMessage%"},"dev.containers.dockerPath":{scope:"application",type:"string",description:"%configuration.dockerPath.description%",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",deprecationMessage:"%configuration.dockerComposePath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dockerComposePath.markdownDeprecationMessage%"},"dev.containers.dockerComposePath":{scope:"application",type:"string",description:"%configuration.dockerComposePath.description%",default:"docker-compose"},"dev.containers.dockerSocketPath":{scope:"application",type:"string",description:"%configuration.dockerSocketPath.description%",default:"/var/run/docker.sock"},"remote.containers.executeInWSL":{scope:"application",deprecationMessage:"%configuration.executeInWSL.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSL.markdownDeprecationMessage%"},"dev.containers.executeInWSL":{scope:"application",type:"boolean",description:"%configuration.executeInWSL.description%",default:!1},"remote.containers.executeInWSLDistro":{scope:"application",deprecationMessage:"%configuration.executeInWSLDistro.deprecationMessage%",markdownDeprecationMessage:"%configuration.executeInWSLDistro.markdownDeprecationMessage%"},"dev.containers.executeInWSLDistro":{scope:"application",type:"string",markdownDescription:"%configuration.executeInWSLDistro.markdownDescription%"},"dev.containers.forwardWSLServices":{scope:"application",type:"boolean",description:"%configuration.forwardWSLServices.description%",default:!0},"dotfiles.repository":{scope:"machine",type:"string",description:"%configuration.dotfiles.repository.description%"},"dotfiles.installCommand":{scope:"machine",type:"string",description:"%configuration.dotfiles.installCommand.description%"},"dotfiles.targetPath":{scope:"machine",type:"string",description:"%configuration.dotfiles.targetPath.description%",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",deprecationMessage:"%configuration.dotfiles.repository.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.repository.markdownDeprecationMessage%"},"remote.containers.dotfiles.installCommand":{scope:"machine",deprecationMessage:"%configuration.dotfiles.installCommand.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.installCommand.markdownDeprecationMessage%"},"remote.containers.dotfiles.targetPath":{scope:"machine",deprecationMessage:"%configuration.dotfiles.targetPath.deprecationMessage%",markdownDeprecationMessage:"%configuration.dotfiles.targetPath.markdownDeprecationMessage%"},"remote.containers.repositoryConfigurationPaths":{scope:"application",deprecationMessage:"%configuration.repositoryConfigurationPaths.deprecationMessage%",markdownDeprecationMessage:"%configuration.repositoryConfigurationPaths.markdownDeprecationMessage%"},"dev.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"%configuration.repositoryConfigurationPaths.markdownDescription%",default:[],items:{type:"string"}},"dev.containers.experimentalLockfile":{scope:"application",type:"boolean",description:"%configuration.experimentalLockfile.description%",default:!1},"dev.containers.optimisticallyLaunchDocker":{scope:"application",type:"boolean",description:"%configuration.optimisticallyLaunchDocker.description%",default:!0}}},commands:[{command:"remote-containers.reopenInContainer",title:"%command.reopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildAndReopenInContainer",title:"%command.rebuildAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"%command.rebuildNoCacheAndReopenInContainer%",category:"%command.category%"},{command:"remote-containers.reopenLocally",title:"%command.reopenLocally%",category:"%command.category%"},{command:"remote-containers.reopenInWSL",title:"%command.reopenInWSL%",category:"%command.category%"},{command:"remote-containers.reopenInSSH",title:"%command.reopenInSSH%",category:"%command.category%"},{command:"remote-containers.reopenInTunnel",title:"%command.reopenInTunnel%",category:"%command.category%"},{command:"remote-containers.openFolder",title:"%command.openFolder%",category:"%command.category%",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openFolderInContainerInCurrentWindow",title:"%command.openFolderInContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.openFolderInContainerInNewWindow",title:"%command.openFolderInContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.openInformationAboutMountPerformance",title:"%command.openInformationAboutMountPerformance%",category:"%command.category%",icon:"$(info)"},{command:"remote-containers.openRepositoryInVolume",title:"%command.openRepositoryInVolume%",category:"%command.category%"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"%command.openRepositoryInUniqueVolume%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",title:"%command.openRepositoryFromRemoteHubWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openRepositoryFromGitWithEditSession",title:"%command.openRepositoryFromGitWithEditSession%",icon:"$(repo-clone)",category:"%command.category%"},{command:"remote-containers.openPullRequestInVolume",title:"%command.openPullRequestInVolume%",category:"%command.category%"},{command:"remote-containers.inspectVolume",title:"%command.inspectVolume%",category:"%command.category%"},{command:"remote-containers.openWorkspace",title:"%command.openWorkspace%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainer",title:"%command.attachToRunningContainer%",category:"%command.category%"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"%command.attachToRunningContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.inspectVolumeFromViewlet",title:"%command.inspectVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"%command.cloneInVolumeFromViewlet%",category:"%command.category%"},{command:"remote-containers.cleanUpDevContainers",title:"%command.cleanUpDevContainers%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.pruneVolumes",title:"%command.pruneVolumes%",category:"%command.category%",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"%command.explorerVolumesRefresh%",category:"%command.category%",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainer",title:"%command.attachToK8sContainer%",category:"%command.category%"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"%command.attachToK8sContainerFromViewlet%",category:"%command.category%"},{command:"remote-containers.switchContainer",title:"%command.switchContainer%",category:"%command.category%"},{command:"remote-containers.rebuildContainer",title:"%command.rebuildContainer%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"%command.rebuildContainerNoCache%",category:"%command.category%",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"%command.createDevContainerFile%",category:"%command.category%"},{command:"remote-containers.createDevContainerFileWithCopilot",title:"%command.createDevContainerFileWithCopilot%",category:"%command.category%"},{command:"remote-containers.createDevContainer",title:"%command.createDevContainer%",category:"%command.category%"},{command:"remote-containers.settings",title:"%command.settings%",category:"%command.category%"},{command:"remote-containers.getHelp",title:"%command.getHelp%",category:"%command.category%"},{command:"remote-containers.getStarted",title:"%command.getStarted%",category:"%command.category%"},{command:"remote-containers.trySample",title:"%command.trySample%",category:"%command.category%"},{command:"remote-containers.reportIssue",title:"%command.reportIssue%",category:"%command.category%"},{command:"remote-containers.provideFeedback",title:"%command.provideFeedback%",category:"%command.category%"},{command:"remote-containers.openDevContainerFile",title:"%command.openDevContainerFile%",category:"%command.category%",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"%command.openAttachConfigByNameFile%",category:"%command.category%"},{command:"remote-containers.openAttachDevContainerFile",title:"%command.openAttachDevContainerFile%",category:"%command.category%"},{command:"remote-containers.revealLogTerminal",title:"%command.revealLogTerminal%",category:"%command.category%"},{command:"remote-containers.openLogFile",title:"%command.openLogFile%",category:"%command.developerCategory%"},{command:"remote-containers.openLastLogFile",title:"%command.openLastLogFile%",category:"%command.category%"},{command:"remote-containers.testConnection",title:"%command.testConnection%",category:"%command.developerCategory%"},{command:"remote-containers.attachToContainerInCurrentWindow",title:"%command.attachToContainerInCurrentWindow%",category:"%command.category%",icon:"$(arrow-right)"},{command:"remote-containers.attachToContainerInNewWindow",title:"%command.attachToContainerInNewWindow%",category:"%command.category%",icon:"$(empty-window)"},{command:"remote-containers.stopContainer",title:"%command.stopContainer%",category:"%command.category%"},{command:"remote-containers.startContainer",title:"%command.startContainer%",category:"%command.category%",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"%command.removeContainer%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"%command.removeRecentFolder%",category:"%command.category%",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"%command.showDetails%",category:"%command.category%"},{command:"remote-containers.explorerTargetsRefresh",title:"%command.explorerTargetsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"%command.explorerDetailsRefresh%",category:"%command.category%",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"%command.inspectDockerResource%",category:"%command.category%"},{command:"remote-containers.inspectInBasicDevContainer",title:"%command.inspectInBasicDevContainer%",category:"%command.category%"},{command:"remote-containers.cloneInVolume",title:"%command.cloneInVolume%",category:"%command.category%"},{command:"remote-containers.removeVolume",title:"%command.removeVolume%",category:"%command.category%"},{command:"remote-containers.newContainer",title:"%command.newContainer%",category:"%command.category%",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"%command.showContainerLog%",category:"%command.category%"},{command:"remote-containers.addExtensionToConfig",title:"%command.addExtensionToConfig%",category:"%command.category%"},{command:"remote-containers.checkoutPRInVolume",title:"%command.checkoutPRInVolume%",category:"%command.category%"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"%command.showReopenInContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"%command.showRecoveryContainerNotificationReset%",category:"%command.category%"},{command:"remote-containers.labelPortAndUpdateConfig",title:"%command.labelPortAndUpdateConfig%",category:"%command.category%",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"%command.installDocker%",category:"%command.category%"},{command:"remote-containers.installDockerInWSL",title:"%command.installDockerInWSL%",category:"%command.category%"},{command:"remote-containers.installUserCLI",title:"%command.installUserCLI%",category:"%command.category%"},{command:"remote-containers.configureContainerFeatures",title:"%command.configureContainerFeatures%",category:"%command.category%"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"!hideRebuildCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.openFolder",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.createDevContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.openWorkspace",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHubWithEditSession",when:"false"},{command:"remote-containers.openRepositoryFromGitWithEditSession",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainer",when:"!hideConnectCommands && remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.switchContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.testConnection",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFileWithCopilot",when:"false && github.copilot.activated && remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote|tunnel)?$/"},{command:"remote-containers.getStarted",when:"!remoteName && !virtualWorkspace || remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.trySample",when:"!hideConnectCommands && !remoteName && !virtualWorkspace"},{command:"remote-containers.trySample",when:"!hideConnectCommands && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"false"},{command:"remote-containers.attachToContainerInNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"false"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"false"},{command:"remote-containers.openInformationAboutMountPerformance",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.installDockerInWSL",when:"!hideConnectCommands && isWindows && !remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.configureContainerFeatures",when:"remoteName =~ /^(dev-container|wsl|ssh-remote|tunnel)$/"}],"statusBar/remoteIndicator":[{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_2_actions@0",when:"true"},{command:"remote-containers.createDevContainer",group:"remote_30_dev-container_2_actions@1",when:"!hideConnectCommands"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@2",when:"!hideConnectCommands"},{command:"remote-containers.configureContainerFeatures",group:"remote_30_dev-container_2_actions@3",when:"remoteName =~ /^(dev-container)$/"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@4",when:"workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && remoteName =~ /tunnel*.*/ && gitOpenRepositoryCount == 0"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@5",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_2_actions@6",when:"!hideRebuildCommands && remoteName =~ /^dev-container$/"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenLocally"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInWSL"},{command:"remote-containers.reopenInSSH",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInSSH"},{command:"remote-containers.reopenInTunnel",group:"remote_30_dev-container_2_actions@7",when:"!hideConnectCommands && canReopenInTunnel"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && remoteName =~ /^(wsl|ssh-remote|tunnel)$/"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@8",when:"!hideConnectCommands && workspaceFolderCount == 0 && !remoteName && !virtualWorkspace"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@3"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@1"},{command:"remote-containers.cleanUpDevContainers",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation@2"},{command:"remote-containers.newContainer",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers)",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"!hideConnectCommands && (view == dockerContainers || view == vscode-containers.views.containers) && viewItem =~ /^runningContainer$/i",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"!hideConnectCommands && (view == dockerVolumes || view == vscode-containers.views.volumes) && viewItem == volume",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"!hideConnectCommands && view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/",group:"1_pullrequest@3"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"!hideConnectCommands && view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.openFolderInContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@2"},{command:"remote-containers.openFolderInContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@2"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@3"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"!hideConnectCommands && canReopenLocally && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"!hideConnectCommands && canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInSSH",when:"!hideConnectCommands && canReopenInSSH && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInTunnel",when:"!hideConnectCommands && canReopenInTunnel && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@1"},{command:"remote-containers.attachToContainerInCurrentWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@1"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"1_container@2"},{command:"remote-containers.attachToContainerInNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container$/",group:"inline@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^running(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"!hideRebuildCommands && view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@3"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.openInformationAboutMountPerformance",when:"view == detailsContainers && viewItem == mountPerformanceInfo",group:"inline@1"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && !isWorkspaceScopedExtension && remoteName =~ /^(dev-container|attached-container|wsl|ssh-remote|tunnel)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.dev-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.attached-container.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.exec.workspaceSuffix%"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"%resourceLabelFormatters.k8s-container.workspaceSuffix%"}}],views:{remote:[{id:"targetsContainers",name:"%views.remote.targetsContainers%",when:"!hideConnectCommands",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"%views.remote.detailsContainers%",when:"!hideConnectCommands && remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"%views.remote.devVolumes%",when:"!hideConnectCommands",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"%viewsWelcome.targetsContainers.needsDockerStartOrInstall%"},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"%viewsWelcome.targetsContainers.needsSSHCredentials%"},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithFolder%"},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:"%viewsWelcome.targetsContainers.noContainersWithoutFolder%"},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:"%viewsWelcome.devVolumes.noDevVolumes%"}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npx npm-run-all --npm-path npm clean compile-prod dev-containers-user-cli-prepare",compile:"npx npm-run-all --npm-path npm clean-dist compile-dev",watch:"npx npm-run-all --npm-path npm clean-dist compile-watch",postinstall:"yarn --cwd node_modules/@devcontainers/cli",precommit:"node build/hygiene.js",package:"vsce package --yarn",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --max-warnings 0 --ext .ts ./src ./test","compile-prod":"npx npm-run-all --npm-path npm compile-cli-prod copy-cli esbuild-prod","compile-dev":"npx npm-run-all --npm-path npm compile-cli-dev copy-cli esbuild-dev","compile-watch":"npx npm-run-all --npm-path npm --parallel compile-cli-watch watch-cli esbuild-watch","esbuild-prod":"node esbuild.js --production","esbuild-dev":"node esbuild.js","esbuild-watch":"node esbuild.js --watch","compile-cli-prod":"yarn --cwd node_modules/@devcontainers/cli compile-prod","compile-cli-dev":"yarn --cwd node_modules/@devcontainers/cli compile-dev","compile-cli-watch":"yarn --cwd node_modules/@devcontainers/cli compile-watch","copy-cli":'copyfiles --up 4 --all "node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js" dist',"watch-cli":"npm-watch","type-check":"npx npm-run-all --npm-path npm clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npx npm-run-all --npm-path npm clean-built tsc-b-w","tsc-b-w":"tsc -b -w","dev-containers-cli-publish":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npx npm-run-all --npm-path npm dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npx npm-run-all --npm-path npm clean dev-containers-cli-compile dev-containers-cli-copy-module","dev-containers-cli-compile":"npx npm-run-all --npm-path npm compile-prod","dev-containers-cli-copy-module":"copyfiles ThirdPartyNotices.txt dist/node/devContainersCLI.js dev-containers-cli","dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-package":"npx npm-run-all --npm-path npm dev-containers-user-cli-prepare dev-containers-user-cli-npm-pack","dev-containers-user-cli-prepare":"npx npm-run-all --npm-path npm dev-containers-user-cli-copy-module","dev-containers-user-cli-clean-prepare":"npx npm-run-all --npm-path npm clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":'copyfiles ThirdPartyNotices.txt dist/node/devContainersUserCLI.js dist/spec-node/devContainersSpecCLI.js "scripts/**/*" dev-containers-user-cli',"dev-containers-user-cli-npm-pack":"cd dev-containers-user-cli && npm pack",clean:"npx npm-run-all --npm-path npm clean-dist clean-built","clean-dist":"rimraf dist dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-matrix":"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},watch:{"copy-cli":"node_modules/@devcontainers/cli/dist/spec-node/devContainersSpecCLI.js"},devDependencies:{"@stylistic/eslint-plugin":"^3.0.1","@types/adm-zip":"^0.5.7","@types/chai":"^4.3.20","@types/follow-redirects":"^1.14.4","@types/js-yaml":"^4.0.9","@types/markdown-it":"^14.1.2","@types/minimist":"^1.2.5","@types/mocha":"^10.0.10","@types/ncp":"^2.0.8","@types/node":"^20.17.27","@types/pull-stream":"^3.6.7","@types/recursive-readdir":"^2.2.4","@types/semver":"^7.5.8","@types/stats-lite":"^2.2.2","@types/tar":"^6.1.13","@types/tar-stream":"^3.1.3","@types/vscode":"~1.86.0","@types/yargs":"^17.0.33","@typescript-eslint/eslint-plugin":"^8.28.0","@typescript-eslint/experimental-utils":"^5.62.0","@typescript-eslint/parser":"^8.28.0","@vscode/l10n-dev":"^0.0.35","@vscode/vsce":"^3.3.0",ajv:"^8.17.1",chai:"^4.5.0",copyfiles:"^2.4.1",esbuild:"^0.25.1",eslint:"^8.57.0","eslint-plugin-local":"^6.0.0","event-stream":"^4.0.1","gulp-eslint":"^6.0.0","gulp-filter":"^9.0.1",husky:"^9.1.7",jsonc:"^2.0.0",minimist:"^1.2.8",mocha:"^11.1.0","npm-run-all":"^4.1.5","npm-watch":"^0.13.0","p-all":"^5.0.0",rimraf:"^6.0.1","stats-lite":"^2.2.0","ts-node":"^10.9.2",typescript:"^5.8.2","typescript-formatter":"^7.2.2",vinyl:"^3.0.0","vinyl-fs":"^4.0.0"},dependencies:{"@devcontainers/cli":"https://github.com/devcontainers/cli.git#d64fcd36cf8b4d7a8dfc4ee25554beb1e8dd11b4","@vscode/extension-telemetry":"^0.9.8","@vscode/l10n":"^0.0.18","adm-zip":"^0.5.16",applicationinsights:"^2.9.6","find-process":"^1.4.10","follow-redirects":"^1.15.9","js-yaml":"^4.1.0","jsonc-parser":"^3.3.1",muxrpc:"^6.7.3","node-pty":"^1.0.0","pull-pushable":"^2.2.0","pull-stream":"^3.7.0","pull-stream-to-stream":"^2.0.0",semver:"^7.7.1","stream-to-pull-stream":"^1.7.3",tar:"^6.2.1","tar-stream":"^3.1.7","vscode-tas-client":"^0.1.84","vscode-uri":"^3.1.0",yargs:"~17.7.2"}}});var gwe={};Ug(gwe,{activate:()=>$ve,attachToContainer:()=>IC,deactivate:()=>jve});module.exports=Mg(gwe);var U=Y(require("vscode")),C7=Y($r()),oe=require("vscode"),E7=Y(require("os")),rP=Y(require("fs")),ft=Y(require("path")),S7=Y(require("querystring"));function Hg(t,e=!1){let n=t.length,r=0,o="",i=0,s=16,a=0,c=0,l=0,u=0,f=0;function m(w,y){let S=0,P=0;for(;S<w||!y;){let D=t.charCodeAt(r);if(D>=48&&D<=57)P=P*16+D-48;else if(D>=65&&D<=70)P=P*16+D-65+10;else if(D>=97&&D<=102)P=P*16+D-97+10;else break;r++,S++}return S<w&&(P=-1),P}function d(w){r=w,o="",i=0,s=16,f=0}function p(){let w=r;if(t.charCodeAt(r)===48)r++;else for(r++;r<t.length&&Sm(t.charCodeAt(r));)r++;if(r<t.length&&t.charCodeAt(r)===46)if(r++,r<t.length&&Sm(t.charCodeAt(r)))for(r++;r<t.length&&Sm(t.charCodeAt(r));)r++;else return f=3,t.substring(w,r);let y=r;if(r<t.length&&(t.charCodeAt(r)===69||t.charCodeAt(r)===101))if(r++,(r<t.length&&t.charCodeAt(r)===43||t.charCodeAt(r)===45)&&r++,r<t.length&&Sm(t.charCodeAt(r))){for(r++;r<t.length&&Sm(t.charCodeAt(r));)r++;y=r}else f=3;return t.substring(w,y)}function h(){let w="",y=r;for(;;){if(r>=n){w+=t.substring(y,r),f=2;break}let S=t.charCodeAt(r);if(S===34){w+=t.substring(y,r),r++;break}if(S===92){if(w+=t.substring(y,r),r++,r>=n){f=2;break}switch(t.charCodeAt(r++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:let D=m(4,!0);D>=0?w+=String.fromCharCode(D):f=4;break;default:f=5}y=r;continue}if(S>=0&&S<=31)if($g(S)){w+=t.substring(y,r),f=2;break}else f=6;r++}return w}function g(){if(o="",f=0,i=r,c=a,u=l,r>=n)return i=n,s=17;let w=t.charCodeAt(r);if(aP(w)){do r++,o+=String.fromCharCode(w),w=t.charCodeAt(r);while(aP(w));return s=15}if($g(w))return r++,o+=String.fromCharCode(w),w===13&&t.charCodeAt(r)===10&&(r++,o+=`
`),a++,l=r,s=14;switch(w){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,o=h(),s=10;case 47:let y=r-1;if(t.charCodeAt(r+1)===47){for(r+=2;r<n&&!$g(t.charCodeAt(r));)r++;return o=t.substring(y,r),s=12}if(t.charCodeAt(r+1)===42){r+=2;let S=n-1,P=!1;for(;r<S;){let D=t.charCodeAt(r);if(D===42&&t.charCodeAt(r+1)===47){r+=2,P=!0;break}r++,$g(D)&&(D===13&&t.charCodeAt(r)===10&&r++,a++,l=r)}return P||(r++,f=1),o=t.substring(y,r),s=13}return o+=String.fromCharCode(w),r++,s=16;case 45:if(o+=String.fromCharCode(w),r++,r===n||!Sm(t.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return o+=p(),s=11;default:for(;r<n&&v(w);)r++,w=t.charCodeAt(r);if(i!==r){switch(o=t.substring(i,r),o){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return o+=String.fromCharCode(w),r++,s=16}}function v(w){if(aP(w)||$g(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function C(){let w;do w=g();while(w>=12&&w<=15);return w}return{setPosition:d,getPosition:()=>r,scan:e?C:g,getToken:()=>s,getTokenValue:()=>o,getTokenOffset:()=>i,getTokenLength:()=>r-i,getTokenStartLine:()=>c,getTokenStartCharacter:()=>i-u,getTokenError:()=>f}}function aP(t){return t===32||t===9}function $g(t){return t===10||t===13}function Sm(t){return t>=48&&t<=57}var g1;(function(t){t[t.lineFeed=10]="lineFeed",t[t.carriageReturn=13]="carriageReturn",t[t.space=32]="space",t[t._0=48]="_0",t[t._1=49]="_1",t[t._2=50]="_2",t[t._3=51]="_3",t[t._4=52]="_4",t[t._5=53]="_5",t[t._6=54]="_6",t[t._7=55]="_7",t[t._8=56]="_8",t[t._9=57]="_9",t[t.a=97]="a",t[t.b=98]="b",t[t.c=99]="c",t[t.d=100]="d",t[t.e=101]="e",t[t.f=102]="f",t[t.g=103]="g",t[t.h=104]="h",t[t.i=105]="i",t[t.j=106]="j",t[t.k=107]="k",t[t.l=108]="l",t[t.m=109]="m",t[t.n=110]="n",t[t.o=111]="o",t[t.p=112]="p",t[t.q=113]="q",t[t.r=114]="r",t[t.s=115]="s",t[t.t=116]="t",t[t.u=117]="u",t[t.v=118]="v",t[t.w=119]="w",t[t.x=120]="x",t[t.y=121]="y",t[t.z=122]="z",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.asterisk=42]="asterisk",t[t.backslash=92]="backslash",t[t.closeBrace=125]="closeBrace",t[t.closeBracket=93]="closeBracket",t[t.colon=58]="colon",t[t.comma=44]="comma",t[t.dot=46]="dot",t[t.doubleQuote=34]="doubleQuote",t[t.minus=45]="minus",t[t.openBrace=123]="openBrace",t[t.openBracket=91]="openBracket",t[t.plus=43]="plus",t[t.slash=47]="slash",t[t.formFeed=12]="formFeed",t[t.tab=9]="tab"})(g1||(g1={}));var Zo=new Array(20).fill(0).map((t,e)=>" ".repeat(e)),_m=200,cP={" ":{"\n":new Array(_m).fill(0).map((t,e)=>`
`+" ".repeat(e)),"\r":new Array(_m).fill(0).map((t,e)=>"\r"+" ".repeat(e)),"\r\n":new Array(_m).fill(0).map((t,e)=>`\r
`+" ".repeat(e))},"	":{"\n":new Array(_m).fill(0).map((t,e)=>`
`+"	".repeat(e)),"\r":new Array(_m).fill(0).map((t,e)=>"\r"+"	".repeat(e)),"\r\n":new Array(_m).fill(0).map((t,e)=>`\r
`+"	".repeat(e))}},v1=[`
`,"\r",`\r
`];function lP(t,e,n){let r,o,i,s,a;if(e){for(s=e.offset,a=s+e.length,i=s;i>0&&!Bg(t,i-1);)i--;let S=a;for(;S<t.length&&!Bg(t,S);)S++;o=t.substring(i,S),r=X7(o,n)}else o=t,r=0,i=0,s=0,a=t.length;let c=J7(n,t),l=v1.includes(c),u=0,f=0,m;n.insertSpaces?m=Zo[n.tabSize||4]??xm(Zo[1],n.tabSize||4):m="	";let d=m==="	"?"	":" ",p=Hg(o,!1),h=!1;function g(){if(u>1)return xm(c,u)+xm(m,r+f);let S=m.length*(r+f);return!l||S>cP[d][c].length?c+xm(m,r+f):S<=0?c:cP[d][c][S]}function v(){let S=p.scan();for(u=0;S===15||S===14;)S===14&&n.keepLines?u+=1:S===14&&(u=1),S=p.scan();return h=S===16||p.getTokenError()!==0,S}let C=[];function w(S,P,D){!h&&(!e||P<a&&D>s)&&t.substring(P,D)!==S&&C.push({offset:P,length:D-P,content:S})}let y=v();if(n.keepLines&&u>0&&w(xm(c,u),0,0),y!==17){let S=p.getTokenOffset()+i,P=m.length*r<20&&n.insertSpaces?Zo[m.length*r]:xm(m,r);w(P,i,S)}for(;y!==17;){let S=p.getTokenOffset()+p.getTokenLength()+i,P=v(),D="",A=!1;for(;u===0&&(P===12||P===13);){let L=p.getTokenOffset()+i;w(Zo[1],S,L),S=p.getTokenOffset()+p.getTokenLength()+i,A=P===12,D=A?g():"",P=v()}if(P===2)y!==1&&f--,n.keepLines&&u>0||!n.keepLines&&y!==1?D=g():n.keepLines&&(D=Zo[1]);else if(P===4)y!==3&&f--,n.keepLines&&u>0||!n.keepLines&&y!==3?D=g():n.keepLines&&(D=Zo[1]);else{switch(y){case 3:case 1:f++,n.keepLines&&u>0||!n.keepLines?D=g():D=Zo[1];break;case 5:n.keepLines&&u>0||!n.keepLines?D=g():D=Zo[1];break;case 12:D=g();break;case 13:u>0?D=g():A||(D=Zo[1]);break;case 6:n.keepLines&&u>0?D=g():A||(D=Zo[1]);break;case 10:n.keepLines&&u>0?D=g():P===6&&!A&&(D="");break;case 7:case 8:case 9:case 11:case 2:case 4:n.keepLines&&u>0?D=g():(P===12||P===13)&&!A?D=Zo[1]:P!==5&&P!==17&&(h=!0);break;case 16:h=!0;break}u>0&&(P===12||P===13)&&(D=g())}P===17&&(n.keepLines&&u>0?D=g():D=n.insertFinalNewline?c:"");let O=p.getTokenOffset()+i;w(D,S,O),y=P}return C}function xm(t,e){let n="";for(let r=0;r<e;r++)n+=t;return n}function X7(t,e){let n=0,r=0,o=e.tabSize||4;for(;n<t.length;){let i=t.charAt(n);if(i===Zo[1])r++;else if(i==="	")r+=o;else break;n++}return Math.floor(r/o)}function J7(t,e){for(let n=0;n<e.length;n++){let r=e.charAt(n);if(r==="\r")return n+1<e.length&&e.charAt(n+1)===`
`?`\r
`:"\r";if(r===`
`)return`
`}return t&&t.eol||`
`}function Bg(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}var Wg;(function(t){t.DEFAULT={allowTrailingComma:!1}})(Wg||(Wg={}));function w1(t,e){let n=[],r=new Object,o,i={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,l,u,f){i.value=c,i.offset=l,i.length=u,i.type=f,i.colonOffset=void 0,o=i}try{$C(t,{onObjectBegin:(c,l)=>{if(e<=c)throw r;o=void 0,s=e>c,n.push("")},onObjectProperty:(c,l,u)=>{if(e<l||(a(c,l,u,"property"),n[n.length-1]=c,e<=l+u))throw r},onObjectEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onArrayBegin:(c,l)=>{if(e<=c)throw r;o=void 0,n.push(0)},onArrayEnd:(c,l)=>{if(e<=c)throw r;o=void 0,n.pop()},onLiteralValue:(c,l,u)=>{if(e<l||(a(c,l,u,C1(c)),e<=l+u))throw r},onSeparator:(c,l,u)=>{if(e<=l)throw r;if(c===":"&&o&&o.type==="property")o.colonOffset=l,s=!1,o=void 0;else if(c===","){let f=n[n.length-1];typeof f=="number"?n[n.length-1]=f+1:(s=!0,n[n.length-1]=""),o=void 0}}})}catch(c){if(c!==r)throw c}return{path:n,previousNode:o,isAtPropertyKey:s,matches:c=>{let l=0;for(let u=0;l<c.length&&u<n.length;u++)if(c[l]===n[u]||c[l]==="*")l++;else if(c[l]!=="**")return!1;return l===c.length}}}function y1(t,e=[],n=Wg.DEFAULT){let r=null,o=[],i=[];function s(c){Array.isArray(o)?o.push(c):r!==null&&(o[r]=c)}return $C(t,{onObjectBegin:()=>{let c={};s(c),i.push(o),o=c,r=null},onObjectProperty:c=>{r=c},onObjectEnd:()=>{o=i.pop()},onArrayBegin:()=>{let c=[];s(c),i.push(o),o=c,r=null},onArrayEnd:()=>{o=i.pop()},onLiteralValue:s,onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n),o[0]}function MC(t,e=[],n=Wg.DEFAULT){let r={type:"array",offset:-1,length:-1,children:[],parent:void 0};function o(c){r.type==="property"&&(r.length=c-r.offset,r=r.parent)}function i(c){return r.children.push(c),c}$C(t,{onObjectBegin:c=>{r=i({type:"object",offset:c,length:-1,parent:r,children:[]})},onObjectProperty:(c,l,u)=>{r=i({type:"property",offset:l,length:-1,parent:r,children:[]}),r.children.push({type:"string",value:c,offset:l,length:u,parent:r})},onObjectEnd:(c,l)=>{o(c+l),r.length=c+l-r.offset,r=r.parent,o(c+l)},onArrayBegin:(c,l)=>{r=i({type:"array",offset:c,length:-1,parent:r,children:[]})},onArrayEnd:(c,l)=>{r.length=c+l-r.offset,r=r.parent,o(c+l)},onLiteralValue:(c,l,u)=>{i({type:C1(c),offset:l,length:u,parent:r,value:c}),o(l+u)},onSeparator:(c,l,u)=>{r.type==="property"&&(c===":"?r.colonOffset=l:c===","&&o(l))},onError:(c,l,u)=>{e.push({error:c,offset:l,length:u})}},n);let a=r.children[0];return a&&delete a.parent,a}function jg(t,e){if(!t)return;let n=t;for(let r of e)if(typeof r=="string"){if(n.type!=="object"||!Array.isArray(n.children))return;let o=!1;for(let i of n.children)if(Array.isArray(i.children)&&i.children[0].value===r&&i.children.length===2){n=i.children[1],o=!0;break}if(!o)return}else{let o=r;if(n.type!=="array"||o<0||!Array.isArray(n.children)||o>=n.children.length)return;n=n.children[o]}return n}function UC(t){switch(t.type){case"array":return t.children.map(UC);case"object":let e=Object.create(null);for(let n of t.children){let r=n.children[1];r&&(e[n.children[0].value]=UC(r))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function $C(t,e,n=Wg.DEFAULT){let r=Hg(t,!1),o=[],i=0;function s(_){return _?()=>i===0&&_(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function a(_){return _?x=>i===0&&_(x,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter()):()=>!0}function c(_){return _?x=>i===0&&_(x,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice()):()=>!0}function l(_){return _?()=>{i>0?i++:_(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter(),()=>o.slice())===!1&&(i=1)}:()=>!0}function u(_){return _?()=>{i>0&&i--,i===0&&_(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:()=>!0}let f=l(e.onObjectBegin),m=c(e.onObjectProperty),d=u(e.onObjectEnd),p=l(e.onArrayBegin),h=u(e.onArrayEnd),g=c(e.onLiteralValue),v=a(e.onSeparator),C=s(e.onComment),w=a(e.onError),y=n&&n.disallowComments,S=n&&n.allowTrailingComma;function P(){for(;;){let _=r.scan();switch(r.getTokenError()){case 4:D(14);break;case 5:D(15);break;case 3:D(13);break;case 1:y||D(11);break;case 2:D(12);break;case 6:D(16);break}switch(_){case 12:case 13:y?D(10):C();break;case 16:D(1);break;case 15:case 14:break;default:return _}}}function D(_,x=[],b=[]){if(w(_),x.length+b.length>0){let N=r.getToken();for(;N!==17;){if(x.indexOf(N)!==-1){P();break}else if(b.indexOf(N)!==-1)break;N=P()}}}function A(_){let x=r.getTokenValue();return _?g(x):(m(x),o.push(x)),P(),!0}function O(){switch(r.getToken()){case 11:let _=r.getTokenValue(),x=Number(_);isNaN(x)&&(D(2),x=0),g(x);break;case 7:g(null);break;case 8:g(!0);break;case 9:g(!1);break;default:return!1}return P(),!0}function L(){return r.getToken()!==10?(D(3,[],[2,5]),!1):(A(!1),r.getToken()===6?(v(":"),P(),R()||D(4,[],[2,5])):D(5,[],[2,5]),o.pop(),!0)}function E(){f(),P();let _=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(_||D(4,[],[]),v(","),P(),r.getToken()===2&&S)break}else _&&D(6,[],[]);L()||D(4,[],[2,5]),_=!0}return d(),r.getToken()!==2?D(7,[2],[]):P(),!0}function I(){p(),P();let _=!0,x=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(x||D(4,[],[]),v(","),P(),r.getToken()===4&&S)break}else x&&D(6,[],[]);_?(o.push(0),_=!1):o[o.length-1]++,R()||D(4,[],[4,5]),x=!0}return h(),_||o.pop(),r.getToken()!==4?D(8,[4],[]):P(),!0}function R(){switch(r.getToken()){case 3:return I();case 1:return E();case 10:return A(!0);default:return O()}}return P(),r.getToken()===17?n.allowEmptyContent?!0:(D(4,[],[]),!1):R()?(r.getToken()!==17&&D(9,[],[]),!0):(D(4,[],[]),!1)}function C1(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}function E1(t,e,n,r){let o=e.slice(),s=MC(t,[]),a,c;for(;o.length>0&&(c=o.pop(),a=jg(s,o),a===void 0&&n!==void 0);)typeof c=="string"?n={[c]:n}:n=[n];if(a)if(a.type==="object"&&typeof c=="string"&&Array.isArray(a.children)){let l=jg(a,[c]);if(l!==void 0)if(n===void 0){if(!l.parent)throw new Error("Malformed AST");let u=a.children.indexOf(l.parent),f,m=l.parent.offset+l.parent.length;if(u>0){let d=a.children[u-1];f=d.offset+d.length}else f=a.offset+1,a.children.length>1&&(m=a.children[1].offset);return mf(t,{offset:f,length:m-f,content:""},r)}else return mf(t,{offset:l.offset,length:l.length,content:JSON.stringify(n)},r);else{if(n===void 0)return[];let u=`${JSON.stringify(c)}: ${JSON.stringify(n)}`,f=r.getInsertionIndex?r.getInsertionIndex(a.children.map(d=>d.children[0].value)):a.children.length,m;if(f>0){let d=a.children[f-1];m={offset:d.offset+d.length,length:0,content:","+u}}else a.children.length===0?m={offset:a.offset+1,length:0,content:u}:m={offset:a.offset+1,length:0,content:u+","};return mf(t,m,r)}}else if(a.type==="array"&&typeof c=="number"&&Array.isArray(a.children)){let l=c;if(l===-1){let u=`${JSON.stringify(n)}`,f;if(a.children.length===0)f={offset:a.offset+1,length:0,content:u};else{let m=a.children[a.children.length-1];f={offset:m.offset+m.length,length:0,content:","+u}}return mf(t,f,r)}else if(n===void 0&&a.children.length>=0){let u=c,f=a.children[u],m;if(a.children.length===1)m={offset:a.offset+1,length:a.length-2,content:""};else if(a.children.length-1===u){let d=a.children[u-1],p=d.offset+d.length,h=a.offset+a.length;m={offset:p,length:h-2-p,content:""}}else m={offset:f.offset,length:a.children[u+1].offset-f.offset,content:""};return mf(t,m,r)}else if(n!==void 0){let u,f=`${JSON.stringify(n)}`;if(!r.isArrayInsertion&&a.children.length>c){let m=a.children[c];u={offset:m.offset,length:m.length,content:f}}else if(a.children.length===0||c===0)u={offset:a.offset+1,length:0,content:a.children.length===0?f:f+","};else{let m=c>a.children.length?a.children.length:c,d=a.children[m-1];u={offset:d.offset+d.length,length:0,content:","+f}}return mf(t,u,r)}else throw new Error(`Can not ${n===void 0?"remove":r.isArrayInsertion?"insert":"modify"} Array index ${l} as length is not sufficient`)}else throw new Error(`Can not add ${typeof c!="number"?"index":"property"} to parent of type ${a.type}`);else{if(n===void 0)throw new Error("Can not delete in empty document");return mf(t,{offset:s?s.offset:0,length:s?s.length:0,content:JSON.stringify(n)},r)}}function mf(t,e,n){if(!n.formattingOptions)return[e];let r=HC(t,e),o=e.offset,i=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;o>0&&!Bg(r,o-1);)o--;for(;i<r.length&&!Bg(r,i);)i++}let s=lP(r,{offset:o,length:i-o},{...n.formattingOptions,keepLines:!1});for(let c=s.length-1;c>=0;c--){let l=s[c];r=HC(r,l),o=Math.min(o,l.offset),i=Math.max(i,l.offset+l.length),i+=l.content.length-l.length}let a=t.length-(r.length-i)-o;return[{offset:o,length:a,content:r.substring(o,i)}]}function HC(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}var S1;(function(t){t[t.None=0]="None",t[t.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=2]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",t[t.InvalidUnicode=4]="InvalidUnicode",t[t.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",t[t.InvalidCharacter=6]="InvalidCharacter"})(S1||(S1={}));var _1;(function(t){t[t.OpenBraceToken=1]="OpenBraceToken",t[t.CloseBraceToken=2]="CloseBraceToken",t[t.OpenBracketToken=3]="OpenBracketToken",t[t.CloseBracketToken=4]="CloseBracketToken",t[t.CommaToken=5]="CommaToken",t[t.ColonToken=6]="ColonToken",t[t.NullKeyword=7]="NullKeyword",t[t.TrueKeyword=8]="TrueKeyword",t[t.FalseKeyword=9]="FalseKeyword",t[t.StringLiteral=10]="StringLiteral",t[t.NumericLiteral=11]="NumericLiteral",t[t.LineCommentTrivia=12]="LineCommentTrivia",t[t.BlockCommentTrivia=13]="BlockCommentTrivia",t[t.LineBreakTrivia=14]="LineBreakTrivia",t[t.Trivia=15]="Trivia",t[t.Unknown=16]="Unknown",t[t.EOF=17]="EOF"})(_1||(_1={}));var D1=w1,He=y1,pf=MC,ts=jg;var BC=UC;var x1;(function(t){t[t.InvalidSymbol=1]="InvalidSymbol",t[t.InvalidNumberFormat=2]="InvalidNumberFormat",t[t.PropertyNameExpected=3]="PropertyNameExpected",t[t.ValueExpected=4]="ValueExpected",t[t.ColonExpected=5]="ColonExpected",t[t.CommaExpected=6]="CommaExpected",t[t.CloseBraceExpected=7]="CloseBraceExpected",t[t.CloseBracketExpected=8]="CloseBracketExpected",t[t.EndOfFileExpected=9]="EndOfFileExpected",t[t.InvalidCommentToken=10]="InvalidCommentToken",t[t.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",t[t.UnexpectedEndOfString=12]="UnexpectedEndOfString",t[t.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",t[t.InvalidUnicode=14]="InvalidUnicode",t[t.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",t[t.InvalidCharacter=16]="InvalidCharacter"})(x1||(x1={}));function Tn(t,e,n,r){return E1(t,e,n,r)}function Do(t,e){let n=e.slice(0).sort((o,i)=>{let s=o.offset-i.offset;return s===0?o.length-i.length:s}),r=t.length;for(let o=n.length-1;o>=0;o--){let i=n[o];if(i.offset+i.length<=r)t=HC(t,i);else throw new Error("Overlapping edit");r=i.offset}return t}var Ht=Y(require("fs")),Fs=require("util");function Er(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(!n&&r.isFile())))}function I1(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(!n&&r.isDirectory())))}function P1(t){return new Promise(e=>Ht.stat(t,(n,r)=>e(!n&&r.isSocket())))}var at=(0,Fs.promisify)(Ht.readFile),Vg=(0,Fs.promisify)(Ht.writeFile),bwe=(0,Fs.promisify)(Ht.appendFile),il=(0,Fs.promisify)(Ht.rename),sl=(0,Fs.promisify)(Ht.readdir),b1=(0,Fs.promisify)(Ht.unlink),ns=t=>new Promise((e,n)=>Ht.mkdir(t,{recursive:!0},r=>r?n(r):e())),T1=(0,Fs.promisify)(Ht.rmdir),al=(0,Fs.promisify)(Ht.rm),Twe=(0,Fs.promisify)(Ht.copyFile);function hf(t,e,n,r=!1){let o=t.relative(e,n);return(r||!!o)&&!o.startsWith("..")&&!t.isAbsolute(o)}var $e=Y(require("vscode")),Fr=require("vscode"),yC=Y(require("path"));var tu=Y(require("path")),Bp=Y($r());var L1=Y(require("os")),qg=Y(require("fs")),A1=Y(require("path"));var uP=require("events"),Os=class{nodeEmitter=new uP.EventEmitter;disposables;constructor(...e){this.disposables=e}event=e=>(this.nodeEmitter.on("event",e),{dispose:()=>{this.nodeEmitter.off("event",e)}});fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners(),this.disposables.forEach(e=>e.dispose())}},WC=class{nodeEmitter=new uP.EventEmitter;event=e=>{let n=r=>r.results.push(e(r.data));return this.nodeEmitter.on("event",n),{dispose:()=>{this.nodeEmitter.off("event",n)}}};fire(e){let n=[];return this.nodeEmitter.emit("event",{data:e,results:n}),n}dispose(){this.nodeEmitter.removeAllListeners()}};function R1(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:e,package:t,getTelemetryLevel:()=>"off"}}function gf(t){return t.replaceAll(/ghcr.io\/devcontainers\/([^/,]+)\/([^/,]+)/g,"devcontainers-$1:$2")}var nr=(a=>(a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off",a))(nr||{}),dP={info:3,debug:2,trace:1},tX=Object.keys(dP).reduce((t,e)=>(t[dP[e]]=e,t),[]);function VC(t){return dP[t]||3}function ro(t){return tX[t]||3}var Oe={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Us=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function mP(t,e){let n=!!e;return{event:r=>{n&&(n=!1,t.forEach(o=>o.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(o=>o.event(r))}}}function pP(t,e){let n=oX(t);return{event(r){let o=rX(r,e());o&&n.write(o)},join:n.join}}function hP(t,e,n){return{event(r){let o=nX(r,e(),n.getTime());o&&t(o)}}}function on(t,e=2){return{event:t.event,write(n,r=e){t.event({type:"text",level:r,timestamp:Date.now(),text:n})},raw(n,r=e){t.event({type:"raw",level:r,timestamp:Date.now(),text:n})},start(n,r=e){let o=Date.now();return t.event({type:"start",level:r,timestamp:o,text:n}),o},stop(n,r,o=e){t.event({type:"stop",level:o,timestamp:Date.now(),text:n,startTimestamp:r})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function nX(t,e,n){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Yg(N1,`${t.timestamp-n} ms`)}] ${jC(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Yg(cX,`[${t.timestamp-n} ms] Start`)}: ${jC(t.text)}`:`[${Yg(N1,`${t.timestamp-n} ms`)}] Start: ${jC(t.text)}`;case"stop":return 1>=e?`${Yg(aX,`[${t.timestamp-n} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${jC(t.text)}`:void 0;default:throw F1(t)}}function jC(t){return uX(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function rX(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${fP(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${fP(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${fP(t.text)}`:void 0;default:throw F1(t)}}function fP(t){return t.replace(Us,"").replace(/(\r?\n)?$/,L1.EOL)}function F1(t){return new Error(`Unknown log event type: ${t.type}`)}function oX(t){let e=[],n=!1,r,o;function i(){n=!1,o&&!e.length&&(r=void 0,o(),o=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!n&&e.length){n=!0;let l=e.join("");e.length=0,qg.appendFile(t,l,u=>{u&&(u.code==="ENOENT"?qg.mkdir(A1.dirname(t),{recursive:!0},f=>{f?(i(),console.error(f)):qg.appendFile(t,l,m=>{i(),m&&console.error(m),s()})}):(i(),console.error(u))),i(),s()})}}return{write:s,join:()=>r||(n?r=new Promise(a=>o=a):Promise.resolve())}}var iX="38;2;143;99;79",O1="38;2;99;143;79",sX="38;2;86;156;214",aX=iX,cX=O1,N1=O1,lX=sX;function Yg(t,e){return e.split(`
`).map(n=>`\x1B[1m\x1B[${t}m${n}\x1B[39m\x1B[22m`).join(`
`)}function uX(t){let e,n=0,r=[];for(Us.lastIndex=0;e=Us.exec(t);)r.push(k1(t.substring(n,e.index))),r.push(e[0]),n=Us.lastIndex;return r.push(k1(t.substr(n))),r.join("")}function k1(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,n,r=0,o=[];for(;n=e.exec(t);)o.push(t.substring(r,n.index)),o.push(Yg(lX,n[0])),r=e.lastIndex;return o.push(t.substr(r)),o.join("")}function ot(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[31m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}function gP(t){return t.split(/\r?\n/).map(e=>`\x1B[1m\x1B[33m${e}\x1B[39m\x1B[22m`).join(`\r
`)+`\r
`}var Ee=class extends Error{description;detail;step;originalError;manageContainer=!1;params;containerId;dockerParams;volumeName;repositoryPath;folderPath;containerProperties;config;actions=[];data={};constructor(e){var n;super(e.originalError&&e.originalError.message||e.description),Object.assign(this,e),this.actions||(this.actions=[]),this.data||(this.data={}),(n=this.originalError)!=null&&n.stack&&(this.stack=this.originalError.stack)}};var Se=Y(require("path")),R_=Y(require("fs")),mq=Y(XC()),EN=require("string_decoder"),Bl=Y(cS());var bp=Y(require("crypto")),pq=Y(jT()),Hl=Y($r()),hq=Y(kB()),gq=Y(bW());var lae=Y(require("path")),dN=require("string_decoder");var g_=Y(require("path")),DY=Y(require("stream")),IY=Y(require("os")),Ip=Y(require("child_process")),ew=require("string_decoder");var mY=Y(require("path")),pY=Y(require("assert"));var TW;(()=>{"use strict";var t={975:E=>{function I(x){if(typeof x!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(x))}function R(x,b){for(var N,k="",$=0,H=-1,G=0,q=0;q<=x.length;++q){if(q<x.length)N=x.charCodeAt(q);else{if(N===47)break;N=47}if(N===47){if(!(H===q-1||G===1))if(H!==q-1&&G===2){if(k.length<2||$!==2||k.charCodeAt(k.length-1)!==46||k.charCodeAt(k.length-2)!==46){if(k.length>2){var V=k.lastIndexOf("/");if(V!==k.length-1){V===-1?(k="",$=0):$=(k=k.slice(0,V)).length-1-k.lastIndexOf("/"),H=q,G=0;continue}}else if(k.length===2||k.length===1){k="",$=0,H=q,G=0;continue}}b&&(k.length>0?k+="/..":k="..",$=2)}else k.length>0?k+="/"+x.slice(H+1,q):k=x.slice(H+1,q),$=q-H-1;H=q,G=0}else N===46&&G!==-1?++G:G=-1}return k}var _={resolve:function(){for(var x,b="",N=!1,k=arguments.length-1;k>=-1&&!N;k--){var $;k>=0?$=arguments[k]:(x===void 0&&(x=process.cwd()),$=x),I($),$.length!==0&&(b=$+"/"+b,N=$.charCodeAt(0)===47)}return b=R(b,!N),N?b.length>0?"/"+b:"/":b.length>0?b:"."},normalize:function(x){if(I(x),x.length===0)return".";var b=x.charCodeAt(0)===47,N=x.charCodeAt(x.length-1)===47;return(x=R(x,!b)).length!==0||b||(x="."),x.length>0&&N&&(x+="/"),b?"/"+x:x},isAbsolute:function(x){return I(x),x.length>0&&x.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var x,b=0;b<arguments.length;++b){var N=arguments[b];I(N),N.length>0&&(x===void 0?x=N:x+="/"+N)}return x===void 0?".":_.normalize(x)},relative:function(x,b){if(I(x),I(b),x===b||(x=_.resolve(x))===(b=_.resolve(b)))return"";for(var N=1;N<x.length&&x.charCodeAt(N)===47;++N);for(var k=x.length,$=k-N,H=1;H<b.length&&b.charCodeAt(H)===47;++H);for(var G=b.length-H,q=$<G?$:G,V=-1,ce=0;ce<=q;++ce){if(ce===q){if(G>q){if(b.charCodeAt(H+ce)===47)return b.slice(H+ce+1);if(ce===0)return b.slice(H+ce)}else $>q&&(x.charCodeAt(N+ce)===47?V=ce:ce===0&&(V=0));break}var Ue=x.charCodeAt(N+ce);if(Ue!==b.charCodeAt(H+ce))break;Ue===47&&(V=ce)}var st="";for(ce=N+V+1;ce<=k;++ce)ce!==k&&x.charCodeAt(ce)!==47||(st.length===0?st+="..":st+="/..");return st.length>0?st+b.slice(H+V):(H+=V,b.charCodeAt(H)===47&&++H,b.slice(H))},_makeLong:function(x){return x},dirname:function(x){if(I(x),x.length===0)return".";for(var b=x.charCodeAt(0),N=b===47,k=-1,$=!0,H=x.length-1;H>=1;--H)if((b=x.charCodeAt(H))===47){if(!$){k=H;break}}else $=!1;return k===-1?N?"/":".":N&&k===1?"//":x.slice(0,k)},basename:function(x,b){if(b!==void 0&&typeof b!="string")throw new TypeError('"ext" argument must be a string');I(x);var N,k=0,$=-1,H=!0;if(b!==void 0&&b.length>0&&b.length<=x.length){if(b.length===x.length&&b===x)return"";var G=b.length-1,q=-1;for(N=x.length-1;N>=0;--N){var V=x.charCodeAt(N);if(V===47){if(!H){k=N+1;break}}else q===-1&&(H=!1,q=N+1),G>=0&&(V===b.charCodeAt(G)?--G==-1&&($=N):(G=-1,$=q))}return k===$?$=q:$===-1&&($=x.length),x.slice(k,$)}for(N=x.length-1;N>=0;--N)if(x.charCodeAt(N)===47){if(!H){k=N+1;break}}else $===-1&&(H=!1,$=N+1);return $===-1?"":x.slice(k,$)},extname:function(x){I(x);for(var b=-1,N=0,k=-1,$=!0,H=0,G=x.length-1;G>=0;--G){var q=x.charCodeAt(G);if(q!==47)k===-1&&($=!1,k=G+1),q===46?b===-1?b=G:H!==1&&(H=1):b!==-1&&(H=-1);else if(!$){N=G+1;break}}return b===-1||k===-1||H===0||H===1&&b===k-1&&b===N+1?"":x.slice(b,k)},format:function(x){if(x===null||typeof x!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof x);return function(b,N){var k=N.dir||N.root,$=N.base||(N.name||"")+(N.ext||"");return k?k===N.root?k+$:k+"/"+$:$}(0,x)},parse:function(x){I(x);var b={root:"",dir:"",base:"",ext:"",name:""};if(x.length===0)return b;var N,k=x.charCodeAt(0),$=k===47;$?(b.root="/",N=1):N=0;for(var H=-1,G=0,q=-1,V=!0,ce=x.length-1,Ue=0;ce>=N;--ce)if((k=x.charCodeAt(ce))!==47)q===-1&&(V=!1,q=ce+1),k===46?H===-1?H=ce:Ue!==1&&(Ue=1):H!==-1&&(Ue=-1);else if(!V){G=ce+1;break}return H===-1||q===-1||Ue===0||Ue===1&&H===q-1&&H===G+1?q!==-1&&(b.base=b.name=G===0&&$?x.slice(1,q):x.slice(G,q)):(G===0&&$?(b.name=x.slice(1,H),b.base=x.slice(1,q)):(b.name=x.slice(G,H),b.base=x.slice(G,q)),b.ext=x.slice(H,q)),G>0?b.dir=x.slice(0,G-1):$&&(b.dir="/"),b},sep:"/",delimiter:":",win32:null,posix:null};_.posix=_,E.exports=_}},e={};function n(E){var I=e[E];if(I!==void 0)return I.exports;var R=e[E]={exports:{}};return t[E](R,R.exports,n),R.exports}n.d=(E,I)=>{for(var R in I)n.o(I,R)&&!n.o(E,R)&&Object.defineProperty(E,R,{enumerable:!0,get:I[R]})},n.o=(E,I)=>Object.prototype.hasOwnProperty.call(E,I),n.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var r={};let o;n.r(r),n.d(r,{URI:()=>m,Utils:()=>L}),typeof process=="object"?o=process.platform==="win32":typeof navigator=="object"&&(o=navigator.userAgent.indexOf("Windows")>=0);let i=/^\w[\w\d+.-]*$/,s=/^\//,a=/^\/\//;function c(E,I){if(!E.scheme&&I)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${E.authority}", path: "${E.path}", query: "${E.query}", fragment: "${E.fragment}"}`);if(E.scheme&&!i.test(E.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(E.path){if(E.authority){if(!s.test(E.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(E.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let l="",u="/",f=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static isUri(I){return I instanceof m||!!I&&typeof I.authority=="string"&&typeof I.fragment=="string"&&typeof I.path=="string"&&typeof I.query=="string"&&typeof I.scheme=="string"&&typeof I.fsPath=="string"&&typeof I.with=="function"&&typeof I.toString=="function"}scheme;authority;path;query;fragment;constructor(I,R,_,x,b,N=!1){typeof I=="object"?(this.scheme=I.scheme||l,this.authority=I.authority||l,this.path=I.path||l,this.query=I.query||l,this.fragment=I.fragment||l):(this.scheme=function(k,$){return k||$?k:"file"}(I,N),this.authority=R||l,this.path=function(k,$){switch(k){case"https":case"http":case"file":$?$[0]!==u&&($=u+$):$=u}return $}(this.scheme,_||l),this.query=x||l,this.fragment=b||l,c(this,N))}get fsPath(){return C(this,!1)}with(I){if(!I)return this;let{scheme:R,authority:_,path:x,query:b,fragment:N}=I;return R===void 0?R=this.scheme:R===null&&(R=l),_===void 0?_=this.authority:_===null&&(_=l),x===void 0?x=this.path:x===null&&(x=l),b===void 0?b=this.query:b===null&&(b=l),N===void 0?N=this.fragment:N===null&&(N=l),R===this.scheme&&_===this.authority&&x===this.path&&b===this.query&&N===this.fragment?this:new p(R,_,x,b,N)}static parse(I,R=!1){let _=f.exec(I);return _?new p(_[2]||l,P(_[4]||l),P(_[5]||l),P(_[7]||l),P(_[9]||l),R):new p(l,l,l,l,l)}static file(I){let R=l;if(o&&(I=I.replace(/\\/g,u)),I[0]===u&&I[1]===u){let _=I.indexOf(u,2);_===-1?(R=I.substring(2),I=u):(R=I.substring(2,_),I=I.substring(_)||u)}return new p("file",R,I,l,l)}static from(I){let R=new p(I.scheme,I.authority,I.path,I.query,I.fragment);return c(R,!0),R}toString(I=!1){return w(this,I)}toJSON(){return this}static revive(I){if(I){if(I instanceof m)return I;{let R=new p(I);return R._formatted=I.external,R._fsPath=I._sep===d?I.fsPath:null,R}}return I}}let d=o?1:void 0;class p extends m{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=C(this,!1)),this._fsPath}toString(I=!1){return I?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)}toJSON(){let I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=d),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I}}let h={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function g(E,I,R){let _,x=-1;for(let b=0;b<E.length;b++){let N=E.charCodeAt(b);if(N>=97&&N<=122||N>=65&&N<=90||N>=48&&N<=57||N===45||N===46||N===95||N===126||I&&N===47||R&&N===91||R&&N===93||R&&N===58)x!==-1&&(_+=encodeURIComponent(E.substring(x,b)),x=-1),_!==void 0&&(_+=E.charAt(b));else{_===void 0&&(_=E.substr(0,b));let k=h[N];k!==void 0?(x!==-1&&(_+=encodeURIComponent(E.substring(x,b)),x=-1),_+=k):x===-1&&(x=b)}}return x!==-1&&(_+=encodeURIComponent(E.substring(x))),_!==void 0?_:E}function v(E){let I;for(let R=0;R<E.length;R++){let _=E.charCodeAt(R);_===35||_===63?(I===void 0&&(I=E.substr(0,R)),I+=h[_]):I!==void 0&&(I+=E[R])}return I!==void 0?I:E}function C(E,I){let R;return R=E.authority&&E.path.length>1&&E.scheme==="file"?`//${E.authority}${E.path}`:E.path.charCodeAt(0)===47&&(E.path.charCodeAt(1)>=65&&E.path.charCodeAt(1)<=90||E.path.charCodeAt(1)>=97&&E.path.charCodeAt(1)<=122)&&E.path.charCodeAt(2)===58?I?E.path.substr(1):E.path[1].toLowerCase()+E.path.substr(2):E.path,o&&(R=R.replace(/\//g,"\\")),R}function w(E,I){let R=I?v:g,_="",{scheme:x,authority:b,path:N,query:k,fragment:$}=E;if(x&&(_+=x,_+=":"),(b||x==="file")&&(_+=u,_+=u),b){let H=b.indexOf("@");if(H!==-1){let G=b.substr(0,H);b=b.substr(H+1),H=G.lastIndexOf(":"),H===-1?_+=R(G,!1,!1):(_+=R(G.substr(0,H),!1,!1),_+=":",_+=R(G.substr(H+1),!1,!0)),_+="@"}b=b.toLowerCase(),H=b.lastIndexOf(":"),H===-1?_+=R(b,!1,!0):(_+=R(b.substr(0,H),!1,!0),_+=b.substr(H))}if(N){if(N.length>=3&&N.charCodeAt(0)===47&&N.charCodeAt(2)===58){let H=N.charCodeAt(1);H>=65&&H<=90&&(N=`/${String.fromCharCode(H+32)}:${N.substr(3)}`)}else if(N.length>=2&&N.charCodeAt(1)===58){let H=N.charCodeAt(0);H>=65&&H<=90&&(N=`${String.fromCharCode(H+32)}:${N.substr(2)}`)}_+=R(N,!0,!1)}return k&&(_+="?",_+=R(k,!1,!1)),$&&(_+="#",_+=I?$:g($,!1,!1)),_}function y(E){try{return decodeURIComponent(E)}catch{return E.length>3?E.substr(0,3)+y(E.substr(3)):E}}let S=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function P(E){return E.match(S)?E.replace(S,I=>y(I)):E}var D=n(975);let A=D.posix||D,O="/";var L;(function(E){E.joinPath=function(I,...R){return I.with({path:A.join(I.path,...R)})},E.resolvePath=function(I,...R){let _=I.path,x=!1;_[0]!==O&&(_=O+_,x=!0);let b=A.resolve(_,...R);return x&&b[0]===O&&!I.authority&&(b=b.substring(1)),I.with({path:b})},E.dirname=function(I){if(I.path.length===0||I.path===O)return I;let R=A.dirname(I.path);return R.length===1&&R.charCodeAt(0)===46&&(R=""),I.with({path:R})},E.basename=function(I){return A.basename(I.path)},E.extname=function(I){return A.extname(I.path)}})(L||(L={})),TW=r})();var{URI:Ce,Utils:ko}=TW;var RW=Y(require("path"));var Tl=Y($r());function bt(t,e){if(Mv(e)){let n=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:n,configFolderPath:n}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Mv(t){return RW.extname(t)===".code-workspace"}async function FS(t,e){if(e.isWorkspaceFile)try{let n=e.rootFolderPath,r=(await t.readFile(e.workspaceOrFolderPath)).toString(),i=He(r).folders;if(i&&i.length>0){for(let s of i){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return Tl.t("Workspace contains an absolute folder path '{0}'.",a);c=t.path.resolve(n,a)}else{let l=s.uri;return l?Ce.parse(l).scheme!=="file"?Tl.t("Workspace contains folder '{0}' not on the local file system.",l):Tl.t("Workspace contains an absolute folder path '{0}'.",l):Tl.t("Workspace contains a folder that defines neither a path nor a URI.")}if(!rie(t,c,n))return Tl.t("Folder '{0}' is not a subfolder of shared root folder '{1}'.",c,n)}return}return Tl.t("Workspace does not define any folders")}catch(n){return Tl.t("Problems loading workspace file {0}: {1}",e.workspaceOrFolderPath,n&&(n.message||n.toString()))}}function rie(t,e,n){return e===n?!0:!e||!n||n.length>e.length||e.length>n.length&&e.charAt(n.length)!==t.path.sep?!1:oie(t.platform,n,e.substr(0,n.length))}function oie(t,e,n){return t==="linux"?e===n:e.toLowerCase()===n.toLowerCase()}var lr=Y(require("path")),t_=Y(cS()),QR=Y(require("crypto")),QS=Y($v()),sY=require("string_decoder");var eN=Y($r());var hp=Y(require("path"));async function Aj(t,e){let n=await Nie(t),r=n["agent-socket"];if(!r){e.write("gpg-agent: No agent-socket found in container.");return}let o=n.homedir;try{let{stdout:a}=await t.exec(`ls '${o}/private-keys-v1.d' 2>/dev/null`);if(a.trim()){e.write("gpg-agent: Private keys found in container, not forwarding.");return}}catch{}let i=!1,s=n["keyboxd-socket"];if(s)try{await t.exec(`grep -e '^s*use-keyboxds*$' '${o}/common.conf' 2>/dev/null`),i=!0}catch{}return{homedir:o,gpgSocket:r,keyboxdSocket:s,useKeyboxd:i}}async function Fj(t,e,n,r){let o=await Rie(t,r),i=o["agent-extra-socket"];if(!i){r.write(`gpg-agent: No agent-extra-socket found on ${t.type} host.`);return}let s=o.homedir,a=!1,c=o["keyboxd-socket"];if(c)try{let w=(await t.readFile(t.path.join(s,"common.conf"))).toString();a=/^\s*use-keyboxd\s*$/m.test(w)}catch{}let l=hp.posix.join(n.homedir,"pubring.kbx"),u=await dc(e,l);u&&r.write(`GPG forwarding: ${l} exists in container.`);let f=hp.posix.join(n.homedir,"pubring.gpg"),m=await dc(e,f);m&&r.write(`GPG forwarding: ${f} exists in container.`);let d=hp.posix.join(n.homedir,"trustdb.gpg"),p=await dc(e,d);p&&r.write(`GPG forwarding: ${d} exists in container.`);let h=a&&n.keyboxdSocket&&!n.useKeyboxd&&!u&&!m,g=a&&(n.useKeyboxd||h),v=[],C=(async()=>{if(await e.exec(`mkdir -p -m 700 '${hp.posix.dirname(n.gpgSocket)}'`),g)h&&await e.exec(`mkdir -p -m 700 '${n.homedir}' && echo '
use-keyboxd' >> '${hp.posix.join(n.homedir,"common.conf")}'`);else if(a||n.useKeyboxd){if(!n.useKeyboxd&&!u&&!m||n.useKeyboxd&&(await e.exec("gpg --export --export-options backup")).stdout.trim().length===0){try{let w=await te({exec:t.exec,cmd:"gpg",args:["--export","--export-options","backup"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Bf(w.stdout.byteLength)} | gpg --import --import-options restore`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import public keys: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export public keys: ${w==null?void 0:w.message}`)}try{let w=await te({exec:t.exec,cmd:"gpgsm",args:["--export","--armor"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Bf(w.stdout.byteLength)} | gpgsm --import`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import certificates: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export certificates: ${w==null?void 0:w.message}`)}}}else u||await Rl(t,e,t.path.join(s,"pubring.kbx"),l,"gpg"),m||await Rl(t,e,t.path.join(s,"pubring.gpg"),f,"gpg"),p||await Rl(t,e,t.path.join(s,"trustdb.gpg"),d,"gpg");if((a||n.useKeyboxd)&&!p)try{let w=await te({exec:t.exec,cmd:"gpg",args:["--export-ownertrust"],output:r});w.stdout.byteLength&&v.push(async()=>{try{await e.exec(`${Bf(w.stdout.byteLength)} | gpg --import-ownertrust`,{stdin:w.stdout})}catch(y){r.write(`GPG forwarding: Failed to import ownertrust: ${y==null?void 0:y.message}`)}})}catch(w){r.write(`GPG forwarding: Failed to export ownertrust: ${w==null?void 0:w.message}`)}await kie(t,r)})();return{cliHost:t,remoteGpgSocket:n.gpgSocket,localGpgSocket:i,remoteKeyboxdSocket:g?n.keyboxdSocket:void 0,localKeyboxdSocket:g?c:void 0,importTasks:async()=>{await C;for(let w of v)await w()}}}async function Rie(t,e){try{let{stdout:n}=await te({exec:t.exec,cmd:"gpgconf",args:["--list-dirs"],output:e,print:!0});return n.toString().trim().split(/\r?\n/).reduce((r,o)=>{let i=o.indexOf(":");if(i!==-1){let s=decodeURIComponent(o.substring(i+1));t.platform==="win32"&&/^\/.\//.test(s)&&(s=`${s.charAt(1)}:${s.substring(2).replace(/\//g,"\\")}`),r[o.substring(0,i)]=s}return r},{})}catch{return{}}}async function Nie(t){try{let{stdout:e}=await t.exec("gpgconf --list-dirs");return e.trim().split(`
`).reduce((n,r)=>{let o=r.indexOf(":");return o!==-1&&(n[r.substring(0,o)]=decodeURIComponent(r.substring(o+1))),n},{})}catch{return{}}}async function kie(t,e){try{await te({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch{}}var TR=Y(require("path"));async function Hv(t,e,n){if(!("exec"in t)){for(let r=e,o="";r!==o;o=r,r=t.path.dirname(r))if(await t.isFile(t.path.join(r,".git","config")))return r;return}try{let{stdout:r}=await te({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:n}),o=r.toString().trim();return t.path.resolve(e,o)}catch{return}}async function RR(t,e,n,r){try{return await te({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",env:n,output:r,print:"onerror"}),!0}catch(o){return(o==null?void 0:o.code)==="ENOENT"?void 0:!1}}async function Mj(t,e,n,r,o){let i=r[1],s={get:"fill",store:"approve",erase:"reject"}[i];if(s===void 0)throw new Error(`Expected get, store or erase, got: ${i}`);let a=await Oj(n?t:e,s,o).catch(c=>{if(n)throw c});if(!n&&(a==="ENOENT"||(a==null?void 0:a.code)!==0)){let c=await Oj(t,s,o);c!=="ENOENT"&&(a=c,c.code===0&&(n=!0))}return a==="ENOENT"?{result:{stdout:"",stderr:"",code:127},preferLocalCLIHost:n}:{result:a,preferLocalCLIHost:n}}async function Oj({exec:t},e,n){try{let{stdout:r,stderr:o}=await te({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(n),output:Oe});return{stdout:r.toString(),stderr:o.toString(),code:0}}catch(r){if((r==null?void 0:r.code)==="ENOENT"||(r==null?void 0:r.code)==="EPIPE")return"ENOENT";if(!(r&&r.stdout&&r.stderr))throw r;let{stdout:o,stderr:i,code:s}=r;return{stdout:o.toString(),stderr:i.toString(),code:s||0}}}async function $j(t,e,n){let r=await NR(t,e,n);if(!r)return;r.startsWith("refs/")&&(r=r.substr(5)),r.startsWith("remotes/")&&(r=r.substr(8));let o=r.indexOf("/");if(o===-1)return;let i=r.substr(0,o),s=r.substr(o+1);try{let{stdout:a}=await te({exec:t.exec,cmd:"git",args:["remote","get-url",i],cwd:e.rootFolderPath,output:n}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let l=await Oie(t,e,i,n);if(l&&s!==l)return`${c}/tree/${s}`}return c}catch{return}}async function $S(t,e,n){if(!("exec"in t)){let o=await Hv(t,e.rootFolderPath,n);if(!o)return;try{return(await t.readFile(t.path.join(o,".git","config"))).toString().split(/^\[/m).filter(a=>a.startsWith("remote")).map(a=>(/^\s*url\s*=\s*(\S+)/m.exec(a)||[])[1]).filter(Boolean)}catch(i){if((i==null?void 0:i.code)!=="ENOENT")throw i;return[]}}let r;try{let{stdout:o}=await te({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:n});r=o.toString()}catch{return}return Array.from(new Set(Lie(/^[^\s]+\s+([^\s]+)/gm,r,1)))}function Lie(t,e,n){return{[Symbol.iterator]:function*(){let r;for(;r=t.exec(e);)yield r[n],t.lastIndex===r.index&&t.lastIndex++}}}async function Hj(t,e,n){return await Aie(t,e,n)||Fie(t,e,n)}async function Aie(t,e,n){try{let{stdout:r}=await te({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:n});return!!r.toString().trim()}catch{return}}async function Fie(t,e,n){let r=await NR(t,e,n);if(r)try{let{stdout:o}=await te({exec:t.exec,cmd:"git",args:["log",`${r}..HEAD`],cwd:e.rootFolderPath,output:n});return!!o.toString().trim()}catch{return}}async function Bj(t,e,n,r){let o=await NR(t,e,r);if(!o)return!1;try{let i=t.platform==="win32"?n.replace(/\\/g,"/"):n;return await te({exec:t.exec,cmd:"git",args:["cat-file","-e",`${o}:${i}`],cwd:e.rootFolderPath,output:r}),!0}catch{return!1}}async function NR(t,e,n){try{let{stdout:r}=await te({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:n});return r.toString().trim()}catch{return}}async function Oie(t,e,n,r){try{let{stdout:o}=await te({exec:t.exec,cmd:"git",args:["remote","show",n],cwd:e.rootFolderPath,output:r});return(o.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function Wj(t,e,n,r,o,i,s){let{extensionPath:a,onDidInput:c}=t;if(await e.isFolder(e.path.join(n,".git"))){if(s&&(e.type==="container"&&await Fi({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",n],cwd:n,output:on(o,3)}),await Uie(e,n,o))){let d=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env;return{gitClone:Fi({ptyExec:e.ptyExec,cmd:"git",args:["pull","--ff-only"],cwd:n,env:d,onDidInput:c,output:on(o,3)}).catch(h=>h),gitUnshallow:void 0}}return{gitClone:void 0,gitUnshallow:void 0}}await e.mkdirp(n);let l=r.tokenEnvVar?{...r.env,GIT_ASKPASS:e.path.join(a,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[r.tokenEnvVar]}:r.env,u=[];if(r.fullClone||u.push("--depth","1"),r.branch&&u.push("--branch",r.branch),r.recurseSubmodules&&u.push("--recurse-submodules"),e.type==="container"&&r.url.startsWith("file:")){let d=e.path.join(Ce.parse(r.url).path,".git");await Fi({ptyExec:e.ptyExec,cmd:"git",args:["config","--global","--add","safe.directory",d],cwd:n,env:l,output:on(o,3)})}let f=Fi({ptyExec:e.ptyExec,cmd:"git",args:["clone",...u,r.url,"."],cwd:n,env:l,onDidInput:c,output:on(o,3)}),m=r.fullClone?f:(async()=>(await f,await Fi({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:n,env:l,output:i}),Fi({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:n,env:l,onDidInput:c,output:i})))();return{gitClone:f,gitUnshallow:m}}async function Uie(t,e,n){return(await te({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e,output:n}).catch(o=>o)).stdout.toString().trim()===""}async function HS(t,e,n){let r=await Bv(t,e,[".gitconfig"],"git"," && grep -e '^\\[' ~/.gitconfig | grep -v -E '^\\[(filter|safe)([[:blank:]]+|\\])'"),o=await Mie(t,e,n);(r||o)&&(await $ie(t,e.shellServer),Hie(t,e).catch(i=>{t.output.write(`Error copying allowed signers: ${(i==null?void 0:i.stack)||(i==null?void 0:i.message)||i}`,5)}))}var jj=["git","config"];async function Mie(t,e,n){let{cliHost:r}=t,o=await Uj(r);if(!await r.isFile(o)&&(r.type==="local"||(r=await Gr(process.cwd(),t.loadNativeModule,t.output),o=await Uj(r),!await r.isFile(o))))return!1;let i=(async()=>{let s=await n,a=s.XDG_CONFIG_HOME?[s.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return TR.posix.join(...a,...jj)})();return Rl(r,e.shellServer,o,i,"git")}async function Uj(t){let{env:e}=t,n=e.XDG_CONFIG_HOME?[e.XDG_CONFIG_HOME]:[await t.homedir(),".config"];return t.path.join(...n,...jj)}async function $ie(t,e){await e.exec(`# Cleaning up git config
for key in core.editor core.sshCommand gpg.program
do
	value="$(git config --global --get $key)"
	executable="\${value%% *}"
	([ -z "$executable" ] || [ "$executable" = "${t.product.applicationName}" ]) && continue
	command -v "$executable" >/dev/null 2>&1 || (echo "Removing Git config key: $key = $value" && git config --global --unset $key)
done
git config --global --unset http.sslBackend || true`)}async function Hie(t,e){let{cliHost:n,output:r}=t,{homeFolder:o,shellServer:i}=e,s=await Bie(n,"gpg.ssh.allowedSignersFile",r);if(!s)return;let a=await n.homedir(),c=/^~[/\\]/.test(s)?n.path.join(a,s.substring(2)):s,l=n.path.resolve(a,c);r.write(`Copying allowed signers file: ${l}`);let u=n.path.relative(a,l),f=n.platform==="win32"?u.replace(/\\/g,"/"):u,m=TR.posix.resolve(o,f);await Rl(n,i,l,m,"ssh")&&await i.exec(`git config --global gpg.ssh.allowedSignersFile '${m}'`)}async function Bie(t,e,n){try{let{stdout:r}=await te({exec:t.exec,cmd:"git",args:["config","--global","--get",e],output:n}),o=r.toString();return t.platform==="win32"&&o.endsWith(`\r
`)?o.substring(0,o.length-2):o.endsWith(`
`)?o.substring(0,o.length-1):o}catch{return}}var kl=require("stream");async function Vj(t,e){let{stdout:n}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return n.split("\0").map(r=>{let o=r.indexOf("=");return o!==-1?[r.slice(0,o),r.slice(o+1)]:[]}).reduce((r,[o,i])=>(o&&(r[o]=i),r),{})}async function kR(t){let e=`for pid in \`cd /proc && ls -d [0-9]*\`; do { echo $pid ; readlink /proc/$pid/cwd || echo ; readlink /proc/$pid/ns/mnt || echo ; cat /proc/$pid/stat | tr "
" " " ; echo ; cat /proc/$pid/environ | tr "
" " " ; echo ; cat < /proc/$pid/cmdline | tr "
" " " ; echo ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null`,{stdout:n}=await t.exec(e,{logOutput:!1}),r=6,o=n.split(`
---
`),i=o.pop().trim();return{processes:o.map(a=>a.split(`
`)).filter(a=>a.length>=r).map(([a,c,l,u,f,m])=>{let d=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(u)||[];return{pid:a,ppid:d[1],pgrp:d[2],cwd:c,mntNS:l,cmd:m.replace(/\0/g," "),env:f.split("\0").reduce((p,h)=>{let g=h.indexOf("=");return g!==-1&&(p[h.substr(0,g)]=h.substr(g+1)),p},{})}}),mntNS:i}}function Yj(t){let e={};return t.forEach(n=>e[n.pid]={process:n,childProcesses:[]}),t.filter(n=>n.ppid).forEach(n=>{var r;return(r=e[n.ppid])==null?void 0:r.childProcesses.push(e[n.pid])}),e}function LR(t,e="  ",n="  "){return`${n}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(r=>LR(r,e,n+e))}`}var Oi=Y(require("path")),Kj=Y(require("fs"));async function oi(t,e=process.cwd(),n=process.env){if(process.platform!=="win32")return t;if(Oi.isAbsolute(t))return await AR(t)||t;if(/[/\\]/.test(t)){let s=Oi.join(e,t);return await AR(s)||s}let r,o;if(n){for(let s of Object.keys(n))if(s.toLowerCase()==="path"){let a=n[s];typeof a=="string"&&(r=a,o=a.split(Oi.delimiter).filter(Boolean),o.push(Oi.join(n.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){let s=new Error(`No PATH to look up executable '${t}'.`);throw s.code="ENOENT",s}for(let s of o){let a;Oi.isAbsolute(s)?a=Oi.join(s,t):a=Oi.join(e,s,t);let c=await AR(a);if(c)return c}let i=new Error(`Exectuable '${t}' not found on PATH '${r}'.`);throw i.code="ENOENT",i}var qj=process.env.PATHEXT,Gj=qj?qj.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function AR(t){if(Gj.indexOf(Oi.extname(t))!==-1)return await zj(t)?t:void 0;for(let e of Gj){let n=t+e;if(await zj(n))return n}}function zj(t){return new Promise(e=>Kj.stat(t,(n,r)=>e(!n&&r.isFile())))}var FR="dev-containers-",Xj="credentials not found in native keychain";async function Qj(t,e,n,r,o,i){let s=await Jj(n?t:e,r,o,i).catch(a=>{if(n)throw a});return!n&&(s==null?void 0:s.code)!==0&&(s=await Jj(t,r,o,i),s.code===0&&(n=!0)),{result:s,preferLocalCLIHost:n}}async function Jj(t,e,n,r){let o,i=e[1];try{let s=i==="store"?JSON.parse(n).ServerURL:n.trim(),a=await Wie(t,s,r);if(!a)return{stdout:i==="get"?Xj:"Docker credential helper not found.",stderr:"",code:1};if("identitytoken"in a)return i!=="get"?{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1}:{stdout:JSON.stringify({ServerURL:s,Username:"<token>",Secret:a.identitytoken}),stderr:"",code:0};if("auth"in a){if(i!=="get")return{stdout:`Docker credential command not supported without credential helper: ${i}.`,stderr:"",code:1};let[u,f]=Buffer.from(a.auth,"base64").toString().split(":");return{stdout:JSON.stringify({ServerURL:s,Username:u,Secret:f}),stderr:"",code:0}}o=`docker-credential-${a.helper}`;let{stdout:c,stderr:l}=await te({exec:t.exec,cmd:o,args:e.slice(1),stdin:Buffer.from(n),output:Oe});return{stdout:c.toString(),stderr:l.toString(),code:0}}catch(s){if(o&&((s==null?void 0:s.code)==="ENOENT"||(s==null?void 0:s.code)==="EPIPE"))return{stdout:i==="get"?Xj:`Docker credential helper '${o}' not found: ${(s==null?void 0:s.message)||String(s)}.`,stderr:"",code:1};if(!(s&&s.stdout&&s.stderr))throw s;let{stdout:a,stderr:c,code:l}=s;return{stdout:a.toString(),stderr:c.toString(),code:l||0}}}async function Wie(t,e,n){var o,i,s,a,c;n.write(`Looking up Docker credential helper for '${e}'.`);try{let l=He((await t.readFile(t.path.join(await t.homedir(),".docker","config.json"))).toString()),u=Ce.parse(e).authority||e,f=(o=l==null?void 0:l.credHelpers)==null?void 0:o[u];if(f)return{helper:f};let m=(s=(i=l==null?void 0:l.auths)==null?void 0:i[e])==null?void 0:s.identitytoken;if(m)return{identitytoken:m};let d=(c=(a=l==null?void 0:l.auths)==null?void 0:a[e])==null?void 0:c.auth;if(d)return{auth:d};if(l!=null&&l.credsStore)return{helper:l.credsStore}}catch(l){(l==null?void 0:l.code)!=="ENOENT"&&n.write(`Error reading Docker config: ${(l==null?void 0:l.message)||String(l)}.`)}let r=await eV(t);return r?{helper:r}:void 0}async function OR(t,e){let n=t.path.join(await t.homedir(),".docker","config.json");try{let r=await t.readFile(n),o=He(r.toString());return!!(o!=null&&o.credsStore)||Object.keys((o==null?void 0:o.credHelpers)||{}).some(i=>{var s;return(s=o==null?void 0:o.credHelpers)==null?void 0:s[i]})||Object.keys((o==null?void 0:o.auths)||{}).some(i=>{var s,a;return(a=(s=o==null?void 0:o.auths)==null?void 0:s[i])==null?void 0:a.auth})||Zj(t)}catch(r){return(r==null?void 0:r.code)!=="ENOENT"?(e.write(`Error reading Docker config (${n}): ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||String(r)}.`),!1):Zj(t)}}async function Zj(t){let e=await eV(t);return!!e&&await jie(t,`docker-credential-${e}`)}async function eV(t){if(t.platform==="darwin")return"osxkeychain";if(t.platform==="win32")return"wincred";if(t.platform==="linux")try{return await te({exec:t.exec,cmd:"/bin/sh",args:["-c","command -v docker-credential-pass >/dev/null 2>&1"],output:Oe}),"pass"}catch{return"secretservice"}}async function jie(t,e){try{return t.platform==="win32"?!!await oi(e,t.cwd,t.env):(await te({exec:t.exec,cmd:"/bin/sh",args:["-c",`command -v '${e}' >/dev/null 2>&1`],output:Oe}),!0)}catch{return!1}}function Nl(t){return`remote.containers.${t}`}function cs(t){return`dev.containers.${t}`}var MR=Y(require("path"));var Vie=Y(require("http")),Yie=Y(require("https"));function UR(t,e={}){return new Promise((n,r)=>{let o=t.startsWith("https:")?Yie:Vie,i;if(Object.keys(e).length>0){let a=new URL(t);i={headers:e,host:a.host,path:a.pathname}}o.get(i??t,a=>{var c;if(a.statusCode<200||a.statusCode>299){if(a.statusCode===302){let l=(c=a.headers)==null?void 0:c.location;l&&n(UR(l,e))}r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`))}else{a.on("error",r);let l=[];a.on("data",u=>l.push(u)),a.on("end",()=>n(Buffer.concat(l)))}}).on("error",r)})}async function cr(t){let e=await at(MR.join(t,"package.json"),"utf8");return JSON.parse(e)}async function Wv(t){let e=await at(MR.join(t,"product.json"),"utf8"),n=JSON.parse(e);return n.commit||(n.commit=await gp(n.quality)),n.serverDataFolderName||(n.serverDataFolderName=".vscode-server-oss"),n}async function gp(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,n=await UR(e);return JSON.parse(n.toString()).version}function BS(t){return["bin",t.serverApplicationName]}async function Bt(t){return new Promise(e=>setTimeout(e,t))}var kse=JV(),iY=XS(),JR=nY(),Lse=oY(),Ase=["docker","oras","skopeo"];async function n_(t,e,n){var x,b,N,k,$,H;let{cliHost:r,wslCLIHost:o,output:i}=t,{shellServer:s,launchRootShellServer:a}=e,c="Launching Dev Containers helper.",l=i.start(c);if(Ll)return i.stop(c,l),{remoteEnv:{},ready:Promise.resolve(),reconnect:()=>Promise.resolve()};let u=[r];r.type!=="local"&&u.push(await Gr(process.cwd(),t.loadNativeModule,i)),r.type!=="wsl"&&o&&u.push(o);let f=QR.randomUUID(),m={},d=await ZR(u,G=>Wse(G,i)),p=d?lr.posix.join(((x=e.env)==null?void 0:x.TMPDIR)||"/tmp",`vscode-ssh-auth-${f}.sock`):void 0;d&&(m[p]=d,i.write(`ssh-agent: SSH_AUTH_SOCK in container (${p}) forwarded to ${d.cliHost.type} host (${d.unparsed}).`));let h=(b=e.env)!=null&&b.DISPLAY?void 0:Fse(u,G=>jse(G,i)),g=-1,v;if(h)do v=lr.posix.join(((N=e.env)==null?void 0:N.TMPDIR)||"/tmp",".X11-unix",`X${++g}`);while(await Ose(s,v));let C=h?`:${g}`:void 0;h&&(await s.exec(`mkdir -p '${lr.posix.dirname(v)}'`),m[v]=h,i.write(`X11 forwarding: DISPLAY in container (${C}) forwarded to ${h.cliHost.type} host (${h.unparsed}).`));let w=await Aj(e.shellServer,i),y=w?await ZR(u,G=>Fj(G,e.shellServer,w,i)):void 0;y&&(m[y.remoteGpgSocket]={name:"gpg-agent",unparsed:y.localGpgSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localGpgSocket}},i.write(`gpg-agent: Socket in container (${y.remoteGpgSocket}) forwarded to ${y.cliHost.type} host (${y.localGpgSocket}).`),y.localKeyboxdSocket&&y.remoteKeyboxdSocket&&(m[y.remoteKeyboxdSocket]={name:"keyboxd",unparsed:y.localKeyboxdSocket,cliHost:y.cliHost,connectTo:{socketPath:y.localKeyboxdSocket}},i.write(`GPG keyboxd: Socket in container (${y.remoteKeyboxdSocket}) forwarded to ${y.cliHost.type} host (${y.localKeyboxdSocket}).`))),await Vse(e,u,i);let S=lr.posix.join(((k=e.env)==null?void 0:k.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${f}.sock`),P=lr.posix.join((($=e.env)==null?void 0:$.TMPDIR)||"/tmp",`vscode-remote-containers-server-${f}.js`),D=lr.posix.join(((H=e.env)==null?void 0:H.TMPDIR)||"/tmp",`vscode-remote-containers-${f}.js`),O=((n==null?void 0:n.getNewConfiguration("dockerCredentialHelper"))??t.isDockerCredentialHelperEnabled)&&a&&await aY(s,Ase)?lr.posix.join("/usr/local/bin",`docker-credential-${FR}${f}`):void 0,L=u.find(G=>G.type==="local"),E=cY(t,e,"Container",void 0,!1,!1,P,D,O,m,S,L),I=E.then(async G=>{await G.ready,await(y==null?void 0:y.importTasks())}),R=E.then(G=>G.mrpcExec),_=E.then(G=>G.mrpcPtyExec);return I.catch(console.error),t.onAdoptProcess(G=>zse(e.shellServer,S,p,v,G).catch(console.error)),i.stop(c,l),{remoteContainersCLI:D,remoteEnv:{REMOTE_CONTAINERS_IPC:S,...p?{SSH_AUTH_SOCK:p}:void 0,...C?{DISPLAY:C}:void 0,...v?{REMOTE_CONTAINERS_DISPLAY_SOCK:v}:void 0},mrpcExec:R,mrpcPtyExec:_,ready:I,reconnect:()=>E.then(G=>G.reconnect())}}function Fse(t,e){for(let n of t){let r=e(n);if(r)return r}}async function ZR(t,e){for(let n of t){let r=await e(n);if(r)return r}}async function aY(t,e){try{return await t.exec(`(${e.map(n=>`command -v '${n}'`).join(" || ")}) >/dev/null 2>&1`),!0}catch{return!1}}async function Ose(t,e){try{return await t.exec(`test -e ${e}`),!0}catch{return!1}}async function Sp(t,e,n,r,o){let{passwdUser:i,homeFolder:s,nodeExecutable:a,mrpcExec:c,mrpcPtyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}=await cY(t,{remoteExec:e,platform:o},"Host",n,!0,r,void 0);return{passwdUser:i,homeFolder:s,nodeExecutable:a,exec:c,ptyExec:l,setBaseEnv:u,connect:f,reconnect:m,terminate:d}}async function cY(t,e,n,r,o,i,s,a,c,l,u,f){let{cliHost:m,product:d,output:p}=t,{remoteExec:h,platform:g,nodeExecutable:v,launchRootShellServer:C}=e,w=a&&at(lr.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),y=at(lr.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),S=await Wt(h,p,void 0,g,n),P=o?await jf(S,await Al(S)):void 0,D=(await S.exec({posix:"echo ~",win32:"echo $env:userprofile"})).stdout.trim().split(`
`)[0],A=!0;if(!v||!s){let _=S.path.join(D,".vscode-remote-containers");v||(v=await Kse(t,S,_,D,d,i)),s||(s=S.path.join(_,"dist",`vscode-remote-containers-server-${t.package.version}.js`),await dc(S,s)?A=!1:await S.exec(`mkdir -p '${S.path.dirname(s)}'`))}if(a){let _=`EOF-${a}`;await S.exec(`cat <<'${_}' >${a}
${await w}
${_}
`)}if(c&&C&&((m==null?void 0:m.type)!=="local"&&f&&await OR(f,p)||m&&await OR(m,p))){let _=(await S.exec(`cat ~/.docker/config.json || echo "{
}"`)).stdout,x=He(_);if(!(x!=null&&x.credsStore)||x.credsStore.startsWith(FR)){let b=await C(),N=`EOF-${c}`;await b.exec(`mkdir -p ${lr.posix.dirname(c)} && cat <<'${N}' >${c}
#!/bin/sh
${v} ${a} docker-credential-helper $@
${N}
`),await b.exec(`chmod +x ${c}`);let k=Tn(_,["credsStore"],lr.posix.basename(c).substring(18),{formattingOptions:{}}),$=Do(_,k);await S.exec(`mkdir -p ~/.docker && cat <<'${N}' >~/.docker/config.json
${$}
${N}
`)}}if(A){let _=`EOF-${s}`,x=`${s}_${Date.now()}`;await S.exec(`cat <<'${_}' >${x}
${await y}
${_}
mv ${x} ${s}`)}let O=()=>Use(t,n,S,v,s,l,u,f),L=await O(),E;async function I(){let _=`${n}: Reconnecting Dev Container server`,x=p.start(_);await L.terminate().catch(()=>{}),S=await Wt(h,p,void 0,void 0,n),L=await O(),E&&await new Promise((b,N)=>{L.mrpc.setBaseEnv(E,k=>k?N(k):b())}),R(L),p.stop(_,x)}async function R(_){if(await _.reconnect,_===L)try{await I()}catch(x){p.write(`Reconnecting Dev Container server failed: ${(x==null?void 0:x.message)||String(x)}`)}}return R(L),{ready:L.ready,passwdUser:P,nodeExecutable:v,homeFolder:D,mrpcExec:$se(()=>L.mrpc,n,r||D),mrpcPtyExec:Hse(()=>L.mrpc,n,r||D),mrpcExecToEnd:Bse(()=>L.mrpc,n,r||D),setBaseEnv:_=>new Promise((x,b)=>{E=_,L.mrpc.setBaseEnv(_,N=>N?b(N):x())}),connect:L.mrpc.connect,reconnect:I,terminate:()=>L.terminate()}}async function Use(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=Object.keys(i||{}),f={...u.reduce((E,I)=>(E[I]="duplex",E),{}),rpc:"async",connected:"async",ready:"async"},m={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",ptyExec:"async",ptyIn:"sink",ptyOut:"source",ptyResize:"async",ptyExit:"async",ptyTerminate:"async",ptyDispose:"async",execToEnd:"async",setBaseEnv:"async",connect:"duplex"},d=n.process,p=`set -e ; echo -n ${ii} >&2 ; ${s?`rm -f '${s}' ; `:""}REMOTE_CONTAINERS_SOCKETS='${JSON.stringify(u)}' REMOTE_CONTAINERS_IPC='${s||""}' '${r}' '${o}' ; exit
`;d.stdin.write(p);let h,g=new Promise(E=>h=E),v=new sY.StringDecoder;d.stderr.on("data",E=>{let I=v.write(E).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();if(h){let R=I.indexOf(ii);R!==-1&&(h(),h=void 0,I=I.substr(0,R)+I.substr(R+1))}I&&l.write(ot(`${e} server: ${I}`))});let C=!1,w,y=new Promise(E=>w=E);d.exit.then(async({code:E,signal:I})=>{l.write(`${e} server terminated (code: ${E}, signal: ${I}).`),C?(l.write(`${e} server terminated. Reconnecting in 5 seconds...`),await Bt(5*1e3),w()):l.write(`${e} server terminated early. Not reconnecting.`)},E=>{l.write(`${e} server did not launch or terminated: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)});let S=(c==null?void 0:c.type)==="local",P={git:S,docker:S},D,A=new Promise(E=>D=E),O=kse(m,f)({...u.reduce((E,I)=>{let R=i[I];return E[I]=Mse(t,R),E},{}),rpc:async(E,I)=>{try{let{args:R,stdin:_}=JSON.parse(E);if(R[0]==="git-credential-helper"){let x=await Mj(a,c,P.git,R,_);P.git=x.preferLocalCLIHost,I(void 0,JSON.stringify(x.result))}else if(R[0]==="docker-credential-helper"){let x=await Qj(a,c,P.docker,R,_,l);P.docker=x.preferLocalCLIHost,I(void 0,JSON.stringify(x.result))}}catch(R){console.error(R),I(R)}},connected:E=>{E()},ready:E=>{C=!0,D(),E()}});(0,QS.default)(iY.source(d.stdout),O.createStream(),iY.sink(d.stdin)),await Promise.race([g,d.exit.then(({code:E,signal:I})=>{throw new Error(`${e} server terminated (code: ${E}, signal: ${I}).`)})]);function L(){return C=!1,d.terminate()}return{ready:A,mrpc:O,terminate:L,reconnect:y}}function Mse(t,e){let{sendTelemetryEvent:n,output:r}=t,o=!1;function i(s){if(!o&&s instanceof Error&&s.code==="ENOENT"&&(o=!0,r.event({type:"notification",message:eN.t("Could not connect to {0} on {1} host ({2}). Make sure the service is running.",e.name,e.cliHost.type,e.unparsed)}),n)){let a={serviceName:e.name,hostType:e.cliHost.type,hostPlatform:e.cliHost.platform},c=e.cliHost.authority;if(c){let l=c.indexOf("+");l!==-1&&(a.hostAuthority=c.substring(0,l))}n("serviceConnectionFailure",a)}}return()=>{let s=e.cliHost.connect(e.connectTo);return{sink:a=>{s.sink((c,l)=>{i(c),a(c,l)})},source:(a,c)=>{s.source(a,(l,u)=>{i(l),c(l,u)})}}}}function $se(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((d,p)=>{f.exec({cmd:o,args:i,cwd:s||n,env:a},(h,g)=>{h?p(h):d(g)})});return{stdin:JR.sink(f.stdin(m,d=>{d&&d.message!=="unexpected end of parent stream"&&console.error(d)})),stdout:JR.source(f.stdout(m)),stderr:JR.source(f.stderr(m)),exit:new Promise((d,p)=>{f.exit(m,(h,g)=>{var v;c.stop(l,u),h?((v=h.message)!=null&&v.endsWith("ENOENT")&&!h.code&&(h.code="ENOENT"),p(h)):d(g)})}),terminate:async()=>new Promise((d,p)=>{f.terminate(m,h=>{h?p(h):d()})})}}}function Hse(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t(),m=await new Promise((g,v)=>{var C,w;f.ptyExec({cmd:o,args:i,cwd:s||n,env:a,rows:(C=c.dimensions)==null?void 0:C.rows,cols:(w=c.dimensions)==null?void 0:w.columns},(y,S)=>{y?v(y):g(S)})}),d=[c.onDidChangeDimensions&&c.onDidChangeDimensions(g=>f.ptyResize(m,g.columns,g.rows))],p=Lse();(0,QS.default)(p,f.ptyIn(m,g=>{g&&g.message!=="unexpected end of parent stream"&&console.error(g)}));let h=new Os;return(0,QS.default)(f.ptyOut(m),g=>{g(null,function v(C,w){if(C!==!0){if(C)throw C;h.fire(w),g(null,v)}})}),{write:g=>p.push(g),onData:h.event,resize:(g,v)=>f.ptyResize(m,g,v),exit:new Promise((g,v)=>{f.ptyExit(m,(C,w)=>{d.forEach(y=>y==null?void 0:y.dispose()),c.stop(l,u),C?v(C):g(w)})}),terminate:async()=>new Promise((g,v)=>{f.ptyTerminate(m,C=>{C?v(C):g()})})}}}function Bse(t,e,n){return async r=>{let{cmd:o,args:i,cwd:s,env:a,output:c}=r,l=`Run in ${e}: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,u=c.start(l),f=t();return new Promise((m,d)=>{f.execToEnd({cmd:o,args:i,cwd:s||n,env:a},(p,h)=>{if(c.stop(l,u),p||!h)d({stdin:new kl.Writable,stdout:kl.Readable.from([]),stderr:kl.Readable.from([]),exit:Promise.reject(p),terminate:async()=>{}});else{let g=kl.Readable.from([Buffer.from(h.stdout.data)]),v=new Promise(y=>g.on("end",y)),C=kl.Readable.from([Buffer.from(h.stderr.data)]),w=new Promise(y=>C.on("end",y));m({stdin:new kl.Writable,stdout:g,stderr:C,exit:Promise.all([v,w]).then(()=>({code:h.code,signal:h.signal})),terminate:async()=>{}})}})})}}var Yv="\\\\.\\pipe\\openssh-ssh-agent";async function tN(t){return t.platform==="win32"&&t.isFile(Yv)}async function Wse(t,e){let n=t.env.SSH_AUTH_SOCK;if(n)return{name:"ssh-agent",unparsed:n,cliHost:t,connectTo:{socketPath:n}};if(e.write(`ssh-agent: SSH_AUTH_SOCK not set on ${t.type} host.`),await tN(t))return{name:"ssh-agent",unparsed:Yv,cliHost:t,connectTo:{socketPath:Yv}}}function jse(t,e){let n=t.env.DISPLAY,r=n==null?void 0:n.match(/^(?<hostOrPath>[^:]+)?:(?<display>\d+)(?:\.(?<screen>\d+))?$/);if(r!=null&&r.groups){let{hostOrPath:o,display:i}=r.groups,s=eN.t("X11 display");return!o||o==="localhost/unix"?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`/tmp/.X11-unix/X${i}`}}:o.startsWith("/")?{name:s,unparsed:n,cliHost:t,connectTo:{socketPath:`${o}:${i}`}}:{name:s,unparsed:n,cliHost:t,connectTo:{host:o,port:6e3+parseInt(i,10)}}}n?e.write(`X11 forwarding: DISPLAY value on ${t.type} host not supported (${n}).`):e.write(`X11 forwarding: DISPLAY not set on ${t.type} host.`)}async function nN(t){let e=t.env.WAYLAND_DISPLAY,n=t.env.XDG_RUNTIME_DIR,r=e&&t.path.isAbsolute(e)?e:e&&n&&t.path.join(n,e),o=n&&t.path.join(n,"wayland-0"),i=r||o;if(i&&await t.isSocket(i))return i}async function lY(t){let e=QR.randomUUID();return lr.posix.join((t==null?void 0:t.TMPDIR)||"/tmp",`vscode-wayland-${e}.sock`)}async function uY(t,e){let{shellServer:n,remoteWaylandSocket:r}=t;if(!r||e.WAYLAND_DISPLAY)return{};let o=e.XDG_RUNTIME_DIR;o||(o=(await n.exec('umask 077 && XRD="/tmp/user/$(id -u)" && mkdir -p $XRD && echo $XRD')).stdout.trim());let i=lr.posix.basename(r);return await n.exec(`test -e ${o}/${i} || ln -sf ${r} ${o}/${i}`),o===e.XDG_RUNTIME_DIR?{WAYLAND_DISPLAY:i}:{XDG_RUNTIME_DIR:o,WAYLAND_DISPLAY:i}}async function Vse(t,e,n){let r="Checking for GitHub CLI",o=n.start(r);await aY(t.shellServer,["gh"])&&(async()=>{let s="Setting up GitHub CLI",a=n.start(s);try{if(!await qse(t.remoteExec,n)){let l=await ZR(e,u=>Yse(u.exec,n))||void 0;l&&await Gse(t.remoteExec,l,n)}}catch(c){n.write(`Error setting up GitHub CLI: ${(c==null?void 0:c.stack)||(c==null?void 0:c.message)||String(c)}`)}finally{n.stop(s,a)}})(),n.stop(r,o)}async function Yse(t,e){try{let{stdout:n}=await te({exec:t,cmd:"gh",args:["auth","token"],output:e});return n.toString().trim()}catch{return}}async function qse(t,e){try{return await te({exec:t,cmd:"gh",args:["auth","status"],output:e}),!0}catch{return!1}}async function Gse(t,e,n){try{await te({exec:t,cmd:"gh",args:["auth","login","--with-token"],stdin:Buffer.from(e),output:n})}catch{}}var wp=new Set;async function zse(t,e,n,r,o){let i=await o.processId;if(i&&i>0){let s=await Vj(t,i),a=s.REMOTE_CONTAINERS_IPC;a&&a!==e&&!wp.has(a)&&a.indexOf("vscode-remote-containers-ipc")!==-1&&(wp.add(a),await t.exec(`rm '${a}' && ln -s '${e}' '${a}'`));let c=s.SSH_AUTH_SOCK;c&&n&&c!==n&&!wp.has(c)&&c.indexOf("vscode-ssh-auth")!==-1&&(wp.add(c),await t.exec(`rm '${c}' && ln -s '${n}' '${c}'`));let l=s.REMOTE_CONTAINERS_DISPLAY_SOCK;l&&r&&l!==r&&!wp.has(l)&&(wp.add(l),await t.exec(`rm '${l}' && ln -s '${r}' '${l}'`))}}async function Kse(t,e,n,r,o,i){let s=o.commit||await gp(o.quality),a=o.commit?o.quality||"insider":"stable",c=lr.posix,l=`${a.substring(0,1).toUpperCase()}${a.substring(1)}${a==="insider"?"s":""}-${s}`,u=P=>dc(e,P),f=c.join(Cp(c,r,o),"cli","servers",l,"server");if(await ZS(f,u))return yp(f);let m=c.join(rN(c,r,o),"cli","servers",l,"server");if(await ZS(m,u))return yp(m);let d=c.join(Cp(c,r,o),"bin",s);if(await ZS(d,u))return yp(d);let p=c.join(n,"bin",s);if(await ZS(p,u))return yp(p);let{localCacheFolder:h,output:g,alternateDownload:v}=t,C;if((await e.exec("uname -s")).stdout.trim().split(`
`)[0]==="Darwin")C=(await e.exec("uname -m")).stdout.trim()==="arm64"?e_.arm64:e_.x64;else{let P=await oN(e);C=r_(P,!1)}let y={localCacheFolder:h,build:C,commit:s,quality:a,web:!1,output:g,alternateDownload:v,legacy:!1},S=_p(y);if(await Er(S)||await Gv(y),C.id==="darwin")await qv({output:g},e,S,p,i);else{let P=[];await t_.t({file:S,filter:A=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(A),onentry:A=>{new t_.WriteEntry.Tar(A).on("data",L=>P.push(L))}});let D=Buffer.concat(P);await qv({output:g},e,D,p,i,!1)}return yp(p)}async function ZS(t,e){let n=yp(t),r=lr.posix.join(t,"node_modules","node-pty","package.json");return await e(n)&&await e(r)}function yp(t){return lr.posix.join(t,"node")}var zv=Y(require("net"));var Kv=XS(),iN=t=>{if("port"in t)return Kv.duplex(zv.connect(t.port,t.host));let e=t.socketPath;if(process.platform!=="win32"||e.startsWith("\\\\.\\pipe\\"))return Kv.duplex(zv.connect(e));let n=new zv.Socket;return Zse(n,e)};function Xse(t){let e=[];return t.split("-").map(n=>{let r=n.match(/.{2}/g);r!==null&&r.reverse().map(o=>{e.push(parseInt(o,16))})}),Buffer.from(e)}function Jse(t,e,n){return e||n===void 0?{headerSize:t,err:e}:t===0?{headerSize:t,data:n}:n.length>t?(n=n.slice(t,n.length),t=0,{headerSize:t,data:n}):(t=t-n.length,{headerSize:t})}function Zse(t,e){let n=0,r=[],o=[],i,s=u=>{u instanceof Error&&console.error(u),t.destroy();for(let f of r)f.cb(u,void 0);r=[];for(let f of o)f(u,(m,d)=>{});o=[]};function a(u,f){i.source(u,function(m,d){let p=Jse(n,m,d);n=p.headerSize,p.err||p.data?f(p.err||null,p.data):a(u,f)})}return(async()=>{let u=await at(e),m=u.toString().match(/!<socket >(\d+)( s)? ((([A-Fa-f0-9]{2}){4}-?){4})/),d,p;if(m!==null){let h=m[1],g=m[3];d=parseInt(h,10);let v=Xse(g),C=Buffer.alloc(12);C.writeUInt32LE(process.pid,0),p=Buffer.concat([v,C]),n=16+3*4}else{let h=u.indexOf(10);d=parseInt(u.slice(0,h).toString(),10),p=u.slice(h+1),n=0}t.on("error",h=>{s(h)}),t.connect(d,"127.0.0.1",()=>{t.write(p,h=>{if(!h){i=Kv.duplex(t);for(let g of r)a(g.abort,g.cb);r=[];for(let g of o)i.sink(g);o=[]}})})})().catch(u=>{s(u)}),{source:function(u,f){i!==void 0?a(u,f):r.push({abort:u,cb:f})},sink:function(u){i!==void 0?i.sink(u):o.push(u)}}}function fY(t,e,n){return r=>{let o=(async()=>{let i="port"in r?`{ host: '${r.host}', port: ${r.port} }`:`{ path: '${r.socketPath}' }`,s=await e({cmd:t,args:["-e",`// Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host.
const net = require('net');
const fs = require('fs');
process.stdin.pause();
const client = net.createConnection(${i}, () => {
	console.error('Connection established');
	client.pipe(process.stdout);
	process.stdin.pipe(client);
});
client.on('close', function (hadError) {
	console.error(hadError ? 'Remote close with error' : 'Remote close');
	process.exit(hadError ? 1 : 0);
});
client.on('error', function (err) {
	process.stderr.write(err && (err.stack || err.message) || String(err));
});
process.stdin.on('close', function (hadError) {
	console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
	process.exit(hadError ? 1 : 0);
});
process.on('uncaughtException', function (err) {
	fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
});
`],output:on(n,1)});return s.exit.then(({code:a,signal:c})=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with code ${a} and signal ${c}.`,1)},a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host terminated with error: ${a&&a.message||String(a)}`)}),s.stderr.on("data",a=>{n.write(`Connection forwarding to ${"port"in r?`${r.host}:${r.port}`:r.socketPath} on remote host stderr: ${a.toString("utf8")}`,1)}),{sink:Kv.sink(s.stdin),source:Kv.source(s.stdout)}})();return{sink:i=>{o.then(s=>s.sink(i),s=>i(s,()=>{})).catch(s=>n.write(`Connection forwarding to sink error: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||String(s)}`))},source:(i,s)=>{o.then(a=>a.source(i,s),a=>s(a)).catch(a=>n.write(`Connection forwarding to source error: ${(a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a)}`))}}}}var o_=!1;function Vf(t,e,n){return o_?function(o){return Qse(t(o),`${e} ${JSON.stringify(o)}`,n)}:t}function Qse(t,e,n){return o_?{source:dY(t.source,`${e} Source`,n),sink:eae(t.sink,`${e} Sink`,n)}:t}function dY(t,e,n){return o_?function(o,i){n.write(`${e} end in (${typeof o}${o&&typeof o=="object"?`: ${Object.keys(o)}`:""}): ${o&&typeof o=="object"&&o.stack||o}`),t(o,function(a,c){n.write(`${e} end out (${typeof a}${a&&typeof a=="object"?`: ${Object.keys(a)}`:""}): ${a&&typeof a=="object"&&a.stack||a}`),n.write(`${e} data: ${c==null?void 0:c.toString("hex")}`),i(a,c)})}:t}function eae(t,e,n){return o_?function(o){t(dY(o,e,n))}:t}var sN=Y($r()),hY=/^\\\\wsl(\.localhost|\$)?\\/;function xr(t){return hY.test(t.toLowerCase())}function Yf(t){let e=t.toLowerCase(),n=hY.exec(e);if(!n)return"";let r=e.indexOf("\\",n[0].length);return t.substring(n[0].length,r)}async function Xv(t){let{stdout:e}=await te({exec:us(void 0),cmd:"wsl",args:["-l","-v"],output:t}),n=e.toString(e[1]===0?"utf16le":"utf8").trim();return(/^\*\s*(\S+)/m.exec(n)||[])[1]}async function Fl(t,e,n){let{stdout:r}=await te({exec:us(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:n}),o=r.toString().trim();if(o.startsWith("/mnt/wsl/")&&e.match(/^[a-zA-Z]:/)){let i=`/mnt/${e[0].toLowerCase()}${e.substring(2).replace(/\\/g,"/")}`;try{return await te({exec:us(void 0),cmd:"wsl",args:["-d",t,"-e","test","-e",i],output:n}),i}catch(s){(s==null?void 0:s.code)!==1&&n.write(`Error checking WSL path: ${(s==null?void 0:s.stack)||(s==null?void 0:s.message)||s}`)}}return o}async function tae(t,e){let{stdout:n}=await te({exec:us(void 0),cmd:"wsl",args:["-d",t,"-e","/bin/sh","-c","echo ~"],output:e});return n.toString().trim()}async function gY(t,e,n){let{stdout:r}=await te({exec:t.exec,cmd:"wslpath",args:["-w",e],output:n});return r.toString().trim()}async function xp(t,e){let n=Yf(t),r=await Fl(n,t,e);return Ce.parse(`vscode-remote://wsl+${n}${r}`)}function Dp(t){if(t.scheme==="vscode-remote"){let e=i_(t.authority);if(e){let n=t.path;return Mv(n)&&(n=mY.posix.dirname(n)),{wslDistro:e,wslPath:n}}}}function i_(t){return(/wsl\+(.*)/.exec(t)||[])[1]}async function s_(t,e,n,r,o,i,s,a){var p;let{distro:c,cwd:l}=await aN(t,e,s);pY.ok(!c.startsWith("-"),sN.t("Distro must not start with a dash: {0}",c));let u=qf("wsl",["-d",c,"-e"],l),f=await Sp({extensionPath:n,localCacheFolder:r,package:await cr(n),product:o,loadNativeModule:i,output:s,alternateDownload:a},u,l,!1),m=await Gf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:s},{shell:((p=f.passwdUser)==null?void 0:p.shell)||"/bin/sh",remoteExec:f.exec});delete m.WSL_INTEROP,await f.setBaseEnv(m);let d=so("wsl",l,m,f.exec,f.ptyExec,Vf(f.connect,"WSL",s),f.nodeExecutable,s);return d.toCommonURI=async h=>{try{return Ce.file((await te({exec:f.exec,cmd:"wslpath",args:["-w",h],output:s})).stdout.toString().trim())}catch{return}},d.reconnect=()=>f.reconnect(),d.terminate=()=>f.terminate(),d}async function aN(t,{defaultDistro:e},n){let r,o;return typeof t=="object"?(r=t.wslDistro,o=t.wslPath):t&&xr(t)?(r=Yf(t),o=await Fl(r,t,n)):(r=e||await Xv(n)||(()=>{throw new Ee({description:sN.t("No default WSL distro found.")})})(),o=t?await Fl(r,t,n):await tae(r,n)),{distro:r,cwd:o}}function zf(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}async function vY(t,e,n,r,o){try{return(await Yn(e,{posix:te({exec:t,cmd:"cat",args:[r],output:o}),win32:te({exec:t,cmd:n,args:["-e",`require('fs').createReadStream('${r.replace(/\\/g,"\\\\")}').pipe(process.stdout)`],output:o})})).stdout}catch(i){let s=new Error(`Could not read file: ${r}`);throw s.originalError=i,s.code="ENOENT",s}}async function wY(t,e,n,r,o,i){await Yn(e,{posix:te({exec:t,cmd:"dd",args:[`of=${r}`],stdin:o,output:i}),win32:te({exec:t,cmd:n,args:["-e",`process.stdin.pipe(require('fs').createWriteStream('${r.replace(/\\/g,"\\\\")}'))`],stdin:o,output:i})})}async function a_(t,e,n,r,o){await Yn(e,{posix:()=>te({exec:t,cmd:"mv",args:["-n",n,r],output:o}),win32:()=>te({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Move-Item -Path '${n}' -Destination '${r}'`],env:ao(),output:o})})()}async function c_(t,e,n,r,o){let{recursive:i,force:s}=r;await Yn(e,{posix:()=>te({exec:t,cmd:"rm",args:[i&&"-r",s&&"-f",n].filter(Boolean),output:o}),win32:()=>te({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`Remove-Item${i?" -Recurse":""}${s?" -Force":""} '${n}'`],env:ao(),output:o})})()}async function l_(t,e,n,r){await Yn(e,{posix:()=>te({exec:t,cmd:"mkdir",args:["-p",n],output:r}),win32:()=>te({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`New-Item -ItemType Directory '${n}'`],env:ao(),output:r})})()}async function yY(t,e,n,r){return(await Yn(e,{posix:()=>te({exec:t,cmd:"ls",args:["-a",n],output:r}),win32:()=>te({exec:t,cmd:"powershell",args:["-NoProfile","-Command",`(Get-ChildItem '${n}').Name`],env:ao(),output:r})})()).stdout.toString().trim().split(/\r?\n/).filter(i=>i!=="."&&i!=="..")}var lN=Y(require("path")),d_=Y(require("os")),m_=Y(require("crypto"));var CY=Y(require("os")),u_=Y(require("assert")),f_=Y($r());async function EY(t,e,n,r,o,i,s,a,c,l){var v;let u=t.substr(6),f=u.indexOf(":"),m=[(l==null?void 0:l.settings.executablePath)||"ssh"];if(l!=null&&l.settings.executableArgs&&m.push(...l.settings.executableArgs),l!=null&&l.settings.configFilePath&&m.push("-F",nae(l==null?void 0:l.settings.configFilePath)),f!==-1){let C=u.substr(f+1);u_.ok(!C.startsWith("-"),f_.t("Port number must not start with a dash: {0}",C));let w=u.substr(0,f);u_.ok(!w.startsWith("-"),f_.t("Hostname must not start with a dash: {0}",w)),m.push("-p",C,w)}else u_.ok(!u.startsWith("-"),f_.t("Hostname must not start with a dash: {0}",u)),m.push(u);let d=qf(m[0],m.slice(1),void 0,await(l==null?void 0:l.sshAskpassEnv)||{}),p=await Sp({extensionPath:r,localCacheFolder:o,package:await cr(r),product:i,loadNativeModule:s,output:a,alternateDownload:c},d,e,!1),h=await Gf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:a},{shell:((v=p.passwdUser)==null?void 0:v.shell)||"/bin/sh",remoteExec:p.exec});await p.setBaseEnv(h);let g=so("remote",e||p.homeFolder,h,p.exec,p.ptyExec,p.connect,p.nodeExecutable,a);return g.toCommonURI=()=>Promise.resolve(void 0),g.reconnect=()=>p.reconnect(),g.terminate=()=>p.terminate(),g}function nae(t){return t.replace(/^~($|\/|\\)/,`${CY.homedir()}$1`)}function Jv(t,e){let n=rae(t);if(n)return Ce.parse(`vscode-remote://${cN(n)}${e}`)}function cN(t){let e=t.hostName;if(t.user||t.hostName.toLowerCase()!==t.hostName||t.port||t.hostName.match(/[\/\\\+]/)){let n=JSON.stringify(t);e=Buffer.from(n,"utf8").toString("hex")}return`ssh-remote+${e}`}function rae(t){if(!t.startsWith("ssh://"))return;let e=t.substr(6);return SY(e)}function SY(t){let e=t.match(/^(?:(.*)@)?(.+?)(?::(\d+))?$/);if(e){let[,n,r,o]=e;return{hostName:r,user:n,port:o?parseInt(o,10):void 0}}return{hostName:t}}function Ol(t){var e;return!!(t&&"host"in t&&((e=t.host)!=null&&e.startsWith("ssh://")))}function Ul(t){return!!(t!=null&&t.startsWith("ssh-remote+"))}function Zv(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let n=e[1];try{let r=JSON.parse(Buffer.from(n,"hex").toString("utf8"));if(r&&r.hostName)return r}catch{}return SY(n)}var oae=!1;async function uN(t,e,n,r,o,i,s,a,c,l){return t!=null&&t.startsWith("ssh://")&&!(l!=null&&l.localDocker)?EY(t,e,r,o,i,s,n,a,c,l):typeof e=="object"||r.executeInWSL==="forWSLPath"&&e&&xr(e)||r.executeInWSL==="always"?s_(e,r,o,i,s,n,a,c):oae?iae(e||process.cwd(),o,i,s,n,a,c):Gr(e||process.cwd(),n,a)}async function Gr(t,e,n=Oe){let r=us(t),o=await xY(t,e);return _Y(t,r,o,n?Vf(iN,"Local",n):iN,e,n)}async function iae(t,e,n,r,o,i,s){let a=us(t),c=await Sp({extensionPath:e,localCacheFolder:n,package:await cr(e),product:r,loadNativeModule:o,output:i,alternateDownload:s},a,t,!0,process.platform);return _Y(t,c.exec,c.ptyExec,Vf(c.connect,"Local Test",i),o,i)}function so(t,e,n,r,o,i,s,a){let c,l,u;return{type:t,platform:"linux",exec:r,ptyExec:o,cwd:e,env:n,path:lN.posix,async homedir(){if(typeof l>"u"){let m=(await te({exec:r,cmd:"id",args:["-u"],output:Oe})).stdout.toString().trim(),d=await Wt(r,Oe,void 0,"linux","Host"),p=await jf(d,m);l=this.env.HOME||(p==null?void 0:p.home)||"/"}return l},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async f=>{try{return await te({exec:r,cmd:"test",args:["-f",f],output:Oe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isFolder:async f=>{try{return await te({exec:r,cmd:"test",args:["-d",f],output:Oe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},isSocket:async f=>{try{return await te({exec:r,cmd:"test",args:["-S",f],output:Oe}),!0}catch(m){if((m==null?void 0:m.code)!==1)throw m;return!1}},readFile:async f=>{try{return(await te({exec:r,cmd:"cat",args:[f],output:Oe})).stdout}catch(m){let d=new Error(`Could not read file: ${f}`);throw d.originalError=m,d.code="ENOENT",d}},writeFile:async(f,m)=>{await te({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${f}'`],stdin:m,output:Oe})},rename:async(f,m)=>{await te({exec:r,cmd:"mv",args:[f,m],output:Oe})},rm:async(f,{recursive:m,force:d}={})=>{await te({exec:r,cmd:"rm",args:[...m?["-r"]:[],...d?["-f"]:[],f],output:Oe})},mkdirp:async f=>{await te({exec:r,cmd:"mkdir",args:["-p",f],output:Oe})},readDir:async f=>(await te({exec:r,cmd:"ls",args:["-a",f],output:Oe})).stdout.toString().trim().split(`
`).filter(m=>m!=="."&&m!==".."),readDirWithTypes:async f=>{let m={f:1,"*":1,"/":2,"@":64};return(await te({exec:r,cmd:"ls",args:["-aF",f],output:Oe})).stdout.toString().trim().split(`
`).map(d=>"/*@=%|>".indexOf(d[d.length-1])!==-1?[d.substr(0,d.length-1),d[d.length-1]]:[d,"f"]).filter(([d])=>d!=="."&&d!=="..").map(([d,p])=>[d,m[p]||0])},getUsername:async()=>(c===void 0&&(c=(await te({exec:r,cmd:"id",args:["-u","-n"],output:Oe})).stdout.toString().trim()),c),toCommonURI:()=>Promise.resolve(void 0),connect:i,locateCertificatesFile:function(){return u||(u=p_(this,void 0,a))},nodeExecutable:s}}function _Y(t,e,n,r,o,i){let s;return{type:"local",platform:process.platform,exec:e,ptyExec:n,cwd:t,env:process.env,path:lN,homedir:async()=>d_.homedir(),tmpdir:async()=>d_.tmpdir(),isFile:Er,isFolder:I1,isSocket:P1,readFile:at,writeFile:Vg,rename:il,rm:al,mkdirp:async a=>{await ns(a)},readDir:sl,getUsername:h_,toCommonURI:async a=>Ce.file(a),connect:r,locateCertificatesFile:function(){return s||(s=p_(this,o,i))}}}var sae=["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt","/etc/ssl/ca-bundle.pem"];async function p_(t,e,n){if(t.env.NODE_EXTRA_CA_CERTS&&await t.isFile(t.env.NODE_EXTRA_CA_CERTS))return t.env.NODE_EXTRA_CA_CERTS;if(t.platform==="linux"){for(let c of sae)if(await t.isFile(c))return c;return}if(t.type!=="local")return;let r=await(e==null?void 0:e("@vscode/proxy-agent"));if(!(r!=null&&r.loadSystemCertificates))return;let o=await r.loadSystemCertificates({log:{trace(c,...l){n.write(c,1)},debug(c,...l){n.write(c,2)},info(c,...l){n.write(c,3)},warn(c,...l){n.write(c,4)},error(c,...l){n.write(typeof c=="string"?c:String(c),5)}}});if(!o.length)return;let i=Buffer.from(o.join(t.platform==="win32"?`\r
`:`
`)),s=m_.createHash("sha256").update(i).digest("hex"),a=t.path.join(await Qv(t),`certificates-${s}.pem`);if(!await t.isFile(a)){await t.mkdirp(t.path.dirname(a));let c=`${a}-${m_.randomUUID()}`;await t.writeFile(c,i),await t.rename(c,a)}return a}var aae=g_.join(__dirname,"..","..","node_modules",".bin","ts-node"),Ll=g_.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function te(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,print:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((u,f)=>{let m=[],d=[],p=c==="continuous"?new ew.StringDecoder:void 0;l.stdout.on("data",v=>{m.push(v),c==="continuous"&&a.write(p.write(v))}),l.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let h=c==="continuous"?new ew.StringDecoder:void 0;l.stderr.on("data",v=>{d.push(v),c==="continuous"&&a.write(ot(h.write(v)))}),l.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=[];l.exit.then(({code:v})=>{try{g.forEach(y=>y.dispose());let C=Buffer.concat(m),w=Buffer.concat(d);(c===!0||v&&c==="onerror")&&(a.write(C.toString().replace(/\r?\n/g,`\r
`)),a.write(ot(w.toString()))),c&&v&&a.write(`Exit code ${v}`),v?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,stdout:C,stderr:w,code:v}):u({stdout:C,stderr:w})}catch(C){f(C)}},v=>{c&&(v!=null&&v.message)&&a.write(ot(v==null?void 0:v.message)),f(v)}),s instanceof Buffer?(l.stdin.write(s,v=>{v&&f(v)}),l.stdin.end()):s instanceof DY.Readable?s.pipe(l.stdin):typeof s=="function"&&g.push(s(v=>l.stdin.write(v)))})}async function Fi(t){let{ptyExec:e,cmd:n,args:r,cwd:o,env:i,output:s,resolveOn:a,onDidInput:c}=t,l=await e({cmd:n,args:r,cwd:o,env:i,output:s});return new Promise((u,f)=>{let m="",d=[c&&c(p=>l.write(p))];l.onData(p=>{m+=p,s.raw(p),a&&a.exec(m)&&u({cmdOutput:m})}),l.exit.then(({code:p,signal:h})=>{try{d.forEach(g=>g==null?void 0:g.dispose()),p||h?f({message:`Command failed: ${n} ${(r||[]).join(" ")}`,cmdOutput:m,code:p,signal:h}):u({cmdOutput:m})}catch(g){f(g)}},p=>{p!=null&&p.message&&s.write(ot(p==null?void 0:p.message)),d.forEach(h=>h==null?void 0:h.dispose()),f(p)})})}var cae={SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGEMT:void 0,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGSTKFLT:16,SIGCHLD:17,SIGCLD:void 0,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGINFO:void 0,SIGLOST:void 0,SIGSYS:31,SIGUNUSED:31};function us(t){return async function(e){let{cmd:n,args:r,output:o}=e,i=`Run: ${n} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,s=o.start(i),a=e.cwd||t,c=e.env?{...process.env,...e.env}:process.env,l=await oi(n,a,c),u=Ip.spawn(l,r,{cwd:a,env:c,windowsHide:!0});return{stdin:u.stdin,stdout:u.stdout,stderr:u.stderr,exit:new Promise((f,m)=>{u.once("error",d=>{o.stop(i,s),m(d)}),u.once("close",(d,p)=>{o.stop(i,s),f({code:d,signal:p})})}),async terminate(){u.kill("SIGKILL")}}}}async function xY(t,e){let n=await e("node-pty");if(!n)throw new Error("Missing node-pty");return async function(r){var h,g;let{cmd:o,args:i,output:s}=r,a=`Run: ${o} ${(i||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),l=!1,u=r.cwd||t,f=r.env?{...process.env,...r.env}:process.env,m=await oi(o,u,f),d=n.spawn(m,i||[],{cwd:u,env:f,cols:(h=s.dimensions)==null?void 0:h.columns,rows:(g=s.dimensions)==null?void 0:g.rows,useConpty:l}),p=[s.onDidChangeDimensions&&s.onDidChangeDimensions(v=>d.resize(v.columns,v.rows))];return{onData:d.onData.bind(d),write:d.write.bind(d),resize:d.resize.bind(d),exit:new Promise(v=>{d.onExit(({exitCode:C,signal:w})=>{if(p.forEach(y=>y==null?void 0:y.dispose()),s.stop(a,c),v({code:C,signal:w}),process.platform==="win32")try{d.kill()}catch{}})}),async terminate(){d.kill("SIGKILL")}}}}function PY(t){let e=async function(n){let r=await t(n),o=new Os;if(r.stdout){let i=new ew.StringDecoder;r.stdout.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stdout.on("close",()=>{let s=i.end();s&&o.fire(s)})}if(r.stderr){let i=new ew.StringDecoder;r.stderr.on("data",s=>o.fire(i.write(s).replaceAll(/\r?\n/g,`\r
`))),r.stderr.on("close",()=>{let s=i.end();s&&o.fire(s)})}return{onData:o.event,write:r.stdin.write.bind(r.stdin),resize:()=>{},exit:r.exit.then(({code:i,signal:s})=>({code:typeof i=="number"?i:void 0,signal:typeof s=="string"?cae[s]:void 0})),terminate:r.terminate.bind(r)}};return e.isTTY=!1,e}function qf(t,e,n,r){return async function(o){let{env:i,cmd:s,args:a,output:c}=o,l=o.cwd||n,u=l?`cd '${l}' && `:"",f=Object.keys(i||{}).map(y=>i[y]===void 0?"":`${y}='${i[y]}' `).join(""),m=(a||[]).map(y=>` '${y.replace(/'/g,`'"'"'`)}'`).join(""),d=`${u}${f}${s}${m}`,p=d!==s?["/bin/sh","-c",d]:[d],h=[...e,...p],g=`Run: ${t} ${h.join(" ").replace(/\n.*/g,"")}`,v=c.start(g),C=await oi(t,process.cwd(),process.env),w=Ip.spawn(C,h,{windowsHide:!0,env:r?{...process.env,...r}:void 0});return{stdin:w.stdin,stdout:w.stdout,stderr:w.stderr,exit:new Promise((y,S)=>{w.once("error",P=>{c.stop(g,v),S(P)}),w.once("close",(P,D)=>{c.stop(g,v),y({code:P,signal:D})})}),async terminate(){w.kill("SIGKILL")}}}}function v_(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(e)return e[1].split(".").map(n=>parseInt(n,10))}function w_(t,e){for(let n=0,r=Math.max(t.length,e.length);n<r;n++){let o=t[n]||0,i=e[n]||0;if(o!==i)return o<i}return!1}var bY=Ll?(t,e,n)=>Ip.spawn(aae,[t,...e||[]],{...n,windowsHide:!0}):Ip.fork;async function Kf(t,e){if(!e){try{return require(t)}catch{}return}try{return require(`${e}/node_modules.asar/${t}`)}catch{}try{return require(`${e}/node_modules/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules.asar/${t}`)}catch{}try{return __non_webpack_require__(`${e}/node_modules/${t}`)}catch{}}function TY(t){let{output:e}=t,n=[];return{output:on({...e,get dimensions(){return e.dimensions},event:o=>n?n.push(o):e.event(o)}),flush:()=>{n&&(n.forEach(o=>e.event(o)),n=void 0)}}}function RY(t,e,n){return on({...t,get dimensions(){return t.dimensions},event:o=>{o.channel===e&&t.event(o),n.event(o)}})}function Yn(t,e){return e&&typeof e=="object"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function dc(t,e){return Yn(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var fN;async function h_(){return fN===void 0&&(fN=(async()=>{try{return IY.userInfo().username}catch(t){if(process.platform!=="linux")throw t;return(await te({exec:us(void 0),cmd:"id",args:["-u","-n"],output:Oe})).stdout.toString().trim()}})()),fN}function NY(t){let e=t.replace(/['\\]/g,"\\$&"),n=zf(t).replaceAll("'","\\'");return` (command -v getent >/dev/null 2>&1 && getent passwd '${e}' || grep -E '^${n}|^[^:]*:[^:]*:${n}:' /etc/passwd || true)`}async function kY(t,e,n,r,o,i){let s="Extracting tarball",a=i.start(s),c=`${r}_${Date.now()}`;try{await l_(t,e,c,i);let l=n instanceof Buffer?n:await(async()=>{let u=[];for await(let f of n)u.push(f);return Buffer.concat(u)})();await te({exec:t,cmd:"tar",args:["--no-same-owner",`-x${o?"z":""}`,"--strip-components","1","-C",c],stdin:l,output:i,print:"continuous"}),await a_(t,e,c,r,i)}catch(l){try{await c_(t,e,c,{recursive:!0,force:!0},i)}catch{}throw l}finally{i.stop(s,a)}}async function Qv(t){return t.path.join(await t.tmpdir(),t.platform==="linux"?`vsch-${await t.getUsername()}`:"vsch")}async function y_(t,e){let{output:n}=t,r=await Wt(e.remoteExec,n);try{for(let i=0;i<3;i++){let s=Date.now();await r.exec("echo ping!"),n.write(`Roundtrip ${i+1} to container took ${Date.now()-s} ms`)}}finally{r.process.terminate()}let o=await Wt(t.cliHost.exec,n);try{for(let i=0;i<3;i++){let s=Date.now();await o.exec("echo ping!"),n.write(`Roundtrip ${i+1} to host took ${Date.now()-s} ms`)}}finally{o.process.terminate()}}function ao(t){return t?{...t,PSModulePath:void 0}:{PSModulePath:void 0}}var ii="\u2404";async function Wt(t,e,n,r="linux",o="Container"){let i=typeof t=="function",s=r==="win32",a=n?{VSCODE_REMOTE_CONTAINERS_SESSION:n}:{},c=i?await t({env:s?ao(a):a,cmd:s?"powershell":"/bin/sh",args:s?["-NoProfile","-Command","-"]:[],output:e}):t;if(!i){let d=s?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${ii}; /bin/sh'
`;c.stdin.write(d),await new Promise(h=>{let g="",v=new dN.StringDecoder;c.stdout.on("data",function C(w){g+=v.write(w),g.includes(d)&&(c.stdout.off("data",C),h())})})}let l=uae(c),u;async function f(d,p){let h=u=(async()=>{try{await u}catch{}return m(Yn(r,d),p)})();try{return await Promise.race([h,l.unexpectedExit])}finally{l.disposeStdioListeners(),u===h&&(u=void 0)}}async function m(d,p){let h=`Run in ${o.toLowerCase()}: ${d.replace(/\n.*/g,"")}`,g;if((p==null?void 0:p.logOutput)!=="silent"&&(g=e.start(h,p==null?void 0:p.logLevel)),c.stdin.destroyed){e.write("Stdin closed!");let{code:A,signal:O}=await c.exit;return Promise.reject({message:`Shell server terminated (code: ${A}, signal: ${O})`,code:A,signal:O})}r==="win32"?c.stdin.write(`[Console]::Write('${ii}'); ( ${d} ); [Console]::Write("${ii}$LastExitCode ${ii}"); [Console]::Error.Write('${ii}')
`):c.stdin.write(`echo -n ${ii}; ( ${d} ); echo -n ${ii}$?${ii}; echo -n ${ii} >&2
`);let[v,C]=LY(c.stdout,[1,2],(p==null?void 0:p.logOutput)==="continuous"?(A,O,L)=>{O===1&&L===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{}),w=LY(c.stderr,[1],(p==null?void 0:p.logOutput)==="continuous"?(A,O,L)=>{O===0&&L===0&&e.write(A,p==null?void 0:p.logLevel)}:()=>{})[0];p!=null&&p.stdin&&(await v,c.stdin.write(p==null?void 0:p.stdin));let[y,S]=await C,[P]=await w,D=parseInt(S,10)||0;return((p==null?void 0:p.logOutput)===void 0||(p==null?void 0:p.logOutput)===!0)&&(e.write(y,p==null?void 0:p.logLevel),e.write(P,p==null?void 0:p.logLevel),D&&e.write(`Exit code ${D}`,p==null?void 0:p.logLevel)),(p==null?void 0:p.logOutput)==="continuous"&&D&&e.write(`Exit code ${D}`,p==null?void 0:p.logLevel),(p==null?void 0:p.logOutput)!=="silent"&&e.stop(h,g,p==null?void 0:p.logLevel),D?Promise.reject({message:`Command in ${o.toLowerCase()} failed: ${d}`,code:D,stdout:y,stderr:P}):{stdout:y,stderr:P}}return{exec:f,process:c,platform:r,path:Yn(r,lae)}}function LY(t,e,n){let r=e.map(()=>{let u;return{promise:new Promise((m,d)=>u={resolve:m,reject:d}),...u}}),o=new dN.StringDecoder("utf8"),i=[],s=0,a=[];function c(u){let f=o.write(u);l(f)}function l(u){let f=u.indexOf(ii);if(f!==-1){let m=u.substr(0,f);i.push(m),n(m,s,a.length),a.push(i.join("")),i.length=0,a.length===e[s]&&(r[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),f+1<u.length&&l(u.substr(f+1))}else i.push(u),n(u,s,a.length)}return t.on("data",c),r.map(u=>u.promise)}function uae(t){let e,n=new Promise((c,l)=>e=l),r=[],o=[],i=c=>r.push(c),s=c=>o.push(c);return t.stdout.on("data",i),t.stderr.on("data",s),t.exit.then(({code:c,signal:l})=>{e(`Shell server terminated (code: ${c}, signal: ${l})
${Buffer.concat(r).toString()}
${Buffer.concat(o).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:n,disposeStdioListeners:()=>{t.stdout.off("data",i),t.stderr.off("data",s),r.length=0,o.length=0}}}var JY=Y(require("net")),ZY=Y(XY());async function QY({forwardedPorts:t,output:e,getLogLevel:n},r,o,i){e.write(`Port forwarding for container port ${o} starts listening on local port.`,2);let s=i?{VSCODE_REMOTE_CONTAINERS_SESSION:i}:void 0;return new Promise((a,c)=>{let l=!0,u=new Set,f=JY.createServer({pauseOnConnect:!0},m=>{let d=m.remotePort,p=f.address().port;e.write(`Port forwarding connection from ${d} > ${p} > ${o} in the container.`),n()===1&&(async()=>{let h=await(0,ZY.default)("port",d);e.write(`Port forwarding process for ${d} > ${p} > ${o} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),Eae(e,r,[r.nodeExecutable,"-e",`
				const net = require('net');
				const fs = require('fs');
				process.stdin.pause();
				const client = net.createConnection({ host: '127.0.0.1', port: ${o} }, () => {
					console.error('Connection established');
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
				process.stdin.on('close', function (hadError) {
					console.error(hadError ? 'Remote stdin close with error' : 'Remote stdin close');
					process.exit(hadError ? 1 : 0);
				});
				process.on('uncaughtException', function (err) {
					fs.writeSync(process.stderr.fd, \`Uncaught Exception: \${String(err && (err.stack || err.message) || err)}\\n\`);
				});
			`],s).then(h=>{let g;h.exit.then(({code:v,signal:C})=>{g||(u.delete(m),m.end()),e.write(`Port forwarding ${d} > ${p} > ${o} terminated${g?` by extension (${g})`:""} with code ${v} and signal ${C}.`)},v=>{u.delete(m),m.end(),e.write(`Port forwarding ${d} > ${p} > ${o} terminated with error: ${v&&v.message||String(v)}`)}),h.stderr.on("data",v=>{e.write(`Port forwarding ${d} > ${p} > ${o} stderr: ${v.toString("utf8")}`,2)}),m.on("close",v=>{e.write(`Port forwarding ${d} > ${p} > ${o}: Local close${v?" with error":""}`,2),u.delete(m),g="closed",h.stdin.end(),setTimeout(()=>{g="killed",h.terminate().catch(console.error)},5e3)}),h.stdout.pipe(m),m.pipe(h.stdin),u.add(m)}).catch(console.error)});f.on("listening",()=>{var d,p;let m={targetPort:o,server:f,connections:u};f.on("close",()=>{t.delete(m)}),t.add(m),e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o}`),l?(l=!1,a(f)):e.write(`Port forwarding local port ${(p=f.address())==null?void 0:p.port} to container port ${o} failed before listening`)}),f.on("error",m=>{var d;if(m&&(m.code==="EADDRINUSE"||m.code==="EACCES")){f.listen(0,"127.0.0.1");return}l?(l=!1,c(m)):e.write(`Port forwarding local port ${(d=f.address())==null?void 0:d.port} to container port ${o} error: ${(m==null?void 0:m.message)||String(m)}`)}),f.on("close",()=>{var m;l?(l=!1,c(new Error("Closed"))):e.write(`Port forwarding local port ${(m=f.address())==null?void 0:m.port} to container port ${o} closed`)}),f.listen(o,"127.0.0.1")})}async function Eae(t,e,n,r){return e.remoteExec({env:r,cmd:n[0],args:n.slice(1),output:t})}function eq(t,e){return[...t].find(n=>{let r=n.server.address();return(r==null?void 0:r.port)===e})}var Pp=Y(require("path"));var yN=Y($r());function x_(t,e){let n,r=t.platform==="win32",o={...t,get env(){return n||(n=nq(r,t.env))}},i=xae.bind(void 0,r,o);return t.containerWorkspaceFolder&&(o.containerWorkspaceFolder=rq(i,t.containerWorkspaceFolder)),__(i,e)}function tq(t,e,n,r){let o=t==="win32";return __(Dae.bind(void 0,o,e,nq(o,n)),r)}function __(t,e){if(typeof e=="string")return rq(t,e);if(Array.isArray(e))return e.map(n=>__(t,n));if(e&&typeof e=="object"){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r]=__(t,e[r])}),n}return e}var Sae=/\$\{(.*?)\}/g;function nq(t,e){if(t){let n=Object.create(null);return Object.keys(e).forEach(r=>{n[r.toLowerCase()]=e[r]}),n}return e}function rq(t,e){return e.replace(Sae,_ae.bind(void 0,t))}function _ae(t,e,n){let r,o=n.split(":");return o.length>1&&(n=o[0],r=o[1]),t(e,n,r)}function xae(t,e,n,r,o){switch(r){case"env":case"localEnv":return oq(t,e.env,o,n,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:n;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?Pp.win32:Pp.posix).basename(e.localWorkspaceFolder):n;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:n;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?Pp.posix.basename(e.containerWorkspaceFolder):n;default:return n}}function Dae(t,e,n,r,o,i){switch(o){case"containerEnv":return oq(t,n,i,r,e);default:return r}}function oq(t,e,n,r,o){if(n){t&&(n=n.toLowerCase());let i=e[n];return typeof i=="string"?i:""}throw new Ee({description:o?yN.t("'{0}' in {1} can not be resolved because no environment variable name is given.",r,Pp.posix.basename(o.path)):yN.t("'{0}' can not be resolved because no environment variable name is given.",r)})}var D_=Y(require("path"));var Iae=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function iq(t,e,n,r,o){let{repository:i,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(i=o.getDotfileConfiguration("dotfiles.repository")||i,s=o.getDotfileConfiguration("dotfiles.installCommand")||s,a=o.getDotfileConfiguration("dotfiles.targetPath")||a,!i)return;await r;let c=await n;i.indexOf(":")===-1&&!/^\.{0,2}\//.test(i)&&(i=`https://github.com/${i}.git`);let l=e.shellServer,u=sq(e),f=Object.keys(c).filter(m=>!(m.startsWith("BASH_FUNC_")&&m.endsWith("%%"))).reduce((m,d)=>`${m}${d}=${Pae(c[d])} `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await l.exec(`# Clone & install dotfiles
${I_(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${f}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:3}):await l.exec(`# Clone & install dotfiles
${I_(u)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${i} ${a} || exit $?
cd ${a}
for f in ${Iae.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${f}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:3}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch{t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function Pae(t){return`'${(t||"").replace(/'+/g,`'"$&"'`)}'`}function sq(t){return D_.posix.join(zs(t),".dotfilesMarker")}async function aq(t){let e=sq(t),n=D_.posix.resolve(t.homeFolder,".devcontainer",".dotfilesMarker");try{await t.shellServer.exec(`test -f '${e}' && test ! -e '${n}' && mkdir -p '${D_.posix.dirname(n)}' && cp '${e}' '${n}'`)}catch{}}var Wl=0,cq=/Extension host agent listening on (\d+)/;var bae="updateContentCommand";async function N_(t){let{params:e,createdAt:n,startedAt:r,sharedDataFolder:o,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:s,containerUser:a,containerGroup:c,containerEnv:l,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,rootShellServer:d,remoteWaylandSocket:p}=t,h;if(d&&a==="root"?h=d:h=await Wt(u,e.output,e.sessionId),!l){let _=(await h.exec("echo $PATH")).stdout.trim();l=_?{PATH:_}:{}}a||(a=await Al(h)),!m&&a==="root"&&(m=u);let g=await oN(h),v=await jf(h,a);v||e.output.write(gP(`User ${a} not found with 'getent passwd'.`));let C=await Rae(l,v),w=await Tae(h,l,v),y=Cp(Se.posix,w,e.product),{commit:S,quality:P}=e.product,D=!1,A=S&&await kae(y,S,P||"insider",e.web,D),O=r_(g,P==="stable"),L=S&&o&&await vq(Se.posix,o,O,S,P||"insider",e.web,D),E=A&&$l("linux",A),I;d?I=Promise.resolve(d):a==="root"&&(I=Promise.resolve(h));let R={createdAt:n,startedAt:r,osRelease:g,build:O,user:a,gid:c||(v==null?void 0:v.gid),env:l,shell:C,homeFolder:w,userDataFolder:y,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:o,legacy:D,installFolder:A,sharedInstallFolder:L,remoteWorkspaceFolder:s,nodeExecutable:E,remoteExec:u,remotePtyExec:f,remoteExecAsRoot:m,shellServer:h,remoteWaylandSocket:p};return(I||m)&&(R.launchRootShellServer=()=>I||(I=Wt(m,e.output))),R}async function Al(t){return(await t.exec("id -un")).stdout.trim()}async function Tae(t,e,n){if(e.HOME){if(e.HOME===(n==null?void 0:n.home)||(n==null?void 0:n.uid)==="0")return e.HOME;try{return await t.exec(`[ ! -e '${e.HOME}' ] || [ -w '${e.HOME}' ]`),e.HOME}catch{}}return(n==null?void 0:n.home)||"/root"}async function Rae(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function jf(t,e){let{stdout:n}=await t.exec(NY(e),{logOutput:!1});if(n.trim())return Nae(n)}function Nae(t){let e=t.replace(/\n$/,"").split(":");return{name:e[0],uid:e[2],gid:e[3],home:e[5],shell:e[6]}}async function kae(t,e,n,r,o){return Se.posix.join(t,"bin",`${e}${n==="stable"?"":`-${n}`}${r?"-web":""}${o?"-legacy":""}`)}async function vq(t,e,n,r,o,i,s){return t.join(e,"bin",n.id,`${r}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}`)}function wq(t){return Se.posix.join(t.userDataFolder,"extensions")}function zs(t){return Se.posix.join(typeof t=="string"?t:t.userDataFolder,"data/Machine")}function k_(t){return Se.posix.join(t.userDataFolder,"data/Machine/settings.json")}function Lae(t){return Se.posix.join(t,".vscode-remote")}function Cp(t,e,n){return t.join(e,n.serverDataFolderName)}function rN(t,e,n){return t.join(e,n.dataFolderName)}function L_(t){return Se.posix.join("/var",/^\.*(.*)$/.exec(t)[1])}function $l(t,e){return Yn(t,{posix:()=>Se.posix.join(e,"node"),win32:()=>Se.win32.join(e,"node.exe")})()}var tw=class{constructor(e){this.settings=e}getConfiguration(e){return this.settings[cs(e)]||this.settings[Nl(e)]}getNewConfiguration(e){return this.settings[cs(e)]}getDotfileConfiguration(e){return this.settings[Nl(e)]||this.settings[e]}};async function jl(t,e,n,r,o=Wl,i,s){await Aae(t,e);let a=await Fae(t,e,r),{serverDownloaded:c,didCheckRequirements:l}=await Wae(t,e),u,f,m=Promise.resolve(),d;if(e.nodeExecutable){let y=await n_(t,e,a);u=y.remoteContainersCLI,f=y.remoteEnv,m=y.ready;let S=i;i=S&&(async(...D)=>(await y.ready,S(...D))),d=y.mrpcExec;let P=t.cliHost.reconnect;P&&(t.cliHost.reconnect=async D=>{await P(D),y.reconnect().catch(A=>t.output.write(ot(A&&(A.stack||A.message)||String(A))))})}let h=t.computeExtensionHostEnv||t.postCreate.enabled?Gf(t,e,r,d).then(async y=>({...y,...f,...await uY(e,y),REMOTE_CONTAINERS:"true",...tq(t.cliHost.platform,n.configFilePath,e.env,r.remoteEnv||{})})):Promise.resolve({}),g=a.getConfiguration("gitCredentialHelperConfigLocation")??t.credentialHelperConfigLocation;e.nodeExecutable&&(await Bv(t,e,[".ssh","known_hosts"],"ssh"),g!=="none"&&await b_(e,u,t.output,"system"));let v,C,w;if(e.installFolder){let S=await oce(t,e,o,d,async()=>Yae(t,e,r,!1),void 0,!0,!1,l),P=S.serverPort;w=S.connectionToken,v=P,t.forwardServerPort&&e.nodeExecutable&&(C=await QY(t,e,P,t.sessionId),v=C.address().port,t.backgroundTasks.push(async()=>cce(t,e,r)))}if(t.postCreate.enabled){let y,S=new Promise(D=>y=()=>{D()}),P=(async()=>{let D={...f,REMOTE_CONTAINERS:"true"},A=["onCreateCommand","updateContentCommand","postCreateCommand","postStartCommand","postAttachCommand"],O=A.reduce((L,E)=>(L[E]=(r[`${E}s`]||[]).length>0,L),{});if(t.prebuild){let L=A.indexOf("updateContentCommand");if((!A.slice(0,L+1).some(R=>O[R])||!i?"prebuild":await i(!1,!1,!0,a,D))!=="prebuild")throw new Error('"prebuild" expected')}else{let L=!0,E=!0,I=r.waitFor||bae,R=A.indexOf(I),_=A.indexOf("postCreateCommand"),x=R<=_&&!A.slice(0,R+1).some($=>O[$]),b=a.getDotfileConfiguration("dotfiles.repository")||t.dotfilesConfiguration.repository,N=!A.slice(0,_+1).some($=>O[$])&&!b,k=x?"skipNonBlocking":N||!i?"stopForPersonalization":await i(L,E,!1,a,D);if(k==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;L=!1,k=!A.slice(R+1,_+1).some(H=>O[H])&&!b||!i?"stopForPersonalization":await i(L,E,!1,a,D)}if(k==="stopForPersonalization"){i||await iq(t,e,h,m,a),e.nodeExecutable&&((a.getConfiguration("copyGitConfig")??t.isCopyGitConfigEnabled)&&await HS(t,e,h.then(G=>({...e.env,...G}))),await b_(e,u,t.output,g)),await(s==null?void 0:s()),E=!1;let $=R>_&&!A.slice(_+1,R+1).some(G=>O[G]),H=!A.slice(_+1).some(G=>O[G]);k=$?"skipNonBlocking":H||!i?"done":await i(L,E,!1,a,D)}if(k==="skipNonBlocking"){if(y(),t.postCreate.skipNonBlocking)return;L=!1,k=!A.slice(R+1).some(H=>O[H])||!i?"done":await i(L,E,!1,a,D)}if(k!=="done")throw new Error('"done" expected')}})();P.then(()=>{t.postCreate.done()},D=>{t.postCreate.done(D)}),t.backgroundTasks.push(P),await Promise.race([S,P])}return{hostOrContainerPort:v,hostPortServer:C,connectionToken:w,remoteEnv:t.computeExtensionHostEnv?await h:{},serverDownloaded:c}}async function Aae(t,e){let n=Lae(e.homeFolder);!await T_(e.shellServer,e.userDataFolder)&&await T_(e.shellServer,n)&&await pc(t,e,["/bin/sh","-c",`cp -r '${n}' '${e.userDataFolder}'`])}async function Fae(t,e,n){var s;let r=zs(e),o=Se.posix.join(r,".writeMachineSettingsMarker"),i=k_(e);if(await _q(e.shellServer,o)){let a=(s=n.customizations)==null?void 0:s.vscode,c=(Array.isArray(a)?a:a?[a]:[]).map(d=>d.settings).filter(Boolean),l=await Oae(e.shellServer,t.getLogLevel()),u=l.length?`

Some of the command line tools available on the \`PATH\`: ${l.map(d=>`\`${d}\``).join(", ")}`:"",f=e.osRelease.prettyName||"Linux";c.push({"github.copilot.chat.codeGeneration.instructions":[{text:`This workspace is in a dev container running on ${f}.

Use \`"$BROWSER" <url>\` to open a webpage in the host's default browser.${u}`}]});let m=Mae(c);if($ae(m,n.portsAttributes),Hae(m,n.otherPortsAttributes),Object.keys(m).length)return await e.shellServer.exec(`mkdir -p '${Se.posix.dirname(i)}' && cat >'${i}' <<'settingsJSON'
${JSON.stringify(m,null,"	")}
settingsJSON
`),new tw(m)}try{let{stdout:a}=await e.shellServer.exec(`cat ${i}`);return new tw(He(a)||{})}catch{return new tw({})}}async function Oae(t,e){let n=["apt","dpkg","snap","dnf","yum","rpm","apk","docker","git","gh","kubectl","podman","curl","wget","ssh","scp","rsync","gpg","ps","lsof","netstat","top","tree","find","grep","zip","unzip","tar","gzip","bzip2","xz"],{stdout:r}=await t.exec(`which ${n.join(" ")} || true`,{logOutput:e===1});return r.split(`
`).filter(Boolean).map(i=>Se.posix.basename(i)).filter(i=>n.includes(i))}var Uae=["github.copilot.chat.reviewSelection.instructions","github.copilot.chat.codeGeneration.instructions","github.copilot.chat.commitMessageGeneration.instructions","github.copilot.chat.pullRequestDescriptionGeneration.instructions","github.copilot.chat.testGeneration.instructions"];function Mae(t){let e=t.reduce((n,r)=>Uae.reduce((o,i)=>{let s=r[i];return Array.isArray(s)&&(o[i]=o[i]?o[i].concat(s):s),o},n),{});return Object.assign({},...t,e)}function $ae(t,e){if(!t||!e||!Object.keys(e).length)return;let n="remote.portsAttributes";if(!t[n]){t[n]=e;return}for(let r in e)t[n][r]||(t[n][r]=e[r])}function Hae(t,e){if(!t||!e)return;let n="remote.otherPortsAttributes";t[n]||(t[n]=e)}async function A_(t,e,n,r){let o=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,i=await e();if((await i.exec(`stat -c %u ${n}`)).stdout.trim()==="0"){let c=Se.posix.dirname(n);c!=="/"&&await i.exec(`chown ${o} ${c}`),n!=="/"&&await i.exec(`chown -R ${o} ${n}`)}else if(r&&(await i.exec(`stat -c %u ${r}`)).stdout.trim()==="0"){let u=Se.posix.dirname(r);u!=="/"&&await i.exec(`chown -R ${o} ${u}`)}}async function b_(t,e,n,r){if(e||Ll)if(r==="none")n.write("Git credential helper not enabled.");else{let o=r==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;o?await o.exec(`command -v git >/dev/null 2>&1 && git config --${r} --replace-all credential.helper '!f() { ${t.nodeExecutable} ${e} git-credential-helper $*; }; f' || true`):n.write("Cannot configure system wide Git credential helper without root access.")}}async function Bv(t,e,n,r,o){let{cliHost:i}=t,s=i.path.join(await i.homedir(),...n);if(!await i.isFile(s)&&(i.type==="local"||(i=await Gr(process.cwd(),t.loadNativeModule,t.output),s=i.path.join(await i.homedir(),...n),!await i.isFile(s))))return!1;let a=Se.posix.join(e.homeFolder,...n);return Rl(i,e.shellServer,s,a,r,o)}async function Rl(t,e,n,r,o,i=""){let s=await Bae(t,n);if(s)try{let a=await r,c=Se.posix.dirname(a);return await e.exec(`# Test for ${a} and ${o}
[ -e '${a}' ] ${i}&& echo '${a}' exists && exit 1
command -v ${o} >/dev/null 2>&1 || (echo ${o} not found && exit 1) || exit 1
mkdir -p '${c}'
[ -w '${c}' ] || (echo '${c}' not writable && exit 1) || exit 1`),await e.exec(`# Copy ${n} to ${a}
${Bf(s.byteLength)} >>'${a}'`,{stdin:s}),!0}catch(a){if(a&&a.code!==1)throw a}return!1}async function Bae(t,e){try{return await t.readFile(e)}catch(n){if(n&&(n.code==="ENOENT"||n.code==="EISDIR"))return;throw n}}async function Wae(t,e){let n=await lq(t,e,e.legacy);if(n!=="retryWithLegacyServer")return n;let r=await lq(t,e,!0);return e.legacy=!0,e.installFolder=r.installFolder,e.sharedInstallFolder=r.sharedInstallFolder,e.nodeExecutable=r.installFolder&&$l("linux",r.installFolder),r}async function lq(t,e,n){let r=await jae(t,e,n),o=!1;if(r.installFolder){let i=Se.posix.join(r.installFolder,"bin","helpers","check-requirements.sh");if(o=await rce(e.shellServer,i),o)try{await e.shellServer.exec(`'${i}'`)}catch(s){if((s==null?void 0:s.code)===100){if(!n)return"retryWithLegacyServer"}else throw(s==null?void 0:s.code)===99?new Ee({description:Hl.t("The container does not meet all the requirements of the VS Code Server."),detail:s==null?void 0:s.stdout.toString().trim(),step:"checkRequirements",data:{reload:!1,learnMoreUrl:"https://aka.ms/vscode-remote/faq/old-linux"},originalError:s}):s}}return{...r,didCheckRequirements:o}}async function jae(t,e,n){let{commit:r}=t.product,{shellServer:o,launchRootShellServer:i,build:s}=e;if(!(r&&e.installFolder))return{serverDownloaded:void 0,installFolder:void 0,sharedInstallFolder:void 0};let a=n?`${e.installFolder}-legacy`:e.installFolder,c=n&&e.sharedInstallFolder?`${e.sharedInstallFolder}-legacy`:e.sharedInstallFolder;Vae(e.osRelease,s),s.preview&&t.output.write(`\r
\x1B[1mSupport for ${s.label} is in preview.\x1B[22m\r
\r
`);let l=await T_(o,a),u;if(l||s===Sq[s.arch]&&(i?u=(await i()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):u=o.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`)),c&&await T_(o,c))return l||await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),i&&(async()=>{await(await i()).exec(`touch '${c}'`)})().catch(console.error),await u,{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};if(l)return{serverDownloaded:!1,installFolder:a,sharedInstallFolder:c};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let f=!!(c&&i),m=f?c:a,d=f?await i():o,p={localCacheFolder:t.localCacheFolder,build:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output,alternateDownload:t.alternateDownload,legacy:n},h=_p(p),g=await Er(h);g||await Gv(p);try{if(e.sharedDataFolderIsLocalCacheFolder)await fq(p);else{let v=qv(t,d,h,m);t.cliHost.type!=="local"&&await Promise.race([v,Bt(2e4).then(()=>!0)])&&y_(t,e).catch(C=>t.output.write(`Error testing connection: ${(C==null?void 0:C.stack)||(C==null?void 0:C.message)||C}`)),await v}}catch(v){if(v&&v.stderr&&/unexpected end of file|not in gzip format/i.test(v.stderr.toString()))await Gv(p),e.sharedDataFolderIsLocalCacheFolder?await fq(p):await qv(t,d,h,m);else throw v}return f&&(await o.exec(`mkdir -p '${Se.posix.dirname(a)}' && ln -snf '${c}' '${a}'`),(async()=>{await d.exec(`touch '${c}' && cd '${Se.posix.dirname(c)}' && ls -td *[^_]????????????? | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await u,{serverDownloaded:!g,installFolder:a,sharedInstallFolder:c}}function Vae(t,e){let n=t.version;if(e.minVersion&&n){let r=v_(n.trim());if(r&&w_(r,e.minVersion)){let o=Hl.t("{0} {1} or later required.",e.label,e.minVersion.join("."));throw new Ee({description:o,data:{reload:!1}})}}}async function Gv(t){let{build:e,commit:n,quality:r,web:o,legacy:i,output:s}=t,a="Downloading VS Code Server",c=s.start(a);s.write(`${n} ${e.id} ${r}${o?" web":""}${i?" legacy":""}`);let l=_p(t);await ns(Se.dirname(l));let u=`https://update.code.visualstudio.com/commit:${n}/server-${i?e.id.replace("linux-","linux-legacy-"):e.id}${o?"-web":""}/${r}`;s.write(`URL: ${u}`),s.write(`Path: ${l}`);let f,m;try{m=`${l}_${Date.now()}`,await new Promise((d,p)=>{let h=R_.createWriteStream(m);s.write("Starting download.",1),mq.https.get(u,{trackRedirects:!0},v=>{var y;if(v.statusCode<200||v.statusCode>299){s.write(`Download failed: ${v.statusCode} ${v.statusMessage}.`,1),p(new Ee({description:Hl.t("Downloading the VS Code Server failed. Please try again later."),originalError:`Failed to download VS Code Server (${u}): HTTP ${v.statusCode} - ${v.statusMessage}`}));return}let w=(y=[...v.redirects,v].find(S=>S.headers["x-sha256"]))==null?void 0:y.headers["x-sha256"];f=Array.isArray(w)?w[0]:w,s.write("Downloading data.",1),v.on("error",p),v.pipe(h),v.on("end",d)}).on("error",p)}),f&&await uq(u,m,f,s)}catch(d){if(s.write("Downloading failed.",1),s.write((d==null?void 0:d.stack)||(d==null?void 0:d.message)||String(d),1),t.alternateDownload)s.write(d&&(d.originalError||d.message)),s.write("Retrying to download VS Code Server."),m=`${l}_${Date.now()}`,await t.alternateDownload(u,m),f&&await uq(u,m,f,s);else throw d||new Ee({description:Hl.t("Downloading the VS Code Server failed. Please try again later.")})}finally{s.stop(a,c)}await il(m,l)}async function uq(t,e,n,r){let o=bp.createHash("sha256"),i=await at(e);o.update(i);let s=o.digest("hex");if(s!==n)throw r.write(`Failed to download VS Code Server (${t}): SHA mismatch, actual ${s} != expected ${n} (${e}, ${i.byteLength} bytes)`),new Ee({description:Hl.t("Downloading the VS Code Server failed. Please try again later.")})}async function qv(t,e,n,r,o,i=!0){let s="Installing VS Code Server",a=t.output.start(s),c=`${r}_${Date.now()}`;try{if(await e.exec(`mkdir -p ${c}`),o)typeof n=="string"&&n.endsWith(".zip")?await e.exec(`unzip ${n} -d ${c}`):await e.exec(`cat ${n} | tar --no-same-owner -x${i?"z":""} -C ${c}`);else{let l=typeof n=="string"?await at(n):n;await e.exec(`${Bf(l.byteLength,!0)} | tar --no-same-owner -x${i?"z":""} -C ${c}`,{stdin:l,logOutput:"continuous"})}await e.exec(`mv -n ${Se.posix.join(c,"*",".")} ${r} && rmdir ${c}`)}catch(l){try{await e.exec(`rm -rf ${c}`)}catch{}throw l}finally{t.output.stop(s,a)}}async function fq(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s,output:a}=t,c="Unpacking VS Code Server",l=a.start(c);a.write(`${r} ${n.id} ${o} ${i?"web":""} ${s?"legacy":""}`);let u=await vq(Se,e,n,r,o,i,s),f=`${u}_${Date.now()}`;try{await ns(f);let m=_p(t);await(await us(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",m,"--strip-components","1","-C",f],cwd:process.cwd(),output:a})).exit,await al(u,{recursive:!0,force:!0}),await il(f,u)}catch(m){try{await al(f,{recursive:!0,force:!0})}catch{}throw m}finally{a.stop(c,l)}}function _p(t){let{localCacheFolder:e,build:n,commit:r,quality:o,web:i,legacy:s}=t,a=Se.join(e,"serverCache",r),c=`vscode-server-${n.id}${o==="stable"?"":`-${o}`}${i?"-web":""}${s?"-legacy":""}${n.archiveExt||".tar.gz"}`;return Se.join(a,c)}async function yq(t,e){let n=await xq(e),r={},{stdout:o}=await pc(t,e,[Se.posix.join(e.installFolder,...BS(n)),...Dq(e.userDataFolder),...Iq(t.getTelemetryLevel()),"--list-extensions"],e.installFolder,{remoteEnv:r});return o.toString().split(`
`).filter(i=>!!i)}async function Yae(t,e,n,r){let o="Preparing Extensions",i=t.output.start(o),{sharedDataFolder:s}=e,a=s?Zae(s):void 0,c=Cq(e),l=zs(e),u=Se.posix.join(l,".installExtensionsMarker"),f=!await _q(e.shellServer,u),m=Gae(t,f,n);if(e.sharedDataFolderIsLocalCacheFolder)e.launchRootShellServer&&await(await e.launchRootShellServer()).exec(`mkdir -p '${a}' && chown -R ${e.user} ${a}`),await e.shellServer.exec(`mkdir -p '${a}' && ln -s -T '${a}' '${c}' || true`);else{let p=Jae(t.localCacheFolder),h=await zae(t,e,p,a,c,[...m.builtinExtensions,...m.extensions]);Kae(t,e,p,a,c,h).catch(console.error)}m.extensions=m.extensions.filter(p=>!m.builtinExtensions.includes(p)),t.product.version&&pq.lte("1.77.0",t.product.version.split("-")[0])&&(t.output.write(`Optimizing extensions for quality: ${t.product.quality}`),m.builtinExtensions=await qae(t,e,c,m.builtinExtensions));let d=[].concat(...m.builtinExtensions.map(p=>["--install-builtin-extension",p]),...m.extensions.map(p=>["--install-extension",p]));return r&&d.length&&d.push("--do-not-sync"),t.output.stop(o,i),{...m,args:d}}async function qae(t,e,n,r){if(r.length===0)return r;let{shellServer:o}=e,i=(await o.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(a=>!!a&&a.endsWith("vsix"));t.output.write(`Available vsix: ${i.join(", ")||"None"}`);let s=r.map(a=>{let c=i.find(l=>l.startsWith(a.toLocaleLowerCase()));return c?`${n}/${c}`:a});return t.output.write(`Optimized extensions to install: ${s.join(", ")||"None"}`),s}function Gae(t,e,n){var a,c;let r=e?[]:t.installBuiltinExtensions||[],o=t.getAdditionalExtensionsToInstall(e),i=[...e?[]:(((a=n.customizations)==null?void 0:a.vscode)||[]).map(l=>l.extensions||[]),o],s=[];for(let l of i.flat()){let u=(c=/^(?<removal>-)?(?<idAndVersion>(?<id>[^@ ]*)[^ ]*)$/.exec(l))==null?void 0:c.groups;if(u){let f=s.findIndex(m=>m.id===u.id);f!==-1&&s.splice(f,1),u.removal||s.push(u)}}return{builtinExtensions:r,extensions:s.map(l=>l.idAndVersion)}}async function zae(t,e,n,r,o,i){t.output.write(`Extensions cache, install extensions: ${i.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${o} && ls ${o} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(r){let c=(await s.exec(`test -d ${r} && ls ${r} || true`)).stdout.trim().split(`
`).filter(u=>!!u),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, link in container: ${l.join(", ")||"None"}`),l.length){await s.exec(`mkdir -p '${o}' && ln -s '${r}'/* '${o}' || true`);let{launchRootShellServer:u}=e;u&&(async()=>{await(await u()).exec(`cd ${r} && touch ${l.map(m=>`'${m}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await ns(n);let c=await sl(n),l=c.filter(u=>i.some(f=>u.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(u)===-1);if(t.output.write(`Extensions cache, copy to remote: ${l.join(", ")||"None"}`),l.length){let u=Se.basename(n),f=Bl.c({cwd:Se.dirname(n)},l.map(p=>Se.join(u,p))),m=Se.posix.join(o,`tmp-${Date.now()}`),d=await new Promise(p=>{let h=[];f.on("data",g=>h.push(g)),f.on("end",()=>p(Buffer.concat(h)))});await s.exec(`# Copy extensions to remote
mkdir -p ${m}
${Bf(d.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${m}
mv ${m}/* ${o} && rmdir ${m}`,{stdin:d})}return{remoteExtensions:a.concat(l),cachedExtensions:c}}}async function Kae(t,e,n,r,o,i){if(r&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await Bt(s);;)i=await Xae(t,e,n,r,o,i),await Bt(a)}async function Xae(t,e,n,r,o,{remoteExtensions:i,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:l}=e,u=(await a.exec(`ls ${o} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(m=>!!m);if(!r){let m=i.filter(d=>u.indexOf(d)===-1);t.output.write(`Extensions cache, remote removals: ${m.join(", ")||"None"}`);for(let d of m)try{await b1(Se.join(n,d))}catch(p){if(!(p&&p.code==="ENOENT"))throw p}}let f=u.filter(m=>i.indexOf(m)===-1&&s.indexOf(m)===-1);if(t.output.write(`Extensions cache, copy to ${r?"shared cache":"local"}: ${f.join(", ")||"None"}`,1),f.length)if(r){let m=await c();await m.exec(`mkdir -p '${r}' && cd '${o}' && cp ${f.map(d=>`'${d}'`).join(" ")} '${r}'`),await m.exec(`cd '${r}' && ls -t | tail -n +500 | xargs rm -f`)}else{let m=Se.posix.basename(o),d=await l({cmd:"tar",cwd:Se.posix.dirname(o),args:["c",...f.map(v=>Se.posix.join(m,v))],output:t.output}),p=Se.join(Se.dirname(n),`${Se.basename(n)}-${Date.now()}`);await ns(p);let h=Bl.x({cwd:p,strip:1}),g=new Promise((v,C)=>{h.on("error",C),h.on("finish",v)});d.stdout.pipe(h),await g;for(let v of await sl(p))await il(Se.join(p,v),Se.join(n,v));await T1(p)}return{remoteExtensions:u,cachedExtensions:s}}var SN="extensionsCache";function Jae(t){return Se.join(t,SN)}function Zae(t){return Se.posix.join(t,SN)}function Cq(t){return Se.posix.join(t.userDataFolder,SN)}var Eq={x64:{label:"x86-64",id:"linux-x64",arch:"x64",stable:!0,preview:!1},armhf:{label:"ARM",id:"linux-armhf",arch:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"linux-arm64",arch:"arm64",stable:!0,preview:!0}},Sq={x64:{label:"Alpine Linux",id:"linux-alpine",arch:"x64",stable:!0,preview:!0,minVersion:[3,9]},arm64:{label:"Alpine Linux ARM64",id:"alpine-arm64",arch:"arm64",stable:!0,preview:!0,minVersion:[3,9]}},e_={x64:{label:"Mac",id:"darwin",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Mac ARM",id:"darwin-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},Qae={x64:{label:"Windows",id:"win32-x64",arch:"x64",stable:!0,preview:!0,archiveExt:".zip"},arm64:{label:"Windows ARM",id:"win32-arm64",arch:"arm64",stable:!0,preview:!0,archiveExt:".zip"}},ece={linux:Eq,alpine:Sq,darwin:e_,win32:Qae},tce={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function r_(t,e){var o;let n=tce[t.hardware],r=n&&(((o=ece[t.id])==null?void 0:o[n])||Eq[n]);if(!r||e&&!r.stable)throw new Ee({description:t.id==="alpine"?Hl.t("Alpine Linux is not supported on the hardware architecture '{0}' of the container.",t.hardware):Hl.t("The hardware architecture '{0}' of the container is not supported.",t.hardware),data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return r}async function oN(t){let e="unknown",n="unknown",r="unknown",o;try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");n=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",r=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",o=(i.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(i){console.error(i)}return{hardware:e,id:n,version:r,prettyName:o}}async function nce(t,e,n,r){let o=await Yn(n,{async win32(){var c;return{amd64:"x86_64",arm64:"arm64"}[((c=e.PROCESSOR_ARCHITECTURE)==null?void 0:c.toLowerCase())||""]||"unknown"},async posix(){return(await te({exec:t,cmd:"uname",args:["-m"],output:r})).stdout.toString().trim()}})(),i=n,s="unknown",a;if(n==="linux")try{let c=(await te({exec:t,cmd:"/bin/sh",args:["(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null"],output:r})).stdout.toString();i=(c.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",s=(c.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",a=(c.match(/^PRETTY_NAME=([^\u001b\r\n]*)/m)||[])[1]||void 0}catch(c){console.error(c)}return{hardware:o,id:i,version:s,prettyName:a}}async function _q(t,e){try{return await t.exec(I_(e)),!0}catch{return!1}}function I_(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${Se.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function T_(t,e){try{return await t.exec(`test -d '${e}'`),!0}catch{return!1}}async function rce(t,e){try{return await t.exec(`test -x '${e}'`),!0}catch{return!1}}async function oce(t,e,n,r,o,i,s,a,c){let{installFolder:l,sharedInstallFolder:u,shellServer:f}=e,{processes:m,mntNS:d}=await kR(f),p=await xq(e),h=`(${Se.posix.join(...BS(p))})`.replace(".","\\."),g=new RegExp(`${Se.posix.join(Se.posix.dirname(l).replace(".","\\."),"[^/]*",h)}`),v=m.filter(G=>G.mntNS===d&&g.test(G.cmd));t.output.write(`Running extension host agents:
${JSON.stringify(v,void 0,"  ")}`,1);let C=v.length?(await f.exec(`readlink -f '${l}'`)).stdout.toString().trim():void 0,{current:w,others:y}=v.reduce((G,q)=>(G[(q.cwd===C||q.cwd===l||q.cwd===u)&&g.test(q.cmd)?"current":"others"].push(q),G),{current:[],others:[]});if(s&&y.length){t.output.write(`Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${y.map(G=>G.pgrp?`-${G.pgrp}`:G.pid).join(" ")}`)}catch{}}let{commit:S,quality:P}=t.product,D=Se.posix.join(zs(e),`.connection-token-${S}${P==="stable"?"":`-${P}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`),A=Se.posix.join(zs(e),`.devport-${S}${P==="stable"?"":`-${P}`}${t.web?"-web":""}${e.legacy?"-legacy":""}`);if(w.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:G}=await f.exec(`cat '${A}' 2>/dev/null`),q=G.toString().trim(),V=parseInt(q,10),ce=new RegExp(" '?--connection-token-file'? ").test(w[0].cmd)?(await f.exec(`cat '${D}'`)).stdout.toString().trim():void 0;return{serverPort:V,connectionToken:ce}}catch(G){console.error(G),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await f.exec(`kill -9 ${w.map(q=>q.pgrp?`-${q.pgrp}`:q.pid).join(" ")}`)}catch{}}}let O="isLocalContainer"in t&&t.isLocalContainer,L=`${D}-${bp.randomUUID()}`,{stdout:E}=await f.exec(`cat '${D}' 2>/dev/null || (umask 377 && echo '${bp.randomUUID()}' >'${L}' && mv -n '${L}' '${D}' && rm -f '${L}' && cat '${D}')`),I=E.toString().trim();t.progress(5);let R="Starting VS Code Server",_=t.output.start(R),x=[Se.posix.join(l,...BS(p)),"--log",ro(t.getLogLevel()),"--force-disable-user-env",...Dq(e.userDataFolder),...ice(O),...Iq(t.getTelemetryLevel()),"--accept-server-license-terms","--host","127.0.0.1","--port",String(n),"--connection-token-file",D,"--extensions-download-dir",Cq(e),...(await o()).args,"--start-server",...O?["--disable-websocket-compression"]:[""],...a?["--enable-remote-auto-shutdown"]:[],...c?["--skip-requirements-check"]:[]],b={SHELL:e.shell,...await i};delete b.NODE_OPTIONS;let k=(await pc(t,{remoteExec:e.remoteExec},x,l,{remoteEnv:b,resolveOn:cq,print:"continuous"})).cmdOutput;t.output.stop(R,_);let $=(cq.exec(k)||[])[1];if(!$)throw new Error("Port not found");return await f.exec(`echo ${$} >'${A}'`),{serverPort:parseInt($,10),connectionToken:I}}async function xq({shellServer:t,installFolder:e}){return JSON.parse((await t.exec(`cat '${Se.posix.join(e,"product.json")}'`,{logOutput:!1})).stdout.toString().trim())}function Dq(t){return["--server-data-dir",t]}function ice(t){return t?["--use-host-proxy"]:[]}function Iq(t){return t?["--telemetry-level",t]:[]}var sce=/^([a-z0-9\-]+):(\d{1,5})$/;function ace(t){let e=t.match(sce);if(!(!e||e.length!==3))return{host:e[1],port:Number(e[2])}}async function cce(t,e,n){let r=(n.forwardPorts||[]).map(i=>typeof i=="number"?`localhost:${i}`:i).map(ace).filter(Boolean),o=await t.getTunnels();await Promise.all(r.filter(i=>!o.find(s=>s.remoteAddress.host===i.host&&s.remoteAddress.port===i.port)).map(async({host:i,port:s})=>t.openTunnel(e,s,i)))}async function pc(t,{remoteExec:e},n,r,o={}){let i=o.print||(o.silent?"off":"end"),s=await e({env:o.remoteEnv,cwd:r,cmd:n[0],args:n.slice(1),output:o.silent?Oe:t.output}),a=[],c=[],l=new EN.StringDecoder,u=new EN.StringDecoder,f="",m="",d,p,h=new Promise((y,S)=>{d=y,p=S});s.stdout.on("data",y=>{a.push(y);let S=l.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),f+=S,o.resolveOn&&o.resolveOn.exec(f)&&d()}),s.stderr.on("data",y=>{c.push(y);let S=u.write(y);i==="continuous"&&t.output.write(S.replace(/\r?\n/g,`\r
`)),m+=S}),o.stdin instanceof Buffer?(s.stdin.write(o.stdin,y=>{y&&p(y)}),s.stdin.end()):o.stdin instanceof R_.ReadStream&&o.stdin.pipe(s.stdin),i!=="off"&&s.exit.catch(y=>{y!=null&&y.message&&t.output.write(ot(y==null?void 0:y.message))});let g=await Promise.race([s.exit,h]),v=Buffer.concat(a),C=Buffer.concat(c);i==="end"&&(t.output.write(f.replace(/\r?\n/g,`\r
`)),t.output.write(ot(m)));let w=`${f}
${m}`;return g&&(g.code||g.signal)?Promise.reject({message:`Command failed: ${n.join(" ")}`,cmdOutput:w,stdout:v,stderr:C,code:g.code,signal:g.signal}):{cmdOutput:w,stdout:v,stderr:C}}function Bf(t,e=!1){let r=t%8192;return`(dd iflag=fullblock bs=8192 count=${(t-r)/8192}${e?"":" 2>/dev/null"}; dd iflag=fullblock bs=${r} count=1${e?"":" 2>/dev/null"})`}async function Gf(t,e,n,r){let o=fce(n,t);if(!o||o==="none")return{};let i=await lce(o,t,e.shellServer);return i||(t.output.write("userEnvProbe: not found in cache"),i=await dq(o,t,e,r,"cat /proc/self/environ","\0"),i||(t.output.write("userEnvProbe: falling back to printenv"),i=await dq(o,t,e,r,"printenv",`
`)),i&&await uce(i,o,t,e.shellServer),i||{})}async function lce(t,e,n){if(!n||!e.containerSessionDataFolder)return;let r=Pq(t,e.containerSessionDataFolder);try{if(await dc(n,r)){let{stdout:o}=await n.exec(`cat '${r}'`);return JSON.parse(o)}}catch(o){e.output.write(`Failed to read/parse user env cache: ${o}`,5)}}async function uce(t,e,n,r){if(!r||!n.containerSessionDataFolder)return;let o=Pq(e,n.containerSessionDataFolder);try{await r.exec(`mkdir -p '${Se.posix.dirname(o)}' && cat > '${o}' << 'envJSON'
${JSON.stringify(t,null,"	")}
envJSON
`)}catch(i){n.output.write(`Failed to cache user env: ${i}`,5)}}function Pq(t,e){return Se.posix.join(e,`env-${t}.json`)}async function dq(t,e,n,r,o,i){var s;if(t==="none")return{};try{let a=bp.randomUUID(),c=new RegExp(a+"([^]*)"+a),l=n.shell;e.output.write(`userEnvProbe shell: ${l}`);let u=Se.posix.basename(l),f=`echo -n ${a}; ${o}; echo -n ${a}`,m;/^pwsh(-preview)?$/.test(u)?m=t==="loginInteractiveShell"||t==="loginShell"?["-Login","-Command"]:["-Command"]:m=[t==="loginInteractiveShell"?"-lic":t==="loginShell"?"-lc":t==="interactiveShell"?"-ic":"-c"];let d=on(e.output,1),p=pc({output:d},{remoteExec:await r||n.remoteExec},[l,...m,f],n.installFolder);Promise.race([p,Bt(2e3)]).then(async D=>{if(!D){let A,O=n.shellServer||await Wt(n.remoteExec,e.output);try{({processes:A}=await kR(O))}finally{n.shellServer||await O.process.terminate()}let L=A.find(E=>E.cmd.startsWith(l)&&E.cmd.indexOf(a)!==-1);if(L){let I=Yj(A)[L.pid];e.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${LR(I)}`)}else e.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(D=>e.output.write(ot(D&&(D.stack||D.message)||"Error reading process tree.")));let h=await Promise.race([p,Bt(1e4)]);if(!h)return e.output.write(ot("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let g=h.stdout.toString(),v=c.exec(g),C=v?v[1]:"";if(!C||C.trim()==="-n")return;let w=C.split(i).reduce((D,A)=>{let O=A.indexOf("=");return O!==-1&&(D[A.substring(0,O)]=A.substring(O+1)),D},{});e.output.write(`userEnvProbe parsed: ${JSON.stringify(w,void 0,"  ")}`,1),delete w.PWD;let y=w.PATH,S=(s=n.env)==null?void 0:s.PATH,P=!(e.allowSystemConfigChange&&n.launchRootShellServer)&&y&&S;if(P){let D=n.user;w.PATH=dce(y,S,D==="root"||D==="0")}return e.output.write(`userEnvProbe PATHs:
Probe:     ${typeof y=="string"?`'${y}'`:"None"}
Container: ${typeof S=="string"?`'${S}'`:"None"}${P?`
Merged:    ${typeof w.PATH=="string"?`'${w.PATH}'`:"None"}`:""}`),w}catch(a){return e.output.write(ot("Error reading shell environment.")),e.output.write(ot((a==null?void 0:a.stack)||(a==null?void 0:a.message)||String(a))),{}}}function fce(t,e){let n=t==null?void 0:t.userEnvProbe;return e.output.write(`userEnvProbe: ${n||e.defaultUserEnvProbe}${n?"":" (default)"}`),n||(n=e.defaultUserEnvProbe),n}function dce(t,e,n){let r=t.split(":"),o=0;for(let i of e.split(":")){let s=r.indexOf(i);s===-1?(n||!/\/sbin(\/|$)/.test(i))&&r.splice(o++,0,i):o=s+1}return r.join(":")}async function _N(t){for(let e of t)await(typeof e=="function"?e():e)}async function bq(t){let{localCacheFolder:e,output:n,alternateDownload:r,exec:o,env:i,isFile:s,userDataFolder:a,homeFolder:c,product:l,platform:u}=t,f=l.commit||await gp(l.quality),m=l.commit?l.quality||"insider":"stable",d=u==="win32"?Se.win32:Se.posix,p=`${m.substring(0,1).toUpperCase()}${m.substring(1)}${m==="insider"?"s":""}-${f}`,h=d.join(Cp(d,c,l),"cli","servers",p,"server");if(await P_(u,h,s))return $l(u,h);let g=d.join(rN(d,c,l),"cli","servers",p,"server");if(await P_(u,g,s))return $l(u,g);let v=d.join(Cp(d,c,l),"bin",f);if(await P_(u,v,s))return $l(u,v);let C=d.join(a,"bin",f);if(await P_(u,C,s))return $l(u,C);let w=await nce(o,i,u,n),y=r_(w,!1),S={localCacheFolder:e,build:y,commit:f,quality:m,web:!1,output:n,alternateDownload:r,legacy:!1},P=_p(S);await Er(P)||await Gv(S);let D=P.endsWith(".zip")?await pce(P):await mce(P);return await kY(o,u,D,C,!1,n),$l(u,C)}async function P_(t,e,n){let r=$l(t,e),i=(t==="win32"?Se.win32:Se.posix).join(e,"node_modules","node-pty","package.json");return await n(r)&&await n(i)}async function mce(t){let e=[];return await Bl.t({file:t,filter:n=>/^[^/]*\/(LICENSE$|node$|node_modules\/node-pty\/)/.test(n),onentry:n=>{new Bl.WriteEntry.Tar(n).on("data",o=>e.push(o))}}),Buffer.concat(e)}async function pce(t){let n=new hq.default(t).getEntries().filter(o=>/^[^/]*\/(LICENSE$|node(\.exe)?$|node_modules\/node-pty\/.*[^/]$)/.test(o.entryName)),r=gq.pack();for(let o of n){let i=await new Promise((s,a)=>{o.getDataAsync((c,l)=>{l?a(l):s(c)})});r.entry({name:o.entryName,mode:o.attr>>>16&4095},i)}return r.finalize(),r}var _G=Y(require("crypto")),pw=Y(require("path"));function Vq(t){return typeof t>"u"||t===null}function hce(t){return typeof t=="object"&&t!==null}function gce(t){return Array.isArray(t)?t:Vq(t)?[]:[t]}function vce(t,e){var n,r,o,i;if(e)for(i=Object.keys(e),n=0,r=i.length;n<r;n+=1)o=i[n],t[o]=e[o];return t}function wce(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}function yce(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Cce=Vq,Ece=hce,Sce=gce,_ce=wce,xce=yce,Dce=vce,qn={isNothing:Cce,isObject:Ece,toArray:Sce,repeat:_ce,isNegativeZero:xce,extend:Dce};function Yq(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}function rw(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Yq(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}rw.prototype=Object.create(Error.prototype);rw.prototype.constructor=rw;rw.prototype.toString=function(e){return this.name+": "+Yq(this,e)};var Lo=rw;function xN(t,e,n,r,o){var i="",s="",a=Math.floor(o/2)-1;return r-e>a&&(i=" ... ",e=r-a+i.length),n-r>a&&(s=" ...",n=r+a-s.length),{str:i+t.slice(e,n).replace(/\t/g,"\u2192")+s,pos:r-e+i.length}}function DN(t,e){return qn.repeat(" ",e-t.length)+t}function Ice(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],o=[],i,s=-1;i=n.exec(t.buffer);)o.push(i.index),r.push(i.index+i[0].length),t.position<=i.index&&s<0&&(s=r.length-2);s<0&&(s=r.length-1);var a="",c,l,u=Math.min(t.line+e.linesAfter,o.length).toString().length,f=e.maxLength-(e.indent+u+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)l=xN(t.buffer,r[s-c],o[s-c],t.position-(r[s]-r[s-c]),f),a=qn.repeat(" ",e.indent)+DN((t.line-c+1).toString(),u)+" | "+l.str+`
`+a;for(l=xN(t.buffer,r[s],o[s],t.position,f),a+=qn.repeat(" ",e.indent)+DN((t.line+1).toString(),u)+" | "+l.str+`
`,a+=qn.repeat("-",e.indent+u+3+l.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=o.length);c++)l=xN(t.buffer,r[s+c],o[s+c],t.position-(r[s]-r[s+c]),f),a+=qn.repeat(" ",e.indent)+DN((t.line+c+1).toString(),u)+" | "+l.str+`
`;return a.replace(/\n$/,"")}var Pce=Ice,bce=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Tce=["scalar","sequence","mapping"];function Rce(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}function Nce(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(bce.indexOf(n)===-1)throw new Lo('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Rce(e.styleAliases||null),Tce.indexOf(this.kind)===-1)throw new Lo('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var zr=Nce;function Tq(t,e){var n=[];return t[e].forEach(function(r){var o=n.length;n.forEach(function(i,s){i.tag===r.tag&&i.kind===r.kind&&i.multi===r.multi&&(o=s)}),n[o]=r}),n}function kce(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(o){o.multi?(t.multi[o.kind].push(o),t.multi.fallback.push(o)):t[o.kind][o.tag]=t.fallback[o.tag]=o}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}function PN(t){return this.extend(t)}PN.prototype.extend=function(e){var n=[],r=[];if(e instanceof zr)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new Lo("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(i){if(!(i instanceof zr))throw new Lo("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(i.loadKind&&i.loadKind!=="scalar")throw new Lo("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(i.multi)throw new Lo("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(i){if(!(i instanceof zr))throw new Lo("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var o=Object.create(PN.prototype);return o.implicit=(this.implicit||[]).concat(n),o.explicit=(this.explicit||[]).concat(r),o.compiledImplicit=Tq(o,"implicit"),o.compiledExplicit=Tq(o,"explicit"),o.compiledTypeMap=kce(o.compiledImplicit,o.compiledExplicit),o};var Lce=PN,Ace=new zr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Fce=new zr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Oce=new zr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Uce=new Lce({explicit:[Ace,Fce,Oce]});function Mce(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function $ce(){return null}function Hce(t){return t===null}var Bce=new zr("tag:yaml.org,2002:null",{kind:"scalar",resolve:Mce,construct:$ce,predicate:Hce,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Wce(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function jce(t){return t==="true"||t==="True"||t==="TRUE"}function Vce(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Yce=new zr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Wce,construct:jce,predicate:Vce,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function qce(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Gce(t){return 48<=t&&t<=55}function zce(t){return 48<=t&&t<=57}function Kce(t){if(t===null)return!1;var e=t.length,n=0,r=!1,o;if(!e)return!1;if(o=t[n],(o==="-"||o==="+")&&(o=t[++n]),o==="0"){if(n+1===e)return!0;if(o=t[++n],o==="b"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(o!=="0"&&o!=="1")return!1;r=!0}return r&&o!=="_"}if(o==="x"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!qce(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}if(o==="o"){for(n++;n<e;n++)if(o=t[n],o!=="_"){if(!Gce(t.charCodeAt(n)))return!1;r=!0}return r&&o!=="_"}}if(o==="_")return!1;for(;n<e;n++)if(o=t[n],o!=="_"){if(!zce(t.charCodeAt(n)))return!1;r=!0}return!(!r||o==="_")}function Xce(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function Jce(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!qn.isNegativeZero(t)}var Zce=new zr("tag:yaml.org,2002:int",{kind:"scalar",resolve:Kce,construct:Xce,predicate:Jce,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Qce=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function ele(t){return!(t===null||!Qce.test(t)||t[t.length-1]==="_")}function tle(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var nle=/^[-+]?[0-9]+e/;function rle(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(qn.isNegativeZero(t))return"-0.0";return n=t.toString(10),nle.test(n)?n.replace("e",".e"):n}function ole(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||qn.isNegativeZero(t))}var ile=new zr("tag:yaml.org,2002:float",{kind:"scalar",resolve:ele,construct:tle,predicate:ole,represent:rle,defaultStyle:"lowercase"}),sle=Uce.extend({implicit:[Bce,Yce,Zce,ile]}),ale=sle,qq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Gq=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function cle(t){return t===null?!1:qq.exec(t)!==null||Gq.exec(t)!==null}function lle(t){var e,n,r,o,i,s,a,c=0,l=null,u,f,m;if(e=qq.exec(t),e===null&&(e=Gq.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,o=+e[3],!e[4])return new Date(Date.UTC(n,r,o));if(i=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=+e[10],f=+(e[11]||0),l=(u*60+f)*6e4,e[9]==="-"&&(l=-l)),m=new Date(Date.UTC(n,r,o,i,s,a,c)),l&&m.setTime(m.getTime()-l),m}function ule(t){return t.toISOString()}var fle=new zr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:cle,construct:lle,instanceOf:Date,represent:ule});function dle(t){return t==="<<"||t===null}var mle=new zr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:dle}),kN=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function ple(t){if(t===null)return!1;var e,n,r=0,o=t.length,i=kN;for(n=0;n<o;n++)if(e=i.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}function hle(t){var e,n,r=t.replace(/[\r\n=]/g,""),o=r.length,i=kN,s=0,a=[];for(e=0;e<o;e++)e%4===0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|i.indexOf(r.charAt(e));return n=o%4*6,n===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):n===18?(a.push(s>>10&255),a.push(s>>2&255)):n===12&&a.push(s>>4&255),new Uint8Array(a)}function gle(t){var e="",n=0,r,o,i=t.length,s=kN;for(r=0;r<i;r++)r%3===0&&r&&(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]),n=(n<<8)+t[r];return o=i%3,o===0?(e+=s[n>>18&63],e+=s[n>>12&63],e+=s[n>>6&63],e+=s[n&63]):o===2?(e+=s[n>>10&63],e+=s[n>>4&63],e+=s[n<<2&63],e+=s[64]):o===1&&(e+=s[n>>2&63],e+=s[n<<4&63],e+=s[64],e+=s[64]),e}function vle(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var wle=new zr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:ple,construct:hle,predicate:vle,represent:gle}),yle=Object.prototype.hasOwnProperty,Cle=Object.prototype.toString;function Ele(t){if(t===null)return!0;var e=[],n,r,o,i,s,a=t;for(n=0,r=a.length;n<r;n+=1){if(o=a[n],s=!1,Cle.call(o)!=="[object Object]")return!1;for(i in o)if(yle.call(o,i))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(i)===-1)e.push(i);else return!1}return!0}function Sle(t){return t!==null?t:[]}var _le=new zr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Ele,construct:Sle}),xle=Object.prototype.toString;function Dle(t){if(t===null)return!0;var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1){if(r=s[e],xle.call(r)!=="[object Object]"||(o=Object.keys(r),o.length!==1))return!1;i[e]=[o[0],r[o[0]]]}return!0}function Ile(t){if(t===null)return[];var e,n,r,o,i,s=t;for(i=new Array(s.length),e=0,n=s.length;e<n;e+=1)r=s[e],o=Object.keys(r),i[e]=[o[0],r[o[0]]];return i}var Ple=new zr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Dle,construct:Ile}),ble=Object.prototype.hasOwnProperty;function Tle(t){if(t===null)return!0;var e,n=t;for(e in n)if(ble.call(n,e)&&n[e]!==null)return!1;return!0}function Rle(t){return t!==null?t:{}}var Nle=new zr("tag:yaml.org,2002:set",{kind:"mapping",resolve:Tle,construct:Rle}),zq=ale.extend({implicit:[fle,mle],explicit:[wle,_le,Ple,Nle]}),Yl=Object.prototype.hasOwnProperty,F_=1,Kq=2,Xq=3,O_=4,IN=1,kle=2,Rq=3,Lle=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Ale=/[\x85\u2028\u2029]/,Fle=/[,\[\]\{\}]/,Jq=/^(?:!|!!|![a-z\-]+!)$/i,Zq=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Nq(t){return Object.prototype.toString.call(t)}function Ks(t){return t===10||t===13}function Jf(t){return t===9||t===32}function Ao(t){return t===9||t===32||t===10||t===13}function Rp(t){return t===44||t===91||t===93||t===123||t===125}function Ole(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Ule(t){return t===120?2:t===117?4:t===85?8:0}function Mle(t){return 48<=t&&t<=57?t-48:-1}function kq(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function $le(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Qq=new Array(256),eG=new Array(256);for(Xf=0;Xf<256;Xf++)Qq[Xf]=kq(Xf)?1:0,eG[Xf]=kq(Xf);var Xf;function Hle(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||zq,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function tG(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=Pce(n),new Lo(e,n)}function Pe(t,e){throw tG(t,e)}function U_(t,e){t.onWarning&&t.onWarning.call(null,tG(t,e))}var Lq={YAML:function(e,n,r){var o,i,s;e.version!==null&&Pe(e,"duplication of %YAML directive"),r.length!==1&&Pe(e,"YAML directive accepts exactly one argument"),o=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),o===null&&Pe(e,"ill-formed argument of the YAML directive"),i=parseInt(o[1],10),s=parseInt(o[2],10),i!==1&&Pe(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&U_(e,"unsupported YAML version of the document")},TAG:function(e,n,r){var o,i;r.length!==2&&Pe(e,"TAG directive accepts exactly two arguments"),o=r[0],i=r[1],Jq.test(o)||Pe(e,"ill-formed tag handle (first argument) of the TAG directive"),Yl.call(e.tagMap,o)&&Pe(e,'there is a previously declared suffix for "'+o+'" tag handle'),Zq.test(i)||Pe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch{Pe(e,"tag prefix is malformed: "+i)}e.tagMap[o]=i}};function Vl(t,e,n,r){var o,i,s,a;if(e<n){if(a=t.input.slice(e,n),r)for(o=0,i=a.length;o<i;o+=1)s=a.charCodeAt(o),s===9||32<=s&&s<=1114111||Pe(t,"expected valid JSON character");else Lle.test(a)&&Pe(t,"the stream contains non-printable characters");t.result+=a}}function Aq(t,e,n,r){var o,i,s,a;for(qn.isObject(n)||Pe(t,"cannot merge mappings; the provided source object is unacceptable"),o=Object.keys(n),s=0,a=o.length;s<a;s+=1)i=o[s],Yl.call(e,i)||(e[i]=n[i],r[i]=!0)}function Np(t,e,n,r,o,i,s,a,c){var l,u;if(Array.isArray(o))for(o=Array.prototype.slice.call(o),l=0,u=o.length;l<u;l+=1)Array.isArray(o[l])&&Pe(t,"nested arrays are not supported inside keys"),typeof o=="object"&&Nq(o[l])==="[object Object]"&&(o[l]="[object Object]");if(typeof o=="object"&&Nq(o)==="[object Object]"&&(o="[object Object]"),o=String(o),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(l=0,u=i.length;l<u;l+=1)Aq(t,e,i[l],n);else Aq(t,e,i,n);else!t.json&&!Yl.call(n,o)&&Yl.call(e,o)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,Pe(t,"duplicated mapping key")),o==="__proto__"?Object.defineProperty(e,o,{configurable:!0,enumerable:!0,writable:!0,value:i}):e[o]=i,delete n[o];return e}function LN(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):Pe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Rn(t,e,n){for(var r=0,o=t.input.charCodeAt(t.position);o!==0;){for(;Jf(o);)o===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),o=t.input.charCodeAt(++t.position);if(e&&o===35)do o=t.input.charCodeAt(++t.position);while(o!==10&&o!==13&&o!==0);if(Ks(o))for(LN(t),o=t.input.charCodeAt(t.position),r++,t.lineIndent=0;o===32;)t.lineIndent++,o=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&U_(t,"deficient indentation"),r}function H_(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Ao(n)))}function AN(t,e){e===1?t.result+=" ":e>1&&(t.result+=qn.repeat(`
`,e-1))}function Ble(t,e,n){var r,o,i,s,a,c,l,u,f=t.kind,m=t.result,d;if(d=t.input.charCodeAt(t.position),Ao(d)||Rp(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(o=t.input.charCodeAt(t.position+1),Ao(o)||n&&Rp(o)))return!1;for(t.kind="scalar",t.result="",i=s=t.position,a=!1;d!==0;){if(d===58){if(o=t.input.charCodeAt(t.position+1),Ao(o)||n&&Rp(o))break}else if(d===35){if(r=t.input.charCodeAt(t.position-1),Ao(r))break}else{if(t.position===t.lineStart&&H_(t)||n&&Rp(d))break;if(Ks(d))if(c=t.line,l=t.lineStart,u=t.lineIndent,Rn(t,!1,-1),t.lineIndent>=e){a=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=l,t.lineIndent=u;break}}a&&(Vl(t,i,s,!1),AN(t,t.line-c),i=s=t.position,a=!1),Jf(d)||(s=t.position+1),d=t.input.charCodeAt(++t.position)}return Vl(t,i,s,!1),t.result?!0:(t.kind=f,t.result=m,!1)}function Wle(t,e){var n,r,o;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=o=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Vl(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,o=t.position;else return!0;else Ks(n)?(Vl(t,r,o,!0),AN(t,Rn(t,!1,e)),r=o=t.position):t.position===t.lineStart&&H_(t)?Pe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,o=t.position);Pe(t,"unexpected end of the stream within a single quoted scalar")}function jle(t,e){var n,r,o,i,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return Vl(t,n,t.position,!0),t.position++,!0;if(a===92){if(Vl(t,n,t.position,!0),a=t.input.charCodeAt(++t.position),Ks(a))Rn(t,!1,e);else if(a<256&&Qq[a])t.result+=eG[a],t.position++;else if((s=Ule(a))>0){for(o=s,i=0;o>0;o--)a=t.input.charCodeAt(++t.position),(s=Ole(a))>=0?i=(i<<4)+s:Pe(t,"expected hexadecimal character");t.result+=$le(i),t.position++}else Pe(t,"unknown escape sequence");n=r=t.position}else Ks(a)?(Vl(t,n,r,!0),AN(t,Rn(t,!1,e)),n=r=t.position):t.position===t.lineStart&&H_(t)?Pe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Pe(t,"unexpected end of the stream within a double quoted scalar")}function Vle(t,e){var n=!0,r,o,i,s=t.tag,a,c=t.anchor,l,u,f,m,d,p=Object.create(null),h,g,v,C;if(C=t.input.charCodeAt(t.position),C===91)u=93,d=!1,a=[];else if(C===123)u=125,d=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),C=t.input.charCodeAt(++t.position);C!==0;){if(Rn(t,!0,e),C=t.input.charCodeAt(t.position),C===u)return t.position++,t.tag=s,t.anchor=c,t.kind=d?"mapping":"sequence",t.result=a,!0;n?C===44&&Pe(t,"expected the node content, but found ','"):Pe(t,"missed comma between flow collection entries"),g=h=v=null,f=m=!1,C===63&&(l=t.input.charCodeAt(t.position+1),Ao(l)&&(f=m=!0,t.position++,Rn(t,!0,e))),r=t.line,o=t.lineStart,i=t.position,kp(t,e,F_,!1,!0),g=t.tag,h=t.result,Rn(t,!0,e),C=t.input.charCodeAt(t.position),(m||t.line===r)&&C===58&&(f=!0,C=t.input.charCodeAt(++t.position),Rn(t,!0,e),kp(t,e,F_,!1,!0),v=t.result),d?Np(t,a,p,g,h,v,r,o,i):f?a.push(Np(t,null,p,g,h,v,r,o,i)):a.push(h),Rn(t,!0,e),C=t.input.charCodeAt(t.position),C===44?(n=!0,C=t.input.charCodeAt(++t.position)):n=!1}Pe(t,"unexpected end of the stream within a flow collection")}function Yle(t,e){var n,r,o=IN,i=!1,s=!1,a=e,c=0,l=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)r=!1;else if(f===62)r=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)IN===o?o=f===43?Rq:kle:Pe(t,"repeat of a chomping mode identifier");else if((u=Mle(f))>=0)u===0?Pe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?Pe(t,"repeat of an indentation width identifier"):(a=e+u-1,s=!0);else break;if(Jf(f)){do f=t.input.charCodeAt(++t.position);while(Jf(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Ks(f)&&f!==0)}for(;f!==0;){for(LN(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Ks(f)){c++;continue}if(t.lineIndent<a){o===Rq?t.result+=qn.repeat(`
`,i?1+c:c):o===IN&&i&&(t.result+=`
`);break}for(r?Jf(f)?(l=!0,t.result+=qn.repeat(`
`,i?1+c:c)):l?(l=!1,t.result+=qn.repeat(`
`,c+1)):c===0?i&&(t.result+=" "):t.result+=qn.repeat(`
`,c):t.result+=qn.repeat(`
`,i?1+c:c),i=!0,s=!0,c=0,n=t.position;!Ks(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Vl(t,n,t.position,!1)}return!0}function Fq(t,e){var n,r=t.tag,o=t.anchor,i=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=i),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Ao(s))));){if(a=!0,t.position++,Rn(t,!0,-1)&&t.lineIndent<=e){i.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,kp(t,e,Xq,!1,!0),i.push(t.result),Rn(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)Pe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=r,t.anchor=o,t.kind="sequence",t.result=i,!0):!1}function qle(t,e,n){var r,o,i,s,a,c,l=t.tag,u=t.anchor,f={},m=Object.create(null),d=null,p=null,h=null,g=!1,v=!1,C;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),C=t.input.charCodeAt(t.position);C!==0;){if(!g&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,Pe(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),i=t.line,(C===63||C===58)&&Ao(r))C===63?(g&&(Np(t,f,m,d,p,null,s,a,c),d=p=h=null),v=!0,g=!0,o=!0):g?(g=!1,o=!0):Pe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,C=r;else{if(s=t.line,a=t.lineStart,c=t.position,!kp(t,n,Kq,!1,!0))break;if(t.line===i){for(C=t.input.charCodeAt(t.position);Jf(C);)C=t.input.charCodeAt(++t.position);if(C===58)C=t.input.charCodeAt(++t.position),Ao(C)||Pe(t,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(Np(t,f,m,d,p,null,s,a,c),d=p=h=null),v=!0,g=!1,o=!1,d=t.tag,p=t.result;else if(v)Pe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=l,t.anchor=u,!0}else if(v)Pe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=l,t.anchor=u,!0}if((t.line===i||t.lineIndent>e)&&(g&&(s=t.line,a=t.lineStart,c=t.position),kp(t,e,O_,!0,o)&&(g?p=t.result:h=t.result),g||(Np(t,f,m,d,p,h,s,a,c),d=p=h=null),Rn(t,!0,-1),C=t.input.charCodeAt(t.position)),(t.line===i||t.lineIndent>e)&&C!==0)Pe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return g&&Np(t,f,m,d,p,null,s,a,c),v&&(t.tag=l,t.anchor=u,t.kind="mapping",t.result=f),v}function Gle(t){var e,n=!1,r=!1,o,i,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&Pe(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(n=!0,s=t.input.charCodeAt(++t.position)):s===33?(r=!0,o="!!",s=t.input.charCodeAt(++t.position)):o="!",e=t.position,n){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(i=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):Pe(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Ao(s);)s===33&&(r?Pe(t,"tag suffix cannot contain exclamation marks"):(o=t.input.slice(e-1,t.position+1),Jq.test(o)||Pe(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);i=t.input.slice(e,t.position),Fle.test(i)&&Pe(t,"tag suffix cannot contain flow indicator characters")}i&&!Zq.test(i)&&Pe(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{Pe(t,"tag name is malformed: "+i)}return n?t.tag=i:Yl.call(t.tagMap,o)?t.tag=t.tagMap[o]+i:o==="!"?t.tag="!"+i:o==="!!"?t.tag="tag:yaml.org,2002:"+i:Pe(t,'undeclared tag handle "'+o+'"'),!0}function zle(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&Pe(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Ao(n)&&!Rp(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Kle(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Ao(r)&&!Rp(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Pe(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Yl.call(t.anchorMap,n)||Pe(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Rn(t,!0,-1),!0}function kp(t,e,n,r,o){var i,s,a,c=1,l=!1,u=!1,f,m,d,p,h,g;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,i=s=a=O_===n||Xq===n,r&&Rn(t,!0,-1)&&(l=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;Gle(t)||zle(t);)Rn(t,!0,-1)?(l=!0,a=i,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=l||o),(c===1||O_===n)&&(F_===n||Kq===n?h=e:h=e+1,g=t.position-t.lineStart,c===1?a&&(Fq(t,g)||qle(t,g,h))||Vle(t,h)?u=!0:(s&&Yle(t,h)||Wle(t,h)||jle(t,h)?u=!0:Kle(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&Pe(t,"alias node should not have any properties")):Ble(t,h,F_===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(u=a&&Fq(t,g))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&Pe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,m=t.implicitTypes.length;f<m;f+=1)if(p=t.implicitTypes[f],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Yl.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,d=t.typeMap.multi[t.kind||"fallback"],f=0,m=d.length;f<m;f+=1)if(t.tag.slice(0,d[f].tag.length)===d[f].tag){p=d[f];break}p||Pe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&Pe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):Pe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function Xle(t){var e=t.position,n,r,o,i=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Rn(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(i=!0,s=t.input.charCodeAt(++t.position),n=t.position;s!==0&&!Ao(s);)s=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),o=[],r.length<1&&Pe(t,"directive name must not be less than one character in length");s!==0;){for(;Jf(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Ks(s));break}if(Ks(s))break;for(n=t.position;s!==0&&!Ao(s);)s=t.input.charCodeAt(++t.position);o.push(t.input.slice(n,t.position))}s!==0&&LN(t),Yl.call(Lq,r)?Lq[r](t,r,o):U_(t,'unknown document directive "'+r+'"')}if(Rn(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Rn(t,!0,-1)):i&&Pe(t,"directives end mark is expected"),kp(t,t.lineIndent-1,O_,!1,!0),Rn(t,!0,-1),t.checkLineBreaks&&Ale.test(t.input.slice(e,t.position))&&U_(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&H_(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Rn(t,!0,-1));return}if(t.position<t.length-1)Pe(t,"end of the stream or a document separator is expected");else return}function nG(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new Hle(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,Pe(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Xle(n);return n.documents}function Jle(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=nG(t,n);if(typeof e!="function")return r;for(var o=0,i=r.length;o<i;o+=1)e(r[o])}function Zle(t,e){var n=nG(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new Lo("expected a single document in the stream, but found more")}}var Qle=Jle,eue=Zle,rG={loadAll:Qle,load:eue},oG=Object.prototype.toString,iG=Object.prototype.hasOwnProperty,FN=65279,tue=9,ow=10,nue=13,rue=32,oue=33,iue=34,bN=35,sue=37,aue=38,cue=39,lue=42,sG=44,uue=45,M_=58,fue=61,due=62,mue=63,pue=64,aG=91,cG=93,hue=96,lG=123,gue=124,uG=125,Kr={};Kr[0]="\\0";Kr[7]="\\a";Kr[8]="\\b";Kr[9]="\\t";Kr[10]="\\n";Kr[11]="\\v";Kr[12]="\\f";Kr[13]="\\r";Kr[27]="\\e";Kr[34]='\\"';Kr[92]="\\\\";Kr[133]="\\N";Kr[160]="\\_";Kr[8232]="\\L";Kr[8233]="\\P";var vue=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],wue=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function yue(t,e){var n,r,o,i,s,a,c;if(e===null)return{};for(n={},r=Object.keys(e),o=0,i=r.length;o<i;o+=1)s=r[o],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&iG.call(c.styleAliases,a)&&(a=c.styleAliases[a]),n[s]=a;return n}function Cue(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new Lo("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+qn.repeat("0",r-e.length)+e}var Eue=1,iw=2;function Sue(t){this.schema=t.schema||zq,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=qn.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=yue(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?iw:Eue,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Oq(t,e){for(var n=qn.repeat(" ",e),r=0,o=-1,i="",s,a=t.length;r<a;)o=t.indexOf(`
`,r),o===-1?(s=t.slice(r),r=a):(s=t.slice(r,o+1),r=o+1),s.length&&s!==`
`&&(i+=n),i+=s;return i}function TN(t,e){return`
`+qn.repeat(" ",t.indent*e)}function _ue(t,e){var n,r,o;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(o=t.implicitTypes[n],o.resolve(e))return!0;return!1}function $_(t){return t===rue||t===tue}function sw(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==FN||65536<=t&&t<=1114111}function Uq(t){return sw(t)&&t!==FN&&t!==nue&&t!==ow}function Mq(t,e,n){var r=Uq(t),o=r&&!$_(t);return(n?r:r&&t!==sG&&t!==aG&&t!==cG&&t!==lG&&t!==uG)&&t!==bN&&!(e===M_&&!o)||Uq(e)&&!$_(e)&&t===bN||e===M_&&o}function xue(t){return sw(t)&&t!==FN&&!$_(t)&&t!==uue&&t!==mue&&t!==M_&&t!==sG&&t!==aG&&t!==cG&&t!==lG&&t!==uG&&t!==bN&&t!==aue&&t!==lue&&t!==oue&&t!==gue&&t!==fue&&t!==due&&t!==cue&&t!==iue&&t!==sue&&t!==pue&&t!==hue}function Due(t){return!$_(t)&&t!==M_}function nw(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}function fG(t){var e=/^\n* /;return e.test(t)}var dG=1,RN=2,mG=3,pG=4,Tp=5;function Iue(t,e,n,r,o,i,s,a){var c,l=0,u=null,f=!1,m=!1,d=r!==-1,p=-1,h=xue(nw(t,0))&&Due(nw(t,t.length-1));if(e||s)for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=nw(t,c),!sw(l))return Tp;h=h&&Mq(l,u,a),u=l}else{for(c=0;c<t.length;l>=65536?c+=2:c++){if(l=nw(t,c),l===ow)f=!0,d&&(m=m||c-p-1>r&&t[p+1]!==" ",p=c);else if(!sw(l))return Tp;h=h&&Mq(l,u,a),u=l}m=m||d&&c-p-1>r&&t[p+1]!==" "}return!f&&!m?h&&!s&&!o(t)?dG:i===iw?Tp:RN:n>9&&fG(t)?Tp:s?i===iw?Tp:RN:m?pG:mG}function Pue(t,e,n,r,o){t.dump=function(){if(e.length===0)return t.quotingType===iw?'""':"''";if(!t.noCompatMode&&(vue.indexOf(e)!==-1||wue.test(e)))return t.quotingType===iw?'"'+e+'"':"'"+e+"'";var i=t.indent*Math.max(1,n),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=r||t.flowLevel>-1&&n>=t.flowLevel;function c(l){return _ue(t,l)}switch(Iue(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!r,o)){case dG:return e;case RN:return"'"+e.replace(/'/g,"''")+"'";case mG:return"|"+$q(e,t.indent)+Hq(Oq(e,i));case pG:return">"+$q(e,t.indent)+Hq(Oq(bue(e,s),i));case Tp:return'"'+Tue(e)+'"';default:throw new Lo("impossible error: invalid scalar style")}}()}function $q(t,e){var n=fG(t)?String(e):"",r=t[t.length-1]===`
`,o=r&&(t[t.length-2]===`
`||t===`
`),i=o?"+":r?"":"-";return n+i+`
`}function Hq(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function bue(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var l=t.indexOf(`
`);return l=l!==-1?l:t.length,n.lastIndex=l,Bq(t.slice(0,l),e)}(),o=t[0]===`
`||t[0]===" ",i,s;s=n.exec(t);){var a=s[1],c=s[2];i=c[0]===" ",r+=a+(!o&&!i&&c!==""?`
`:"")+Bq(c,e),o=i}return r}function Bq(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,o=0,i,s=0,a=0,c="";r=n.exec(t);)a=r.index,a-o>e&&(i=s>o?s:a,c+=`
`+t.slice(o,i),o=i+1),s=a;return c+=`
`,t.length-o>e&&s>o?c+=t.slice(o,s)+`
`+t.slice(s+1):c+=t.slice(o),c.slice(1)}function Tue(t){for(var e="",n=0,r,o=0;o<t.length;n>=65536?o+=2:o++)n=nw(t,o),r=Kr[n],!r&&sw(n)?(e+=t[o],n>=65536&&(e+=t[o+1])):e+=r||Cue(n);return e}function Rue(t,e,n){var r="",o=t.tag,i,s,a;for(i=0,s=n.length;i<s;i+=1)a=n[i],t.replacer&&(a=t.replacer.call(n,String(i),a)),(hc(t,e,a,!1,!1)||typeof a>"u"&&hc(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=o,t.dump="["+r+"]"}function Wq(t,e,n,r){var o="",i=t.tag,s,a,c;for(s=0,a=n.length;s<a;s+=1)c=n[s],t.replacer&&(c=t.replacer.call(n,String(s),c)),(hc(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&hc(t,e+1,null,!0,!0,!1,!0))&&((!r||o!=="")&&(o+=TN(t,e)),t.dump&&ow===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=i,t.dump=o||"[]"}function Nue(t,e,n){var r="",o=t.tag,i=Object.keys(n),s,a,c,l,u;for(s=0,a=i.length;s<a;s+=1)u="",r!==""&&(u+=", "),t.condenseFlow&&(u+='"'),c=i[s],l=n[c],t.replacer&&(l=t.replacer.call(n,c,l)),hc(t,e,c,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),hc(t,e,l,!1,!1)&&(u+=t.dump,r+=u));t.tag=o,t.dump="{"+r+"}"}function kue(t,e,n,r){var o="",i=t.tag,s=Object.keys(n),a,c,l,u,f,m;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Lo("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)m="",(!r||o!=="")&&(m+=TN(t,e)),l=s[a],u=n[l],t.replacer&&(u=t.replacer.call(n,l,u)),hc(t,e+1,l,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&ow===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,f&&(m+=TN(t,e)),hc(t,e+1,u,!0,f)&&(t.dump&&ow===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,o+=m));t.tag=i,t.dump=o||"{}"}function jq(t,e,n){var r,o,i,s,a,c;for(o=n?t.explicitTypes:t.implicitTypes,i=0,s=o.length;i<s;i+=1)if(a=o[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(n?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,oG.call(a.represent)==="[object Function]")r=a.represent(e,c);else if(iG.call(a.represent,c))r=a.represent[c](e,c);else throw new Lo("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}function hc(t,e,n,r,o,i,s){t.tag=null,t.dump=n,jq(t,n,!1)||jq(t,n,!0);var a=oG.call(t.dump),c=r,l;r&&(r=t.flowLevel<0||t.flowLevel>e);var u=a==="[object Object]"||a==="[object Array]",f,m;if(u&&(f=t.duplicates.indexOf(n),m=f!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(o=!1),m&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&m&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")r&&Object.keys(t.dump).length!==0?(kue(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(Nue(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?Wq(t,e-1,t.dump,o):Wq(t,e,t.dump,o),m&&(t.dump="&ref_"+f+t.dump)):(Rue(t,e,t.dump),m&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&Pue(t,t.dump,e,i,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Lo("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(l=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?l="!"+l:l.slice(0,18)==="tag:yaml.org,2002:"?l="!!"+l.slice(18):l="!<"+l+">",t.dump=l+" "+t.dump)}return!0}function Lue(t,e){var n=[],r=[],o,i;for(NN(t,n,r),o=0,i=r.length;o<i;o+=1)e.duplicates.push(n[r[o]]);e.usedDuplicates=new Array(i)}function NN(t,e,n){var r,o,i;if(t!==null&&typeof t=="object")if(o=e.indexOf(t),o!==-1)n.indexOf(o)===-1&&n.push(o);else if(e.push(t),Array.isArray(t))for(o=0,i=t.length;o<i;o+=1)NN(t[o],e,n);else for(r=Object.keys(t),o=0,i=r.length;o<i;o+=1)NN(t[r[o]],e,n)}function Aue(t,e){e=e||{};var n=new Sue(e);n.noRefs||Lue(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),hc(n,0,r,!0,!0)?n.dump+`
`:""}var Fue=Aue,Oue={dump:Fue};function ON(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var aw=rG.load,TDe=rG.loadAll,RDe=Oue.dump;var NDe=ON("safeLoad","load"),kDe=ON("safeLoadAll","loadAll"),LDe=ON("safeDump","dump");var ds=Y(require("path")),CG=Y(require("os")),EG=Y(require("crypto")),SG=Y(cS());var cw=Y(require("path")),vG=Y(require("os"));var gG=Y(require("crypto"));var fs={async readDocument(t){switch(t.scheme){case"file":try{return(await at(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,n){switch(t.scheme){case"file":let r=Do(n,e);await Vg(t.fsPath,r);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},Ke=class t{constructor(e,n=t.scheme){this.fileHost=e;this.scheme=n}static scheme="vscode-fileHost";async readDocument(e){switch(e.scheme){case this.scheme:try{return(await this.fileHost.readFile(De(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case this.scheme:let o=Do(r,n);await this.fileHost.writeFile(De(e,this.fileHost.platform),Buffer.from(o));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},co=class t{constructor(e){this.shellServer=e}static scheme="vscode-remote";static nonce;async readDocument(e){switch(e.scheme){case t.scheme:try{let{stdout:n}=await this.shellServer.exec(`cat ${e.path}`);return n}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,n,r){switch(e.scheme){case t.scheme:try{t.nonce||(t.nonce=gG.randomUUID());let o=Do(r,n),i=`EOF-${t.nonce}`;await this.shellServer.exec(`cat <<'${i}' >${e.path}
${o}
${i}
`)}catch(o){console.log(o)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},MN=class{constructor(e){this.documents=e}async readDocument(e){let n=this.documents[e.scheme];if(!n)throw new Error(`Unsupported scheme: ${e.toString()}`);return n.readDocument(e)}async applyEdits(e,n,r){let o=this.documents[e.scheme];if(!o)throw new Error(`Unsupported scheme: ${e.toString()}`);return o.applyEdits(e,n,r)}};function ur(t,e){let n={file:fs,[Ke.scheme]:new Ke(t)};return e&&(n[co.scheme]="readFile"in e?new Ke(e,co.scheme):new co(e)),new MN(n)}var UN=new Map;async function $N(t,e){let n=t.toString(),r=UN.get(n);if(r||UN.set(n,r=[]),r.push(e),r.length===1){for(;r.length;)await r[0](),r.shift();UN.delete(n)}}function De(t,e){let n;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===Ke.scheme)?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,e==="win32"&&(n=n.replace(/\//g,"\\"),n[0]==="\\"&&n[1]!=="\\"&&(n=`C:${n}`)),n}function Nn(t,e,n){let r=t==="win32"?"/"+n.replace(/\\/g,"/"):n;return e.with({path:r})}function ql(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function lw(t,e){let n=t.normalize(e);return ql(t,"").includes(n)}async function Zf(t,e){let n=ql(t.path,e);for(let r of n)if(await t.isFile(r))return Ce.file(r).with({scheme:Ke.scheme})}async function wG(t){let e=ql(cw,t);for(let n of e)if(await Er(n))return n}var gc=`{${vG.EOL}}`;async function $i(t,e,n,r){e.scheme==="file"&&await ns(cw.dirname(e.fsPath)),await t.applyEdits(e,n,r)}function Qf(t){let e=cw.posix.dirname(t.path);return t.with({path:e})}var uw=require("string_decoder");function fw(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e={...t},n=e.customizations||(e.customizations={}),r=n.vscode||(n.vscode={});return e.extensions&&(r.extensions=(r.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(r.settings={...e.settings,...r.settings||{}},delete e.settings),e.devPort!==void 0&&r.devPort===void 0&&(r.devPort=e.devPort,delete e.devPort),e}function HN(t,e,n){return B_(t,e.configFilePath,n)}function B_(t,e,n){let r=Qf(e);return e.with({path:ds.posix.resolve(r.path,t.platform==="win32"&&e.scheme!==co.scheme?(ds.win32.isAbsolute(n)?"/":"")+n.replace(/\\/g,"/"):n)})}function Fo(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function W_(t){return t&&(Fo(t)||"image"in t||"dockerComposeFile"in t)}function ed(t,e){return HN(t,e,Mue(e))}function Mue(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function Gl(t,e,n,r){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(o=>De(HN(t,e,o),t.platform))}else if(typeof e.dockerComposeFile=="string")return[De(HN(t,e,e.dockerComposeFile),t.platform)];if(r){let o=n==null?void 0:n.COMPOSE_FILE;if(o)return o.split(t.path.delimiter).map(a=>t.path.resolve(r,a));try{let a=t.path.join(r,".env"),c=await t.readFile(a),l=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),u=l&&l[1].trim();if(u)return u.split(t.path.delimiter).map(f=>t.path.resolve(r,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let i=[t.path.resolve(r,"docker-compose.yml")],s=t.path.resolve(r,"docker-compose.override.yml");return await t.isFile(s)&&i.push(s),i}return[]}async function si(t,e){let{cliHost:n,postCreate:r,output:o}=t;o.write(`Running Dev Containers CLI:   ${e.join(" ")}
`);let i=await $ue(t),s=dw(n),a;try{await Hue({exec:n.exec,cwd:t.cwd||i.cwd,cmd:s.cmd,args:[...s.args,i.script,...e],env:await BN(t,s.cmd),stdin:r==null?void 0:r.onDidInput,output:o,stdoutData:c=>a=c,stderrData:c=>o.event(c)}),o.write(a?JSON.stringify(a,void 0,4):"(No dev container CLI standard out)",1),o.write("Dev Containers CLI completed",1)}catch(c){throw c.data=a,c}return a}async function $ue(t){let{cliHost:e,extensionPath:n,output:r}=t,o=ds.join(n,"dist","spec-node","devContainersSpecCLI.js"),i=e.type==="local"?n:e.path.join(await e.homedir(),".vscode-remote-containers","dist",`dev-containers-cli-${t.package.version}`),s=e.type==="local"?o:e.path.join(i,"dist","spec-node","devContainersSpecCLI.js");if(["wsl","remote"].indexOf(e.type)!==-1){let a="Checking for Dev Containers CLI",c=r.start(a),l=await e.isFile(s);if(r.stop(a,c),!l){let u="Copying Dev Containers CLI",f=r.start(u),m=`${i}-${EG.randomUUID()}`,d=e.path.join(m,"dist","spec-node","devContainersSpecCLI.js");await e.mkdirp(e.path.dirname(d)),await Promise.all([yG(ds.join(n,"package.json"),e,e.path.join(m,"package.json")),yG(o,e,d),mw(ds.join(n,"scripts"),e,e.path.join(m,"scripts"),r)]),await e.rename(m,i),r.stop(u,f)}}return{cwd:i,script:s}}function dw(t){if(t.type==="local")return Ll?{cmd:process.argv[0],args:[]}:{cmd:process.argv[0],args:[]};if(t.nodeExecutable)return{cmd:t.nodeExecutable,args:[]};throw new Error("Node executable required")}async function Hue(t){let{exec:e,cmd:n,args:r,cwd:o,env:i,stdin:s,output:a,stdoutData:c,stderrData:l}=t,u=await e({cmd:n,args:r,cwd:o,env:i,output:a});return new Promise((f,m)=>{let d=new uw.StringDecoder,p="";u.stdout.on("data",C=>{p+=d.write(C);let w=p.split(`
`);p=w.pop();for(let y of w)if(y.trim())try{c(JSON.parse(y))}catch{a.write(y)}}),u.stdout.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let h=new uw.StringDecoder,g="";u.stderr.on("data",C=>{g+=h.write(C);let w=g.split(`
`);g=w.pop();for(let y of w)if(y.trim())try{l(JSON.parse(y))}catch{a.write(y)}}),u.stderr.on("error",C=>{if((C==null?void 0:C.code)!=="ENOTCONN")throw C});let v=[];u.exit.then(({code:C})=>{try{v.forEach(w=>w.dispose()),C?(a.write(`Exit code ${C}`),m({message:`Command failed: ${n} ${(r||[]).join(" ")}`,code:C})):f()}catch(w){m(w)}},m),typeof s=="function"&&v.push(s(C=>u.stdin.write(C)))})}async function BN(t,e){let{cliHost:n,env:r,appRoot:o}=t,i=await n.locateCertificatesFile();return{...r,...n.type==="local"?o?{NODE_PATH:`${n.path.join(o,"node_modules.asar")}${ds.delimiter}${n.path.join(o,"node_modules")}`}:void 0:n.type==="container"?void 0:{NODE_PATH:n.path.join(n.path.dirname(e),"node_modules")},...i?{NODE_EXTRA_CA_CERTS:i}:{},...Ll?{TS_NODE_PROJECT:void 0}:{}}}async function yG(t,e,n){await e.writeFile(n,await at(t))}async function mw(t,e,n,r){await e.mkdirp(n);let o=SG.c({cwd:t,filter:l=>(console.log(l),!0)},["."]),i=new Promise((l,u)=>{o.on("error",u),o.on("finish",l)}),s=await e.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:n,output:r}),a=new uw.StringDecoder;s.stdout.on("data",l=>{r.write(a.write(l))});let c=new uw.StringDecoder;s.stderr.on("data",l=>{r.write(ot(c.write(l)))}),o.pipe(s.stdin),await Promise.all([s.exit,i])}async function lo(){return ds.join(CG.tmpdir(),process.platform==="linux"?`vsch-${await h_()}`:"vsch")}function Bue(){return{contentHashes:{}}}async function V_(t,e,n,r){let o=t.getConfigurationState();if(o){let i=o.contentHashes,s=Object.keys(i),c=(await WN(e,n,r)).contentHashes,l=Object.keys(c),u=new Set(l);s.forEach(d=>u.delete(d));let f=new Set(s);l.forEach(d=>f.delete(d));let m=[];for(let d of s)d in c&&c[d]!==i[d]&&m.push(d);if(u.size||f.size||m.length){let d=await WN(e,n,r);(async()=>{await t.containerOutdated([...u,...f,...m].sort())==="ignore"&&await t.updateConfigurationState(d)})().catch(console.error)}}else await xG(t,e,n,r)}async function Y_(t,e,n,r,o){let i="Updating configuration state",s=o.start(i);await xG(t,e,n,r),o.stop(i,s)}async function xG(t,e,n,r){let o=await WN(e,n,r);await t.updateConfigurationState(o)}async function WN(t,e,n){let r=Bue();j_(r,pw.posix.basename(n.configFilePath.path),JSON.stringify({...n,forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0}));let o=Qf(n.configFilePath).path;if(Fo(n)){let i=ed(t,n),s=await e.readDocument(i);s!==void 0&&j_(r,pw.posix.relative(o,i.path),s)}if("dockerComposeFile"in n){let i=await Gl(t,n,t.env,t.cwd),s=await Promise.all(i.map(async a=>{let c=Ce.file(a).with({scheme:Ke.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&j_(r,pw.posix.relative(o,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:l}=s[a];if(l){let u=Wue(l),f=u&&u.services,m=f&&f[n.service],d=m&&m.build,p=d&&(typeof d=="string"?d:d.context);if(p){let h=B_(t,c,p),g=DG(h,d.dockerfile||"Dockerfile"),v=await e.readDocument(g);v!==void 0&&j_(r,pw.posix.relative(o,g.path),v)}if(m&&(m.image||m.build))break}}}return r}function Wue(t){try{return aw(t)}catch{return{}}}function j_(t,e,n){let r=_G.createHash("sha256").update(n).digest("hex");t.contentHashes[e]=r}var gs=Y(require("path")),Qs=Y(require("crypto"));var Ql=Y($r());var Xr=Y(require("path")),JN=Y(require("crypto"));var nd=Y($r());var RG=Y(require("net")),GN=Y(require("path"));var jN=Y(require("path")),YN=Y(require("http")),IG=Y(require("os")),PG=Y(require("crypto"));async function bG(t,e){let n=await qN(t),r=new VN(n,e);return r.listen(),r}var VN=class{constructor(e,n){this.ipcHandlePath=e;this.server=YN.createServer((r,o)=>{Promise.resolve(n(r,o)).catch(i=>console.error(i&&i.message||i))}),this.server.on("error",r=>console.error(r))}server;listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function TG(t){return new Promise((e,n)=>{let r=[];t.setEncoding("utf8"),t.on("data",o=>r.push(o)),t.on("error",o=>n(o)),t.on("end",()=>{let o=JSON.parse(r.join(""));e(o)})})}async function qN(t){let e=PG.randomUUID(),n=`${t}-${e}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?jN.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):jN.join(IG.tmpdir(),`${n}.sock`)}var q_=class{messages=[];dequeueRequest;push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let n=this.messages;return this.messages=[],n}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((n,r)=>{this.dequeueRequest={resolve:n,reject:r},typeof e=="number"&&setTimeout(r,e)})}};async function zl(t,e,n){if(process.env.SSH_ASKPASS)return{};let r=await qN("ssh-askpass");return await new Promise((o,i)=>{RG.createServer(s=>{s.setEncoding("utf8");let a="";s.on("data",async c=>{if(a+=c,a.endsWith(`
`))try{n.write(`SSH askpass request: ${a}`,1);let l=await e(JSON.parse(a));s.write(l,u=>{u&&console.error(u)}),s.end()}catch(l){console.error(l)}}),s.on("error",c=>console.error(c))}).on("error",s=>{i(s)}).listen(r,()=>{o()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:GN.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),SSH_ASKPASS_REQUIRE:"force",VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_MAIN:GN.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var jue=0;function fr(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++jue)}:{}}async function ai(t,e){return(await ms(t,[e]))[0]}async function ms(t,e){let n=await z_(t,"container",e);for(let r of n){r.Ports=[];let o=r.NetworkSettings.Ports;for(let i in o){let[s,a]=i.split("/");for(let c of o[i]||[]){let{HostIp:l,HostPort:u}=c;r.Ports.push({IP:l,PrivatePort:parseInt(s),PublicPort:parseInt(u),Type:a})}}}return n}async function NG(t,e){return(await z_(t,"image",[e]))[0]}async function G_(t,e){return(await z_(t,"volume",[e]))[0]}async function td(t,e){return z_(t,"volume",e)}async function z_(t,e,n){if(!n.length)return[];let r=Bi(t),o=await te({...r,args:(r.args||[]).concat(["inspect","--type",e,...n])});try{return JSON.parse(o.stdout.toString())}catch(i){throw console.error({stdout:o.stdout.toString(),stderr:o.stderr.toString()}),i}}async function Kl(t,e=!1,n=[]){let r=[];e&&r.push("-a");for(let i of n)r.push("--filter",`label=${i}`);return(await et(t,"ps","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function Oo(t,e=[]){let n=[];for(let o of e)n.push("--filter",`label=${o}`);return(await et(t,"volume","ls","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function Xl(t,e=[]){return(await et(t,"volume","ls","-q","-f","dangling=true",...e.map(r=>["-f",`label=${r}`]).flat())).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function Lp(t,e,n){let r=[];for(let o of n||[])r.push("--label",o);await et(t,"volume","create",...r,e)}async function Hi(t,e){var o;let n,r;try{for(let i=0,s=7;i<s;i++)try{return await et(t,"rm","-f",e)}catch(a){let c=((o=a==null?void 0:a.stderr)==null?void 0:o.toString().toLowerCase())||"";if(i===s-1||!c.includes("already in progress"))throw a;r||(n=await K_(t,{container:[e],event:["destroy"]}),r=new Promise(l=>{n.stdout.on("data",()=>{l(),n.terminate(),r=new Promise(()=>{})})})),await Promise.race([r,Bt(1e3)])}}finally{n&&n.terminate()}throw new Error("Unreachable")}async function K_(t,e){let{exec:n,cmd:r,args:o,env:i,output:s}=Bi(t),a=[];for(let m in e)for(let d of e[m])a.push("--filter",`${m}=${d}`);let c="isPodman"in t&&t.isPodman?"json":"{{json .}}",l=(o||[]).concat(["events","--format",c,...a]),u=await n({cmd:r,args:l,env:i,output:s}),f=[];return u.stderr.on("data",m=>f.push(m)),u.exit.then(({code:m,signal:d})=>{f.length&&s.write(ot(Buffer.concat(f).toString())),(m||d&&d!=="SIGKILL")&&s.write(ot(`Docker events terminated (code: ${m}, signal: ${d}).`))},m=>{s.write(ot(m&&(m.stack||m.message)))}),u}async function et(t,...e){let n=Bi(t);return te({...n,args:(n.args||[]).concat(e)})}async function zN(t){var e;try{let{stdout:n}=await et(t,"context","ls","--format","{{json .}}"),r=`[${n.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(r).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function kG(t){try{let{stdout:e}=await et(t,"-v");return e.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function LG(t,...e){let n=OG(t);return Fi({...n,args:(n.args||[]).concat(e)})}async function hw(t,...e){let n=Bi(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return te({...n,args:(n.args||[]).concat(e)})}function ps(t,e,n){return async function(r){let{exec:o,cmd:i,args:s,env:a}=Bi(t),{argsPrefix:c,args:l}=FG(e,n,r,!1);return o({cmd:i,args:(s||[]).concat(l),env:a,output:AG(r.output,i,c)})}}async function Xs(t,e,n,r){if(!await r("node-pty"))throw new Error("Missing node-pty");return async function(i){let{ptyExec:s,cmd:a,args:c,env:l}=OG(t),{argsPrefix:u,args:f}=FG(e,n,i,s.isTTY!==!1);return s({cmd:a,args:(c||[]).concat(f),env:l,output:AG(i.output,a,u)})}}function AG(t,e,n){return Vue(t,`Run: ${e} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function Vue(t,e,n){let r=new RegExp(zf(e),"g");return on({...t,get dimensions(){return t.dimensions},event:i=>t.event("text"in i?{...i,text:i.text.replace(r,n)}:i)})}function FG(t,e,n,r){let{env:o,cwd:i,cmd:s,args:a}=n,c=["exec","-i"];r&&c.push("-t"),e&&c.push("-u",e),o&&Object.keys(o).forEach(u=>c.push("-e",`${u}=${o[u]}`)),i&&c.push("-w",i),c.push(t);let l=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:l,args:c}}function Bi(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...fr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...fr(t.env)},output:t.output}:{...t,env:{...t.env,...fr(t.env)}}}function OG(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.dockerEnv,...fr(t.dockerEnv)},output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:{...t.env,...fr(t.env)},output:t.output}:{...t,env:{...t.env,...fr(t.env)}}}var UG=Y($r()),Yue="com.docker.compose.project";async function MG(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var v,C;let{common:p}=t,{cliHost:h}=e,g;try{let w=await Gl(h,n,h.env,h.cwd),y=h.path.join(h.cwd,".env"),S=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await h.isFile(y)?y:void 0,P=!c,D=r.remoteUser,A=que(n);g=await Fp(t,s.Id,A,D),u&&c&&g.user!=="root"&&(g.launchRootShellServer?await A_(g,g.launchRootShellServer,A,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let O=await J_(p,c,s,A,g),L=ur(h,g.shellServer);P||await Y_(t.configurationTracking,h,L,n,p.output);let E=r.shutdownAction;E==="stopContainer"&&(E="stopCompose");let I={cwd:o,dockerCLI:t.dockerCLI,dockerComposeCLI:await t.dockerComposeCLI(),env:p.env,containerId:s.Id,user:g.user,sessionId:p.sessionId,shutdownAction:E,projectName:gw(s),composeFiles:w,envFile:S,buildContainerRunArgs:l,service:n.service,runServices:n.runServices,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:R,doneWithDocuments:_}=await X_(t,h,L,"dockerCompose",I,P?n:void 0);p.backgroundTasks.push(_);let x=((C=(((v=r.customizations)==null?void 0:v.vscode)||[]).slice().reverse().find(G=>typeof G.devPort=="number"))==null?void 0:C.devPort)||Wl,{hostOrContainerPort:b,hostPortServer:N,connectionToken:k,remoteEnv:$,serverDownloaded:H}=await jl(p,g,n,r,x,Op(t,e,g,i,f,s.Id,a,m,d),O);return R.hostPortServer=N,{params:p,properties:g,config:n,resolvedAuthority:{host:vc,port:b,connectionToken:k,extensionHostEnv:$},tunnelInformation:p.isLocalContainer?Ap(s):{},dockerParams:t,dockerContainerId:s.Id,serverDownloaded:H}}catch(w){let y=w instanceof Ee?w:new Ee({description:UG.t("An error occurred setting up the container."),originalError:w});throw s&&(y.manageContainer=!0,y.params=t.common,y.containerId=s.Id,y.dockerParams=t),g&&(y.containerProperties=g),y.config=n,y}}function que(t){return t.workspaceFolder||"/"}function gw(t){let e=(t.Config.Labels||{})[Yue];return e||void 0}function hs(t,e,n){let r;return()=>r||(r=(async()=>{let o=!0,i;try{i=(await hw({...t,cmd:e},"compose","version","--short")).stdout}catch{i=(await hw({...t,cmd:n},"version","--short")).stdout,o=!1}let s=i.toString().trim();return t.output.write(`Docker Compose version: ${s}`),{version:s,cmd:o?e:n,args:o?["compose"]:[]}})())}var vw=Y($r());var Z_=Y(XC()),$G=Y(require("url"));function Q_(t,e){return new Promise((n,r)=>{let o=new $G.URL(t.url),i={hostname:o.hostname,port:o.port,path:o.pathname+o.search,method:t.type,headers:t.headers},s=(o.protocol==="https:"?Z_.https:Z_.http).request(i,a=>{if(a.statusCode<200||a.statusCode>299)r(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,5);else{a.on("error",r);let c=[];a.on("data",l=>c.push(l)),a.on("end",()=>n(Buffer.concat(c)))}});s.on("error",r),t.data&&s.write(t.data),s.end()})}async function Up(t,e,n,r){var c;let o=await Kue(e,t.output),i=Object.keys(n.features||{}).map(l=>{let u=Gue(o,l);return u?{configFeatureId:l,disallowedFeatureEntry:u}:void 0}).filter(Boolean);if(!i.length)return;let s=!1;if(r){let l=await Jl(t,r);((c=l==null?void 0:l.State)==null?void 0:c.Status)==="running"&&(await et(t,"stop","-t","0",l.Id),s=!0)}let a=i[0];throw KN(a.configFeatureId,a.disallowedFeatureEntry.documentationURL,s)}function KN(t,e,n){return new Ee({description:n?vw.t("Cannot use the '{0}' feature since it was reported to be problematic. The existing dev container was stopped.",t):vw.t("Cannot use the '{0}' feature since it was reported to be problematic.",t),detail:vw.t("Please remove this feature from your devcontainer.json and rebuild the dev container before continuing."),data:{learnMoreUrl:e,reload:!1}})}function Gue(t,e){return t.disallowedFeatures.find(n=>e.startsWith(n.featureIdPrefix)&&(e.length===n.featureIdPrefix.length||"/:@".indexOf(e[n.featureIdPrefix.length])!==-1))}var HG="devcontainers.controlManifest",zue=5*60*1e3;async function Kue(t,e){let n=t.get(HG);return n&&Date.parse(n.timestamp)+zue>Date.now()?n.manifest:Xue(t,n==null?void 0:n.manifest,e)}async function Xue(t,e,n){let r;try{r=await Jue()}catch(o){n.write(vw.t("Failed to fetch control manifest: {0}",o.message)),r=e||{disallowedFeatures:[]}}return t.update(HG,{timestamp:new Date().toISOString(),manifest:r}),r}async function Jue(){let t=await Q_({type:"GET",url:"https://containers.dev/static/devcontainer-control-manifest.json",headers:{"user-agent":"devcontainers-vscode",accept:"application/json"}}),e=He(t.toString())||{};return Array.isArray(e.disallowedFeatures)?e.disallowedFeatures=e.disallowedFeatures.filter(n=>typeof n.featureIdPrefix=="string"):e.disallowedFeatures=[],e}async function ZN(t,e,n,r){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${De(e,t.common.cliHost.platform)}).`);let o=t.parsedAuthority;if(!o||ln(o))return Zue(t,o,e,n,r);if(uo(o))return o.inspectVolume?XN(t,o):Que(t,o,e);if(id(o))return o.inspectVolume?XN(t,o):efe(t,o,e);if(Ew(o))return XN(t,o);throw new Error(`Unexpected authority: ${JSON.stringify(o)}`)}async function Zue(t,e,n,r,o){let{common:i,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c}=t,{cliHost:l,env:u,output:f}=i,m=l.cwd,d=t.originalCwd||m,p=e&&bt(l.path,Mv(e.hostPath)?l.path.join(m,Xr.basename(e.hostPath)):m);e!=null&&e.configFile&&!n&&(n=e.configFile,l.type==="wsl"&&n.scheme==="file"&&(n=Ce.from({scheme:Ke.scheme,path:await JG(n,l)})));let h={cliHost:l,dockerCLI:s,dockerComposeCLI:a,dockerComposePath:c,env:u,output:f},g=o?void 0:QN(d),v=o||[`${Cw}=${d}`,`${ox}=${i.product.quality}`];return ek(t,h,g,v,d,m,n,r,void 0,p,e==null?void 0:e.settings,[],"on")}function QN(t,e){let n=[`${yw}=${t}`];if(e){let{buildCLIHost:r,configFile:o}=e,i;o.scheme===Ke.scheme||o.scheme==="file"&&r.type==="local"?i=De(o,r.platform):i=o.toString(),n.push(`${rd}=${i}`)}return n}async function Que(t,e,n){let{repositoryPath:r,volumeName:o,folder:i}=e,s=li(r);o=await GG(t,s,o);let{labels:a,remoteWorkspaceFolder:c}=zG(s,r,i,o),l=[...a],u=[...a,`${ox}=${t.common.product.quality}`];e.configFile&&!n&&(n=e.configFile);let{containerId:f,shellServer:m,remoteContainersEnv:d,config:p,preInstalledExtensions:h}=await s.cloneAndInitializeRepository(t,e,s,o,n),g=i?s.workspaceFolder(i):s.fullRepositoryName,v=rk(s,o,i,t.dockerSocketPath);return BG(t,e,n,p,h,f,m,d,o,g,c,l,u,v)}async function efe(t,e,n){let{common:r}=t,{extensionPath:o,appRoot:i,loadNativeModule:s,output:a}=r,{volumeName:c,folder:l}=e,u=[`${nx}=${c}`,`${YG}=${l}`],f=u;await ik(t);let m=ok(c,od(),t.dockerSocketPath),{stdout:d}=await et(t,...m),p=d.toString().trim(),h=ps(t,p,"root"),g=await Wt(h,a),v=[],C=ww(l),w=C,y=await Xs(t,p,"root",s),S=so("container",C,{},h,y,()=>{throw new Error("not implemented")},"node",a),{configuration:P}=await ex({cliHost:S,dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:o,appRoot:i,package:r.package,output:a},C,n,t.common.getLogLevel(),u);return BG(t,e,n,P,v,p,g,{},c,C,w,u,f,m)}async function BG(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var A,O,L;let p=bt(Xr.posix,l),h=[`type=volume,source=${c},target=${Xr.posix.dirname(p.rootFolderPath)},external=true`],g=await KG(t,i,a,u),v={},{HOME:C,USERPROFILE:w}=t.common.env;C!=null&&C.startsWith("/")&&(v.HOME=C,await s.exec(`test -e "${C}" || (mkdir -p "$(dirname "${C}")" && ln -s ~ "${C}")`)),w!==void 0&&(v.USERPROFILE=w);let y=g.cliHost,S,P,D=Fo(r)||"image"in r;if(D||"dockerComposeFile"in r&&r.workspaceFolder||o.length){let E=o.length?{...r.customizations,vscode:{...(A=r.customizations)==null?void 0:A.vscode,extensions:[...((L=(O=r.customizations)==null?void 0:O.vscode)==null?void 0:L.extensions)||[],...o]}}:r.customizations;P=D?x=>({...x,workspaceFolder:void 0,workspaceMount:"",customizations:E}):x=>({...x,workspaceFolder:p.rootFolderPath,customizations:E});let I=y.path.join(await y.tmpdir(),`devcontainer-${JN.randomUUID()}.json`),R=`EOF-${I}`,_=`${I}_${Date.now()}`;await s.exec(`cat <<'${R}' >${_}
${JSON.stringify({...P(r),configFilePath:void 0})}
${R}
mv ${_} ${I}`),S=Ce.from({scheme:Ke.scheme,path:I})}try{return await ek(t,g,f,m,t.common.cliHost.cwd,y.cwd,n,S,P,p,e.settings,h,"off",d,!0,void 0,v)}finally{Promise.all(t.common.backgroundTasks.filter(E=>typeof E!="function").map(E=>E.catch(()=>{}))).then(()=>Hi(t,i))}}async function XN(t,e){let{common:n,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i}=t,{cliHost:s,env:a,output:c}=n,{volumeName:l}=e,u,f,m=Ew(e);m?(u=rx,f="Inspect Volume"):(u=li(e.repositoryPath).volumeDestination,f="Recovery Container");let d=[`${Mp}=${l}`],p=[`${Mp}=${l}`,`${ox}=${n.product.quality}`],h=await qG(t),g=[`type=volume,source=${l},target=${u},external=true`],v={cliHost:s,dockerCLI:r,dockerComposeCLI:o,dockerComposePath:i,env:a,output:c},C=bt(s.path,h);return ek(t,v,d,p,h,h,void 0,void 0,void 0,C,e.settings,g,"never",void 0,!m,f)}async function ek(t,e,n,r,o,i,s,a,c,l,u,f,m,d,p,h,g){var ht,nt,Pt,Ct;let{common:v,userRepositoryConfigurationPaths:C}=t,{output:w,extensionPath:y,appRoot:S,postCreate:P,localWaylandSocket:D}=v,{cliHost:A}=e,O=[...f];if(t.cacheMount==="bind"&&(await ns(v.localCacheFolder),O.push(`type=bind,source=${v.localCacheFolder},target=/vscode`)),t.cacheMount==="volume"){let j="vscode";(await Oo(e)).indexOf(j)===-1&&await Lp(e,j),O.push("type=volume,source=vscode,target=/vscode,external=true")}if(D){let j=await lY(void 0);O.push(`type=bind,source=${D},target=${j}`)}let L=s?{uri:s,type:tfe(A,l,s),fileHost:A}:l?await jG(A,l,C,t.common.loadNativeModule,!a,w):void 0,E=L==null?void 0:L.uri;if((E==null?void 0:E.scheme)==="file"&&A.type!=="local"){let j=Xr.dirname(E.fsPath),ie=Xr.basename(E.fsPath),xe=ie===".devcontainer.json"?j:Xr.dirname(j),le=A.path.join(await A.tmpdir(),`devcontainer-config-${JN.randomUUID()}`);await mw(xe,A,le,w),E=Ce.from({scheme:Ke.scheme,path:A.path.join(le,...ie===".devcontainer.json"?[ie]:[Xr.basename(j),ie])})}typeof t.removeOnStartup=="string"&&await ci(t,t.removeOnStartup)&&await Hi(t,t.removeOnStartup);let I=await Jl(e,r);I&&t.removeOnStartup===!0&&n&&(await Hi(t,I.Id),I=void 0);let R=!!I||!n,_=R?r:await nfe(t,e,L,n),x=!1,b=t.removeOnStartup!==!0?I||n&&await Jl(e,n):void 0;((ht=b==null?void 0:b.State)==null?void 0:ht.Status)==="running"&&(x=!0,et({...Bi(t),print:"continuous"},"exec","-i","-u","root",b.Id,"/bin/sh","-c",`echo "Container already running. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{x=!1,w.write("Keep-alive process ended.")}));let N="",k=v.postCreate.output,$=on({...k,get dimensions(){return k.dimensions},event:j=>{(j.type==="text"||j.type==="raw")&&(N+=j.text),k.event(j)}}),H={...g,...e.env,...fr(e.env)},G={cliHost:A,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:H,extensionPath:y,appRoot:S,package:v.package,postCreate:P,output:$},q=v.postCreate.output.dimensions||v.output.dimensions,V=v.additionalFeaturesToInstall,ce;try{ce=await si(G,["up",...e.cliHost.type==="local"&&v.persistedFolder?["--user-data-folder",v.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...v.containerSessionDataFolder?["--container-session-data-folder",v.containerSessionDataFolder]:[],...R?["--container-data-folder",zs(t.common.product.serverDataFolderName)]:[],...R?["--container-system-data-folder",L_(t.common.product.serverDataFolderName)]:[],"--workspace-folder",i,...t.workspaceMountConsistencyDefault?["--workspace-mount-consistency",t.workspaceMountConsistencyDefault]:[],"--gpu-availability",t.gpuAvailability,...[].concat(..._.map(j=>["--id-label",j])),"--log-level",ro(v.getLogLevel()),"--log-format","json",...E?["--config",De(E,A.platform)]:[],...a?["--override-config",De(a,A.platform)]:[],"--default-user-env-probe",v.defaultUserEnvProbe,...t.buildNoCache?["--build-no-cache"]:[],...t.removeOnStartup===!0?["--remove-existing-container"]:[],...t.expectExistingContainer||!t.common.hostConfig.canRebuildContainer?["--expect-existing-container"]:[],...t.useExperimentalLockfile?["--experimental-lockfile"]:[],...[].concat(...O.map(j=>["--mount",j])),"--skip-post-create","--update-remote-user-uid-default",m,"--mount-workspace-git-root",...q?["--terminal-columns",String(q.columns),"--terminal-rows",String(q.rows)]:[],...Object.keys(V).length>0?["--additional-features",JSON.stringify(V)]:[],"--include-configuration","--include-merged-configuration"])}catch(j){let ie;if((nt=j==null?void 0:j.data)!=null&&nt.disallowedFeatureId){let{disallowedFeatureId:xe,didStopContainer:le,learnMoreUrl:Ie}=j.data;ie=KN(xe,Ie,le),ie.originalError=j}else ie=j instanceof Ee?j:new Ee({description:nd.t("An error occurred setting up the container."),originalError:j});throw j&&!(j instanceof Ee)&&(j.cmdOutput=N),(Pt=j==null?void 0:j.data)!=null&&Pt.containerId&&(ie.manageContainer=!0,ie.params=t.common,ie.containerId=(Ct=j==null?void 0:j.data)==null?void 0:Ct.containerId,ie.dockerParams=t),ie.step="devContainersCLIUP",ie}if((ce==null?void 0:ce.outcome)!=="success")throw new Ee({description:nd.t("devcontainer command failed: {0}",JSON.stringify(ce)),step:"devContainersCLIUP"});ce.configuration.configFilePath=ce.mergedConfiguration.configFilePath=ce.configuration.configFilePath&&Ce.revive(ce.configuration.configFilePath).with({scheme:A.type==="local"?"file":Ke.scheme});let Ue=await ci(t,ce.containerId);if(!Ue)return sk(v.output,"Dev container not found.");x||(x=!0,et({...Bi(t),print:"continuous"},"exec","-i","-u","root",Ue.Id,"/bin/sh","-c",`echo "New container started. Keep-alive process started." ; export VSCODE_REMOTE_CONTAINERS_SESSION=${t.common.sessionId} ; /bin/sh`).catch(()=>{x=!1,w.write("Keep-alive process ended.")}));let{configuration:st,mergedConfiguration:Rt,remoteWorkspaceFolder:no}=ce,bn=$p(v.cliHost.authority,u),wn=h||(st.name?nd.t("Dev Container: {0}{1}",st.name,bn):nd.t("Dev Container{0}",bn));v.setWorkspaceName(wn);let Kt;try{if(Fo(st)||"image"in st)Kt=await XG(t,e,st,Rt,no,o,i,Ue,R,!b,p,_,E,a);else if("dockerComposeFile"in st)Kt=await MG(t,e,st,Rt,o,i,Ue,R,!b,d,p,_,E,a);else throw new Ee({description:nd.t('Dev container config ({0}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.',st.configFilePath.toString())})}catch(j){let ie=j instanceof Ee?j:new Ee({description:nd.t("An error occurred setting up the container."),originalError:j});throw ie.step||(ie.step="setupDevContainer"),ie}if(rfe(t,G,st,a,c,Ue,d,i,E,_,Kt.properties),Kt.configLocationType=L==null?void 0:L.type,(L==null?void 0:L.type)==="workspace")if(A.type==="container")Kt.configWorkspaceURI=L.uri.with({scheme:co.scheme,authority:v.authority});else{let j=De(L.uri,A.platform),ie=Ue.Mounts.find(xe=>hf(A.path,xe.Source,j));if(ie){let xe=A.path.relative(ie.Source,j),le=A.platform==="win32"?xe.replace(/\\/g,"/"):xe;Kt.configWorkspaceURI=Ce.from({scheme:co.scheme,authority:v.authority,path:Xr.posix.join(ie.Destination,le)})}}return Kt}function tfe(t,e,n){return e&&(n.scheme===Ke.scheme||n.scheme==="file"&&t.type==="local")&&hf(Xr,e.rootFolderPath,De(n,t.platform))?"workspace":n.scheme==="file"?"repositoryConfig":"unknown"}async function nfe(t,e,n,r){var s;let{cliHost:o}=e,i;if(n){let{uri:a}=n,c;a.scheme===Ke.scheme||a.scheme==="file"&&o.type==="local"?c=De(a,o.platform):c=a.toString();let l=[...r,`${rd}=${c}`];if(await Jl(e,l))i=l;else{let u=await Jl(e,r);u&&!((s=u.Config.Labels)!=null&&s[rd])?t.removeOnStartup===!0?(await Hi(e,u.Id),i=l):i=r:i=l}}else i=r;return i}function rfe(t,e,n,r,o,i,s,a,c,l,u){let{common:f}=t,{output:m,extensionPath:d,appRoot:p}=f,{cliHost:h}=e;if(f.hostConfig.canRebuildContainer&&t.watch){let g,v=n.configFilePath;if(v.scheme===Ke.scheme)if(h.type==="local")g=v.with({scheme:"file"});else if(h.type==="container")g=v.with({scheme:co.scheme,authority:f.authority});else{let C=De(v,h.platform),w=i.Mounts.find(y=>hf(h.path,y.Source,C));if(w){let y=h.path.relative(w.Source,C),S=h.platform==="win32"?y.replace(/\\/g,"/"):y;g=Ce.from({scheme:co.scheme,authority:f.authority,path:Xr.posix.join(w.Destination,S)})}}else(v.scheme==="file"||v.scheme===co.scheme)&&(g=v);if(g){let P=function(){C||(y=w().finally(async()=>{await Bt(h.type==="container"?5e3:1e3),y=void 0,S&&(S=!1,P())}))},C=!1;async function w(){let A=e,O;try{if(h.type==="container"){let{stdout:I}=await et(t,...s);O=I.toString().trim();let R=ps(t,O,"root");if(r&&o){let b=r.path,N=`EOF-${b}`,k=`${b}_${Date.now()}`,$=await Wt(R,m),H=He((await $.exec(`cat '${v.path}'`)).stdout);await $.exec(`cat <<'${N}' >${k}
${JSON.stringify({...o(H),configFilePath:void 0})}
${N}
mv ${k} ${b}`)}let _=await Xs(t,O,"root",f.loadNativeModule);A={cliHost:so("container",a,{},R,_,()=>{throw new Error("not implemented")},"node",m),dockerPath:"docker",dockerComposePath:"docker-compose",env:{},extensionPath:d,appRoot:p,package:f.package,output:m}}let L=await ex(A,a,c,f.getLogLevel(),l,i.Id,r),E=ur(A.cliHost,u.shellServer);await V_({...t.configurationTracking,containerOutdated:async I=>{C=!0;let R=await t.configurationTracking.containerOutdated(I);return R==="ignore"&&(C=!1),R}},A.cliHost,E,L.configuration)}finally{O&&await Hi(t,O)}}let y,S=!1,D=t.watch(g,()=>{y?S=!0:P()});t.common.shutdowns.push(async()=>(await D).dispose())}}}async function Jl(t,e){let n=await Kl(t,!0,e);return(await ms(t,n)).filter(o=>o.State.Status!=="removing")[0]}async function ex(t,e,n,r,o,i,s){let{cliHost:a,output:c}=t,l=await si(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],"--workspace-folder",e,...(o||[]).map(u=>["--id-label",u]).flat(),...i?["--container-id",i]:[],"--log-level",ro(r),"--log-format","json",...n?["--config",De(n,a.platform)]:[],...s?["--override-config",De(s,a.platform)]:[],"--mount-workspace-git-root",...c.dimensions?["--terminal-columns",String(c.dimensions.columns),"--terminal-rows",String(c.dimensions.rows)]:[]]);return l.configuration.configFilePath=Ce.revive(l.configuration.configFilePath).with({scheme:a.type==="local"?"file":Ke.scheme}),l}async function WG(t,e,n,r,o,i){let s=await jG(t,e,n,r,o,i);return s==null?void 0:s.uri}async function jG(t,e,n,r,o,i){let s=await $S(t,e,Oe),a=s&&await tk(s,n);if(a)return{uri:a,type:"repositoryConfig",fileHost:await Gr(process.cwd(),r,i)};let c=await Zf(t,e.configFolderPath);if(c)return{uri:c,type:"workspace",fileHost:t};o&&i&&(s!=null&&s.length?i.write(`No dev container config found. Additional locations checked:
${tx(s,n).map(l=>`- ${Xr.join(l,".devcontainer","devcontainer.json")}`).join(`
`)}`):i.write("No dev container config found. No repository connection string found."))}async function tk(t,e){let n=tx(t,e);for(let r of n){let o=await wG(r);if(o)return Ce.file(o)}}function tx(t,e){let n=[],r=new Set(t.map(ofe).filter(o=>!!o));for(let o of r)for(let i of e){let s=Xr.join(i,o);n.push(s)}return n}function VG(t,e,n){let r=t.path.relative(e.rootFolderPath,De(n,t.platform));return r&&!r.startsWith("..")&&!t.path.isAbsolute(r)}function ofe(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let n=/[^@:]+@([^:]+):(.+)/.exec(t);if(n)e=`${n[1]}/${n[2]}`;else return}if(!(e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0],!e)))return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e}var nx="vsc.devcontainer.volume.name",YG="vsc.devcontainer.volume.folder";function nk(t){return t?`${t.volumeName}:${t.folder}`:void 0}function Zl(t){let e=(t.Config.Labels||{})[nx],n=(t.Config.Labels||{})[YG];return e&&n?{volumeName:e,folder:n}:void 0}var Js=Y(require("url")),ZG=Y(require("https"));var QG=Y($r());function Zs(t){return t.toLowerCase().indexOf("github.com")>=0?lfe(t):t.toLowerCase().indexOf("visualstudio.com")>=0?afe(t):t.toLowerCase().indexOf("dev.azure.com")>=0?sfe(t):t.toLowerCase().indexOf("gitlab.com")>=0?cfe(t):ife(t)}function wc(t){let e="owner",n="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function ife(t){var s;let e="unknown-owner",n,r=t,o;o=(s=Js.parse(t))==null?void 0:s.path;let i=o==null?void 0:o.split("/");return!i||i.length<1?wc(t):(n=i[i.length-1],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),{repository:"unknown",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`})}function sfe(t){var i,s;let e,n,r=t,o;if(sx(t)){let a=`http://${t}`;o=(i=Js.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return wc(t);e=c[3],n=c[4]}else{o=(s=Js.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return wc(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function afe(t){var i,s;let e,n,r=t,o;if(sx(t)){let a=`http://${t}`;o=(i=Js.parse(a))==null?void 0:i.path;let c=o==null?void 0:o.split("/");if(!c||c.length<5)return wc(t);e=c[3],n=c[4]}else{o=(s=Js.parse(t))==null?void 0:s.path;let a=o==null?void 0:o.split("/");if(!a||a.length<5)return wc(t);e=a[2],n=a[4],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:r,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:n,pullRequestId:void 0,fullRepositoryName:`${e}/${n}`}}function cfe(t){var s,a;let e,n,r,o=t,i;if(sx(t)){let c=`http://${t}`;i=(s=Js.parse(c))==null?void 0:s.path,i&&(i=i.replace("/:","/"));let l=i==null?void 0:i.split("/");if(!l||l.length<3)return wc(t);e=l[1],n=l.slice(2,l.length-1).join("/")||void 0,r=l[l.length-1]}else{i=(a=Js.parse(t))==null?void 0:a.path;let c=i==null?void 0:i.split("/");if(!c||c.length<3)return wc(t);e=c[1],n=c.slice(2,c.length-1).join("/")||void 0,r=c[c.length-1]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:o,ref:void 0,commit:!1,repositoryOwner:e,repositoryProject:n,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}${n?`/${n}`:""}/${r}`}}function lfe(t){var c,l;let e,n,r=t,o,i,s;if(sx(t)){let u=`http://${t}`;s=(c=Js.parse(u))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(l=Js.parse(t))==null?void 0:l.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return wc(t);if(e=a[1],n=a[2],n.endsWith(".git")&&(n=n.substring(0,n.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let u=t.match(/\/tree\/|\/commit\//);u&&u.index&&(r=t.substring(0,u.index),o=t.substring(u.index+u[0].length))}if(a[3]==="pull"){i=a[4];let u=t.match(/\/pull\//);u&&u.index&&(r=t.substring(0,u.index))}}return{repository:"github",repositoryUrl:r,ref:o,commit:a[3]==="commit",repositoryOwner:e,repositoryName:n,pullRequestId:i,fullRepositoryName:`${e}/${n}`}}function sx(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var Sw=class extends Error{description;code;constructor(e,n){super(),this.code=e,this.description=n}},_w=class{inputUrl;gitUrlInfo;constructor(e){this.inputUrl=e,this.gitUrlInfo=Zs(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,n,r,o){}installExtension(){return null}},ak=class extends _w{constructor(e){super(e)}async parseUrl(e){var i,s,a;let n=(i=this.gitUrlInfo)==null?void 0:i.repositoryOwner,r=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,o=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,n,r,o)}async getPullRequestInfo(e,n,r,o){var u,f,m,d,p,h,g,v,C,w,y;let i=await this.fetchPullRequestInfo(e,n,r,o),s=(f=(u=i.head)==null?void 0:u.repo)==null?void 0:f.clone_url,a=(d=(m=i.base)==null?void 0:m.repo)==null?void 0:d.clone_url;if(!a)throw new Sw(2,QG.t("Cannot access the head repository of the Pull Request."));let c=(p=i.head)==null?void 0:p.ref,l=((v=(g=(h=i.head)==null?void 0:h.repo)==null?void 0:g.owner)==null?void 0:v.login)===n?null:(y=(w=(C=i.head)==null?void 0:C.repo)==null?void 0:w.owner)==null?void 0:y.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:l}}async fetchPullRequestInfo(e,n,r,o){let i=`/repos/${n}/${r}/pulls/${o}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:i,method:"GET",headers:s};return new Promise((c,l)=>{let u="",f=ZG.request(a,m=>{if(m.statusCode<200||m.statusCode>=300)return l(new Error(`Status Code: ${m.statusCode}`));m.on("data",d=>{u+=d}),m.on("end",()=>{let d=JSON.parse(u.toString());c(d)})});f.on("error",l),f.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,n,r,o){if(e.sourceOwner){let l=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await te({exec:n.exec,cmd:"git",args:["remote","add",e.sourceOwner,l],cwd:r,output:o}),await te({exec:n.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:r,output:o});try{await te({exec:n.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:r,output:o})}catch(u){if(!(u.stderr&&u.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw u}await te({exec:n.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:r,output:o})}else await te({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o});let i=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${i}#${s}#${a}`;await te({exec:n.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:r,output:o})}installExtension(){return"GitHub.vscode-pull-request-github"}},ck=class extends _w{constructor(e){super(e)}async parseUrl(e){var n,r;return{urlToClone:(n=this.gitUrlInfo)==null?void 0:n.repositoryUrl,ref:(r=this.gitUrlInfo)==null?void 0:r.ref}}cloneOptions(e){let n=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!n&&e.ref||void 0,fullClone:n}}async postClone(e,n,r,o){this.gitUrlInfo.commit&&await te({exec:n.exec,cmd:"git",args:["checkout",e.ref],cwd:r,output:o})}},ix=class extends _w{constructor(n,r){super(n);this.branch=r}async parseUrl(n){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(n){return{url:n.urlToClone,branch:n.ref||void 0}}};function ax(t,e){if(e)return new ix(t,e);let n=Zs(t);if(n.repository==="github"){if(n.pullRequestId)return new ak(t);if(n.ref)return new ck(t)}return new ix(t)}var fk="vsch.local.repository",cx="dev.container.volume";function li(t){return{repositoryPath:t,fullRepositoryName:dk(t),repositoryName:mk(t),workspaceFolder:ww,volumeDestination:od(),oldVolumeName:ffe(t),alreadyCloned:!1,uniqueVolumeName:dfe(t),legacyUniqueVolumeName:mfe(t),getOldWorkspacePath:r3,cloneAndInitializeRepository:pfe,gitUrlHandler:ax(t),gitUrlInfo:Zs(t)}}function dk(t){let e=Zs(t);return e==null?void 0:e.fullRepositoryName}function mk(t){let e=Zs(t);return e==null?void 0:e.repositoryName}function od(){return"/workspaces"}function ffe(t){let e=dk(t);return`vsc-${gs.posix.basename(e)}-${t3(t)}`}function dfe(t){let e=e3(t),n=Qs.createHash("sha256").update(t).digest("hex");return`${e}-${n}`}function mfe(t){let e=e3(t),n=t3(t);return`${e}-${n}`}function e3(t){let e=Zs(t),n="";return e&&e.repositoryName&&(n=e.repositoryName,e.ref?n=`${n}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(n=`${n}-pull-${e.pullRequestId}`)),n}function t3(t){return Qs.createHash("md5").update(t).digest("hex")}function ww(t){return gs.posix.join(`${od()}`,`${t}`)}async function pfe(t,{folder:e,cloneInfo:n},r,o,i){var f;await ik(t);let{containerId:s,shellServer:a,remoteContainersEnv:c}=await hfe(t,r,o,e,i,t.configProvider,n),{config:l}=await gfe(t,r,e,i,a),u=(f=r.gitUrlHandler)==null?void 0:f.installExtension();return{repository:r,volumeName:o,containerId:s,shellServer:a,remoteContainersEnv:c,config:l,preInstalledExtensions:u?[u]:[]}}async function hfe(t,e,n,r,o,i,s){let{common:a}=t,{output:c,loadNativeModule:l}=a,u=e.fullRepositoryName,f,m,d,p;t.common.progress(1);let h=rk(e,n,r,t.dockerSocketPath,t.buildContainerRunArgs);r?(c.write(`Cloning Github repository: ${u} into ${e.workspaceFolder(r)}
\r`),f=`fatal: destination path '${e.workspaceFolder(r)}' already exists`,p=e.workspaceFolder(r),d=`Repository '${u}' was already cloned into '${e.workspaceFolder(r)}'.
\r`):(c.write(`Cloning Github repository: ${u} into volume ${n}
\r`),f=`fatal: destination path '${u}' already exists`,p=`${u}`,d=`Repository '${u}' was already cloned into volume.`);let g=e.gitUrlHandler;if(!g)throw new Ee({description:Ql.t("Could not analyze the URL.")});s?m=g.cloneOptions(s):m={url:e.repositoryPath};let{stdout:v}=await et(t,...h),C=v.toString().trim(),w=ps(t,C,"root"),y=await Wt(w,c),S=await n_(a,{remoteExec:w,user:"root",nodeExecutable:"node",shellServer:y,launchRootShellServer:async()=>y}),P=S.remoteContainersCLI,D=S.remoteEnv,A=S.ready,O=S.mrpcExec,L=await Xs(t,C,"root",l),E=so("container",p,{},await O||w,L,()=>{throw new Error("not implemented")},void 0,c);try{t.common.isCopyGitConfigEnabled&&await HS(t.common,{homeFolder:"/root",shellServer:y},{}),await b_({shellServer:y,nodeExecutable:"node"},P,c,"global"),await Bv(t.common,{homeFolder:"/root",shellServer:y},[".ssh","known_hosts"],"ssh"),await A;let R=TY(a),_=await Wj(a,E,p,{...m,env:{...D,...m.env}},c,R.output,!!t.removeOnStartup);if(await _.gitClone,_.gitUnshallow&&(a.backgroundTasks.push(_.gitUnshallow.then(()=>{})),_.gitUnshallow.then(R.flush,R.flush)),_.gitClone&&s)try{await g.postClone(s,E,p,c)}catch{return lk(t,C,Ql.t("Failed to checkout the repository {0}.",s.urlToClone))}}catch(R){let _=R&&(R.cmdOutput||R.stack||R.message)||String(R);if(_=_.replace(Us,""),_.replace(/[\r\n]+/gm,"").includes(f))c.write(d),e.alreadyCloned=!0;else return lk(t,C,Ql.t("Git clone failed. {0}",_))}let{configRaw:I}=await n3(t,e,r,o,y);if(!W_(I)&&i){c.write(`Repository ${u} has no dev container files.
\r`);let R=!0;for(;R;){let _=await i.createConfiguration(p,E);if(_)R=!1;else{let x=Ql.t("Select Configuration");if(_=await i.showError(Ql.t("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started."),x),_!==x)return lk(t,C,Ql.t("Cancelled container configuration selection."),{closeRemote:!0})}}}return{containerId:C,shellServer:y,remoteContainersEnv:D}}function rk(t,e,n,r,o=[]){let i=n?t.volumeDestination:t.fullRepositoryName;return ok(e,i,r,o)}function ok(t,e,n,r=[]){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,"-v",`${n}:/var/run/docker.sock`,"--security-opt","label=disable",...r,`${o3}`,"sleep","infinity"]}function lk(t,e,n,r){throw e&&Hi(t,e),new Ee({description:n,data:r})}async function n3(t,e,n,r,o){let i,s;if(n?s=e.workspaceFolder(n):s=`${r3(e.repositoryPath)}`,r)return i=(await o.exec(`cat ${r.path} 2>/dev/null`,{logOutput:!1})).stdout,{configRaw:i&&He(i),configFile:r,workspaceFolder:s};if(r=await tk([e.repositoryPath],t.userRepositoryConfigurationPaths),r&&(i=(await at(r.fsPath)).toString()),!r)for(let a of ql(gs.posix,s))try{i=(await o.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,r=Ce.from({scheme:"vscode-remote",path:a});break}catch{}return{configRaw:i&&He(i),configFile:r,workspaceFolder:s}}async function gfe(t,e,n,r,o){let{configRaw:i,configFile:s,workspaceFolder:a}=await n3(t,e,n,r,o);if(!s||!i)throw new Ee({description:Ql.t("The repository does not have a 'devcontainer.json' configuration file.")});let{common:c,configUpdater:l}=t,{cliHost:u,output:f}=c,m=fw({...i}),d=m;l&&(m.configFilePath=s,d=l(m),delete d.configFilePath);let p=x_({platform:u.platform,configFile:s,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:a},d);return p.configFilePath=s,("workspaceMount"in p||"workspaceFolder"in p)&&f.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),{workspaceFolder:a,config:p}}function r3(t){return`/workspaces/${gs.posix.basename(dk(t))}`}var o3="vsc-volume-bootstrap",uk="bootstrap.Dockerfile",vfe="volume.Dockerfile";async function ik(t,e,n,r){let{cliHost:o,output:i}="cliHost"in t?t:t.common;"cliHost"in t||(e=t.common.extensionPath,n=t.common.package.version,r=t.development);let s=o.path.join(await Qv(o),"bootstrap-image",r?`${n}-dev-${Date.now()}`:n),a=o.path.join(s,uk),c=o.path.join(s,".vscode-remote-containers","dist",`dev-containers-cli-${n}`),l=o.path.join(c,"dist","spec-node","devContainersSpecCLI.js"),u=!await o.isFolder(s);if(!u&&!(await o.isFile(a)&&await o.isFile(l))){let h="Removing incomplete bootstrap-image folder.",g=i.start(h),v=`${s}-${Qs.randomUUID()}`;await o.rename(s,v),await o.rm(v,{recursive:!0,force:!0}),u=!await o.isFolder(s),i.stop(h,g)}if(u){let h=`${s}-${Qs.randomUUID()}`,g=o.path.join(h,".vscode-remote-containers","dist",`dev-containers-cli-${n}`);await o.mkdirp(o.path.join(g,"dist","spec-node")),await o.writeFile(o.path.join(h,uk),await at(gs.join(e,"scripts",uk))),await o.writeFile(o.path.join(g,"package.json"),await at(gs.join(e,"package.json"))),await o.writeFile(o.path.join(g,"dist","spec-node","devContainersSpecCLI.js"),await at(gs.join(e,"dist","spec-node","devContainersSpecCLI.js"))),await o.mkdirp(o.path.join(g,"scripts")),await o.writeFile(o.path.join(g,"scripts","updateUID.Dockerfile"),await at(gs.join(e,"scripts","updateUID.Dockerfile"))),await o.rename(h,s)}let f=["build","-f",a,"-t",o3,s],m=await o.locateCertificatesFile(),d=o.path.join(s,"host-ca-certificates.crt"),p=`${d}-${Qs.randomUUID()}`;await o.writeFile(p,m?await o.readFile(m):Buffer.from("")),await o.rename(p,d),await LG(t,...f)}async function qG(t){let{common:e}=t,{cliHost:n,output:r}=e,o=await wfe(t),i=n.path.join(o,vfe),s=!await n.isFolder(o);if(!s&&!await n.isFile(i)){let u="Removing incomplete inspect-volume folder.",f=r.start(u),m=`${o}-${Qs.randomUUID()}`;await n.rename(o,m),await n.rm(m,{recursive:!0,force:!0}),s=!await n.isFolder(o),r.stop(u,f)}if(s){let u=`${o}-${Qs.randomUUID()}`;await mw(gs.join(e.extensionPath,"scripts","inspect-volume"),n,u,r),await n.rename(u,o)}let a=await n.locateCertificatesFile(),c=n.path.join(o,"host-ca-certificates.crt"),l=`${c}-${Qs.randomUUID()}`;return await n.writeFile(l,a?await n.readFile(a):Buffer.from("")),await n.rename(l,c),o}async function wfe(t){let{common:e,development:n}=t,{cliHost:r}=e,o=e.package.version;return r.path.join(await Qv(r),"inspect-volume",n?`${o}-dev-${Date.now()}`:o)}async function GG(t,e,n){let r=[`${fk}=${e.repositoryPath}`];!n||n===ui?r.push("vsch.local.repository.unique=true"):r.push("vsch.local.repository.unique=false"),e.gitUrlInfo.ref&&r.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&r.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`);let o=await Oo(t),i=pk(e,n,o);return o.indexOf(i)===-1&&await Lp(t,i,r),i}function pk(t,e,n){return e?e===ui&&(n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.legacyUniqueVolumeName)===-1?e=t.uniqueVolumeName:e=t.legacyUniqueVolumeName):n.indexOf(t.uniqueVolumeName)!==-1||n.indexOf(t.oldVolumeName)===-1?e=t.uniqueVolumeName:e=t.oldVolumeName,e}var Hp="vsch.local.repository",hk="vsch.local.repository.volume",gk="vsch.local.repository.folder";function zG(t,e,n,r){return n?{labels:[`${Hp}=${e}`,`${hk}=${r}`,`${gk}=${n}`],remoteWorkspaceFolder:t.workspaceFolder(n)}:{labels:[`${Hp}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}async function KG(t,e,n,r){let{loadNativeModule:o,output:i}=t.common,s=ps(t,e,"root"),a=await Xs(t,e,"root",o),c=so("container",r,n,s,a,()=>{throw new Error("not implemented")},"node",i);return{cliHost:c,dockerCLI:"docker",dockerComposeCLI:hs({exec:c.exec,env:n,output:i},"docker","docker-compose"),dockerComposePath:"docker-compose",env:n,output:i}}var i3=Y($r()),yw="devcontainer.local_folder",rd="devcontainer.config_file",Mp="vsch.local.volume",rx="/volume",ox="vsch.quality",Cw="vsch.local.folder";async function XG(t,e,n,r,o,i,s,a,c,l,u,f,m,d){let{common:p}=t,h;try{let g=!l,v=r.remoteUser;h=await Fp(t,a.Id,o,v),u&&l&&o&&h.user!=="root"&&(h.launchRootShellServer?await A_(h,h.launchRootShellServer,o,n.configFilePath.path):p.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."));let C=await J_(p,l,a,o,h);return await Cfe(a,c,t,e,h,n,r,g,i,s,f,m,d,C)}catch(g){throw yfe(g,a,t,h,n)}}function yfe(t,e,n,r,o){let i=t instanceof Ee?t:new Ee({description:i3.t("An error occurred setting up the container."),originalError:t});return e&&(i.manageContainer=!0,i.params=n.common,i.containerId=e.Id,i.dockerParams=n),r&&(i.containerProperties=r),o&&(i.config=o),i}async function Cfe(t,e,n,r,o,i,s,a,c,l,u,f,m,d){var L,E;let{common:p}=n,h=ur(r.cliHost,o.shellServer);a||await Y_(n.configurationTracking,r.cliHost,h,i,p.output);let g=s.shutdownAction;g==="stopCompose"&&(g="stopContainer");let v={cwd:c,dockerCLI:n.dockerCLI,env:p.env,containerId:t.Id,user:o.user,sessionId:p.sessionId,shutdownAction:g,logLevel:p.getLogLevel(),delay:1e4},{shutdownArgs:C,doneWithDocuments:w}=await X_(n,r.cliHost,h,"singleContainer",v,a?i:void 0);p.backgroundTasks.push(w);let y=((E=(((L=s.customizations)==null?void 0:L.vscode)||[]).slice().reverse().find(I=>typeof I.devPort=="number"))==null?void 0:E.devPort)||Wl,{hostOrContainerPort:S,hostPortServer:P,connectionToken:D,remoteEnv:A,serverDownloaded:O}=await jl(p,o,i,s,y,Op(n,r,o,l,u,t.Id,e,f,m),d);return C.hostPortServer=P,{params:p,properties:o,config:i,resolvedAuthority:{host:vc,port:S,connectionToken:D,extensionHostEnv:A},tunnelInformation:p.isLocalContainer?Ap(t):{},dockerParams:n,dockerContainerId:t.Id,serverDownloaded:O}}function eu(t){let e=t.Config.Labels||{},n=e[yw]||e[Cw];return n||void 0}function s3(t){return(t.Config.Labels||{})[rd]||void 0}function yc(t){let e=(t.Config.Labels||{})[Hp];return e||void 0}function lx(t){let e=(t.Config.Labels||{})[hk];return e||void 0}function a3(t){let e=(t.Config.Labels||{})[Mp];return e||void 0}function c3(t){let e=(t.Config.Labels||{})[gk];return e||void 0}function sk(t,e){throw t.write(ot(e)),new Error(e)}function Cc(t){return!!(t!=null&&t.startsWith("tunnel+"))}function l3(t){let e=/^tunnel\+(.*)$/.exec(t);return e?{tunnelName:e[1]}:void 0}var u3=Y(require("path"));async function f3(t,e,n,r,o,i){let s,a=new Promise(p=>s=p),c=new q_,l=[],u=await bG("vscode-remote-containers",async(p,h)=>{let g=await TG(p),v=[];if(g.type==="poll")try{v=await c.dequeue(6e4)}catch{}else if(g.type==="reply"){let C=l[g.sequence];C&&(C(g.reply),delete l[g.sequence])}else g.type==="done"&&s?s():g.type==="log"&&r.event(g.event);h.write(JSON.stringify(v)),h.end()});u.server.unref();let f=u3.join(n,"dist","shutdown","shutdownMonitorProcess"),m=[u.ipcHandlePath,t,nr[e],o||"",i.getTime().toString()];r.write(`Forking shutdown monitor: ${f} ${m.join(" ")}\r
`);let d=bY(f,m,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return d.on("error",p=>{console.error(p)}),d.unref(),{queue:c,sequence:0,replies:l,done:a}}async function ux(t,e,n){let r=t.sequence++,o=new Promise(s=>t.replies[r]=s);return t.queue.push({type:"configure",sequence:r,options:e}),await o}async function d3({queue:t,done:e}){t.push({type:"cleanup"}),await e}var p3=require("util");var ui="__UNIQUE__",vc="127.0.0.1";async function JG(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:n}=await te({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:Oe});return n.toString().trim()}return De(t,e.platform)}async function sd(t,e){let n=!t.env.SSH_AUTH_SOCK&&await tN(t)?Yv:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,r={DOCKER_CONTEXT:"default"};return e&&("context"in e?r.DOCKER_CONTEXT=e.context:(e.host&&(e.host.startsWith("ssh://")&&t.type==="remote"?r.VSCODE_DOCKER_HOST=e.host:r.DOCKER_HOST=e.host),e.certPath&&(r.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(r.DOCKER_TLS_VERIFY=e.tlsVerify))),n&&(r.SSH_AUTH_SOCK=n),r}function dr(t){let e;if(t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default")e={context:t.DOCKER_CONTEXT};else{e={};let n=t.VSCODE_DOCKER_HOST||t.DOCKER_HOST;n&&(e.host=n),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)}return e}function fx(t,{parentAuthority:e,settings:n}){e&&t.write(`Host authority: ${e}\r
`),n&&("context"in n&&n.context&&t.write(`Context: ${n.context}\r
`),"host"in n&&n.host&&t.write(`Host: ${n.host}\r
`),"certPath"in n&&n.certPath&&t.write(`CertPath: ${n.certPath}\r
`),"tlsVerify"in n&&n.tlsVerify&&t.write(`TLSVerify: ${n.tlsVerify}\r
`))}function Wp(t,e){return(!t||t.startsWith("wsl+"))&&!e.VSCODE_DOCKER_HOST&&!e.DOCKER_HOST&&(!e.DOCKER_CONTEXT||e.DOCKER_CONTEXT==="default"||e.DOCKER_CONTEXT==="desktop-linux")}function $p(t,e){var r,o;let n;return Cc(t)?n=(r=l3(t))==null?void 0:r.tunnelName:Ul(t)?n=(o=Zv(t))==null?void 0:o.hostName:e&&("context"in e||e.host)&&(n="context"in e?e.context:e.host),n?` @ ${n}`:""}function Ec(t){let{Name:e}=t;return e[0]==="/"?e.substring(1):e}async function ci(t,e){try{return await ai(t,e)}catch{return}}async function dx(t,e=!0){let{common:n}=t,{output:r}=n,o="Check Docker is running",i=r.start(o);try{let{stdout:s}=await vk(t,t.common.loadNativeModule,e,"version"),a=s.toString();if(a.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(a)}catch(s){console.error(s);let a=Bp.t("Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed."),c=s&&(s.stderr?s.stderr.toString().toLowerCase():s.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a=Bp.t("Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction."):a=Bp.t("Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group."):c.indexOf("ENOENT")!==-1&&(a=Bp.t("The 'docker' command was not found. Make sure Docker is installed.")),new Ee({description:a,originalError:`Docker returned an error code ${s.code}, message: ${s.message}`})}finally{r.stop(o,i)}}async function vk(t,e,n,...r){let o={...Bi(t),print:"continuous"};try{return await et(o,...r)}catch(i){if(!m3(i)||!n)throw i;let s="cliHost"in t?t.cliHost:t.common.cliHost,a="output"in t?t.output:t.common.output;if(s.type==="wsl"&&(s=await Gr(process.cwd(),e,a)),s.platform==="linux")throw i;if(s.platform==="darwin"&&await s.isFolder("/Applications/Docker.app"))await te({exec:s.exec,cmd:"open",args:["-g","-a","Docker"],env:{ELECTRON_RUN_AS_NODE:""},output:a,print:"continuous"});else{let c=Efe(s);if(s.platform==="win32"&&await s.isFile(c))await te({exec:s.exec,cmd:c,env:{ELECTRON_RUN_AS_NODE:""},output:"output"in t?t.output:t.common.output,print:"continuous"});else throw i}for(let c=6;c>0;c--){await Bt(5e3);try{return await et(o,...r)}catch(l){if(c===1||!m3(l))throw l}}throw i}}function Efe(t){return t.path.join(t.env.ProgramW6432||"C:\\Program Files","Docker\\Docker\\Docker Desktop.exe")}function m3(t){let e=Buffer.concat([t==null?void 0:t.stdout,t==null?void 0:t.stderr].filter(Boolean)).toString().toLowerCase();return e.includes("cannot connect to the docker daemon")||e.includes("docker daemon is not running")||e.includes("internal server error for api route and version")||e.includes("activate the wsl integration")}function ln(t){return t.hostPath!==void 0}function uo(t){return t.repositoryPath!==void 0}function id(t){return!uo(t)&&!!t.folder}function Ew(t){return!uo(t)&&!id(t)&&t.volumeName!==void 0}function fo(t){let e=g3("dev-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,hostPath:e.unparsedConfig}:("repositoryPath"in e&&e.configFile&&(e.configFile=Ce.revive(e.configFile)),"repositoryPath"in e?e.dockerHost?{parentAuthority:e.parentAuthority,repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},cloneInfo:e.cloneInfo}:e:("hostPath"in e&&e.configFile&&(e.configFile=Ce.revive(e.configFile)),"hostPath"in e&&e.dockerHost?{parentAuthority:e.parentAuthority,hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e))}function xw(t,e,n,r,o,i){t=Dw(t);let s=r||i?JSON.stringify({hostPath:e,localDocker:o,settings:r,configFile:i}):e;return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${t?`@${t}`:""}${n}`}function Wi(t,e,n,r,o,i,s,a){if(t=Dw(t),e){let l=li(e);if(!n){let f=JSON.stringify({repositoryPath:e,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(f,"utf8").toString("hex")}${t?`@${t}`:""}${l.getOldWorkspacePath(e)}`}let u=JSON.stringify({repositoryPath:e,volumeName:n,folder:r,settings:i,cloneInfo:s,inspectVolume:o,configFile:a});return`vscode-remote://dev-container+${Buffer.from(u,"utf8").toString("hex")}${t?`@${t}`:""}${l.workspaceFolder(r)}`}if(r){let l={volumeName:n,folder:r,settings:i};return`vscode-remote://dev-container+${Buffer.from(JSON.stringify(l),"utf8").toString("hex")}${t?`@${t}`:""}${ww(r)}`}let c=JSON.stringify({volumeName:n,settings:i});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${t?`@${t}`:""}${rx}`}function ad(t){let e=g3("attached-container",t);if(e)return"unparsedConfig"in e?{parentAuthority:e.parentAuthority,containerId:e.unparsedConfig}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function h3(t,e,n,r){t=Dw(t);let o=JSON.stringify({containerName:e,settings:n,cwd:r});return`attached-container+${Buffer.from(o,"utf8").toString("hex")}${t?`@${t}`:""}`}function g3(t,e){try{let n=jp(e);if(!n)return;let{name:r,config:o,parentAuthority:i}=n,s=r===t&&o?Buffer.from(o,"hex").toString("utf8"):void 0;if(!s)return;if(!s.startsWith("{"))return{parentAuthority:i,unparsedConfig:s};let a=JSON.parse(s);return a.parentAuthority=i,a}catch(n){console.warn(n);return}}function jp(t){let e=t==null?void 0:t.match(/^(?<name>[^@+]+)\+(?<config>[^@]+)(?:@(?<parentAuthority>.*))?$/);if(!e)return;let{name:n,config:r,parentAuthority:o}=e.groups;return{name:n,config:r,parentAuthority:o}}function nu(t,e){return Nn(e.startsWith("/")?"linux":"win32",Ce.parse(`vscode-remote://${t}`),e)}function Dw(t){if(t){if(Ul(t)){let e=t.indexOf("@");if(e!==-1&&t.indexOf("+",e)===-1){let r=Zv(t);return cN(r)}return t}if(Cc(t))return t}}async function v3(t,e,n){return await Hv(t,e,n)||e}function w3(t,e,n){let r=t.path.relative(t.path.dirname(e),n);return`/workspaces/${t.platform==="win32"?r.replace(/\\/g,"/"):r}`}function DG(t,e){return t.with({path:tu.posix.resolve(t.path,e)})}async function X_(t,e,n,r,o,i){let{common:s,onRemoveOnShutdownChanged:a}=t,c=s.output.start("Setup shutdown monitor"),l=await f3(r,s.getLogLevel(),s.extensionPath,s.output,s.logFilePath?tu.dirname(s.logFilePath):void 0,s.sessionStart);ux(l,o,s.output).catch(d=>console.error(d)),a&&a(async d=>{o.rebuild=!!d,o.delay=0,await ux(l,o,s.output)}),s.onDidChangeLogLevel(async d=>{o.logLevel=d,await ux(l,o,s.output)});let u={},f=async()=>{let d=d3(l);u.hostPortServer&&await(0,p3.promisify)(u.hostPortServer.close.bind(u.hostPortServer))(),await d};s.shutdowns.push(f);let m=t.common.hostConfig.canRebuildContainer&&i?V_(t.configurationTracking,e,n,i).catch(console.error):Promise.resolve();return s.output.stop("Setup shutdown monitor",c),{monitor:l,shutdownArgs:u,doneWithDocuments:m}}function Ap(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}async function Fp(t,e,n,r,o){var y;let{common:i}=t,s="Inspecting container",a=i.output.start(s),c=await ai(t,e);i.output.stop(s,a);let l=r||c.Config.User||"root",[,u,,f]=/([^:]*)(:(.*))?/.exec(l),m=Sfe(c.Config.Env),d=ps(t,e,l),p=await Xs(t,e,l,i.loadNativeModule),h=ps(t,e,"root"),g=c.Mounts.find(S=>S.Type==="volume"&&S.Name==="vscode"),v=c.Mounts.find(S=>S.Type==="bind"&&S.Source===i.localCacheFolder),C=g&&tu.posix.join(g.Destination,/^\.*(.*)$/.exec(i.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination),w=(y=c.Mounts.find(S=>S.Type==="bind"&&S.Destination.startsWith("/tmp/vscode-wayland-")))==null?void 0:y.Destination;return N_({params:i,createdAt:c.Created,startedAt:c.State.StartedAt,sharedDataFolder:C,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:n,containerUser:u==="0"?"root":u,containerGroup:f,containerEnv:m,remoteExec:d,remotePtyExec:p,remoteExecAsRoot:h,rootShellServer:o,remoteWaylandSocket:w})}function Sfe(t){return(t||[]).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substr(0,r)]=n.substr(r+1)),e},{})}async function y3(t){let{common:e,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,dockerEnv:i}=t,{cliHost:s,output:a}=e;return{cliHost:s,dockerCLI:n,dockerComposeCLI:r,dockerComposePath:o,env:i,output:a}}async function C3(t,e){return t.type==="local"&&e?t.path.join(e,"data"):t.path.join(await t.homedir(),".vscode-remote-containers","data")}function Op(t,e,n,r,o,i,s,a,c){let l=!s;return async(u,f,m,d,p)=>{let{common:h}=t,{cliHost:g}=e,{dotfilesConfiguration:v}=h,C=d.getDotfileConfiguration("dotfiles.repository")||v.repository,w=d.getDotfileConfiguration("dotfiles.installCommand")||v.installCommand,y=d.getDotfileConfiguration("dotfiles.targetPath")||v.targetPath;l&&C&&(l=!1,await aq(n));let S={...e.env,...fr(e.env)},P={cliHost:e.cliHost,dockerPath:e.dockerCLI,dockerComposePath:e.dockerComposePath,env:S,extensionPath:h.extensionPath,appRoot:h.appRoot,package:h.package,postCreate:h.postCreate,output:h.postCreate.output},D=h.postCreate.output.dimensions||h.output.dimensions,A=await si(P,["run-user-commands",...e.cliHost.type==="local"&&h.persistedFolder?["--user-data-folder",h.persistedFolder]:[],...e.dockerCLI!=="docker"?["--docker-path",e.dockerCLI]:[],...e.dockerComposePath!=="docker-compose"?["--docker-compose-path",e.dockerComposePath]:[],...h.containerSessionDataFolder?["--container-session-data-folder",h.containerSessionDataFolder]:[],...s?["--container-data-folder",zs(t.common.product.serverDataFolderName)]:[],...s?["--container-system-data-folder",L_(t.common.product.serverDataFolderName)]:[],...r?["--workspace-folder",r]:[],...(o||[]).map(O=>["--id-label",O]).flat(),"--container-id",i,"--log-level",ro(h.getLogLevel()),"--log-format","json",...a?["--config",De(a,g.platform)]:[],...c?["--override-config",De(c,g.platform)]:[],"--default-user-env-probe",h.defaultUserEnvProbe,"--skip-non-blocking-commands",String(u),...h.skipPostAttach?["--skip-post-attach"]:[],"--prebuild",String(m),"--stop-for-personalization",String(f),...[].concat(...Object.keys(p).map(O=>["--remote-env",`${O}=${p[O]}`])),"--mount-workspace-git-root",...D?["--terminal-columns",String(D.columns),"--terminal-rows",String(D.rows)]:[],...C?["--dotfiles-repository",C]:[],...w?["--dotfiles-install-command",w]:[],...y?["--dotfiles-target-path",y]:[]]);if((A==null?void 0:A.outcome)!=="success")throw new Ee({description:Bp.t("devcontainer command failed: {0}",JSON.stringify(A))});return A.result}}async function E3(t,e,n,r,o,i,s,a){let{cliHost:c,output:l}=t,u=await si(t,["read-configuration",...t.dockerPath!=="docker"?["--docker-path",t.dockerPath]:[],...t.dockerComposePath!=="docker-compose"?["--docker-compose-path",t.dockerComposePath]:[],...e?["--workspace-folder",e]:[],...(i||[]).map(f=>["--id-label",f]).flat(),...s?["--container-id",s]:[],"--log-level",ro(r),"--log-format","json",...n?["--config",De(n,c.platform)]:[],...a?["--override-config",De(a,c.platform)]:[],"--include-merged-configuration","--mount-workspace-git-root",...l.dimensions?["--terminal-columns",String(l.dimensions.columns),"--terminal-rows",String(l.dimensions.rows)]:[],...Object.keys(o).length>0?["--additional-features",JSON.stringify(o)]:[]]);return u.configuration.configFilePath=u.configuration.configFilePath&&Ce.revive(u.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme}),u}async function J_(t,e,n,r,o){let{output:i}=t;if(e&&r)try{i.write(`safe.directory: Looking up root folder for workspace folder '${r}'.`);let s=n.Mounts.find(a=>hf(tu.posix,a.Destination,r,!0));if((s==null?void 0:s.Type)==="bind"){let a;try{let{stdout:u}=await o.shellServer.exec(`command -v git >/dev/null 2>&1 && ROOT_FOLDER="$(git -C '${r}' rev-parse --show-toplevel)" && test "$(stat -c %u "$ROOT_FOLDER")" != "$(id -u)" && echo -n "$ROOT_FOLDER"`);a=u.trim()}catch(u){a=u!=null&&u.stderr?(/dubious ownership in repository at '([^']+)'/.exec(u.stderr)||[])[1]:void 0}if(!a||!hf(tu.posix,s.Destination,a,!0)){i.write(`safe.directory: Checking host ownership of root folder${a?` '${a}'`:""} at mount point '${s.Destination}' skipped.`);return}i.write(`safe.directory: Checking host ownership of root folder '${a}' at mount point '${s.Destination}'.`);let c=tu.posix.relative(s.Destination,a),l=t.cliHost.path.join(s.Source,t.cliHost.platform==="win32"?c.replace(/\//g,"\\"):c);if(t.cliHost.platform==="win32"){let u;try{u=(await te({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","(Get-Acl .).Owner"],cwd:l,env:ao(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get host owner for '${l}': ${m==null?void 0:m.message}`);return}let f;try{f=(await te({exec:t.cliHost.exec,cmd:"powershell",args:["-NoProfile","-NonInteractive","-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],cwd:l,env:ao(),output:i,print:!0})).stdout.toString().trim()}catch(m){i.write(`safe.directory: Failed to get current user ('${l}' owned by '${u}'): ${m==null?void 0:m.message}`);return}if(i.write(`safe.directory: '${l}' owned by '${u}', current user is '${f}'.`),u!==f)return}else await te({exec:t.cliHost.exec,cmd:"/bin/sh",args:["-c",`cd '${l}' && test "$(stat -${t.cliHost.platform==="darwin"?"f":"c"} %u .)" = "$(id -u)"`],output:i});if(o.launchRootShellServer){i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Adding to safe directory list in Git system config.`),await(await o.launchRootShellServer()).exec(`git config --system --get-all safe.directory | grep -x '${a}' || git config --system --add safe.directory '${a}'`);return}else return i.write(`safe.directory: Root folder '${a}' owned by current user on host but not owned by remote user in container. Later adding to safe directory list in Git global config.`),async()=>{await o.shellServer.exec(`git config --global --get-all safe.directory | grep -x '${a}' || git config --global --add safe.directory '${a}'`)}}}catch{}}var $t=Y(require("vscode")),xi=require("vscode");var K=Y(require("vscode")),dm=Y(require("path"));var Vp=Y(require("vscode")),mx=Y(require("path")),x3=require("stream");var _fe=XS();async function Uo(t,e,n,r,o,i,s,a,c,l,u){return t?xfe(t,n,s,a,c,l):uN(e,n,r,o,i,s,a,c,l,u)}async function xfe({server:t,authority:e},n,r,o,i,s){var A,O,L,E,I,R,_,x;let a="Loading environment from ExecServer",c=i.start(a),l=await t.env();i.stop(a,c),i.write(`Host OS: ${l.osPlatform}${l.osRelease?` ${l.osRelease}`:""}`),i.write(`Host CWD: ${n}`);let u=Dfe(()=>t,void 0),f=l.osPlatform,{homeFolder:m,localEnv:d}=await Yn(f,{posix:async()=>{let b=await Wt(u,i,void 0,f,"Host"),N=f==="darwin"?(await te({exec:u,cmd:"/bin/sh",args:["-c","echo ~"],output:i})).stdout.toString().trim():(await b.exec("echo ~")).stdout.trim(),k=f==="darwin"?(await te({exec:u,cmd:"/bin/sh",args:["-c","id -un"],output:i})).stdout.toString().trim():await Al(b),$=await jf(b,k),H=($==null?void 0:$.shell)||"/bin/sh",G=await Gf({defaultUserEnvProbe:"loginInteractiveShell",allowSystemConfigChange:!1,output:i},{shell:H,remoteExec:u});return b.process.terminate(),{homeFolder:N,localEnv:G}},win32:async()=>(i.write(`USERPROFILE: ${l.env.USERPROFILE}`),i.write(`PATH: ${l.env.PATH}`),{homeFolder:l.env.USERPROFILE,localEnv:l.env})})(),p=async b=>u({...b,env:{...d,...b.env}}),h=async b=>{if(!t.fs){let N=await t.fsStat(b);return N.exists&&N.type==="file"}try{return(await t.fs.stat(b)).type===Vp.FileType.File}catch(N){if((N==null?void 0:N.code)==="FileNotFound"||(N==null?void 0:N.code)==="FileNotADirectory"||N!=null&&N.message.toLowerCase().includes("file not found"))return!1;throw N}},g=l.osPlatform==="win32",v=g?mx.win32:mx.posix,C=v.join(m,".vscode-remote-containers"),w=await bq({localCacheFolder:r,output:i,alternateDownload:s,exec:p,env:d,isFile:h,userDataFolder:C,homeFolder:m,product:o,platform:f}),y=fY(w,p,i),S=n||m,P,D;return{type:"remote",authority:e,platform:f,exec:p,ptyExec:PY(p),cwd:S,env:d,path:v,async homedir(){return m},tmpdir:Yn(f,{posix:async()=>d.TMPDIR||"/tmp",win32:async()=>d.TEMP}),isFile:h,isFolder:async b=>{if(!t.fs){let N=await t.fsStat(b);return N.exists&&N.type==="dir"}try{return(await t.fs.stat(b)).type===Vp.FileType.Directory}catch(N){if((N==null?void 0:N.code)==="FileNotFound"||(N==null?void 0:N.code)==="FileNotADirectory"||N!=null&&N.message.toLowerCase().includes("file not found"))return!1;throw N}},isSocket:async b=>{if(g)return!1;try{return await te({exec:p,cmd:"test",args:["-S",b],output:Oe}),!0}catch(N){if((N==null?void 0:N.code)!==1)throw N;return!1}},readFile:(A=t.fs)!=null&&A.read?async b=>{let N=await t.fs.read(b),k=[];return N.onDidReceiveMessage($=>k.push($)),await N.onEnd,Buffer.concat(k)}:b=>vY(p,f,w,b,Oe),writeFile:(O=t.fs)!=null&&O.write?async(b,N)=>{let{stream:k,done:$}=await t.fs.write(b);k.write(N),k.end(),await $}:(b,N)=>wY(p,f,w,b,N,Oe),rename:(L=t.fs)!=null&&L.rename?async(b,N)=>t.fs.rename(b,N):(b,N)=>a_(p,f,b,N,Oe),rm:(E=t.fs)!=null&&E.rm?async b=>t.fs.rm(b):(b,N)=>c_(p,f,b,N||{},Oe),mkdirp:(I=t.fs)!=null&&I.mkdirp?async b=>t.fs.mkdirp(b):b=>l_(p,f,b,Oe),readDir:(R=t.fs)!=null&&R.readdir?async b=>(await t.fs.readdir(b)).map(k=>k.name):b=>yY(p,f,b,Oe),readDirWithTypes:(_=t.fs)!=null&&_.readdir?async b=>(await t.fs.readdir(b)).map(k=>{let $=0;return k.type&Vp.FileType.File&&($|=1),k.type&Vp.FileType.Directory&&($|=2),k.type&Vp.FileType.SymbolicLink&&($|=64),[k.name,$]}):Yn(f,{posix:async b=>{let N={f:1,"*":1,"/":2,"@":64};return(await te({exec:p,cmd:"ls",args:["-aF",b],output:Oe})).stdout.toString().trim().split(`
`).map(k=>"/*@=%|>".indexOf(k[k.length-1])!==-1?[k.substr(0,k.length-1),k[k.length-1]]:[k,"f"]).filter(([k])=>k!=="."&&k!=="..").map(([k,$])=>[k,N[$]||0])},win32:void 0}),getUsername:async()=>(P===void 0&&(P=await Yn(f,{posix:async()=>(await te({exec:p,cmd:"id",args:["-u","-n"],output:Oe})).stdout.toString().trim(),win32:async()=>d.USERNAME})()),P),toCommonURI:()=>Promise.resolve(void 0),connect:Vf((x=t.fs)!=null&&x.connect?b=>{if("port"in b&&!t.tcpConnect)return y(b);let N=(async()=>{let{stream:k}=await("port"in b?t.tcpConnect(b.host,b.port):t.fs.connect(b.socketPath));return _fe.duplex(wk(k,k))})();return{sink:k=>{N.then($=>$.sink(k),$=>k($,()=>{})).catch($=>i.write(`Connection forwarding to sink error: ${($==null?void 0:$.stack)||($==null?void 0:$.message)||String($)}`))},source:(k,$)=>{N.then(H=>H.source(k,$),H=>$(H)).catch(H=>i.write(`Connection forwarding to source error: ${(H==null?void 0:H.stack)||(H==null?void 0:H.message)||String(H)}`))}}}:y,"Exec Server",i),locateCertificatesFile:function(){return D||(D=p_(this,void 0,i))},nodeExecutable:w,reconnect:async b=>{b?b!==t?(i.write("Updating to new ExecServer to reconnect."),t=b):i.write("New ExecServer to reconnect same as old."):i.write("No new ExecServer to reconnect.")}}}function Dfe(t,e){return async function(n){let{cmd:r,args:o,output:i}=n,s=t(),a=`Run: ${r} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,c=i.start(a),l=n.cwd||e,u=await s.env(),f=n.env?{...u.env,...n.env}:u.env,m=await s.spawn(r,o||[],{cwd:l,env:f});return{stdin:Ife(m.stdin),stdout:S3(m.stdout),stderr:S3(m.stderr),exit:Promise.all([m.onExit,m.stdout.onEnd,m.stderr.onEnd]).then(([{status:d}])=>(i.stop(a,c),{code:d,signal:null})).catch(d=>{throw i.stop(a,c),d!=null&&d.message.includes("NotFound")&&(d.code="ENOENT"),d}),async terminate(){}}}}function S3(t){return wk(void 0,t)}function Ife(t){return wk(t,void 0)}function wk(t,e){let n=new x3.Stream,r=!1;if(t&&(n.writable=!0,n.write=function(o,i,s){s=Array.from(arguments).find(c=>typeof c=="function");let a;try{t.write(o)}catch(c){a=c,setImmediate(()=>n.emit("error",c))}return s&&s(a),!0},n.end=function(o,i,s){s=Array.from(arguments).find(a=>typeof a=="function"),typeof o=="function"&&(o=void 0);try{o&&t.write(o),r=!0,t.end()}catch(a){setImmediate(()=>n.emit("error",a))}return s&&s(),this}),e){let c=function(){for(;i.length&&!n.paused;)n.emit("data",i.shift());!n.paused&&o&&n.emit("end")},o=!1;n.readable=!0,n.paused=!0;let i=[];(e.onDidReceiveMessage||e.onData)(l=>{let u=Buffer.from(l);n.paused?i.push(u):n.emit("data",u)}),e.onEnd.then(()=>{o=!0,n.paused||n.emit("end")});let s=n.on.bind(n);n.on=(l,u)=>{let f=s(l,u);return l==="data"&&n.paused&&setImmediate(n.resume.bind(n)),f};let a=n.pipe.bind(n);n.pipe=function(l,u){let f=a(l,u);return n.paused&&n.resume(),f},n.pause=function(){return n.paused=!0,n},n.resume=function(){return n.paused=!1,c(),n}}return n.destroy=function(o){return t&&!r&&(r=!0,n.end()),o&&n.emit("error",o),n.emit("close"),this},n}var l8=Y(k5()),nf=Y(K5());var X5=Y(require("vscode"));function en(t){let e=X5.workspace.getConfiguration(),n=cs(t),r=e.get(n),o=Nl(t),i=e.get(o);if(i!=null&&i!==r){let s=e.inspect(n);if(!s||s.globalValue===void 0&&s.workspaceValue===void 0&&s.workspaceFolderValue===void 0)return i}return r}function QF(t,e){return t.affectsConfiguration(cs(e))||t.affectsConfiguration(Nl(e))}var ef=Y(require("path"));var J5=Y(require("os")),Tt=Y(require("vscode")),um=require("vscode");async function u0(){await Tt.window.showInformationMessage(um.l10n.t("You need to first save your workspace in a folder containing all its workspace folders."),{modal:!0})}async function Ua(t){var r;let e=t?[t]:(r=Tt.workspace.workspaceFolders)==null?void 0:r.map(o=>o.uri);if(!e)return[];let n=await Promise.all([...e.map(o=>(async()=>{try{let i=o.with({path:ef.posix.join(o.path,".devcontainer.json")});if((await Tt.workspace.fs.stat(i)).type===Tt.FileType.File)return[i]}catch(i){if((i==null?void 0:i.code)!=="FileNotFound")throw i}return[]})()),...e.map(o=>Tt.workspace.findFiles(new Tt.RelativePattern(o.with({path:ef.posix.join(o.path,".devcontainer")}),"{devcontainer.json,*/devcontainer.json}")))]);return[].concat(...n)}async function tf(t,e){let n;if(t.length>1){let r=Tt.window.createQuickPick();r.placeholder=um.l10n.t("Select a devcontainer.json file."),r.busy=!0,r.enabled=!1,r.show(),r.items=(await Promise.all(t.map(async i=>{let s=i.uri,a=i.fileHost.path,c=i.fileHost.platform,l=De(s,c),u=He((await i.fileHost.readFile(l)).toString())||{},f,m,d=a.dirname(l),p=a.dirname(d);a.basename(d)===".devcontainer"?(f=um.l10n.t("Main"),m=p):a.basename(p)===".devcontainer"?(f=a.basename(d),m=a.dirname(p)):(f=um.l10n.t("Project Root"),m=d);let h=u.name||f,g=i.type==="repositoryConfig"||i.type==="userData"?iC(c,l,J5.homedir()):a.relative(m,l);return{label:h,description:g+(s.toString()===(e==null?void 0:e.toString())?` ${um.l10n.t(" (Current)")}`:""),uri:s,buttons:[{iconPath:new Tt.ThemeIcon("go-to-file"),tooltip:um.l10n.t("Open File")}]}}))).sort((i,s)=>{let a=ef.posix.dirname(i.uri.path),c=ef.posix.dirname(s.uri.path);return a!==c?a.localeCompare(c):i.label.localeCompare(s.label)}),r.busy=!1,r.enabled=!0;let o=await new Promise(i=>{r.onDidAccept(()=>i(r.selectedItems[0])),r.onDidHide(()=>i(void 0)),r.onDidTriggerItemButton(({item:s})=>{Tt.commands.executeCommand("vscode.open",s.uri),i(void 0)})});r.dispose(),n=o?Ce.from(o.uri):"cancelled"}else t.length===1&&(n=t[0].uri);return n}function iC(t,e,n){if(t==="win32")return e;let r=`${Uhe(n,"/")}/`;return(t==="linux"?e.startsWith(r):e.toLowerCase().startsWith(r.toLowerCase()))&&(e=`~/${e.substr(r.length)}`),e}function Uhe(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function Ma(t,e){let n=Tt.workspace.fs;return{platform:t,path:t==="win32"?ef.win32:ef.posix,async isFile(r){try{return((await n.stat(Nn(t,e,r))).type&Tt.FileType.File)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async isFolder(r){try{return((await n.stat(Nn(t,e,r))).type&Tt.FileType.Directory)!==0}catch(o){if((o==null?void 0:o.code)==="FileNotFound"||(o==null?void 0:o.code)==="FileNotADirectory")return!1;throw o}},async readFile(r){try{let o=await n.readFile(Nn(t,e,r));return Buffer.from(o)}catch(o){if((o==null?void 0:o.code)==="FileNotFound"){let i=new Error(`Could not read file: ${r}`);throw i.originalError=o,i.code="ENOENT",i}throw o}},async rename(r,o){try{let i=Nn(t,e,r),s=Nn(t,e,o);await n.rename(i,s)}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not rename  ${r} -> ${o}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async rm(r,o){try{let i=Nn(t,e,r);await n.delete(i,{recursive:o.recursive})}catch(i){if((i==null?void 0:i.code)==="FileNotFound"){let s=new Error(`Could not remove ${r}`);throw s.originalError=i,s.code="ENOENT",s}throw i}},async writeFile(r,o){await n.writeFile(Nn(t,e,r),o)},async readDir(r){return(await n.readDirectory(Nn(t,e,r))).map(i=>i[0])},async readDirWithTypes(r){return n.readDirectory(Nn(t,e,r))},async mkdirp(r){await n.createDirectory(Nn(t,e,r))},async toCommonURI(r){return Nn(t,e,r)}}}var oC=class{async readDocument(e){try{let n=Tt.workspace.textDocuments.find(o=>o.uri.toString()===e.toString());if(n)return n.getText();let r=await Tt.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch{return}}async applyEdits(e,n,r){let o=Tt.workspace.textDocuments.find(s=>s.uri.toString()===e.toString());if(o){let s=new Tt.WorkspaceEdit;for(let a of n){let c=o.positionAt(a.offset),l=o.positionAt(a.offset+a.length);s.replace(e,new Tt.Range(c,l),a.content)}if(await Tt.workspace.applyEdit(s))return}let i=Do(r,n);await Tt.workspace.fs.writeFile(e,Buffer.from(i))}};function sC(t){var o,i;let e=((o=/\r?\n/.exec(t))==null?void 0:o[0])||`
`,n=((i=/^\t|^ +/m.exec(t))==null?void 0:i[0])||"	",r=n[0]===" ";return{eol:e,insertSpaces:r,tabSize:r?n.length:void 0}}function aC(){let t=en("logLevel")||"debug";return VC(t)}var Be=require("vscode");var Z5=Y(require("crypto"));async function f0(t,e,n){let r=await eO(t,e,n);return r?Ua(await t.toCommonURI(r)):[]}var d0=".devcontainer-internal.json";async function eO(t,e,n){let r=tO(t,e,n),o=t.path.basename(r),i=t.path.dirname(r),s=await t.isFolder(i)?await t.readDir(i):[];for(let a of s)if(a===o||a.startsWith(`${o}-`)&&!isNaN(Number(a.substring(o.length+1)))){let c=t.path.join(i,a),l=t.path.join(c,d0);if(await t.isFile(l)){let u=He((await t.readFile(l)).toString());if((u==null?void 0:u.rootFolder)===e.rootFolderPath)return c}}}function Q5(t,e,n){return`${tO(t,e,n)}-${Z5.randomUUID()}`}async function e8(t,e,n,r){let o=`// Maintained by the Dev Container extension
${JSON.stringify({rootFolder:e.rootFolderPath},void 0,"	")}`;await t.writeFile(t.path.join(r,d0),Buffer.from(o));let i=tO(t,e,n),s;for(let a=1;;a++)if(s=a>1?`${i}-${a}`:i,!await t.isFolder(s)){await t.rename(r,s);break}return s}function tO(t,e,n){return t.path.join(n,"configs",t.path.basename(e.rootFolderPath))}async function t8(t,e){await t.rm(e,{recursive:!0})}process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";process.env.APPLICATIONINSIGHTS_CONFIGURATION_CONTENT="{}";function n8(t){return t.serverDataFolderName?t.serverDataFolderName:t.quality?t.quality==="stable"?".vscode-server":t.quality==="insider"?".vscode-server-insiders":`.vscode-server-${t.quality}`:".vscode-server-oss"}var yt="remote-containers.revealLogTerminal",lO="remote-containers.revealPostCreateTerminal",mm="remote-containers.openDevContainerFile",u8="remote-containers.openRepositoryInVolume",p0="remote-containers.openRepositoryInUniqueVolume",f8="remote-containers.openRepositoryFromRemoteHubWithEditSession",d8="remote-containers.openRepositoryFromGitWithEditSession",m8="remote-containers.openPullRequestInVolume",r8=new WC,wr={onRemoveOnShutdownChangedEmitter:r8,onRemoveOnShutdownChanged:r8.event,results:new Map},fm,Hn=t=>Kf(t,K.env.appRoot);function h0(t,e,n,r,o,i){return async(s,a)=>{r(),K.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0);let c=K.env.remoteAuthority;if(a.resolveAttempt>1){let l=n.get(c);if(!l)throw new Error("Reconnect attempt without old result.");let u=Be.l10n.t("Reconnection attempt {0}",a.resolveAttempt-1),f=t.log.start(u),{cliHost:m}=l.params;if(m.reconnect){let g=`Reconnecting CLIHost ${a.execServer?"with":"without"} ExecServer.`,v=t.log.start(g);try{await m.reconnect(a.execServer)}catch(C){throw t.log.write(ot(String(C&&(C.stack||C.message)||C))),K.RemoteAuthorityResolverError.TemporarilyNotAvailable(Be.l10n.t("Cannot reconnect to remote host."))}finally{t.log.stop(g,v)}}else t.log.write("CLIHost does not need reconnection.");if((await uC(m,t.log)).pauseResolver&&await p8(m,t.log),l.dockerContainerId){let g=await ci(l.dockerParams,l.dockerContainerId);if(!g)throw K.RemoteAuthorityResolverError.NotAvailable(Be.l10n.t("Container no longer exists."));if(g.State.Status==="paused")throw K.RemoteAuthorityResolverError.TemporarilyNotAvailable(Be.l10n.t("Container is paused."));if(g.State.Status!=="running")throw K.RemoteAuthorityResolverError.NotAvailable(Be.l10n.t("Container is no longer running."))}let p=l.resolvedAuthority.port,h=eq(l.params.forwardedPorts,p);if(h){if(h.connections.size){t.log.write(`Destroying ${h.connections.size} leftover connections to forwarded port ${p}.`);for(let g of h.connections)g.destroy()}}else t.log.write(`Forwarded port ${p} not found.`);return t.log.stop(u,f),{...l.resolvedAuthority,isTrusted:l.isTrusted}}else{let l=Be.l10n.t("Resolving Remote"),u=t.log.start(l),f=await i(c,a,t,e);return Mhe(f.params,f.properties).catch(m=>{}),n.set(c,f),o(),t.log.stop(l,u),K.window.withProgress({location:K.ProgressLocation.Window,title:ige,cancellable:!1},async m=>{await _N(f.params.backgroundTasks)}).then(void 0,m=>{t.log.write(ot(String(m&&(m.stack||m.message)||m)))}),{...f.resolvedAuthority,...f.tunnelInformation,isTrusted:f.isTrusted}}}}async function uC(t,e){let n=t.path.join(await t.homedir(),".vscode-remote-containers","config.json");try{let r=He((await t.readFile(n)).toString())||{},o=r.canConnectToContainer!==!1,i=r.canRebuildContainer!==!1&&o;return await K.commands.executeCommand("setContext","hideConnectCommands",!o),await K.commands.executeCommand("setContext","hideRebuildCommands",!i),{canConnectToContainer:o,canRebuildContainer:i,pauseResolver:!!r.pauseResolver}}catch(r){return r.code!=="ENOENT"&&e.write(`Error reading ${n}: ${(r==null?void 0:r.stack)||(r==null?void 0:r.message)||r}`),{canConnectToContainer:!0,canRebuildContainer:!0,pauseResolver:!1}}}async function p8(t,e){let n=Be.l10n.t("Pausing resolver"),r=e.start(n),o=dw(t),i=`
const fs = require('fs');
const path = require('path');
const os = require('os');

const filepath = path.join(os.homedir(), '.vscode-remote-containers', 'config.json');

fs.watch(path.dirname(filepath), (event, filename) => {
	if (filename === path.basename(filepath)) {
		console.log(\`config.json file event: \${event}\`);
		rereadConfig(true);
	}
});
rereadConfig();
setInterval(() => {
	rereadConfig();
}, 5000);
function rereadConfig(event = false) {
	try {
		const text = fs.readFileSync(filepath, 'utf8');
		const config = JSON.parse(text);
		if (!config.pauseResolver) {
			console.log(\`config.json: Continuing... (\${event ? 'event' : 'poll'})\`);
			process.exit();
		}
		if (event) {
			console.log('config.json: Still paused.');
		}
	} catch (err) {
		console.log('config.json: Not a JSON file.');
	}
}
`;try{await te({exec:t.exec,cmd:o.cmd,args:[...o.args,"-e",i],output:on(e,1),print:"continuous"})}catch(s){e.write(ot((s==null?void 0:s.message)||String(s)))}e.stop(n,r)}async function Mhe(t,e){if(!e.nodeExecutable)return;let n=await at(dm.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:r}=await pc(t,e,[e.nodeExecutable,"-e",n],void 0,{silent:!0}),o=r.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:o})}var nO;async function g0(t){return nO||(nO=zl(dm.join(__dirname,"..",".."),pm,t)),nO}var cC={};async function pm(t,e=!0){var n;if(t.counter&&((n=cC[t.prompt])==null?void 0:n.from)===t.counter&&delete cC[t.prompt],!cC[t.prompt]){if(!e)return"";cC[t.prompt]={result:Promise.resolve(K.window.showInputBox({prompt:t.prompt||Be.l10n.t("Enter password"),password:!0,ignoreFocusOut:!0}).then(r=>r||"")),from:t.counter}}return cC[t.prompt].result}async function tt(t,e,n,r=!0,o=g0(e),i=!0){var C;let s=!n;if(s){if(wr.results.size){let w=[...wr.results.values()].filter(y=>y.dockerParams)[0];return y3(w.dockerParams)}if(fm)return fm}I0()&&(e.write(Be.l10n.t("Getting Docker parameters for own remote.")),hm()===1&&e.write(new Error().stack,1)),n&&typeof n!="string"&&"scheme"in n&&(n.scheme==="file"?n=n.fsPath:n=Dp(n));let a,c;if(!n){let w=(K.workspace.workspaceFolders||[])[0];if(K.env.remoteName==="wsl")w?n=Dp(w.uri):n={wslDistro:i_(K.env.remoteAuthority),wslPath:"/"};else if(K.env.remoteName==="ssh-remote"){if(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),!c){let y=Zv(K.env.remoteAuthority);if(y){let{user:S,hostName:P,port:D}=y;a={host:`ssh://${S?`${S}@`:""}${P}${D?`:${D}`:""}`}}}(c||a)&&(w?n=w.uri.path:n="/")}else K.env.remoteName==="tunnel"?(c=await K.workspace.getRemoteExecServer(K.env.remoteAuthority),w?n=w.uri.path:n="/"):K.env.remoteName==="attached-container"?a=(C=ad(K.env.remoteAuthority))==null?void 0:C.settings:(w==null?void 0:w.uri.scheme)==="file"&&(n=w.uri.fsPath);n||(n=process.cwd())}let l=a&&"host"in a&&a.host||void 0,u=r?Ha():{executeInWSL:"never",defaultDistro:void 0},f=await Wv(K.env.appRoot),m=Uo(c?{server:c,authority:K.env.remoteAuthority}:void 0,l,n,Hn,u,t.extensionPath,await lo(),f,e,Ls,{sshAskpassEnv:o,settings:fg()});i&&!await Promise.race([m,Bt(1e3)])&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${Be.l10n.t("Setting up Dev Containers (show log)")}](command:${yt} "${Be.l10n.t("Show details in terminal")}")`,cancellable:!1},async()=>{await m});let d=await m,p=ks(),h=$a();if(!a){let w=K.workspace.getConfiguration("containers"),y=K.workspace.getConfiguration("docker"),S=w.get("environment")||{},P=y.get("environment")||{},D=S.DOCKER_CONTEXT||P.DOCKER_CONTEXT||y.get("context")||d.env.DOCKER_CONTEXT;if(!D){let A={cliHost:d,dockerCLI:p,dockerComposeCLI:hs({exec:d.exec,env:{},output:Oe},p,h),dockerComposePath:h,env:{},output:Oe};D=await zN(A)||"default"}D&&D!=="default"?a={context:D}:(a={...dr(d.env),...["host","certPath","tlsVerify"].reduce((A,O)=>$he(A,w,O),{}),...dr(S)},Object.keys(a).length||(a=void 0))}let g={...d.type==="local"?await o:void 0,...await sd(d,a)},v={cliHost:d,dockerCLI:p,dockerComposeCLI:hs({exec:d.exec,env:g,output:e},p,h),dockerComposePath:h,env:g,output:e};return s&&(fm=v,uO(t,f),await uC(v.cliHost,e)),v}async function h8(){if(!K.env.remoteName||K.env.remoteName==="test")return process.platform;if(K.env.remoteName==="ssh-remote"||K.env.remoteName==="tunnel"){let t=await K.workspace.getRemoteExecServer(K.env.remoteAuthority);if(t)return(await t.env()).osPlatform}return"linux"}var m0;function uO(t,e){if(m0)return m0;let n=Whe(t,e);return t.subscriptions.push(n),t.subscriptions.push(n.event(()=>{let r=fm==null?void 0:fm.cliHost;fm=void 0,r!=null&&r.terminate&&r.terminate()})),m0=n.event,m0}function $he(t,e,n){let r=e.get(n);return r&&(t[n]=r),t}var Hhe=["docker.context","docker.host","docker.certPath","docker.tlsVerify","docker.environment","containers.environment"],Bhe=["dockerPath","dockerComposePath","executeInWSL","executeInWSLDistro"];function Whe(t,e){let n=new K.EventEmitter,r=K.workspace.onDidChangeConfiguration(async l=>{(Hhe.some(u=>l.affectsConfiguration(u))||Bhe.some(u=>QF(l,u)))&&n.fire()}),o,i,s,a=()=>{(async()=>{i||(i=await Uo(void 0,void 0,process.cwd(),Hn,Ha(),t.extensionPath,await lo(),e,Oe,Ls));let l={cliHost:i,dockerCLI:ks(),dockerComposeCLI:hs({exec:i.exec,env:{},output:Oe},ks(),$a()),dockerComposePath:$a(),env:{},output:Oe},u=await zN(l);u===void 0?s=setTimeout(a,2*60*1e3):(u!==o&&(o!==void 0&&n.fire(),o=u),s=setTimeout(a,2*1e3))})().catch(console.error)};a();let c=n.dispose;return n.dispose=()=>{r.dispose(),s&&clearTimeout(s),c.call(n)},n}function rf(){let t=K.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return fO(e)}return null}function fO(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let n=fo(t.authority);if(ln(n))return null;if(uo(n)&&n.inspectVolume&&n.inspectVolume===!0)return n}return null}function v0(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:jhe}}async function jhe(t){let e="Rebuild",n="Ignore",r=await K.window.showInformationMessage(Be.l10n.t("Configuration file(s) changed: {0}. The container might need to be rebuilt to apply the changes.",t.join(", ")),e,n);if(r===e)return K.commands.executeCommand("remote-containers.rebuildContainer");if(r===n)return"ignore"}var rO="remote.defaultExtensionsIfInstalledLocally",o8="dev.containers.defaultExtensionsIfInstalledLocally";async function g8(){let t=K.workspace.getConfiguration(),e=t.get(o8);if(!e)return;let n=t.inspect(rO);if(!(n!=null&&n.globalValue))await t.update(rO,e,K.ConfigurationTarget.Global);else{let r=n.globalValue.slice(),o=n.globalValue.map(i=>i.toLowerCase());for(let i of e){let s=i.toLowerCase();o.includes(s)||r.push(i)}await t.update(rO,r,K.ConfigurationTarget.Global)}await t.update(o8,void 0,K.ConfigurationTarget.Global)}function Vhe(t){return t?i8():Array.from(new Set([...en("defaultExtensions")||[],...i8()]))}function v8(){return rf()?{}:en("defaultFeatures")||{}}function i8(){let t=K.env.language,e=t.indexOf("-"),n=s8(t)||(e!==-1?s8(t.substr(0,e)):void 0);return n?[n]:[]}function s8(t){let e=t.toLowerCase();return K.extensions.all.filter(n=>{var o;let r=n.packageJSON&&n.packageJSON.contributes;return(o=r==null?void 0:r.localizations)!=null&&o.length?!!r.localizations.find(i=>{var s;return((s=i==null?void 0:i.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(n=>n.id)[0]}function a8(){return!!K.workspace.getConfiguration().get("workbench.enableExperiments")}function Yhe(){return!!en("enableWebAccess")}function w0(){return en("workspaceMountConsistency")||"cached"}async function y0(t,e,n){if(t.type!=="local")try{let r=t.path.join(await t.homedir(),n8(e),"data","Machine","settings.json"),o=await t.readFile(r),i=He(o.toString());return(i==null?void 0:i["dev.containers.gpuAvailability"])||"detect"}catch(r){return(r==null?void 0:r.code)!=="ENOENT"&&n.write(ot(String(r&&(r.stack||r.message)||r))),"detect"}return en("gpuAvailability")||"detect"}function C0(){return en("cacheVolume")??!0}function qhe(){let t=en("copyGitConfig");return typeof t=="boolean"?t:!0}function Ghe(){return en("gitCredentialHelperConfigLocation")||"global"}function zhe(){let t=en("dockerCredentialHelper");return typeof t=="boolean"?t:!0}function Khe(){let t=en("mountWaylandSocket");return typeof t=="boolean"?t:!0}function ks(){return en("dockerPath")||"docker"}function E0(){return en("dockerSocketPath")||"/var/run/docker.sock"}function Ha(){return{executeInWSL:dO(),defaultDistro:S0()}}function dO(){return process.platform!=="win32"?"never":en("executeInWSL")?"always":"forWSLPath"}function S0(){if(process.platform==="win32")return en("executeInWSLDistro")||void 0}function Xhe(){return process.platform==="win32"&&en("forwardWSLServices")!==!1}function $a(){return en("dockerComposePath")||"docker-compose"}function _0(){return en("experimentalLockfile")||!1}function mO(){let t=en("optimisticallyLaunchDocker");return typeof t=="boolean"?t:!0}function hm(){let t=en("logLevel")||"debug";return VC(t)}var Jhe=t=>K.workspace.onDidChangeConfiguration(e=>{QF(e,"logLevel")&&t(hm())});function Zhe(){let t=K.workspace.getConfiguration(),e=n=>(t.get(Nl(n),"")||t.get(n,"")).trim();return{repository:e("dotfiles.repository")||void 0,installCommand:e("dotfiles.installCommand")||void 0,targetPath:e("dotfiles.targetPath")||"~/dotfiles"}}function fg(){let t=K.workspace.getConfiguration();return{executablePath:t.get("remote.SSH.path"),executableArgs:hm()===1?["-v"]:void 0,configFilePath:t.get("remote.SSH.configFile")}}function tl(t,e,n,r,o,i,s,a,c){var m,d;let l={resolver:e,outcome:n};if(o){l.hostType=o.cliHost.type;let p=o.cliHost.authority;if(p){let h=p.indexOf("+");h!==-1&&(l.hostAuthority=p.substring(0,h))}}i&&(l.configProperties=JSON.stringify(Object.keys(i)),l.configExtensions=JSON.stringify(((d=(m=i.customizations)==null?void 0:m.vscode)==null?void 0:d.extensions)||[]),l.configFeatures=JSON.stringify(Object.keys(i.features||{}).map(p=>gf(p))),"image"in i?l.configType="image":Fo(i)?l.configType="dockerfile":"dockerComposeFile"in i&&(l.configType="dockerCompose")),s&&(l.configLocation=s),a&&(l.hardwareId=a.osRelease.hardware,l.osReleaseId=a.osRelease.id,l.osReleaseVersion=a.osRelease.version);let u=c&&c.originalError,f=u&&(u.stack||u.message||String(u))||c&&c.description;f&&(l.errorMessage=f),c!=null&&c.step&&(l.step=c.step),t.sendTelemetryEvent("resolver",l,{sessionTimeInMs:Date.now()-r.getTime()})}var oO=class{constructor(e){this.onClose=e}writeEmitter=new K.EventEmitter;onDidWrite=this.writeEmitter.event;inputEmitter=new K.EventEmitter;onDidInput=this.inputEmitter.event;queue=[];ready=!1;open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},lC=class{constructor(e,n,r=void 0){this.sessionStart=n;let o=i=>{this.outputTerminal.write(i),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?dm.join(e,`remoteContainers-${n.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=Qhe(o,hm,this.logFilePath,n,r),Object.defineProperty(this.log,"dimensions",{get:()=>{var i;return(i=this._terminal)==null?void 0:i.dimensions}}),this.log.onDidChangeDimensions=i=>K.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&i(s.dimensions)})}_terminal;outputTerminal=new oO(()=>this._terminal=void 0);onDidInput=this.outputTerminal.onDidInput;_name=Be.l10n.t("Dev Containers");_revealOnNextOutput=!1;log;logFilePath;get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=K.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function Qhe(t,e,n,r,o=void 0){let i=[];return n&&i.push(pP(n,()=>Math.min(2,e()))),i.push(hP(t,e,r)),i.push(ege()),on(mP(i,o))}function ege(){return{event(t){t.type==="notification"&&K.window.showInformationMessage(t.message,Be.l10n.t("Dismiss"))}}}async function pO(t,e){let n=await ci(t,e.Id);if(n&&n.State.Status==="running")try{await et(t,"stop",n.Id)}catch(r){K.window.showErrorMessage(Be.l10n.t("Error stopping container: {0}",r.message))}}async function x0(t,e){let n=await ci(t,e.Id);if(n&&n.State.Status!=="running")try{await et(t,"start",n.Id)}catch(r){K.window.showErrorMessage(Be.l10n.t("Error starting container: {0}",r.message))}}async function w8(t,e){try{await et(t,"rm",e)}catch(n){K.window.showErrorMessage(Be.l10n.t("Error removing container: {0}",n.message))}}async function hO(t,e){try{await et(t,"volume","rm","--force",e)}catch(n){K.window.showErrorMessage(Be.l10n.t("Error removing volume: {0}",n.message))}}function tge(){return K.env.sessionId!=="someValue.sessionId"?K.env.sessionId:`${K.env.sessionId}_${Date.now()}`}function nge(t,e){let n=K.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(n.dispose.bind(n))}async function y8(t,e){if(t.globalState.get("removeOnStartup")===e)return await t.globalState.update("removeOnStartup",null),!0;let n=t.workspaceState.get("removeOnStartup",!1);return n&&await t.workspaceState.update("removeOnStartup",null),n}async function C8(t,e){await t.workspaceState.update("removeOnStartup",e)}async function gO(t,e){await t.globalState.update("removeOnStartup",e)}async function E8(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function fC(t,e){await t.globalState.update("buildNoCache",e)}async function dg(t,e,n,r,o){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:n==null?void 0:n.toString(),logFile:r,openLog:o})}async function S8(t){var n;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let r=(n=K.workspace.workspaceFolders)==null?void 0:n.some(i=>i.uri.fsPath===e.workspaceFolder||i.uri.path===e.workspaceFolder),o=await rf();if(r||o&&o.repositoryPath===e.workspaceFolder&&(r=!0),r){let i=e.fileWithError?Ce.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await c8(i),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?K.ViewColumn.Beside:K.ViewColumn.One,preserveFocus:!0},a=await K.window.showTextDocument(K.Uri.file(e.logFile),s),c=new K.Position(a.document.lineCount-1,0);a.selection=new K.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await c8(i),!0}}return!1}function _8(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function c8(t){return t?K.commands.executeCommand("vscode.open",K.Uri.parse(t.toString()),{viewColumn:K.ViewColumn.One}):K.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:K.ViewColumn.One})}async function D0(t,e,n,r){return!r&&wr.results.size?[...wr.results.values()].filter(o=>o.config).map(o=>({type:o.configLocationType||"unknown",uri:o.configWorkspaceURI||o.config.configFilePath,fileHost:t})):(await Promise.all([!r||r==="workspace"?Ua().then(o=>o.map(i=>({type:"workspace",uri:i,fileHost:t}))):[],!r||r==="repositoryConfig"?vO(t,e).then(o=>o.map(i=>({type:"repositoryConfig",uri:i,fileHost:Ma(process.platform,i.with({path:dm.posix.dirname(i.path)}))}))):[],n&&(!r||r==="userData")?f0(t,e,n).then(o=>o.map(i=>({type:"userData",uri:i,fileHost:t}))):[]])).flat()}async function vO(t,e){let n=dC();if(n.length){let r=await $S(t,e,Oe);if(r!=null&&r.length){let o=tx(r,n);return(await Promise.all(o.map(s=>Ua(Ce.file(s))))).flat()}}return[]}function dC(){return en("repositoryConfigurationPaths")||[]}async function nl(t,e){if(e.type==="local")return t.globalStoragePath}async function rge(t,e,n="localhost"){await K.workspace.openTunnel({remoteAddress:{host:n,port:e}})}function x8(t,e){let n=new lC(void 0,e);n.name=Be.l10n.t("Configuring..."),n.revealOnNextOutput=!0;let r=!1;n.onDidInput(()=>{r&&(r=!1,n.dispose())});let o,i={enabled:!0,skipNonBlocking:!1,output:RY(n.log,"postCreate",t),onDidInput:n.onDidInput,done:()=>{n.shown&&(n.log.raw(`\x1B[1m${Be.l10n.t("Done. Press any key to close the terminal.")}\x1B[0m`),r=!0),o()},promise:new Promise(s=>o=s)};return{channel:n,postCreate:i}}async function mg(t){let{authority:e,extensionContext:n,sessionStart:r,progress:o,cliHost:i,env:s,cwd:a,wslSettings:c,isLocalContainer:l,telemetry:u,onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,postCreate:h}=t,g=Yhe(),v=tge(),C=await lo(),w;if(i.type!=="wsl"&&Xhe())try{w=await s_(void 0,c,n.extensionPath,C,u.product,Hn,m,Ls)}catch(S){m.write("Could not connect to WSL."),m.write((S==null?void 0:S.message)||String(S)),S!=null&&S.stdout&&m.write(S.stdout.toString()),S!=null&&S.stderr&&m.write(S.stderr.toString())}let y={computeExtensionHostEnv:!0,...u,appRoot:K.env.appRoot,localCacheFolder:C,containerSessionDataFolder:dm.posix.join("/tmp",`devcontainers-${v}`),extensionPath:n.extensionPath,sessionId:v,sessionStart:r,authority:e,cliHost:i,hostConfig:await uC(i,m),env:s,cwd:a,isLocalContainer:l,getAdditionalExtensionsToInstall:Vhe.bind(void 0),additionalFeaturesToInstall:v8(),isCopyGitConfigEnabled:qhe(),credentialHelperConfigLocation:Ghe(),isDockerCredentialHelperEnabled:zhe(),dotfilesConfiguration:Zhe(),progress:cge(o),onDidInput:f,output:m,logFilePath:d,allowSystemConfigChange:p,defaultUserEnvProbe:"loginInteractiveShell",postCreate:h,getTelemetryLevel:()=>u.getTelemetryLevel(),forwardServerPort:!0,web:g,getLogLevel:hm,onDidChangeLogLevel:Jhe,loadNativeModule:Hn,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:S=>nge(y,S),openTunnel:rge,getTunnels:()=>Promise.resolve(K.workspace.tunnels),onAdoptProcess:K.window.onDidOpenTerminal,persistedFolder:await C3(i,n.globalStoragePath),alternateDownload:Ls,skipPostAttach:!1,wslCLIHost:w,localWaylandSocket:l?await oge(i,w,m):void 0,globalState:n.globalState};return y.hostConfig.pauseResolver&&await p8(i,m),y}async function oge(t,e,n){if(!Khe())return;let r=await nN(t);if(r)return r;let o=e&&await nN(e);if(o)return gY(e,o,n)}async function Ls(t,e){let n=await K.commands.executeCommand("_workbench.downloadResource",K.Uri.parse(t));if(!n)throw new Ee({description:Be.l10n.t("Downloading the VS Code Server failed. Please try again later.")});await il(n.fsPath,e)}var pg=`[${Be.l10n.t("Connecting to Dev Container (show log)")}](command:${yt} "${Be.l10n.t("Show details in terminal")}")`,ige=`[${Be.l10n.t("Configuring Dev Container (show log)")}](command:${lO} "${Be.l10n.t("Show details in terminal")}")`,sge=`[${Be.l10n.t("Reading Dev Container Configuration (show log)")}](command:${yt} "${Be.l10n.t("Show details in terminal")}")`,age={0:"",1:Be.l10n.t("Cloning Repository"),2:Be.l10n.t("Building image"),3:Be.l10n.t("Starting container"),4:Be.l10n.t("Installing server"),5:Be.l10n.t("Starting server"),6:""};function cge(t){let e=0;return n=>{let r=6-n,o=(100-e)/(r+1);t.report({message:age[n],increment:o}),e+=o}}function D8(t,e,n){let{name:r,publisher:o,version:i,aiKey:s}=e;if(!s)return R1(e,n);let a=o?`${o}.${r}`:r,c=new l8.default(s);t.subscriptions.push(c);let l=new iO(c),u=lge(n),f=a8()?(0,nf.getExperimentationService)(a,i,u,l,t.globalState):void 0;return{sendTelemetryEvent:l.sendTelemetryEvent.bind(l),isCachedFlightEnabled:async m=>f&&a8()?f.isCachedFlightEnabled(m):!1,product:n,package:e,getTelemetryLevel:()=>c.telemetryLevel}}var iO=class{constructor(e){this.baseReporter=e}sharedProperties={};sendTelemetryEvent(e,n,r){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...n},r)}setSharedProperty(e,n){this.sharedProperties[e]=n}postEvent(e,n){let r={};for(let[o,i]of n)r[o]=i;this.sendTelemetryEvent(e,r)}};function lge(t){switch(t.quality){case"stable":return nf.TargetPopulation.Public;case"insider":return nf.TargetPopulation.Insiders;case"exploration":return nf.TargetPopulation.Internal;case void 0:return nf.TargetPopulation.Team;default:return nf.TargetPopulation.Public}}var mC=Be.l10n.t("Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container."),sO="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function pC(t,e){if(e!=null&&e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-")||t.globalState.get(sO))return!0;let n=Be.l10n.t("Got It"),r=Be.l10n.t("Learn More"),o=await K.window.showWarningMessage(Be.l10n.t("Cloning a repository in a Dev Container may execute arbitrary code."),{modal:!0,detail:Be.l10n.t("Only clone a repository in a Dev Container if you trust its authors.")},n,r);return o===n?(await t.globalState.update(sO,!0),!0):(o===r&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var aO="userConfirmedAttachToContainerRequiresTrust";async function of(t){if(t.globalState.get(aO))return!0;let e=Be.l10n.t("Got It"),n=Be.l10n.t("Learn More"),r=await K.window.showWarningMessage(Be.l10n.t("Attaching to a container may execute arbitrary code."),{modal:!0,detail:Be.l10n.t("Only attach to a container if you trust its origin.")},e,n);return r===e?(await t.globalState.update(aO,!0),!0):(r===n&&K.env.openExternal(K.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function I8(t){t.globalState.setKeysForSync([sO,aO,cO])}function P8(){let t=process.env.PATH||"";process.platform==="darwin"&&!/(^|:)\/usr\/local\/bin(:|$)/i.test(t)&&(process.env.PATH=`${t}:/usr/local/bin`)}var cO="updatedToPreRelease2",uge="2022-01-19T05:14:31.474Z";async function b8(t,e){try{e.quality==="insider"&&e.date&&e.date.localeCompare(uge)>=0&&!t.globalState.get(cO,!1)&&(await t.globalState.update(cO,!0),await K.commands.executeCommand("workbench.extensions.installExtension","ms-vscode-remote.remote-containers",{installPreReleaseVersion:!0}))}catch(n){console.error(n)}}async function hg(t,e,n,r){try{return await ex(t,e,n,hm(),void 0,void 0,r)}catch{return}}async function wO(t,e,n,r){let o=(async()=>{try{return await E3(t,e,n,hm(),v8(),void 0,void 0,r)}catch{return}})(),i=await Promise.race([o,new Promise(s=>setTimeout(()=>s("timeout"),1e3))]);return i!=="timeout"?i:K.window.withProgress({location:K.ProgressLocation.Notification,title:sge,cancellable:!0},async(s,a)=>Promise.race([o,new Promise(c=>{let l=a.onCancellationRequested(()=>{l.dispose(),c("canceled")})})]))}async function sf(t){return K.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function T8(t,e,n,r){try{return await Up(e,t.globalState,n,r),!0}catch(o){if(!(o instanceof Ee))throw o;let i=Be.l10n.t("Learn More");return await K.window.showWarningMessage(o.description,{modal:!0,detail:o.detail},...o.data.learnMoreUrl?[i]:[])===i&&await K.env.openExternal(K.Uri.parse(o.data.learnMoreUrl)),!1}}async function R8(t,e){let n="";for(let r=jp(K.env.remoteAuthority);r;r=jp(r.parentAuthority)){let o=r.name==="tunnel"?await K.extensions.getExtension("ms-vscode.remote-server"):r.name==="ssh-remote"?await K.extensions.getExtension("ms-vscode-remote.remote-ssh"):void 0;o&&(n+=` over ${o.packageJSON.displayName} ${o.packageJSON.version}`)}return`Dev Containers ${t.version}${n} in VS Code ${K.version} (${e.commit||"out-of-source"}).`}function N8(t){I0()&&(async()=>await Promise.race([t,new Promise(n=>setTimeout(()=>n("timeout"),1e4))])==="timeout"&&await K.window.withProgress({location:K.ProgressLocation.Notification,title:`[${Be.l10n.t("Dev Containers waiting for connection request (show log)")}](command:${yt} "${Be.l10n.t("Show details in terminal")}")`},async()=>t))()}var fge=["dev-container","attached-container","k8s-container"];function I0(){return K.env.remoteName&&fge.includes(K.env.remoteName)}var gm={id:"openDocumentation",title:xi.l10n.t("Open Documentation"),isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await $t.env.openExternal($t.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},vm={id:"reloadWindow",title:xi.l10n.t("Reload Window"),isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await et(t.dockerParams,"stop","-t","0",t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},L8={id:"rebuildContainer",title:xi.l10n.t("Rebuild Container"),isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e&&!(t.params&&"hostConfig"in t.params&&!t.params.hostConfig.canRebuildContainer),execute:async t=>{await Hi(t.dockerParams,t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},gg={id:"openRecent",title:xi.l10n.t("Open Recent..."),isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await $t.commands.executeCommand("workbench.action.openRecent")}},A8={id:"startContainer",title:xi.l10n.t("Start Container"),isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await et(t.dockerParams,"start",t.containerId),await $t.commands.executeCommand("workbench.action.reloadWindow")}},F8={id:"chooseContainer",title:xi.l10n.t("Choose Container"),isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await $t.commands.executeCommand("remote-containers.attachToRunningContainer")}},af={id:"closeRemote",title:xi.l10n.t("Close Remote"),isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let n=$t.workspace.workspaceFile;return!(n&&n.scheme==="untitled"||$t.workspace.textDocuments.some(o=>o.isDirty))},execute:async t=>{await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},vg=[{id:"retry",title:xi.l10n.t("Retry"),isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:vm.execute},{id:"moreActions",title:xi.l10n.t("More Actions..."),isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:xi.l10n.t("Learn More"),isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await $t.env.openExternal($t.Uri.parse(t.data.learnMoreUrl))}}];async function cf(t,e,n,r=!1,o){var d,p,h,g,v,C;let i=t instanceof Ee?t:new Ee({description:xi.l10n.t("An error occurred setting up the container."),originalError:t});$t.commands.executeCommand(yt);let s=i.originalError&&(i.originalError.stack||i.originalError.message)||i.originalError;if(s!==void 0){o.write(ot(String(s)));let w=(p=(d=i.originalError)==null?void 0:d.stdout)==null?void 0:p.toString().trim();w&&o.write(w);let y=(g=(h=i.originalError)==null?void 0:h.stderr)==null?void 0:g.toString().trim();y&&o.write(ot(y)),(v=i.originalError)!=null&&v.code&&o.write(`Exit code ${(C=i.originalError)==null?void 0:C.code}`)}if(i.data.closeRemote)throw await $t.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),$t.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let a=i.actions;a.length||(a=[gm]);let c=await a.reduce(async(w,y)=>await y.applicable(i,!0)?[...await w,y]:w,Promise.resolve([])),l=await $t.window.showErrorMessage(i.description,{modal:!0,detail:i.detail},...c);if(l&&(k8(n,e,l.id),await l.execute(i)),l&&l.isLastAction){if(r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let u=await a.reduce(async(w,y)=>await y.applicable(i,!1)?[...await w,y]:w,Promise.resolve([])),f=u.map(w=>({label:w.title,action:w}));async function m(){let y=await(u.length?$t.window.showQuickPick(f,{ignoreFocusOut:!0,placeHolder:xi.l10n.t("Pick an action to help resolve the problem.")}):Promise.resolve(void 0));y&&(k8(n,e,y.action.id),y.action.execute(i).catch(console.error),y.action.isLastAction||await m())}if(m().catch(console.error),r)throw $t.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function k8(t,e,n){t.sendTelemetryEvent("errorAction",{resolver:e,action:n})}var vn=Y(require("vscode")),Gt=require("vscode"),Ba=Y(require("path"));var me=Y(require("vscode")),tn=require("vscode");var Q8=Y(jT());function O8(t){var e;return(e=t.options)!=null&&e.version?"version":void 0}var _g=Y(require("path"));async function lf(t){let r=await Q_({type:"GET",url:"https://containers.dev/static/devcontainer-index.json",headers:{"user-agent":"devcontainers-vscode",Accept:"application/json"}},t),o=He(r.toString());return o.collections.find(i=>i.templates.length)||t.write("No container templates retrieved from index.",5),o.collections.find(i=>i.features.length)||t.write("No container features retrieved from index.",5),o}var Ft=Y(require("vscode")),it=require("vscode"),wC=Y(require("os"));var vC=Y(require("path"));var Pn=Y(require("vscode")),qt=require("vscode");var U8=qt.l10n.t("Keep Defaults"),dge=qt.l10n.t("Configure Options"),hC={iconPath:new Pn.ThemeIcon("check-all"),tooltip:qt.l10n.t("Finish")},yO=["devcontainers","microsoft","github"];async function wg(t,e,n,r=[],o,i=!0,s=!1){if(!e.length)return{};let a={iconPath:new Pn.ThemeIcon("info"),tooltip:qt.l10n.t("Open Documentation")},c=t.quickPick.onDidTriggerItemButton(y=>{let S=y.item.feature.documentationURL;Pn.env.openExternal(Pn.Uri.parse(S))}),l=await o,u=qt.l10n.t("Suggested by GitHub Copilot"),f=e.map(y=>{let S=r.indexOf(y)!==-1,P;if(S)P=qt.l10n.t("$(lock) Feature is included in base image and cannot be removed");else if(y.owner){let A=y.owner==="devcontainers"?"$(verified)":"";P=`${y.owner||qt.l10n.t("Unknown Publisher")} ${A}`}else P=void 0;let D=l==null?void 0:l.features.includes(y);return{label:D?`$(sparkle) ${y.name}`:y.name,detail:y.description,description:D?P?`${P} ${u}`:u:P,picked:n.indexOf(y)!==-1,buttons:y.documentationURL?[a]:void 0,feature:y,isAlreadyInstalledViaBaseImage:S,kind:Pn.QuickPickItemKind.Default}}).sort((y,S)=>{if(y.isAlreadyInstalledViaBaseImage!==S.isAlreadyInstalledViaBaseImage)return y.isAlreadyInstalledViaBaseImage?1:-1;let P=l==null?void 0:l.features.includes(y.feature),D=l==null?void 0:l.features.includes(S.feature);return P!==D?P?-1:1:y.label.localeCompare(S.label)}),m,d=t.quickPick,{matchOnDetail:p}=d;try{d.matchOnDetail=!0;let y=[];s&&y.push(Pn.QuickInputButtons.Back),i&&y.push(hC),m=await Eo(d,f,qt.l10n.t("Select additional features to install"),qt.l10n.t("Select Features"),!0,y)}finally{d.matchOnDetail=p}if(c.dispose(),!m)return;if(m.button===Pn.QuickInputButtons.Back)return"back";let h=m.pick.filter(y=>!y.isAlreadyInstalledViaBaseImage).map(y=>y.feature),g={};if(!h.length)return g;let v=[];for(let y of e){let S=h.indexOf(y)!==-1;g[y.id]=S?{}:!1,S&&yO.indexOf(y.owner)===-1&&v.push(y)}if(t.askForTrust&&v.length){let y=[...new Set(v.map(E=>E.owner))].sort().map(E=>`@${E}`),S=y.length===1?y[0]:`${y.slice(0,-1).join(", ")} and ${y[y.length-1]}`,P={label:qt.l10n.t("Trust {0}",S),description:qt.l10n.t("from GitHub"),buttons:[{iconPath:new Pn.ThemeIcon("info"),tooltip:qt.l10n.t("Open Documentation")}]},D={label:qt.l10n.t("Back")},A={label:qt.l10n.t("Cancel")},O=d.onDidTriggerItemButton(()=>{for(let E of v)Pn.env.openExternal(Pn.Uri.parse(E.documentationURL))}),L=await Eo(d,[P,D,A],qt.l10n.t("Some features are from the {0} GitHub owner/organization(s).",S),void 0,void 0,!0);if(O.dispose(),!L||L===A)return;if(L==="back"||L===D)return wg(t,e,n,r,o,i,s)}return m.button===hC||!i||!h.some(y=>{let S=y.options;return S&&Object.keys(S).some(P=>{let D=S[P];return D.type==="boolean"||D.type==="string"&&("enum"in D&&(D.enum||[]).length>1||"proposals"in D&&(D.proposals||[]).length>1)})})||await Pn.window.showQuickPick([U8,dge],{title:qt.l10n.t("Keep Feature defaults or configure options?"),canPickMany:!1})===U8?g:mge(t,g,h,()=>wg(t,e,n,r,o))}async function mge(t,e,n,r){return async function o(i,s,a){if(!s.length)return i;let c=s[0],l=i;if(!(c!=null&&c.options))return o(l,s.slice(1),a);let u,f;return u=await pge(t,l,c),u&&(f=await hge(t,u,c,a)),!u||!f?await a():o(f,s.slice(1),a)}(e,n,r)}async function pge(t,e,n){let r=n==null?void 0:n.options;if(!r)return e;let i=Object.keys(r).filter(l=>{var u;return((u=r[l])==null?void 0:u.type)==="boolean"}).map(l=>{let u=r[l];return{label:l,description:u.description,key:l,value:!0,picked:!!(u!=null&&u.default)}});if(!i.length)return e;let s=n.id,a=n.name||s,c=await Eo(t.quickPick,i,qt.l10n.t("Select boolean options for {0}",a),qt.l10n.t("Select boolean options for '{0}'",a),!0,[Pn.QuickInputButtons.Back,hC]);if(!(!c||c.button===Pn.QuickInputButtons.Back))return c.pick.reduce((l,u)=>({...l,[s]:{...l==null?void 0:l[s],[u.key]:u.value}}),e)}async function hge(t,e,n,r){let o=n==null?void 0:n.options;if(!o)return e;let i=n.id,s=n.name||i;return async function a(c,l,u){if(!l.length)return c;let f=l[0],m=o[f],d=("enum"in m&&m.enum||"proposals"in m&&m.proposals||[]).map(v=>({label:String(v),value:v,description:m.default===v?qt.l10n.t("(default)"):void 0}));if(d.length===0)return a(c,l.slice(1),u);let p="enum"in m?void 0:v=>{if(!(!v||d.some(C=>C.value===v)))return{label:qt.l10n.t("Use: {0}",v),value:v,description:qt.l10n.t("(custom)")}},h=d.length===1?{pick:d[0],button:"ok"}:await Eo(t.quickPick,d,m.description||qt.l10n.t("Select a value"),qt.l10n.t("Select options for '{0}'",s),void 0,[Pn.QuickInputButtons.Back,hC],p);if(!h||h.button===Pn.QuickInputButtons.Back)return;let g={...c,[i]:{...c==null?void 0:c[i],[f]:h.pick.value}};return h.button===hC?g:a(g,l.slice(1),u)}(e,Object.keys(o).filter(a=>{var c;return((c=o[a])==null?void 0:c.type)==="string"}),r)}var gge=["png","md","json","txt","map"],vge=["node_modules",".git","bin","out","dist",".vscode-test"],wge=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],M8={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},$8={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},yge=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile","ghcr.io/devcontainers/templates/codespaces-linux"];function H8(t,e){let n=new Map;for(let r of e)if(r.platforms){if(yge.indexOf(r.id)>-1)continue;let o=0,i=0,s=r.platforms;if(s[0]==="Any")o+=5;else for(let a of s)if($8[a]){let c=$8[a];for(let l of c)t.fileTypes.get(l.toLowerCase())&&(o+=10),t.mostPopularFileType===l&&(o+=10)}else if(M8[a]){let c=M8[a],l=!1;for(let u of c)t.configFiles.get(u)&&(l=!0,i+=20);l||(i-=20)}n.set(r,o+(i<0?-4:i))}return n}async function B8(t,e){return Cge(t,e.rootFolderPath,vge,gge)}async function Cge(t,e,n,r){let o=new Map,i=new Map,s=500;function a(d,p,h,g){let v=[];(t.readDirWithTypes||t.readDir)(d).then(w=>{if(h.count>=s)return h.count+=w.length,h.maxReached=!0,g(v);let y=w.length;if(y===0)return g(v);let S=w;h.count+w.length>s&&(h.maxReached=!0,y=s-h.count,S=w.slice(0,y)),h.count+=w.length;for(let P of S){let D=Array.isArray(P)?P[0]:P;(Array.isArray(P)?Promise.resolve((P[1]&1)!==0):t.isFile(t.path.join(d,D))).then(O=>{O?(v.push(D),--y===0&&g(v)):p.indexOf(D)===-1?a(t.path.join(d,D),p,h,L=>{if(v=v.concat(L),--y===0)return g(v)}):--y===0&&g(v)},()=>{if(--y===0)return g(v)})}},()=>g(v))}let c=d=>{o.has(d)?o.set(d,o.get(d)+1):o.set(d,1)},l=d=>{for(let p of wge)p.pattern.test(d)&&(i.has(p.tag)?i.set(p.tag,i.get(p.tag)+1):i.set(p.tag,1))},u=d=>{if(d.lastIndexOf(".")>=0){let p=d.split(".").pop();p&&!r.includes(p)&&c(p.toLowerCase())}l(d)},f=d=>[...d.entries()].reduce((p,h)=>h[1]>p[1]?h:p,["",0])[0],m={count:0,maxReached:!1};return new Promise((d,p)=>{a(e,n,m,async h=>{h.forEach(u),d({configFiles:i,fileTypes:o,fileCount:m.count,mostPopularFileType:f(o)})})})}var Di=Y(require("vscode")),P0=require("vscode");var gC={"ghcr.io/devcontainers/templates/anaconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/kubernetes-helm":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/alpine":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-outside-of-docker-compose":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/jekyll":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/docker-outside-of-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-outside-of-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/docker-in-docker":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/go":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet-fsharp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/debian":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/rust-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/universal":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/conda","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/dotnet","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/git-lfs","ghcr.io/devcontainers/features/github-cli","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/hugo","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/kubectl-helm-minikube","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/oryx","ghcr.io/devcontainers/features/php","ghcr.io/devcontainers/features/python","ghcr.io/devcontainers/features/ruby","ghcr.io/devcontainers/features/sshd"],"ghcr.io/devcontainers/templates/python":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/markdown":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/rust":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/rust"],"ghcr.io/devcontainers/templates/java-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/java":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/java","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/anaconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/php":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/dotnet":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/powershell":["ghcr.io/devcontainers/features/common-utils"],"ghcr.io/devcontainers/templates/kubernetes-helm-minikube":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/docker-in-docker","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/kubectl-helm-minikube"],"ghcr.io/devcontainers/templates/postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby-rails-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/cpp-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/cpp":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/dotnet-mssql":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/typescript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/ubuntu":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git"],"ghcr.io/devcontainers/templates/php-mariadb":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/miniconda":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/python"],"ghcr.io/devcontainers/templates/ruby":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node","ghcr.io/devcontainers/features/ruby"],"ghcr.io/devcontainers/templates/go-postgres":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/go","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"],"ghcr.io/devcontainers/templates/javascript-node-mongo":["ghcr.io/devcontainers/features/common-utils","ghcr.io/devcontainers/features/git","ghcr.io/devcontainers/features/node"]};async function j8(t,e,n,r,o){var u;let i=await CO(t,e,n);if(i.type==="cancelled")return;if(i.type==="failure"){let f=P0.l10n.t("OK");return await Di.window.showInformationMessage(Di.l10n.t("Something went wrong. Please pick a Dev Container configuration yourself."),{modal:!0,detail:i.message},f)===f||void 0}if(!i.template){let f=P0.l10n.t("OK");return await Di.window.showInformationMessage(Di.l10n.t("GitHub Copilot did not have enough contextual information. Please pick a Dev Container configuration yourself."),{modal:!0},f)===f||void 0}let s=i.template,a=await EO(t,{id:s,name:s},void 0),c=new Set(gC[s]||[]);a.features=((u=i.features)==null?void 0:u.filter(f=>!c.has(f)).map(f=>({id:f,copilotSuggested:!0,options:{}})))||[];let l=await yg(t,e,r,o,a);return l&&Jo(t.telemetry,"copilot",a,o),l}var V8="github.copilot.devcontainer.generateDevContainerConfig",W8=6e3;async function CO(t,e,n){var i,s;let r={index:{templates:((i=t.index)==null?void 0:i.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/templates").map(a=>a.templates).flat().filter(a=>!Cg.includes(a.id)).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[],features:((s=t.index)==null?void 0:s.collections.filter(a=>a.sourceInformation.repository==="https://github.com/devcontainers/features").map(a=>a.features).flat().filter(a=>!a.deprecated).map(({id:a,name:c,description:l})=>({id:a,name:c,description:l})))||[]},rootUri:Di.Uri.parse((await e.toCommonURI(n.rootFolderPath)).toString())},o=new Di.CancellationTokenSource;try{return await Promise.race([Di.commands.executeCommand(V8,r,o.token),Bt(W8).then(()=>(o.cancel(),{type:"failure",message:P0.l10n.t("Timeout after {0} seconds.",W8/1e3)}))])}catch(a){return{type:"failure",message:(a==null?void 0:a.message)||String(a)}}finally{o.dispose()}}async function Y8(){return(await Di.commands.getCommands()).includes(V8)}var SO=vC.default.join(__dirname,"..",".."),q8=Ft.env.appRoot,Ege=t=>Kf(t,q8);async function Sg(t,e){let{fileHost:n,output:r}=t;r.write("Entering createDevContainerConfig_v2");let o=await Z8();if(o){let i=De(o,n.platform),s=bt(n.path,i),a=await FS(n,s);if(a){let l=it.l10n.t("Continue");if(await Ft.window.showInformationMessage(it.l10n.t("The workspace could fail to open in a container: {0}",a),{modal:!0},l)!==l)return!1}let c=await DO(t,s,void 0,void 0,e);if(c){let l=await n.toCommonURI(c);l&&Ft.window.showTextDocument(Ft.Uri.parse(l.toString()))}return!!c}return!1}async function yg(t,e,n,r,o,i=(s,a)=>a){return Ft.window.withProgress({location:Ft.ProgressLocation.Notification,title:it.l10n.t("Adding Dev Container Configuration Files..."),cancellable:!1},async()=>xO(t,e,n,r,o,i))}async function G8(t){let{output:e}=t,n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await lo(),o=process.cwd();return{cliHost:await Uo(void 0,void 0,o,Ege,n,SO,r,t.telemetry.product,e,void 0,void 0),dockerPath:"",dockerComposePath:"",extensionPath:SO,appRoot:q8,output:e,package:await cr(SO)}}async function xO(t,e,n,r,o,i=(s,a)=>a){let{output:s}=t;s.write(`Preparing to apply Template '${o==null?void 0:o.id}'`);let a=vC.default.join(wC.tmpdir(),`tmp-output-dir-${Date.now()}`),c=vC.default.join(wC.tmpdir(),`tmp-dir-${Date.now()}`);t.quickPick.busy=!0,t.quickPick.enabled=!1;let l=await G8(t),u;try{u=await si(l,["templates","apply","--workspace-folder",a,"--template-id",o.id,"--template-args",o.options?JSON.stringify(o.options):"{}","--features",o.features?JSON.stringify(o.features):"[]","--tmp-dir",c,"--log-level",ro(aC()),"--omit-paths",o.omitPaths?JSON.stringify(o.omitPaths):"[]"])}catch{let d=it.l10n.t("Show Log");await Ft.window.showErrorMessage(it.l10n.t("Application of the template failed."),{modal:!0},...t.showLogCommandId?[d]:[])===d&&Ft.commands.executeCommand(t.showLogCommandId);return}let f=it.l10n.t("Skip"),m;for(let d of u.files){s.write(`Copying file '${d}'`,1);let p=e.path.join(n,d);if(await e.isFile(p)){let v=r==="userData"?iC(e.platform,p,wC.homedir()):d,C=await Ft.window.showInformationMessage(it.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},f,it.l10n.t("Overwrite"));if(!C)return;if(C===f)continue}await e.mkdirp(e.path.dirname(p));let h=await at(vC.default.join(a,d)),g=i(d,h);await e.writeFile(p,g),!m&&lw(e.path,d)&&(m=p)}return s.write("Cleaning up...",1),await al(a,{recursive:!0,force:!0}),await al(c,{recursive:!0,force:!0}),t.quickPick.busy=!1,t.quickPick.enabled=!0,m}async function DO(t,e,n,r,o){let{fileHost:i,telemetry:s}=t,a=await IO(t,n,!1);if(r){Jo(await s,"existsMissingImageInfo");let d=De(r,i.platform);if(!await Ft.window.showWarningMessage(it.l10n.t("Dev Container configuration '{0}' file is missing image information. You can add this manually or overwrite with a template.",i.path.relative(e.configFolderPath,d)),{modal:!0},it.l10n.t("Use Template"))){let h=await i.toCommonURI(d);h&&Ft.window.showTextDocument(Ft.Uri.parse(h.toString()));return}}let c,l,u="workspace";if(t.userDataFolderForConfigurations){c=await eO(i,e,t.userDataFolderForConfigurations);let d=c&&await Zf(i,c),p={label:it.l10n.t("Add configuration to user data folder"),description:d?it.l10n.t("Configuration already exists"):void 0,detail:it.l10n.t("This avoids having outgoing changes in your workspace folder")},h=await Zf(i,e.configFolderPath),g={label:it.l10n.t("Add configuration to workspace"),description:h?it.l10n.t("Configuration already exists"):void 0,detail:it.l10n.t("This allows you to share the configuration with others via source control")},v=await Eo(a.quickPick,[g,p],it.l10n.t("Where would you like to create your container configuration?"));if(!v)return;v===p&&(l=c||Q5(i,e,t.userDataFolderForConfigurations),u="userData")}else if(!r){let d=await T0(i,e);if(d){Jo(await s,"exists");let p=De(d.uri,i.platform);if(!await Ft.window.showWarningMessage(it.l10n.t("Dev Container configuration '{0}' file already exists.",i.path.relative(e.configFolderPath,p)),{modal:!0},it.l10n.t("Continue"))){let g=await i.toCommonURI(p);g&&Ft.window.showTextDocument(Ft.Uri.parse(g.toString()));return}}}let f=l||e.configFolderPath,m;if((o==null?void 0:o.picker)==="copilot"){let d=await j8(a,i,e,f,u);d===!0&&(d=await Eg(a,i,e,f,u,void 0)),m=d}else m=await Eg(a,i,e,f,u,void 0);if(m&&l&&!c){let d=await e8(i,e,t.userDataFolderForConfigurations,l);m=i.path.resolve(d,i.path.relative(l,m))}return a.quickPick.hide(),m}async function IO(t,e,n){let r=Ft.window.createQuickPick();r.ignoreFocusOut=!0,e&&(r.title=e);let o=await lf(t.output);return{existingFilesLearnMoreLink:X8,predefinedDefinitionsLearnMoreLink:J8,...t,quickPick:r,replaceExistingConfig:!0,existingConfig:void 0,telemetry:await t.telemetry,index:o,skipOptions:n}}async function z8(t,e,n,r,o,i,s){if(!t.index)return;let c=await b0(t,e,n,i);if(!c)return;if(c==="back")return s?s():void 0;let l=await yg(t,e,r,o,c);return l&&Jo(t.telemetry,"definition",c,o),l}var Cg=["ghcr.io/devcontainers/templates/docker-existing-docker-compose","ghcr.io/devcontainers/templates/docker-existing-dockerfile"];async function b0(t,e,n,r){let{index:o}=t,i=((o==null?void 0:o.collections.map(l=>l.templates).flat())||[]).filter(l=>!Cg.includes(l.id));if(!(i!=null&&i.length))return;let s=()=>b0(t,e,n,r),a=await Sge(t,e,n,i);if(!(a!=null&&a.length))return _O(t,[],i,r,s);let c=[{label:it.l10n.t("Show All Templates..."),detail:it.l10n.t("Show all available predefined container templates."),alwaysShow:!0,type:"showAll"}];return _O(t,c,a,r,s)}async function Sge(t,e,n,r){r=r.filter(a=>a.owner==="devcontainers");let o=t.stats||e&&n&&(t.stats=await B8(e,n));if(!(o!=null&&o.mostPopularFileType.length))return;let i=H8(o,r);return r.filter(a=>(i.get(a)||0)>0).sort(_ge.bind(null,i))}function _ge(t,e,n){let r=t.get(n)||0,o=t.get(e)||0;return r-o}async function _O(t,e,n,r,o){let{index:i,predefinedDefinitionsLearnMoreLink:s,telemetry:a}=t,c={iconPath:new Ft.ThemeIcon("info"),tooltip:it.l10n.t("Open Documentation")},l=t.quickPick.onDidTriggerItemButton(p=>{let h=p.item.template.documentationURL;Ft.env.openExternal(Ft.Uri.parse(h))}),u=(async()=>{let p=await r,h=n;p!=null&&p.template&&n.indexOf(p.template)===-1&&(h=[p.template,...n]);let g=it.l10n.t("Suggested by GitHub Copilot"),v=h.map(w=>{let y;if(w.owner){let P=(w==null?void 0:w.owner)==="devcontainers"?"$(verified)":"";y=`${((w==null?void 0:w.owner)==="microsoft"&&w.id.includes("microsoft/vscode-dev-containers")?it.l10n.t("community"):w==null?void 0:w.owner)||it.l10n.t("Unknown Publisher")} ${P}`}let S=w===(p==null?void 0:p.template);return{label:S?`$(sparkle) ${w.name}`:w.name,picked:n.indexOf(w)!==-1,detail:w==null?void 0:w.description,description:S?y?`${y} ${g}`:g:y,buttons:[c],template:w}}).sort((w,y)=>w===y?0:w.template===(p==null?void 0:p.template)?-1:y.template===(p==null?void 0:p.template)?1:w.label.localeCompare(y.label));return[...e,...s?[bO]:[],...v]})(),f=p=>{let h=p.trim();if(/^\S+(\/\S+){2,}$/.test(h))return{label:it.l10n.t("Use '{0}' as template...",h),detail:it.l10n.t("Apply this custom template instead of one of the listed templates."),templateId:h}},m=it.l10n.t("Select a container configuration template or enter a custom template id"),d=await Eo(t.quickPick,u,m,void 0,void 0,void 0,f);if(l.dispose(),!d){Jo(a,"canceled");return}if(d.type==="help"){Jo(a,"help"),Ft.env.openExternal(s);return}if(d.type==="showAll"){let p=((i==null?void 0:i.collections.map(h=>h.templates).flat())||[]).filter(h=>!Cg.includes(h.id));return _O(t,[],p,r,o)}if(d.template)return wm(t,d.template,r.then(p=>{var v,C;if(!p)return;let h=((i==null?void 0:i.collections.map(w=>w.features).flat())||[]).filter(w=>!w.deprecated),g=new Set([...p.features,...p.template&&((v=gC[p.template.id])==null?void 0:v.map(w=>h.find(y=>y.id===w)).filter(w=>!!w))||[]]);return(((C=gC[d.template.id])==null?void 0:C.map(w=>h.find(y=>y.id===w)).filter(w=>!!w))||[]).forEach(w=>g.delete(w)),{template:p.template,features:Array.from(g)}}),o);if(d.templateId)return wm(t,{id:d.templateId,name:d.templateId},r,o)}async function EO(t,e,n){if(!e.version){let r=await xge(t,e.id);r&&(e={...r,id:e.id})}return{id:e.id,options:{},features:[],omitPaths:[],metadata:{template:e,features:[],copilotSuggestion:n}}}async function xge(t,e){let{output:n}=t;n.write(`Attempting metadata fetch for Template '${e}' from remote manifest`,3);let r=await G8(t);try{return await si(r,["templates","metadata",e,"--log-level",ro(aC())])}catch{n.write(`Metadata for '${e}' not cached on manifest. Some features will be unavailable.`,1),n.write(`Ask the Template owner to republish '${e}' to populate the data`,1);return}}async function wm(t,e,n,r){let o=await EO(t,e,await n),i={...o.metadata.template};if(t.skipOptions)return o;if(!i.options){let u=await PO(t,o,[],n,r);return u?u==="back"?r():u:void 0}let s=i.options,a=[],c=[];for(let u in s){let f=s[u];f.name=u,f.type==="boolean"?a.push(f):f.type==="string"&&c.push(f)}let l=await Ige(t,c,o,async()=>"back",(u,f)=>K8(t,a,i.name,u,n,f));if(l==="back")return r();if(l)return l}async function Dge(t,e,n,r){var o;if((o=e.optionalPaths)!=null&&o.length){let i=e.optionalPaths.map(l=>({label:l,picked:!1})),s=it.l10n.t("Optional Files/Directories"),a=it.l10n.t("Include the following optional files/directories"),c=await Eo(t.quickPick,i,a,s,!0,!0);if(c==="back")return r();c&&(n.omitPaths=i.filter(l=>!c.includes(l)).map(l=>l.label))}return n}async function Ige(t,e,n,r,o){let i=e.map(s=>{let a=[];s.proposals&&s.proposals.length>0?a=s.proposals:s.enum&&s.enum.length>0?a=s.enum:s.default&&(a=[s.default]);let c=s.default,l=a.map(f=>({label:f,description:f===c?it.l10n.t("(default)"):void 0,value:f})),u=l.findIndex(f=>f.value===c);return u!==-1&&l.unshift(...l.splice(u,1)),{placeholder:s.description||s.name,name:s.name,default:s.default,enum:"enum"in s,items:l}});return async function s(a,c,l){if(!a.length)return o(c,l);let u=a[0],f=u.enum?void 0:p=>{if(!(!p||u.items.some(h=>h.value===p)))return{label:it.l10n.t("Use: {0}",p),value:p,description:it.l10n.t("(custom)")}},m=await Eo(t.quickPick,u.items,u.placeholder,void 0,void 0,!0,f);if(!m)return;if(m==="back")return l();let d={...c.options};return d[u.name]=m.value,c.options={...d},s(a.slice(1),c,()=>s(a,c,l))}(i,n,r)}async function K8(t,e,n,r,o,i){let s=r,a=e.map(u=>{let f=u.default==="true";return{label:u.description||u.name,picked:f,name:u.name,default:f}}),c=a.length?await Eo(t.quickPick,a,it.l10n.t("Select the options for the '{0}' dev container",n),void 0,!0,!0):[];if(!c)return r;if(c==="back")return i();for(let u of a){let f=c.indexOf(u)!==-1,m={...r.options};m[u.name]=f.toString(),r.options={...m}}let l=await PO(t,r,[],o,()=>e.length>0?K8(t,e,n,s,o,i):i());if(l)return l==="back"?i():l}async function PO(t,e,n,r,o){let{quickPick:i,telemetry:s,output:a,index:c,askForTrust:l}=t,u=c==null?void 0:c.collections.reduce((h,g)=>h.concat(g.features),[]).filter(h=>!h.deprecated);if(!(u!=null&&u.length))return e;let m=await wg({quickPick:i,askForTrust:l,telemetry:s,output:a},u,n,[],r,!0,!0);if(!m)return;if(m==="back")return o();let d=[],p=[];for(let h in m)if(m[h]){let g=u.find(v=>v.id===h);if(g){p.push(g);let v=g.majorVersion||"latest",C={id:`${h}:${v}`,options:m[h]};d.push(C)}}return e.features=d,e.metadata.features=p,await Dge(t,e.metadata.template,e,()=>PO(t,e,p,r,o))}function e9(t){return{provideCompletionItems(e,n,r){let o=D1(e.getText(),e.offsetAt(n)),i=e.getWordRangeAtPosition(n)||new me.Range(n,n);if(o.path[0]==="extensions"||o.path[0]==="vscode"&&o.path[1]==="extensions"){let s=He(e.getText());return s.configFilePath=e.uri,Pge(s,i)}if(o.path[0]==="features"){let s=He(e.getText());s.configFilePath=e.uri;try{return bge(t,s,o,i)}catch(a){console.error(a)}}return[]}}}function Pge(t,e){var r,o;let n=((t==null?void 0:t.extensions)||[]).concat(((o=(r=t==null?void 0:t.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||[]);if(Array.isArray(n)){let i=me.extensions.all.filter(s=>!(s.id.startsWith("vscode.")||s.id==="Microsoft.vscode-markdown"||n.indexOf(s.id)>-1));if(i.length)return i.map(s=>{let a=new me.CompletionItem(s.id),c=`"${s.id}"`;return a.kind=me.CompletionItemKind.Value,a.insertText=c,a.range=e,a.filterText=c,a})}}async function bge(t,e,n,r){var i;let o=e&&e.features||{};if(typeof o=="object"){if(e.configFilePath.scheme==="vscode-remote"&&t.fileHost.type==="local"){e={...e,configFilePath:e.configFilePath.with({scheme:Ke.scheme,authority:""})};let c=me.env.remoteName&&me.env.remoteName!=="test"?"linux":process.platform,l=((i=(me.workspace.workspaceFolders||[])[0])==null?void 0:i.uri)||Ce.file(process.cwd());t={...t,fileHost:await Ma(c,l)}}let s=await lf(t.output),a=(s==null?void 0:s.collections.map(c=>c.features).flat().filter(c=>!c.deprecated))||[];if(n.path.length===2)if(n.isAtPropertyKey){let c=a.filter(l=>!(l.id in o));if(c.length)return c.map(l=>{let u=new me.CompletionItem(l.id),f=`"${l.id}": `;return u.kind=me.CompletionItemKind.Property,u.insertText=f,u.range=r,u.filterText=f,u})}else{let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=O8(l),f=u&&(l.options||{})[u]||{type:"boolean",description:tn.l10n.t("Set to true to install.")},m=(f.type==="string"?("enum"in f&&f.enum||"proposals"in f&&f.proposals||[""]).map(d=>`"${d}"`):["true","false"]).map(d=>({label:d,text:d}));return m.push({label:"{}",text:new me.SnippetString(`{
	$1
}$0`)}),m.map(({label:d,text:p},h)=>{let g=new me.CompletionItem(d);return g.kind=me.CompletionItemKind.Value,g.insertText=p,g.range=r,g.sortText=`${h}_${d}`,g})}}else if(n.path.length===3){let c=n.path[1].toString(),l=a.find(u=>u.id===c||c.startsWith(`${u.id}:`));if(l){let u=l.options||{};if(n.isAtPropertyKey)return Object.keys(u).filter(f=>!(f in(o[c]||{}))).map(f=>{let m=new me.CompletionItem(f),d=`"${f}": `;return m.kind=me.CompletionItemKind.Property,m.insertText=d,m.range=r,m.filterText=d,m.detail=u[f].description,m});{let f=n.path[2],m=u[f];if(m)return(m.type==="string"?("enum"in m&&m.enum||"proposals"in m&&m.proposals||[""]).map(p=>`"${p}"`):["true","false"]).map((p,h)=>{let g=new me.CompletionItem(p),v=p;return g.kind=me.CompletionItemKind.Value,g.insertText=v,g.range=r,g.filterText=v,g.sortText=`${h}_${p}`,g})}}}}}async function t9(t){let e=await RO(t);if((e==null?void 0:e.scheme)===Ke.scheme){let n=De(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(n)}e&&await me.window.showTextDocument(me.Uri.parse(e.toString()))}async function RO(t){let e=await t.findDevContainerFiles();if(!e.length){let r=tn.l10n.t("Add Files...");await me.window.showInformationMessage(tn.l10n.t("No container configuration file found."),{modal:!0},r)===r&&await Sg(t)&&(e=await t.findDevContainerFiles())}let n=await tf(e);return n!=="cancelled"?n:void 0}async function n9(t,e){var r,o,i,s,a,c,l;let n=await RO(t);if(n){let u=ur(t.fileHost);n.scheme==="file"&&!await Er(n.fsPath)?await $i(fs,n,[],gc):(n.scheme==="file"||n.scheme==="vscode-remote")&&(u=new oC);let f=await u.readDocument(n);if(f){let m=!/\.?devcontainer\.json/.test(_g.default.posix.basename(n.path)),d=He(f),p=!m&&(((o=(r=d.customizations)==null?void 0:r.vscode)==null?void 0:o.extensions)||!d.extensions),h=(p?(s=(i=d.customizations)==null?void 0:i.vscode)==null?void 0:s.extensions:d.extensions)||[],g=t.openConfigurationCommandId?`[${tn.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:tn.l10n.t("Dev Container configuration");if((d.extensions||[]).concat(((c=(a=d.customizations)==null?void 0:a.vscode)==null?void 0:c.extensions)||[]).indexOf(e)===-1){h.push(e);let v,C=sC(f);p?(l=d.customizations)!=null&&l.vscode?v=Tn(f,["customizations","vscode","extensions"],h,{formattingOptions:C}):d.customizations?v=Tn(f,["customizations","vscode"],{extensions:h},{formattingOptions:C}):v=Tn(f,["customizations"],{vscode:{extensions:h}},{formattingOptions:C}):v=Tn(f,["extensions"],h,{formattingOptions:C}),await u.applyEdits(n,v,f),await me.window.showInformationMessage(tn.l10n.t("Extension has been added to the {0}.",g))}else await me.window.showInformationMessage(tn.l10n.t("Extension is already included in the {0}.",g))}}}async function r9(t,e){let n=await me.commands.executeCommand("remote.tunnel.label",e);if(n===void 0)return;let r=n.label,o=n.port,i=await RO(t);if(i){let s=ur(t.fileHost);i.scheme==="file"&&!await Er(i.fsPath)?await $i(fs,i,[],gc):(i.scheme==="file"||i.scheme==="vscode-remote")&&(s=new oC);let a=await s.readDocument(i);if(a){let l=He(a).portsAttributes??{},u=l[`${o}`]??{},f=t.openConfigurationCommandId?`[${tn.l10n.t("Dev Container configuration")}](command:${t.openConfigurationCommandId})`:tn.l10n.t("Dev Container configuration");if(l&&u&&u.label===r)await me.window.showInformationMessage(tn.l10n.t("Port attributes are already included in the {0}.",f));else{u.label=r,l[`${o}`]=u;let m=sC(a),d=Tn(a,["portsAttributes"],l,{formattingOptions:m});await s.applyEdits(i,d,a),await me.window.showInformationMessage(tn.l10n.t("Port attributes have been added to the {0}.",f))}}}}function o9(t,e){let n=me.languages.createDiagnosticCollection("devcontainer"),r=me.window.activeTextEditor;r&&TO(r.document,n,e.output),t.subscriptions.push(me.workspace.onDidChangeTextDocument(async o=>{TO(o.document,n,e.output)})),t.subscriptions.push(me.workspace.onDidOpenTextDocument(async o=>{TO(o,n,e.output)})),t.subscriptions.push(me.workspace.onDidCreateFiles(async o=>{await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(_g.default.posix.basename(i.path))).map(i=>me.workspace.openTextDocument(i)))})),t.subscriptions.push(me.workspace.onDidDeleteFiles(o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.toString())&&n.delete(s)}))})),t.subscriptions.push(me.workspace.onDidRenameFiles(async o=>{o.files.forEach(i=>n.forEach(s=>{s.toString().startsWith(i.oldUri.toString())&&n.delete(s)})),await Promise.all(o.files.filter(i=>/\.?devcontainer\.json/.test(_g.default.posix.basename(i.newUri.path))).map(i=>me.workspace.openTextDocument(i.newUri)))})),(async()=>{let o=await Ua().catch(i=>[]);await Promise.all(o.map(i=>me.workspace.openTextDocument(i)))})().catch(o=>{e.output.write(`Error opening dev container configurations: ${(o==null?void 0:o.stack)||(o==null?void 0:o.message)||String(o)}`)}),t.subscriptions.push(n)}function i9(t,e,n){let r=async(s,a,c)=>{let l=_g.default.basename(s.uri.fsPath);if(/\.?devcontainer\.json/.test(l)){let u=pf(s.getText());if(!u)return;if((BC(u)||{}).features){let m=s.getText(s.getWordRangeAtPosition(a,/"[^"]*"/)).replace(/"/g,""),d=Rge(m,e.output,await n());if(d)return{contents:[d],range:s.getWordRangeAtPosition(a,/"[^"]*"/)}}}},o=me.languages.registerHoverProvider({pattern:"**/devcontainer.json"},{provideHover:r}),i=me.languages.registerHoverProvider({pattern:"**/.devcontainer.json"},{provideHover:r});return t.subscriptions.push(o),t.subscriptions.push(i),[o,i]}function TO(t,e,n){let r=_g.default.basename(t.uri.fsPath);if(/\.?devcontainer\.json/.test(r)){let o=pf(t.getText());if(!o)return;let i=[...Nge(t,o,n),...kge(o,t)];e.set(t.uri,i)}}function Tge(t,e){let n=new RegExp("^[a-zA-Z0-9_-]*$");if(!t)return{type:void 0,tooltip:tn.l10n.t("Empty feature id")};let r={};if(!t.includes("/")&&!t.includes("\\")&&n.test(t)){let s=["fish","homebrew"].indexOf(t)>-1;return{...r,type:"local-cache",isLegacy:!0,tooltip:s?tn.l10n.t("Legacy feature not supported. Please check https://containers.dev/features for replacements."):void 0,code:s?{target:me.Uri.parse("https://containers.dev/features"),value:"legacy-feature"}:void 0,level:me.DiagnosticSeverity.Error}}if(t.startsWith("http://"))return{...r,type:void 0,tooltip:tn.l10n.t("Direct tarball references must be served over HTTPS."),level:me.DiagnosticSeverity.Error};if(t.startsWith("https://"))try{return me.Uri.parse(t,!0).scheme==="https"?{...r,type:"direct-tarball",level:void 0}:{...r,type:void 0,level:me.DiagnosticSeverity.Error,tooltip:tn.l10n.t("Failed to parse scheme of URI")}}catch{return{...r,type:void 0,level:me.DiagnosticSeverity.Error,tooltip:tn.l10n.t("Invalid URI")}}if(t.startsWith("/"))return{...r,type:void 0,tooltip:tn.l10n.t("Absolute file paths are not allowed.  Local file path must be indicated relative to the devcontainer.json."),level:me.DiagnosticSeverity.Error};if(t.startsWith("./")||t.startsWith("../"))return{...r,type:"file-path"};if(t.split("/").length===3&&t.length>=5&&!t.includes("."))return new RegExp("^[a-zA-Z0-9_/@-]*$").test(t)?{...r,type:"github-repo",isLegacy:!0,level:me.DiagnosticSeverity.Warning}:{...r,type:void 0,tooltip:tn.l10n.t("GitHub release feature id contains invalid characters"),level:me.DiagnosticSeverity.Error};let i=t.split("/");return t.includes(".")&&i.length>1&&i[1].length>=1?new RegExp("^[a-zA-Z0-9_/:.-]*$").test(t)?{...r,type:"oci"}:{...r,type:void 0,level:me.DiagnosticSeverity.Error,tooltip:tn.l10n.t("OCI Feature id contains invalid characters")}:{...r,type:void 0,level:me.DiagnosticSeverity.Error,tooltip:tn.l10n.t("Failed to parse feature identifier.")}}function Rge(t,e,n){var i;if(!n){e.write("No index found.",5);return}let o=(n==null?void 0:n.collections.map(s=>s.features).flat()).find(s=>t===s.id||t.startsWith(`${s.id}:`));if(o){let s=`${o.name}
`,a=o.description?`
${o.description}
`:"",c=o.documentationURL?`
${o.documentationURL}
`:"",l="";if(o.majorVersion){let u=t.split(":");if(u.length===2){let f=u[1];if(f&&f!=="latest")try{let m=(i=Q8.parse(f,{loose:!0}))==null?void 0:i.major,d=Number.parseInt(o.majorVersion),p=`
${tn.l10n.t("New major version '{0}' published.",d)}
`;if(m&&m<d)l=p;else{let h=Number.parseInt(f);h!==void 0&&h<d&&(l=p)}}catch{}}}return new me.MarkdownString(`${s}${a}${c}${l}`)}}function Nge(t,e,n){var i;let r=ts(e,["features"]),o=[];for(let s of(r==null?void 0:r.children)||[])if(s.type==="property"){let a=(i=s.children)==null?void 0:i[0].value,c=Tge(a,n);if(c.hint){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new me.Diagnostic(new me.Range(l,u),c.hint,me.DiagnosticSeverity.Hint);o.push(f)}if(c.level!==void 0&&c.tooltip){let l=t.positionAt(s.offset),u=t.positionAt(s.offset+s.length),f=new me.Diagnostic(new me.Range(l,u),c.tooltip,c.level);f.code=c.code||{target:me.Uri.parse("https://containers.dev/implementors/features/#referencing-a-feature"),value:"referencing-a-feature"},o.push(f)}}return o}function kge(t,e){return["extensions","settings","devPort"].filter(n=>ts(t,[n])&&ts(t,["vscode",n])).map(n=>{var s,a;let r=(((a=(s=ts(t,[n]))==null?void 0:s.parent)==null?void 0:a.children)||[])[0],o=e.positionAt(r.offset),i=e.positionAt(r.offset+r.length);return new me.Diagnostic(new me.Range(o,i),tn.l10n.t('Legacy "{0}" property when "{0}" property under "vscode" is also present.',n),me.DiagnosticSeverity.Warning)})}var xg=Y(require("vscode")),NO=require("vscode");async function s9(t,e){let n=await Lge(t);if(!n)return t.output.write("Failed to find configuration.  Cannot configure container features.",5),!1;let r=await Age(t,n,(e==null?void 0:e.preInstalledInBaseImageFeatureIds)||[]);if(!r)return!1;let o=await t.fileHost.toCommonURI(r);return o&&xg.window.showTextDocument(xg.Uri.parse(o.toString())),!!o}async function Lge(t){let e=await t.findDevContainerFiles();if(e.length){let n=await tf(e);if(!n||n==="cancelled")return;let r=n.scheme==="file"?Ma(process.platform,Qf(n)):t.fileHost,o=r.path.dirname(De(n,r.platform)),i=r.path.basename(o)===".devcontainer"?r.path.dirname(o):o,s=bt(r.path,i),a=await T0(r,s,n);if(a)return{fileHost:r,workspace:s,config:a}}else{let n=NO.l10n.t("Add Files...");await xg.window.showInformationMessage(NO.l10n.t("No container configuration file found."),{modal:!0},n)===n&&await Sg(t)}}async function Age(t,e,n){var d;let{fileHost:r,workspace:o,config:i}=e,s=xg.window.createQuickPick();s.ignoreFocusOut=!0;let a={workspace:o,quickPick:s,telemetry:await t.telemetry,output:t.output},l=(await lf(t.output)).collections.reduce((p,h)=>p.concat(h.features),[]).filter(p=>!p.deprecated),u=l.filter(p=>n.includes(p.id)),f=[];if(i.object.features&&Object.entries(i.object.features).length>0){let p=Object.keys(i.object.features);f=l.filter(h=>p.some(g=>g.split(":")[0]===h.id))}let m=await wg(a,l,f,u,Promise.resolve(void 0),!0,!1);if(m)try{let p=i.text,h=i.text,g=sC(i.text);for(let v of l){let C=[],w=v.majorVersion?`${v.id}:${v.majorVersion}`:v.id,y=["features",w];if(!m[v.id]&&((d=i.object.features)!=null&&d[w]))C=C.concat(Tn(h,y,void 0,{formattingOptions:g}));else if(m[v.id]){let P=m[v.id];C=C.concat(Tn(h,y,P,{formattingOptions:g}))}C.length&&(h=Do(h,C))}return p!==h&&await ur(r,r).applyEdits(i.uri,[{content:h,offset:0,length:i.text.length}],i.text),s.dispose(),De(i.uri,r.platform)}catch(p){t.output.write(`Error in selecting dev container features: ${p}`,5),console.log("Error in selecting dev container features: ",p),s.dispose();return}}var Bn=Y(require("vscode")),c9=Y(require("crypto")),R0=Y(require("path")),kO=require("vscode");var a9={features:{}};function l9(t,e){let n=new Set,r=Promise.resolve(a9),o,a=e.codespaces?"codespaces.editDevContainerJSON":"remote-containers.editDevContainerJSON";t.subscriptions.push(Bn.commands.registerCommand(a,async u=>u()),Bn.languages.registerCodeLensProvider([{pattern:"**/devcontainer.json"},{pattern:"**/.devcontainer.json"}],{async provideCodeLenses(u,f){var p;let m=Object.keys(((p=He(u.getText()))==null?void 0:p.features)||{}).sort();m.some(h=>!n.has(h))&&(n=new Set(m),r=c(u,m));let d=await r;if(!f.isCancellationRequested)return l(u,d)}}));async function c(u,f){o||(o=await Uge(t,e));let m=u.uri;if(m.scheme!=="file"){let d=o.path.join(await o.tmpdir(),`dev-container-tmp-${c9.randomUUID()}`);await o.mkdirp(d);let p=o.path.join(d,".devcontainer.json");await o.writeFile(p,Buffer.from(JSON.stringify({features:f.reduce((v,C)=>(v[C]={},v),{})})));let h=R0.posix.basename(m.path)===".devcontainer.json",g=m.with({path:R0.posix.join(R0.posix.dirname(m.path),h?".devcontainer-lock.json":"devcontainer-lock.json")});try{let v=await Bn.workspace.fs.readFile(g),C=o.path.join(d,".devcontainer-lock.json");await o.writeFile(C,Buffer.from(v))}catch(v){if((v==null?void 0:v.code)!=="FileNotFound")throw v}m=Bn.Uri.file(p)}try{return Mge(t,o,o.cwd,m,e.output)}catch(d){return e.output.write(`Error fetching version info: ${(d==null?void 0:d.message)||d}`),a9}}function l(u,f){let m=pf(u.getText());if(!m)return;let d=ts(m,["features"]);if(!(d!=null&&d.children)||d.type!=="object")return;let p=[];for(let h of d.children)if(h.type==="property"&&h.children){let S=function(P,D){return async()=>{let A=g.value.substring(0,C.length)+P;n.add(A),D&&!f.features[A]&&(f.features[A]=D);let O=Bn.window.activeTextEditor;await(O==null?void 0:O.edit(L=>{L.replace(new Bn.Range(O.document.positionAt(w),O.document.positionAt(w+y)),P)}))}},g=h.children[0],v=f.features[g.value],C=Oge(g.value),w=g.offset+1+C.length,y=g.length-2-C.length;if(v!=null&&v.wanted&&v.current!==v.wanted){let P=new Bn.CodeLens(new Bn.Range(u.positionAt(g.offset),u.positionAt(g.offset+g.length)),{title:kO.l10n.t("Update to {0}",v.wanted),command:a,arguments:[S(`:${v.wanted}`,{current:v.wanted,wanted:v.wanted,latest:v.latest})]});p.push(P)}if(v!=null&&v.latest&&v.current!==v.latest){let P=new Bn.CodeLens(new Bn.Range(u.positionAt(g.offset),u.positionAt(g.offset+g.length)),{title:kO.l10n.t("Update to latest {0}",v.latest),command:a,arguments:[S(`:${v.latest}`)]});p.push(P)}}return p}}var Fge=/[:@][^/]*$/;function Oge(t){let e=Fge.exec(t);return e?t.substring(0,e.index):t}async function Uge(t,e){let n={executeInWSL:"forWSLPath",defaultDistro:void 0},r=await lo(),o=process.cwd();return Uo(void 0,void 0,o,s=>Kf(s,Bn.env.appRoot),n,t.extensionPath,r,(await e.telemetry).product,e.output,void 0,void 0)}async function Mge(t,e,n,r,o){let i={cliHost:e,dockerPath:"",dockerComposePath:"",extensionPath:t.extensionPath,appRoot:Bn.env.appRoot,output:o,package:await cr(t.extensionPath)};return await si(i,["outdated","--workspace-folder",n,...r?["--config",De(r,e.platform)]:[],"--output-format","json","--log-level",ro(aC()),"--log-format","json",...o.dimensions?["--terminal-columns",String(o.dimensions.columns),"--terminal-rows",String(o.dimensions.rows)]:[]])}var X8=vn.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),J8=vn.Uri.parse("https://aka.ms/vscode-dev-containers");function f9(t,e){let{output:n}=e;n.write("Internal initialization of dev container support package...");let r,o=()=>r||(r=lf(e.output));return{async openConfiguration(){return t9(e)},async createConfiguration(i){return Sg(e,i)},async addExtensionToConfiguration(i){return n9(e,i)},async addPortLabelToConfiguration(i){return r9(e,i)},async configureContainerFeatures(i){return s9(e,i)},createCompletionItemProvider(){return e9(e)},startCodeLensProvider(){l9(t,e)},startHoverProvider(){i9(t,e,o)},startDiagnosticsCollection(){o9(t,e)}}}async function Z8(){let t=vn.workspace.workspaceFile,e=vn.workspace.workspaceFolders,n;if(t){if(t.scheme==="untitled"){await u0();return}n=t}else if(e&&e.length)if(e.length>1){let r=await vn.window.showWorkspaceFolderPick({placeHolder:Gt.l10n.t("Select a folder to create a container configuration for")});r&&(n=r.uri)}else n=e[0].uri;return n}function Eo(t,e,n,r,o,i,s){if(t.value="",t.title=r||t.title||Gt.l10n.t("Add Dev Container Configuration Files"),t.placeholder=n,t.canSelectMany=!!o,Array.isArray(e))if(t.items=e,o)t.selectedItems=e.filter(m=>m.picked);else{let m=e.find(d=>d.picked);m&&(t.activeItems=[m])}t.buttons=i?Array.isArray(i)?i:[vn.QuickInputButtons.Back]:[];let a=[],c=t.items,l=c.filter(m=>m.isAlreadyInstalledViaBaseImage===!0),u={kind:vn.QuickPickItemKind.Separator,label:Gt.l10n.t("pre-installed features")};l.length&&(t.items=t.items.slice(0,c.length-l.length).concat(u).concat(t.items.slice(c.length-l.length)));let f=new Promise((m,d)=>{if(Array.isArray(e)||(t.busy=!0,e.then(p=>{if(t.busy=!1,t.items=p,o)t.selectedItems=p.filter(h=>h.picked);else{let h=p.find(g=>g.picked);h&&(t.activeItems=[h])}},p=>{t.busy=!1,d(p)})),a.push(t.onDidAccept(()=>{let p=o?t.selectedItems.slice():t.selectedItems[0];m(Array.isArray(i)?{pick:p,button:"ok"}:p),a.forEach(h=>h.dispose())})),a.push(t.onDidChangeSelection(p=>{if(!o)return;let h=l.filter(g=>!t.selectedItems.includes(g));h.length&&(t.selectedItems=t.selectedItems.concat(h))})),t.buttons.length&&a.push(t.onDidTriggerButton(p=>{let h=o?t.selectedItems.slice():t.activeItems[0];m(i===!0?"back":{pick:h,button:p}),a.forEach(g=>g.dispose())})),a.push(t.onDidHide(()=>{a.forEach(p=>p.dispose()),t.dispose(),m(void 0)})),s){let p;a.push(t.onDidChangeValue(h=>{let g=s(h);if(g||p){let v=t.items.filter(C=>C!==p);g&&v.push(g),p=g,t.items=v}}))}});return t.show(),f}var bO={label:Gt.l10n.t("Learn More"),description:Gt.l10n.t("Documentation on predefined container templates"),alwaysShow:!0,type:"help"};async function N0(t,e,n,r){return DO(t,e,n,r)}async function Eg(t,e,n,r,o,i){var O;let{telemetry:s,existingFilesLearnMoreLink:a,index:c}=t,u=(o!=="userData"&&await((O=t.findDevContainerFiles)==null?void 0:O.call(t,"userData"))||[]).reduce((L,E)=>L&&L.uri.path.length<E.uri.path.length?L:E,void 0),f=(u==null?void 0:u.uri.scheme)==="file"?[{iconPath:new vn.ThemeIcon("go-to-file"),tooltip:Gt.l10n.t("Open File")}]:[],m=u?{label:Gt.l10n.t("Copy existing configuration to workspace"),detail:Gt.l10n.t("Copy the configuration from your user data folder to the workspace folder"),type:"userDataConfig",buttons:f}:void 0,d=c==null?void 0:c.collections.find(L=>L.sourceInformation.ociReference==="ghcr.io/devcontainers/templates"),p=d==null?void 0:d.templates.find(L=>L.id==="ghcr.io/devcontainers/templates/docker-existing-docker-compose"),h=d==null?void 0:d.templates.find(L=>L.id==="ghcr.io/devcontainers/templates/docker-existing-dockerfile"),g=await e.readDir(n.rootFolderPath),v=p?g.filter(L=>/(docker.*)?compose.*\.ya?ml$/i.test(L)).map(L=>e.path.join(n.rootFolderPath,L)):[],C=h?g.filter(L=>/dockerfile/i.test(L)).map(L=>e.path.join(n.rootFolderPath,L)):[],w=C.map(L=>{let E=e.path.basename(L);return{label:Gt.l10n.t("From '{0}'",E),description:u9(e,L),dockerfile:E,dockerfilePath:L,detail:Gt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerfile"}}),y=v.map(L=>{let E=e.path.basename(L);return{label:Gt.l10n.t("From '{0}'",E),description:u9(e,L),dockerComposeFile:E,dockerComposePath:L,detail:Gt.l10n.t("Refer to the existing '{0}' in the container configuration",E),type:"dockerComposeFile"}}),S=m||C.length>0||v.length>0,P={label:Gt.l10n.t("From a predefined container configuration template..."),detail:Gt.l10n.t("Use a base configuration from the container template registry"),alwaysShow:!0,type:"predefined"},D=t.quickPick.onDidTriggerItemButton(async()=>{await vn.commands.executeCommand("vscode.open",u.uri),t.quickPick.hide()}),A=S?await Eo(t.quickPick,[P,...m?[m]:[],...w,...y,...a?[bO]:[]],Gt.l10n.t("How would you like to create your container configuration?")):P;if(D.dispose(),!A){Jo(s,"canceled");return}if(A.type==="help"){Jo(s,"help"),vn.env.openExternal(a);return}if(A.type==="userDataConfig")return $ge(e,n,u);if(i||(i=e&&n&&await Y8()?CO(t,e,n).then(L=>{if(L.type!=="success")return;let E=((c==null?void 0:c.collections.map(R=>R.templates).flat())||[]).filter(R=>!Cg.includes(R.id)),I=((c==null?void 0:c.collections.map(R=>R.features).flat())||[]).filter(R=>!R.deprecated);return{template:E.find(R=>R.id===L.template),features:(L.features||[]).map(R=>I.find(_=>_.id===R)).filter(R=>!!R)}}):Promise.resolve(void 0)),A.type==="predefined")return z8(t,e,n,r,o,i,()=>Eg(t,e,n,r,o,i));if(A.type==="dockerComposeFile")return Bge(t,e,r,o,A.dockerComposePath,p,i,()=>Eg(t,e,n,r,o,i));if(A.type==="dockerfile")return Hge(t,e,r,o,A.dockerfilePath,h,i,()=>Eg(t,e,n,r,o,i))}function u9(t,e){let n=vn.workspace.workspaceFolders||[];if(n.length<2)return;let r=n.find(o=>t.platform==="win32"?e.toLowerCase().startsWith(o.uri.fsPath.toLowerCase()):e.startsWith(o.uri.fsPath));return r&&r.name}async function $ge(t,e,n){let r=Gt.l10n.t("Skip"),o=n.fileHost,i=De(n.uri,o.platform),s;if(o.path.basename(i)===".devcontainer.json")s=o.path.dirname(i);else for(let d=i;o.path.basename(d);d=o.path.dirname(d))if(o.path.basename(d)===".devcontainer"){s=o.path.dirname(d);break}if(!s)throw new Error(`Unexpected user config path: ${i}`);let a=o.readDirWithTypes||o.readDir,c=await a(s);for(;c.length;){let d=c.shift();if(d===d0)continue;let p=typeof d=="string"?d:d[0],h=o.path.join(s,p);if(typeof d=="string"?await o.isFile(h):(d[1]&1)!==0){let v=o.path.sep===t.path.sep?p:p.replaceAll(o.path.sep,t.path.sep),C=t.path.join(e.configFolderPath,v);if(await t.isFile(C)){let y=await vn.window.showInformationMessage(Gt.l10n.t("File '{0}' already exists, overwrite?",v),{modal:!0},r,Gt.l10n.t("Overwrite"));if(!y)return;if(y===r)continue}await t.mkdirp(t.path.dirname(C));let w=await o.readFile(h);await t.writeFile(C,w)}else(typeof d=="string"?await o.isFolder(h):(d[1]&2)!==0)&&c.push(...(await a(h)).map(C=>typeof C=="string"?o.path.join(p,C):[o.path.join(p,C[0]),C[1]]))}let l=Gt.l10n.t("Delete");await vn.window.showInformationMessage(Gt.l10n.t("Delete the configuration from the user data folder?"),{modal:!0},Gt.l10n.t("Keep"),l)===l&&await t8(o,s);let f=o.path.relative(s,i),m=o.path.sep===t.path.sep?f:f.replaceAll(o.path.sep,t.path.sep);return t.path.join(e.configFolderPath,m)}async function Hge(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=await wm(t,i,s,async()=>{});if(!l){Jo(c,"canceled");return}if(l==="back")return a();let u=await yg(t,e,n,r,l,(f,m)=>{if(!lw(e.path,f))return m;let d=e.path.sep!==Ba.sep?f.replace(Ba.sep===Ba.win32.sep?/\\/g:/\//g,e.path.sep):f,p=e.path.resolve(n,d),h=e.path.relative(e.path.dirname(p),o),g=e.platform==="win32"?h.replace(/\\/g,"/"):h,v=m.toString(),C="dockerFile"in He(v)?["dockerFile"]:["build","dockerfile"],w=Tn(v,C,g,{formattingOptions:{}}),y=Do(v,w);return Buffer.from(y)});return u&&Jo(c,"dockerFile"),u}async function Bge(t,e,n,r,o,i,s,a){let{telemetry:c}=t,l=(await e.readFile(o)).toString(),u=aw(l);if(!u){await vn.window.showErrorMessage(Gt.l10n.t("Invalid docker-compose file '{0}'",o),{modal:!0});return}let f=u.version,m=Object.keys(u&&u.services||{}),d=m.length<2?m[0]||"":await Eo(t.quickPick,m.map(v=>({label:v,type:"service"})),Gt.l10n.t("Select a service"),void 0,void 0,!0);if(d==="back")return a();if(d===void 0){Jo(c,"canceled");return}let p=typeof d=="string"?d:d.label,h=await wm(t,i,s,async()=>{});if(!h)return;if(h==="back")return a();let g=await yg(t,e,n,r,h,(v,C)=>{if(lw(e.path,v)){let w=e.path.sep!==Ba.sep?v.replace(Ba.sep===Ba.win32.sep?/\\/g:/\//g,e.path.sep):v,y=e.path.resolve(n,w),S=e.path.relative(e.path.dirname(y),o),P=e.platform==="win32"?S.replace(/\\/g,"/"):S,D=C.toString(),A=He(D).dockerComposeFile,O=Array.isArray(A)?A.slice(1):[],L=[P,...O],E=Tn(D,["dockerComposeFile"],L,{formattingOptions:{}}),I=Do(D,E),R=Tn(I,["service"],p,{formattingOptions:{}}),_=Do(I,R);return Buffer.from(_)}if(/compose.*\.ya?ml$/.test(Ba.posix.basename(v))){let w=C.toString(),y=aw(w);y.version&&f&&y.version!==f&&(w=w.replace(new RegExp(`^(version:.*)(${zf(y.version)})`,"m"),`$1${f}`));let S=Object.keys(y&&y.services||{});return S.length&&(w=w.replace(new RegExp(`\\b${S[0]}\\b`),p)),Buffer.from(w)}return C});return g&&Jo(c,"dockerComposeFile"),g}function Jo(t,e,n,r){var i;let o={outcome:e};if(n){o.definitionName=gf(n.metadata.template.id);let s=n.metadata.copilotSuggestion,a=(i=s==null?void 0:s.template)==null?void 0:i.id;a&&(o.copilotSuggested=gf(a)),o.features=n.metadata.features.map(l=>gf(l.id)).join(",");let c=s==null?void 0:s.features.map(l=>gf(l.id)).join(",");c&&(o.copilotFeatures=c),a&&(o.copilotUsed="true")}r&&(o.targetLocation=r),t.sendTelemetryEvent("createConfiguration",o)}async function T0(t,e,n){if(n||(n=await Zf(t,e.configFolderPath)),!n)return;let r=await ur(t,t).readDocument(n);if(!r)return;let o=He(r);return{uri:n,text:r,object:o}}async function d9(t,e,n,r,o,i,s){let a=fo(n);if(ln(a)&&!await $e.workspace.requestWorkspaceTrust({message:mC}))return xr(a.hostPath)?(await $e.window.showInformationMessage(Fr.l10n.t("The WSL folder is currently not trusted."),{modal:!0,detail:Fr.l10n.t("Trust is required to build a dev container from it. The folder will now reopen in WSL.")}),await $e.commands.executeCommand("remote-containers.reopenInWSL")):(await $e.window.showInformationMessage(Fr.l10n.t("The local folder is currently not trusted."),{modal:!0,detail:Fr.l10n.t("Trust is required to build a dev container from it. The folder will now reopen locally.")}),await $e.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let c=uo(a);if(c&&!await pC(t,a.repositoryPath))return await $e.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{});let l=id(a);return{...await Wge(a,t,i,s,e,n,r,o),isTrusted:c||l||void 0}}async function Wge(t,e,n,r,o,i,s,a){let{log:c,logFilePath:l}=n,u="hostPath"in t&&xr(t.hostPath)&&!!$e.extensions.getExtension("ms-vscode-remote.remote-wsl");u&&$e.commands.executeCommand("setContext","canReopenInWSL",!0);let f=t.settings,m="localDocker"in t&&t.localDocker,d=Ul(t.parentAuthority)||Ol(f)&&!m,p=d&&(!!$e.extensions.getExtension("ms-vscode-remote.remote-ssh")||!!$e.extensions.getExtension("ms-vscode-remote.remote-ssh-nightly"));p&&$e.commands.executeCommand("setContext","canReopenInSSH",!0);let h=Cc(t.parentAuthority)&&!!$e.extensions.getExtension("ms-vscode.remote-server");h&&$e.commands.executeCommand("setContext","canReopenInTunnel",!0);let g=!d&&!Cc(t.parentAuthority);g&&$e.commands.executeCommand("setContext","canReopenLocally",!0);let v;return $e.window.withProgress({location:$e.ProgressLocation.Notification,title:pg,cancellable:!1},async C=>{if(t.parentAuthority&&!s.execServer)throw new Error(`Parent authority found without ExecServer: ${i}`);let w=Ha(),y=zl(e.extensionPath,pm,c),{cliHost:S,originalCwd:P}=await Vge(s.execServer,t,w,e.extensionPath,await lo(),y,o.product,c),D={...S.type==="local"?await y:void 0,...await sd(S,t.settings)},A={...S.env,...D},O=await mg({authority:i,extensionContext:e,sessionStart:n.sessionStart,progress:C,cliHost:S,env:A,cwd:S.cwd,wslSettings:w,isLocalContainer:Wp(t.parentAuthority,D),telemetry:o,onDidInput:n.onDidInput,output:c,logFilePath:l,allowSystemConfigChange:!0,postCreate:r}),L={async createConfiguration(E,I){return N0({fileHost:I,userDataFolderForConfigurations:ln(t)?await nl(e,S):void 0,telemetry:o,output:c,openConfigurationCommandId:mm,showLogCommandId:yt},bt(yC.posix,E))},async showError(E,...I){return await $e.window.showErrorMessage(E,{modal:!0},...I)}};v={common:O,parsedAuthority:t,dockerCLI:ks(),dockerComposePath:$a(),dockerComposeCLI:hs({exec:O.cliHost.exec,env:{...D,...fr(D)},output:O.output},ks(),$a()),dockerSocketPath:E0(),dockerEnv:D,workspaceMountConsistencyDefault:w0(),gpuAvailability:await y0(S,o.product,c),cacheMount:C0()?"volume":"none",configurationTracking:v0(e.workspaceState),removeOnStartup:await y8(e,i),buildNoCache:await E8(e,i),onRemoveOnShutdownChanged:a,userRepositoryConfigurationPaths:dC(),originalCwd:P,configProvider:L,development:e.extensionMode===$e.ExtensionMode.Development,watch:async(E,I)=>{let R=$e.workspace.createFileSystemWatcher(new $e.RelativePattern(E,"*"));return R.onDidChange(I),R.onDidCreate(I),R.onDidDelete(I),R},ensureNoDisallowedFeatures:(E,I,R)=>Up(E,e.globalState,I,R),useExperimentalLockfile:_0()},await dx(v);try{return await ZN(v)}catch(E){return jge(v,E)}}).then(C=>(a(async w=>{await C8(e,w&&C.dockerContainerId||!1),await fC(e,w==="rebuildNoCache"?i:!1)}),tl(o,LO(t),"success",n.sessionStart,v==null?void 0:v.common,C.config,C.configLocationType,C.properties),C),C=>{var L;let w=C instanceof Ee?C:new Ee({description:Fr.l10n.t("An error occurred setting up the container."),originalError:C});uo(t)&&(w.volumeName=t.volumeName,w.repositoryPath=t.repositoryPath,w.folderPath=t.folder),tl(o,LO(t),"failure",n.sessionStart,v==null?void 0:v.common,w.config,void 0,w.containerProperties,w);let y="onTheSide",S=(L=w.data)==null?void 0:L.fileWithError;!S&&(v!=null&&v.parsedAuthority)&&ln(v.parsedAuthority)&&v.parsedAuthority.configFile&&(S=De(v.parsedAuthority.configFile,v.common.cliHost.platform));let P=S&&(v==null?void 0:v.common.cliHost.path.basename(S))||"devcontainer.json",D=ln(t)?[{id:"openFileWithErrorLocally",title:Fr.l10n.t("Edit {0} Locally",P),isLastAction:!0,applicable:async(E,I)=>g&&!(I&&u),async execute(){let E=v==null?void 0:v.common.cliHost,I=S?E.type==="wsl"?await E.toCommonURI(S):Ce.file(S):void 0;await dg(e,t.hostPath,I,l,y);let R=$e.Uri.file(t.hostPath);await $e.commands.executeCommand("vscode.openFolder",R)}},{id:"openFileWithErrorinWSL",title:Fr.l10n.t("Edit {0} in WSL",P),isLastAction:!0,applicable:async()=>u,async execute(){let E=$e.Uri.parse((await xp(t.hostPath,c)).toString()),I=S?Nn(S.startsWith("/")?"linux":"win32",E,S):void 0;await dg(e,E.path,I,l,y),await $e.commands.executeCommand("vscode.openFolder",E)}},{id:"openFileWithErrorinSSH",title:Fr.l10n.t("Edit {0} in SSH",P),isLastAction:!0,applicable:async()=>p,async execute(){let E=t.settings,I=Ol(E)?Jv(E.host,t.hostPath):nu(t.parentAuthority,t.hostPath),R=$e.Uri.parse(I.toString()),_=S?Nn(S.startsWith("/")?"linux":"win32",R,S):void 0;await dg(e,R.path,_,l,y),await $e.commands.executeCommand("vscode.openFolder",R)}},{id:"openFileWithErrorinTunnel",title:Fr.l10n.t("Edit {0} in Tunnel",P),isLastAction:!0,applicable:async()=>h,async execute(){let E=$e.Uri.parse(nu(t.parentAuthority,t.hostPath).toString()),I=S?Nn(S.startsWith("/")?"linux":"win32",E,S):void 0;await dg(e,E.path,I,l,y),await $e.commands.executeCommand("vscode.openFolder",E)}}]:[],A=uo(t)?t.inspectVolume?[af]:[{id:"reopenInRecoveryContainer",title:Fr.l10n.t("Edit {0} in Recovery Container",P),isLastAction:!0,applicable:(E,I)=>!0,execute:async E=>{await dg(e,t.repositoryPath,S?Ce.file(S).with({scheme:"vscode-remote"}):void 0,l,y);let I=li(E.repositoryPath),R=await Oo(v),_=pk(I,E.volumeName,R);await $e.commands.executeCommand("remote-containers.inspectVolume",_,E.repositoryPath,E.folderPath)}},af,{id:"openRepository",title:Fr.l10n.t("Open Repository"),isLastAction:!1,applicable:(E,I)=>!I,async execute(){$e.env.openExternal($e.Uri.parse(t.repositoryPath))}}]:[],O=Ew(t)?[af]:[];return w.actions=[...vg,vm,L8,...D,...A,...O,gg,gm],Yge(w),cf(w,LO(t),o,!0,n.log)})}async function jge(t,e){let{common:n}=t,{output:r}=n,o=((e==null?void 0:e.originalError)&&(e.originalError.cmdOutput||e.originalError.message)||"").toLowerCase();if(n.localWaylandSocket&&o.includes(`path does not exist: ${n.localWaylandSocket}`.toLowerCase())){n.localWaylandSocket=void 0;let i=await ZN(t);return(async()=>{let s=cs("mountWaylandSocket");for(await Bt(3e3);$e.workspace.getConfiguration().get(s,!0);){try{await $e.workspace.getConfiguration().update(s,!1,$e.ConfigurationTarget.Global)}catch{}await Bt(3e3)}r.write("Wayland socket mount disabled in user settings.")})().catch(s=>{r.write(ot(s&&(s.stack||s.message)||String(s)))}),i}throw e}async function Vge(t,e,n,r,o,i,s,a){let{settings:c}=e,l=c&&"host"in c&&c.host||void 0;if(ln(e)){let u=bt(yC,e.hostPath),f=u.rootFolderPath,m=await Uo(t?{server:t,authority:e.parentAuthority}:void 0,l,u.rootFolderPath,Hn,n,r,o,s,a,Ls,{sshAskpassEnv:i,settings:fg(),localDocker:e.localDocker});return m.cwd!==u.rootFolderPath&&(u=bt(m.path,u.isWorkspaceFile?m.path.join(m.cwd,yC.basename(e.hostPath)):m.cwd)),a.write(`Setting up container for folder or workspace: ${u.workspaceOrFolderPath}\r
`),fx(a,e),e.localDocker&&a.write(`Local Docker: ${e.localDocker}\r
`),{cliHost:m,originalCwd:f}}else{let u=await Uo(t?{server:t,authority:e.parentAuthority}:void 0,l,void 0,Hn,n,r,o,s,a,Ls,{sshAskpassEnv:i,settings:fg()});return{cliHost:u,originalCwd:await u.homedir()}}}function LO(t){return ln(t)?"config":uo(t)?t.inspectVolume?"volume":"repository":"volume"}function Yge(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description=Fr.l10n.t("The drive of the workspace folder is not shared. Share it in the Docker settings first."):e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description=Fr.l10n.t("A port the container is setup to bind to is already in use. See the Dev Containers terminal for details."):e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description=Fr.l10n.t("A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running."):e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description=Fr.l10n.t("The base image references the obsolete Debian 8 update repository."),t.actions.push({id:"learnMore",title:Fr.l10n.t("Learn More"),isLastAction:!1,applicable:(n,r)=>r,async execute(){$e.env.openExternal($e.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var ja=Y(require("vscode")),Dg=require("vscode");var k0=Y($r());var p9=require("util");var Wa=Y(require("path")),h9=Y(require("crypto"));async function g9(t,e,n,r){var p,h;let{dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,common:a}=t,{cliHost:c,extensionPath:l,appRoot:u,postCreate:f,output:m}=a,d;try{let{commit:g}=a.product;if(!g)throw new Ee({description:k0.t("Cannot attach without commit id for the remote extension host.")});let v=r?n.configFilePath:void 0;if((v==null?void 0:v.scheme)==="file"&&c.type!=="local"){let b=c.path.join(await c.tmpdir(),`devcontainer-config-${h9.randomUUID()}.json`);await c.writeFile(b,await at(v.fsPath)),v=Ce.from({scheme:Ke.scheme,path:b})}let C={...a.env,...fr(a.env)},w={cliHost:c,dockerPath:o,dockerComposePath:s,env:C,extensionPath:l,appRoot:u,package:a.package,postCreate:f,output:m},y=a.postCreate.output.dimensions||m.dimensions,S=await si(w,["set-up","--container-id",e.Id,...c.type==="local"&&a.persistedFolder?["--user-data-folder",a.persistedFolder]:[],...t.dockerCLI!=="docker"?["--docker-path",t.dockerCLI]:[],...a.containerSessionDataFolder?["--container-session-data-folder",a.containerSessionDataFolder]:[],"--log-level",ro(a.getLogLevel()),"--log-format","json",...v?["--config",De(v,c.platform)]:[],"--default-user-env-probe",a.defaultUserEnvProbe,"--skip-post-create",...y?["--terminal-columns",String(y.columns),"--terminal-rows",String(y.rows)]:[],"--include-configuration","--include-merged-configuration"]);if((S==null?void 0:S.outcome)!=="success")throw new Ee({description:k0.t("devcontainer command failed: {0}",JSON.stringify(S))});S.configuration.configFilePath=S.mergedConfiguration.configFilePath=S.configuration.configFilePath&&Ce.revive(S.configuration.configFilePath).with({scheme:c.type==="local"?"file":Ke.scheme});let P=S.mergedConfiguration,D=P.remoteUser;d=await Fp(t,e.Id,P.workspaceFolder,D);let A={cliHost:c,dockerCLI:o,dockerComposeCLI:i,dockerComposePath:s,env:C,output:f.output},O=((h=(((p=P.customizations)==null?void 0:p.vscode)||[]).slice().reverse().find(b=>typeof b.devPort=="number"))==null?void 0:h.devPort)||Wl,{hostOrContainerPort:L,hostPortServer:E,connectionToken:I,remoteEnv:R,serverDownloaded:_}=await jl(a,d,n,P,O,Op(t,A,d,void 0,void 0,e.Id,!1,v,void 0)),x=ur(a.cliHost,d.shellServer);if(qge(a,d,x,n.configFilePath),zge(a,d,x,n.configFilePath),E){let b=async()=>{await(0,p9.promisify)(E.close.bind(E))()};a.shutdowns.push(b)}return{params:a,properties:d,config:n,resolvedAuthority:{host:vc,port:L,connectionToken:I,extensionHostEnv:R},tunnelInformation:a.isLocalContainer?Ap(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:_}}catch(g){let v=g instanceof Ee?g:new Ee({description:k0.t("An error occurred attaching to the container."),originalError:g});throw e&&(v.manageContainer=!1,v.params=t.common,v.containerId=e.Id,v.dockerParams=t),d&&(v.containerProperties=d),v.config=n,v}}function qge(t,e,n,r){e.installFolder&&v9(t,e,n,r).catch(console.error)}async function v9(t,e,n,r){try{await pc(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 15
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],wq(e),{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Gge(t,e,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return v9(t,e,n,r)}async function Gge(t,e,n,r){let o=await yq(t,e);await $N(r,async()=>{var s,a;let i=await L0(t.cliHost,n,r,e.remoteWorkspaceFolder);if(!Xge(((a=(s=i.config.customizations)==null?void 0:s.vscode)==null?void 0:a.extensions)||[],o)){let c=Tn(i.text,["extensions"],o,{formattingOptions:{}});await $i(n,r,c,i.text)}})}function zge(t,e,n,r){w9(t,e,n,r).catch(console.error)}async function w9(t,e,n,r){try{let o=k_(e),i=Wa.posix.dirname(o),s=Wa.posix.basename(o);await pc(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 15
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],i,{print:"off"});return}catch(o){(o==null?void 0:o.code)===1?await Kge(t.cliHost,e,n,r):(o==null?void 0:o.code)!==2&&await Bt(6e4)}return w9(t,e,n,r)}async function Kge(t,e,n,r){let{stdout:o}=await e.shellServer.exec(`cat ${k_(e)}`),i=He(o)||{};await $N(r,async()=>{var a,c;let s=await L0(t,n,r,e.remoteWorkspaceFolder);if(JSON.stringify(((c=(a=s.config.customizations)==null?void 0:a.vscode)==null?void 0:c.settings)||{})!==JSON.stringify(i)){let l=Tn(s.text,["settings"],i,{formattingOptions:{}});await $i(n,r,l,s.text)}})}function Xge(t,e){let n=new Set(t),r=new Set(e);return n.size===r.size&&t.every(o=>r.has(o))}async function y9(t,e){let n=F0(t,e),r=await m9(n);return r||(n=S9(t,e.Config.Image),r=await m9(n)),r}async function C9(t,e,n,r,o){let i=Ce.file(F0(n,r)),s=await L0(t,e,i,o);return s.exists||(i=Ce.file(S9(n,r.Config.Image)),s=await L0(t,e,i,o)),s}function A0(t){return Wa.join(t,"nameConfigs")}function F0(t,e){return Wa.join(A0(t),`${x9(Ec(e))}.json`)}async function E9(t){try{let e=A0(t);return(await sl(e)).filter(r=>r.endsWith(".json")).map(r=>({name:D9(r.substr(0,r.length-5)),uri:Ce.file(Wa.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function O0(t){return Wa.join(t,"imageConfigs")}function S9(t,e){return Wa.join(O0(t),`${x9(e)}.json`)}async function _9(t){try{let e=O0(t);return(await sl(e)).filter(r=>r.endsWith(".json")).map(r=>({image:D9(r.substr(0,r.length-5)),uri:Ce.file(Wa.join(e,r))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function x9(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function D9(t){return t.replace(/%([0-9a-f]{2})/g,(e,n)=>String.fromCharCode(parseInt(n,16)))}async function m9(t){if(!await Er(t))return;let e=await at(t),n=He(e.toString())||{},r=fw(n);return r.configFilePath=Ce.file(t),r}async function L0(t,e,n,r){let o=await e.readDocument(n),i=o||gc,s=He(i)||{},a=fw(s),c=x_({platform:t.platform,configFile:n,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:r},a);return c.configFilePath=n,{exists:!!o,text:i,config:c}}async function I9(t,e,n,r,o,i){return await of(t)?{...await Jge(t,e,n,r,o,i),isTrusted:!0}:(await ja.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Jge(t,e,n,r,o,i){let s,a;return ja.window.withProgress({location:ja.ProgressLocation.Notification,title:pg,cancellable:!1},async c=>{var l,u;try{let f=ad(n);if(f.parentAuthority&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let{settings:m}=f,d="containerName"in f?f.containerName:f.containerId;o.log.write(`Setting up container: ${d}\r
`),fx(o.log,f);let p=m&&"host"in m&&m.host||void 0,h=Ha(),g=zl(t.extensionPath,pm,o.log),v=await Uo(r.execServer?{server:r.execServer,authority:f.parentAuthority}:void 0,p,f.cwd,Hn,h,t.extensionPath,await lo(),e.product,o.log,Ls,{sshAskpassEnv:g,settings:fg()}),C=ks(),w={...v.type==="local"?await g:void 0,...await sd(v,m)},y=hs({exec:v.exec,env:{...w,...fr(w)},output:o.log},ks(),$a()),S={...v.env,...w},P=await ci({cliHost:v,dockerCLI:C,dockerComposeCLI:y,dockerComposePath:$a(),env:S,output:o.log},"containerName"in f?f.containerName:f.containerId);if(!P)throw new Ee({description:Dg.l10n.t("Cannot attach to the container with name/id {0}, it no longer exists.",d),data:{reload:!1,attach:!0}});let D=(u=(l=(ja.workspace.workspaceFolders||[void 0])[0])==null?void 0:l.uri)==null?void 0:u.path,A=await C9(v,fs,t.globalStoragePath,P,D);if(D&&A.config.workspaceFolder!==D){let I=Tn(A.text,["workspaceFolder"],D,{formattingOptions:{}});await $i(fs,A.config.configFilePath,I,A.text)}s={common:await mg({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:c,cliHost:v,env:S,cwd:f.cwd||await v.homedir(),wslSettings:h,isLocalContainer:Wp(f.parentAuthority,w),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:f,dockerCLI:C,dockerComposePath:$a(),dockerComposeCLI:y,dockerSocketPath:E0(),dockerEnv:w,workspaceMountConsistencyDefault:w0(),gpuAvailability:await y0(v,e.product,o.log),cacheMount:C0()?"volume":"none",configurationTracking:v0(t.workspaceState),userRepositoryConfigurationPaths:[],development:t.extensionMode===ja.ExtensionMode.Development,ensureNoDisallowedFeatures:(I,R,_)=>Up(I,t.globalState,R,_),useExperimentalLockfile:_0()},await dx(s);let O=$p(f.parentAuthority,m),L=Ec(P),E=Dg.l10n.t("Container {0} ({1}){2}",P.Config.Image,L,O);if(s.common.setWorkspaceName(E),P.State.Status!=="running")throw new Ee({description:Dg.l10n.t("Cannot attach to the container {0} ({1}){2}, it is not running.",P.Config.Image,L,O),params:s.common,containerId:P.Id,dockerParams:s,data:{reload:!1,start:!0}});return await g9(s,P,A.config,A.exists)}catch(f){let m=f instanceof Ee?f:new Ee({description:Dg.l10n.t("An error occurred attaching to the container."),originalError:f});throw m.actions=[A8,F8,...vg,vm,af,gg,gm],m}}).then(c=>(tl(e,"attach","success",o.sessionStart,s==null?void 0:s.common,a,void 0,c.properties),c),c=>{let l=c instanceof Ee?c:new Ee({description:Dg.l10n.t("An error occurred attaching to the container."),originalError:c});return tl(e,"attach","failure",o.sessionStart,s==null?void 0:s.common,a,void 0,l.containerProperties,l),cf(l,"attach",e,!0,o.log)})}var lt=Y(require("vscode")),We=require("vscode");var nn=Y(require("vscode")),Va=require("vscode"),b9=Y(require("path")),ym=Y(require("os")),CC=Y(require("fs")),T9=Y(require("child_process")),R9=Y(require("crypto")),N9=Y(XC());async function M0(t){eve()?await new AO().downloadAndInstallDocker(t):k9()?await new FO().downloadAndInstallDocker(t):await nn.env.openExternal(nn.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var U0=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let r=Va.l10n.t("Downloading Docker installer..."),o=Va.l10n.t("The Docker Desktop installation is started. Complete the installation and then start Docker Desktop."),i;try{i=await nn.window.withProgress({location:nn.ProgressLocation.Notification,title:r},async()=>this.downloadInstaller())}catch(a){let c=Va.l10n.t("Downloading the Docker Desktop installer failed. Do you want to manually download and install?"),l=Va.l10n.t("Download");throw this.handleError(c,l,this.downloadUrl),a}let s=this.getInstallCommand(i);nn.window.showInformationMessage(o);try{await this.install(i,s,e)}catch(a){let c=Va.l10n.t("Docker Desktop installation failed. ({0})",String(a==null?void 0:a.message)),l=Va.l10n.t("Install Instruction");throw this.handleError(c,l,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let n=!0;if(await new OO(e).isDockerInstalledRealTimeCheck()){let r=Va.l10n.t("Docker Desktop is already installed. Would you like to reinstall?"),o=Va.l10n.t("Reinstall");n=await nn.window.showInformationMessage(r,{modal:!0},o)!==void 0}return n}async downloadInstaller(){let e=`${Qge()}.${this.fileExtension}`;return await nve(this.downloadUrl,e),e}handleError(e,n,r){nn.window.showErrorMessage(e,{title:n}).then(o=>{o&&nn.env.openExternal(nn.Uri.parse(r))})}},AO=class extends U0{downloadUrl="https://aka.ms/download-docker-windows-vscode";fileExtension="exe";getInstallCommand(e){return`"${e}"`}async install(e,n,r){try{r.write(`Executing command ${n}`),await L9(n,r)}finally{try{await CC.promises.stat(e),await CC.promises.unlink(e)}catch{}}}},FO=class extends U0{downloadUrl=`https://aka.ms/download-docker-mac${process.arch==="arm64"?"-arm64":""}-vscode`;fileExtension="dmg";getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let n=Va.l10n.t("Docker Install"),r=this.getInstallCommand(e);await tve(r,n,{addDockerEnv:!1})}},Zge=0;function Qge(){return b9.join(ym.tmpdir(),`${nn.env.sessionId}-${Zge++}.tmp`)}function eve(){return ym.platform()==="win32"}function k9(){return ym.platform()==="darwin"}async function tve(t,e,n){var a,c;let r;n=n??{},n.addDockerEnv&&(r={});let o=new nn.Task({type:"shell"},n.workspaceFolder??nn.TaskScope.Workspace,e,"Docker",new nn.ShellExecution(t,{cwd:n.cwd||((c=(a=n.workspaceFolder)==null?void 0:a.uri)==null?void 0:c.fsPath)||ym.homedir(),env:r}),[]);n.alwaysRunNew&&(o.definition.idRandomizer=R9.randomUUID()),n.focus&&(o.presentationOptions={focus:!0});let i=await nn.tasks.executeTask(o);return new Promise((l,u)=>{let f=nn.tasks.onDidEndTaskProcess(m=>{m.execution===i&&(f.dispose(),m.exitCode&&n.rejectOnError&&u(m.exitCode),l())})})}var OO=class{constructor(e){this.output=e;this.isDockerInstalledLazy=new MO(async()=>{let n=await this.isDockerInstalledRealTimeCheck();return n&&this.isDockerInstalledLazy.cacheForever(),n},this.maxCacheTime)}maxCacheTime=3e4;isDockerInstalledLazy;async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{let e=await oi("docker");return await L9(`${e} -v`,this.output),!0}catch{return!1}}};async function nve(t,e){await new Promise((n,r)=>{let o=CC.createWriteStream(e);N9.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){r(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",r),s.pipe(o),s.on("end",n)}).on("error",r)})}var P9=10*1024;async function L9(t,e,n,r){let o=Buffer.alloc(n&&n.maxBuffer||P9),i=Buffer.alloc(n&&n.maxBuffer||P9);return await rve(t,e,n,r,o,r,i),{stdout:UO(o),stderr:UO(i)}}async function rve(t,e,n,r,o,i,s,a){return await new Promise((c,l)=>{let u,f=0,m=0;n=n||{},n.shell=!0,ove(n,e);let d=T9.spawn(t,n);d.on("error",p=>(u&&(u.dispose(),u=void 0),l(p))),d.on("close",(p,h)=>{if(u&&(u.dispose(),u=void 0),a&&a.isCancellationRequested)return l(new Error("User canceled"));if(p){let g=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${p}`;s&&(g+=`
Error: ${UO(s)}`);let v=new Error(g);return v.code=p,v.signal=h,v.stdErrHandled=i!==null,l(v)}return c()}),n!=null&&n.stdin&&(d.stdin.write(n.stdin),d.stdin.end()),(r||o)&&d.stdout.on("data",p=>{let h=p.toString();r&&r(h,d),o&&(f+=o.write(h,f))}),(i||s)&&d.stderr.on("data",p=>{let h=p.toString();i&&i(h,d),s&&(m+=s.write(h,m))}),a&&(u=a.onCancellationRequested(()=>{d.kill()}))})}function ove(t,e){var n;k9()&&(/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((n=t==null?void 0:t.env)==null?void 0:n.PATH)||process.env.PATH||"")||(t=t??{},t.env=t.env??{...process.env},e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`))}function UO(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var MO=class{constructor(e,n){this.valueFactory=e;this._valueLifetime=n}_isValueCreated=!1;_value;_valuePromise;get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let n=await this._valuePromise;if(e&&(this._value=n,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let r=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(r)},this._valueLifetime)}return n}};var A9=Y(require("os")),Ig=Y(require("crypto")),F9=Y(require("net")),O9=Y(require("path")),zt=Y(require("vscode")),rn=require("vscode");var U9=require("string_decoder");var M9="done",$0="devcontainers";async function B0(t,e,n,r){return zt.commands.executeCommand(yt),zt.window.withProgress({location:zt.ProgressLocation.Notification,title:"Installing Docker in WSL"},async o=>{let i={},s={};try{await ive(t,e,n,o,i,s)}catch(a){i.outcome="error",i.errorMessage=a==null?void 0:a.message,e.write(`Failed with error: ${(a==null?void 0:a.message)||a}`)}finally{r.sendTelemetryEvent("installDockerInWSL",i,s)}return i.outcome===M9})}async function $9(t){if(process.platform!=="win32")return!1;let e=B9();if(t.write(`Windows build number: ${e}`),e<EC)return t.write(`WSL version 2 is required to run Docker and that is only available since Windows build ${EC}.`),!1;let n=await Gr(process.cwd(),Hn,t);return!await H0(n,e,t)&&e<H9?(t.write(`WSL is not installed and can only be installed automatically since Windows build ${EC}.`),!1):!0}async function ive(t,e,n,r,o,i){let s=B9();if(e.write(`Windows build number: ${s}`),s<EC)return o.outcome="wsl2NotAvailableForWindowsBuild",zt.window.showInformationMessage(rn.l10n.t("WSL version 2 is required to run Docker and that is only available since Windows build {0}.",EC),{modal:!0});let a=await Gr(process.cwd(),Hn,e);if(r.report({message:rn.l10n.t("Checking if WSL is installed.")}),!await H0(a,s,e)){if(s<H9)return o.outcome="wslInstallerNotAvailableWithWindowsBuild",zt.window.showInformationMessage(rn.l10n.t("WSL is not installed. Please install WSL manually and retry."),{modal:!0});if(r.report({message:rn.l10n.t("Installing WSL.")}),await ave(a,t.extensionPath,e,n))return o.outcome="rebootRequiredAfterWSLInstall",zt.window.showInformationMessage(rn.l10n.t("Please reboot your machine to finalize the WSL setup."),{modal:!0});if(!await H0(a,s,e)&&(await new Promise(D=>setTimeout(D,3e3)),!await H0(a,s,e)))return o.outcome="wslNotFoundAfterInstall",zt.window.showInformationMessage(rn.l10n.t("WSL not found after install."),{modal:!0})}r.report({message:rn.l10n.t("Checking WSL version.")}),o.wslVersion=await cve(a,e),r.report({message:rn.l10n.t("Listing installed WSL distributions.")});let l=await $O(a,e);if(!l.length){if(r.report({message:rn.l10n.t("Installing WSL distribution.")}),await uve(a,e,n))return o.outcome="featureMissingDuringDistroInstall",zt.window.showInformationMessage(rn.l10n.t("A required feature is missing. Please reboot your machine to finalize the WSL setup if you haven't done so yet."),{modal:!0});if(l=await $O(a,e),!l.length&&(await new Promise(S=>setTimeout(S,3e3)),l=await $O(a,e),!l.length))return o.outcome="noDistroAfterInstall",zt.window.showInformationMessage(rn.l10n.t("No WSL distro found after install."),{modal:!0})}i.wslDistros=l.length;let u=l.find(y=>y.isDefault);if(!u&&l.length===1&&(u=l[0]),!u)return o.outcome="noDefaultDistro",zt.window.showInformationMessage(rn.l10n.t("No default WSL distro found."),{modal:!0});if(o.isDefaultDistro=String(u.isDefault),u.version!=="2")return o.outcome="defaultDistroNotVersion2",zt.window.showInformationMessage(rn.l10n.t("Default distro is not using WSL version 2."),{modal:!0});r.report({message:rn.l10n.t("Reading distribution information.")});let f=qf("wsl",["-u","root","-e"],void 0),m=await Wt(f,e,void 0,"linux","Host"),{stdout:d}=await m.exec("cat /etc/os-release || cat /usr/lib/os-release || true"),p=fve(d);if(o.distro=p.ID,p.ID!=="debian"&&p.ID!=="ubuntu")return o.outcome="distroNotSupported",zt.window.showInformationMessage(p.NAME?rn.l10n.t("Unsupported WSL distribution: {0}",p.NAME):rn.l10n.t("Unsupported WSL distribution."),{modal:!0});let h=qf("wsl",["-e"],void 0),g=await Wt(h,e,void 0,"linux","Host"),v=await Al(g);if(v==="root"){try{await m.exec(`id ${$0}`)}catch{await m.exec(`useradd --create-home --shell /usr/bin/bash --user-group --groups adm,dialout,cdrom,floppy,sudo,audio,dip,video,plugdev,netdev --password '${Ig.randomUUID()}' ${$0}`)}if(await m.exec(`cat >>/etc/wsl.conf <<'wslConf'
[user]
default=${$0}
wslConf
`),await te({exec:a.exec,cmd:"wsl",args:["--terminate",u.name],output:e,print:"continuous"}),m=await Wt(f,e,void 0,"linux","Host"),g=await Wt(h,e,void 0,"linux","Host"),await Al(g)==="root")return o.outcome="failedToSwitchUser",zt.window.showInformationMessage(rn.l10n.t("Default user in WSL is root, requiring a regular user."),{modal:!0})}let C=await HO(g,"docker")||await HO(m,"docker")||await HO(m,"dockerd");if(C){await m.exec(`usermod -aG docker ${v}`).catch(()=>{});let y=rn.l10n.t("Reinstall");if(await zt.window.showInformationMessage(rn.l10n.t("Docker is already installed in WSL."),{modal:!0,detail:rn.l10n.t("Path: {0}",C)},y)!==y){o.outcome="dockerAlreadyInstalled";return}}r.report({message:rn.l10n.t("Installing Docker.")}),await m.exec("export DEBIAN_FRONTEND=noninteractive"),await m.exec("apt update && apt -y install --no-install-recommends apt-transport-https ca-certificates curl gnupg2"),await m.exec(`curl -fsSL https://download.docker.com/linux/${p.ID}/gpg | tee /etc/apt/trusted.gpg.d/docker.asc`),await m.exec(`echo "deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/${p.ID} ${p.VERSION_CODENAME} stable" | tee /etc/apt/sources.list.d/docker.list`),await m.exec("apt update && apt -y install --no-install-recommends docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin"),await m.exec(`usermod -aG docker ${v}`),r.report({message:rn.l10n.t("Updating Settings.")});let w=zt.workspace.getConfiguration();await w.update(cs("executeInWSL"),!0,zt.ConfigurationTarget.Global),await w.update(cs("executeInWSLDistro"),u.isDefault?void 0:u.name,zt.ConfigurationTarget.Global),o.outcome=M9}var EC=18917,H9=20262;function B9(){let t=A9.release(),e=process.platform==="win32"&&t&&/(\d+)\.(\d+)\.(\d+)/g.exec(t);return e&&e.length===4?parseInt(e[3]):0}async function H0(t,e,n){if(t.platform!=="win32")return!1;if(e>=22e3)try{return await te({exec:t.exec,cmd:"wsl",args:["--status"],output:n,print:"continuous"}),!0}catch{return n.write("WSL feature installed: false (wsl --status failed)"),!1}else{let r=sve(t);if(r){let o=await t.isFile(r);return n.write(`WSL feature installed: ${o} (dll path: ${r})`),o}return n.write("WSL feature installed: false (no dll path)"),!1}}function sve(t){let e=t.env.SystemRoot;if(e){let n=t.env.PROCESSOR_ARCHITEW6432;return t.path.join(e,n?"Sysnative":"System32","lxss","LxssManager.dll")}}async function ave(t,e,n,r){let{wrappedOutput:o,wrappedInput:i}=W9(n,r);try{let s=t.path.join(await t.tmpdir(),`wsl-install-${Ig.randomUUID()}.js`);await t.writeFile(s,await at(O9.join(e,"dist/extension/runAsMain.js")));let a=`\\\\.\\pipe\\wsl-install-${Ig.randomUUID()}-sock`,c=t.path.join(await t.tmpdir(),`wsl-install-${Ig.randomUUID()}.bat`),l=dw(t),u=await BN({cliHost:t,env:{RUN_AS_CMD:await oi("wsl"),RUN_AS_ARGS:JSON.stringify(["--install"]),...n.dimensions?{RUN_AS_COLS:String(n.dimensions.columns),RUN_AS_ROWS:String(n.dimensions.rows)}:{},RUN_AS_SOCKET:a,ELECTRON_RUN_AS_NODE:"1"},appRoot:zt.env.appRoot},l.cmd)||{},f=`@echo off

${Object.keys(u).map(h=>`set ${h}=${u[h]}`).join(`
`)}
"${l.cmd}" ${l.args.map(h=>`"${h}"`).join(" ")} "${s}"
`;await t.writeFile(c,Buffer.from(f.replaceAll(/\r?\n/g,`\r
`)));let m="",d=new F9.Server(h=>{d.close();let g=new U9.StringDecoder;h.on("data",v=>{let C=g.write(v);o.raw(C),m+=C}),i.event(v=>h.write(v))});return d.listen(a),await Fi({ptyExec:t.ptyExec,cmd:"powershell.exe",args:["Start-Process","-FilePath",`'${c}'`,"-Verb","RunAs","-WindowStyle","Hidden","-Wait"],env:ao(),output:o,onDidInput:i.event}),m.replace(Us,"").replaceAll(/\s/g,"").indexOf("untilthesystemisrebooted")!==-1}finally{i.dispose()}}async function cve(t,e){try{let{stdout:n}=await te({exec:t.exec,cmd:"wsl",args:["--version"],output:e,print:"continuous"});return n.toString("utf16le").match(/^.*$/m)[0]}catch{return"unknown"}}async function $O(t,e){try{let{stdout:n}=await te({exec:t.exec,cmd:"wsl",args:["-l","-v"],output:e,print:"continuous"});return lve(n.toString("utf16le"))}catch{return[]}}function lve(t){let e=/\r\n/.test(t)?`\r
`:`
`,n=t.split(e),r=/^(?<default>\*|\s)\s*(?<name>[a-zA-Z0-9\.\-_]+)\s+(?<state>\w+)\s+(?<version>\d)/,o=[];for(let i=1;i<n.length;i++){let s=r.exec(n[i]);if(s!=null&&s.groups){let a=s.groups.name,c=s.groups.version,l=i===1;o.push({name:a,isDefault:l,version:c})}}return o}async function uve(t,e,n){await te({exec:t.exec,cmd:"wsl",args:["--set-default-version","2"],output:e,print:"continuous"});let{wrappedOutput:r,wrappedInput:o}=W9(e,n);try{let{cmdOutput:i}=await Fi({ptyExec:t.ptyExec,cmd:"wsl",args:["--install","-d","Ubuntu"],output:r,onDidInput:o.event});return i.replace(Us,"").replaceAll(/\s/g,"").indexOf("0x80370114")!==-1}finally{o.dispose()}}function W9(t,e){let n=e(a=>r.fire(a)),r=new Os(n),o="",i=Ig.randomUUID();return{wrappedOutput:on({...t,get dimensions(){return t.dimensions},event:a=>{if(t.event(a),a.type==="text"||a.type==="raw"){o+=a.text;let c=o.replace(Us,"");/Enter new UNIX username:\s*$/.test(c)?r.fire(`${$0}\r`):/(New|Retype new) password:\s*$/.test(c)?r.fire(`${i}\r`):/any key to continue\.*\s*$/.test(c)?r.fire("\r"):/Installation successful!/.test(c)&&r.fire("exit\r")}}}),wrappedInput:r}}function fve(t){return t.split(`
`).reduce((e,n)=>{let r=n.indexOf("=");return r!==-1&&(e[n.substring(0,r)]=n.substring(r+1)),e},{})}async function HO(t,e){try{let{stdout:n}=await t.exec(`command -v ${e}`);return n.trim()}catch{return}}var dve={reopenInContainer:We.l10n.t("Do you want to continue with reopening the folder in a container?"),openInContainer:We.l10n.t("Do you want to continue with opening a folder in a container?"),cloneInVolume:We.l10n.t("Do you want to continue with cloning a repository in a Docker volume?"),attachToContainer:We.l10n.t("Do you want to continue with attaching to a container?"),checkoutPRInVolume:We.l10n.t("Do you want to continue with checking out a pull-request in a Docker volume?"),createDevContainer:We.l10n.t("Do you want to continue with creating a Dev Container?"),inspectVolume:We.l10n.t("Do you want to continue with inspecting a Docker volume?"),trySample:We.l10n.t("Do you want to continue with trying a sample Dev Container?")},mve=`[${We.l10n.t("Starting Docker (show log)")}](command:${yt} "${We.l10n.t("Show details in terminal")}")`;async function to(t,e,n,r,o,i){var f;let s=await tt(t,e,i),a=(f=(lt.workspace.workspaceFolders||[])[0])==null?void 0:f.uri;a&&(a.scheme==="file"&&xr(a.fsPath)||Dp(a))&&(s=await tt(t,s.output,a));let c=_C(s,r),l=await Promise.race([c,new Promise(m=>setTimeout(()=>m("timeoutOrCanceled"),2e3))]);if(l==="timeoutOrCanceled"&&(l=await lt.window.withProgress({location:lt.ProgressLocation.Notification,title:mve,cancellable:!0},async(m,d)=>Promise.race([c,new Promise(p=>{let h=d.onCancellationRequested(()=>{h.dispose(),p("timeoutOrCanceled")})})])),l==="timeoutOrCanceled"))return!1;let u=await c;if(u==="permission")return await lt.window.showErrorMessage(We.l10n.t("Current user does not have permission to run 'docker'."),{modal:!0,detail:We.l10n.t("Try adding the user to the 'docker' group.")},We.l10n.t("Documentation"))&&lt.env.openExternal(lt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(u==="ssh")return await lt.window.showErrorMessage(We.l10n.t("Cannot connect to Docker daemon using 'ssh'."),{modal:!0,detail:We.l10n.t("Make sure public/private keys are set up for connecting without keyboard interaction.")},We.l10n.t("Show Log"))&&lt.commands.executeCommand(yt),!1;if(u==="daemon")return await lt.window.showErrorMessage(We.l10n.t("Docker returned an error."),{modal:!0,detail:We.l10n.t("Make sure the Docker daemon is running.")},We.l10n.t("Show Log"))&&lt.commands.executeCommand(yt),!1;if(u==="cwd")return await lt.window.showErrorMessage(We.l10n.t("Workspace folder does not exist.",s.cliHost.cwd),{modal:!0,detail:s.cliHost.cwd},We.l10n.t("Show Log"))&&lt.commands.executeCommand(yt),!1;if(u==="command"&&(s.cliHost.type==="local"||s.cliHost.type==="wsl")&&await $9(s.output)){let m=We.l10n.t("Install");if(await lt.window.showInformationMessage(We.l10n.t("Dev Containers require Docker to run."),{modal:!0,detail:We.l10n.t("Do you want to install Docker in WSL?")},m)===m){if(uf(r,"installInWSL","install"),await B0(t,s.output,n,r)){let h=We.l10n.t("Continue");return await lt.window.showInformationMessage(We.l10n.t("Docker has been installed. {0}",dve[o]),h)===h?(uf(r,"continueAfterInstall","continue"),!0):(uf(r,"continueAfterInstall","cancel"),!1)}return!1}return uf(r,"installInWSL","cancel"),!1}if(!u||u==="command"){if(s.cliHost.type==="wsl")await lt.window.showErrorMessage(We.l10n.t("Docker Desktop WSL 2 backend required."),{modal:!0},We.l10n.t("Read more on docker.com"))&&lt.env.openExternal(lt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let m=We.l10n.t("Install"),d=We.l10n.t("License"),p=We.l10n.t("Ignore"),h=[],g=[];u==="command"&&s.dockerCLI!=="docker"&&g.push(We.l10n.t("Command not found: '{0}'.",s.dockerCLI)),s.cliHost.type==="local"&&(h.push(m,d),g.push(We.l10n.t("Check the license for details."))),u===!1&&h.push(p);let v=g.join(" "),C=s.cliHost.type==="remote"?We.l10n.t("Docker version 17.12.0 or later required on remote host."):We.l10n.t("Docker version 17.12.0 or later required."),w=await lt.window.showErrorMessage(C,{modal:!0,detail:v},...h);if(w===m)return M0(s.output).then(console.error),uf(r,"dockerDesktop","install"),!1;if(w===d)return lt.env.openExternal(lt.Uri.parse("https://aka.ms/docker-subscription-service-agreement")),uf(r,"dockerDesktop","license"),!1;if(w===p)return uf(r,"dockerDesktop","ignore"),!0;uf(r,"dockerDesktop","cancel")}return!1}return u==="wsl1"?(await lt.window.showErrorMessage(We.l10n.t("WSL 2 distro required."),{modal:!0,detail:We.l10n.t("The WSL distro is running with WSL 1.")},We.l10n.t("Read more on docker.com"))&&lt.env.openExternal(lt.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}function uf(t,e,n){t.sendTelemetryEvent("dockerVersionUserChoice",{dialog:e,choice:n})}async function _C(t,e,n=!0){var a,c,l,u;let r;try{r=(await vk(t,Hn,n,"version","--format","{{json .}}")).stdout.toString()}catch(f){console.error(f);let m=f&&(f.stderr?f.stderr.toString():f.message)||"";SC(e,"error",void 0,m);let d=m.toLowerCase();return d.indexOf("permission denied")!==-1?d.indexOf("ssh")!==-1?"ssh":"permission":d.indexOf("enoent")!==-1||d.indexOf("not found")!==-1||d.indexOf("notfound")!==-1?await t.cliHost.isFolder(t.cliHost.cwd)?(t.output.write(`CLI host's PATH: ${t.cliHost.env.PATH}`),"command"):"cwd":t.cliHost.type==="wsl"&&((l=(c=(a=f==null?void 0:f.stdout)==null?void 0:a.toString())==null?void 0:c.toLowerCase())==null?void 0:l.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let o;try{let f=He(r);o=(u=f==null?void 0:f.Server)==null?void 0:u.ApiVersion}catch{}let i=o&&v_(o);if(!i&&r.toLowerCase().indexOf("error during connect")!==-1)return SC(e,"error",void 0,r),"daemon";if(!i)return SC(e,"unparsed",r),!0;let s=!w_(i,[1,35]);return!s&&await kG(t)?(SC(e,"podman",r),!0):(SC(e,s?"success":"failure",r),s)}function SC(t,e,n,r){let o={outcome:e};n&&(o.version=n),r&&(o.errorMessage=r),t.sendTelemetryEvent("dockerVersion",o)}async function j9(t){try{let e=Bi(t,await t.dockerComposeCLI());return await hw({...e,print:!0},"version","--short"),!0}catch(e){return(e==null?void 0:e.code)==="ENOENT"?await lt.window.showErrorMessage(We.l10n.t("Docker Compose required"),{modal:!0,detail:t.dockerComposePath!=="docker-compose"?We.l10n.t("Command not found: '{0}'.",t.dockerComposePath):void 0},We.l10n.t("Documentation"))&&lt.env.openExternal(lt.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")):await lt.window.showErrorMessage(We.l10n.t("Docker Compose returned an error."),{modal:!0},We.l10n.t("Show Log"))&&lt.commands.executeCommand(yt),!1}}var Pg=Y(require("vscode"));var W0=class{constructor(e){this.fileHost=e}async provideDocumentLinks(e,n){let r=[],o=pf(e.getText());if(!o)return r;let i=BC(o)||{};return i.configFilePath=e.uri,Fo(i)&&this._linksForDockerfile(r,i,o,e),"dockerComposeFile"in i&&await this._linksForDockerCompose(r,i,o,e),r}_tryAddDocumentLinkToBucket(e,n,r,o,i){let s=e.positionAt(n),a=e.positionAt(r);s.compareTo(a)!==0&&i.push(new Pg.DocumentLink(new Pg.Range(s,a),o))}_linksForDockerfile(e,n,r,o){let i=ts(r,["build","dockerfile"])||ts(r,["dockerFile"]);i&&i.type==="string"&&this._tryAddDocumentLinkToBucket(o,i.offset+1,i.offset+i.length-1,ed(this.fileHost,n),e)}async _linksForDockerCompose(e,n,r,o){let s=(await Gl(this.fileHost,n)).map(c=>Pg.Uri.file(c).path),a=ts(r,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(o,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,o.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(o,a.offset+1,a.offset+a.length-1,o.uri.with({path:s[0]}),e)}};var Q=Y(require("vscode")),Fe=require("vscode"),Rg=Y(require("path"));var bg=require("vscode"),V9=Y(require("path"));function j0(t){let e=eu(t);if(e)return`${V9.basename(e)}`;{let n=gw(t);if(n)return n;let r=yc(t);if(r)return mk(r);let o=Zl(t);return o?o.volumeName:t.Config.Image}}function V0(t,e=!1){let n=Ec(t);return e?`${n} (${BO(t)})`:n}function BO(t){let e="",n=t.State.Status,r=new Date(t.State.StartedAt),o=new Date(t.State.FinishedAt);if(r.getFullYear()>1&&o.getFullYear()>1){let i=new Date,s=new Date(r>o?t.State.StartedAt:t.State.FinishedAt);e=` ${VO(i,s)}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+e}function Y0(t){let e=t.Name;if(t.Labels&&Tg(t)){let r=G0(t);r&&r.gitUrlInfo.repository!=="unknown"&&(e=r.gitUrlInfo.fullRepositoryName)}return e}function q0(t){let e="";if(t.Labels&&Tg(t)){let r=G0(t);if(r&&r.gitUrlInfo.repository!=="unknown"){let o=WO(t),i=jO(t);i?e=`#${i}`:o&&(e=`${o}`)}}return e}function Tg(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true")return!0}return!1}function WO(t){let e=t.Labels;if(e&&Tg(t)&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}function jO(t){let e=t.Labels;if(e&&Tg(t)&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}function G0(t){let e=t.Labels;if(e){let n=e["vsch.local.repository.unique"];if(n&&n==="true"){let r=e["vsch.local.repository"];return li(r)}}}var Y9=1e3,q9=Y9*60,G9=q9*60,z9=G9*24,pve=z9*365;function VO(t,e){let n,r=t.getTime()-e.getTime();return(n=Math.round(r/pve))>0?n===1?"1 year":bg.l10n.t("{0} years",n):(n=Math.round(r/z9))>0?n===1?"1 day":bg.l10n.t("{0} days",n):(n=Math.round(r/G9))>0?n===1?"1 hour":bg.l10n.t("{0} hours",n):(n=Math.round(r/q9))>0?n===1?"1 minute":bg.l10n.t("{0} minutes",n):(n=Math.round(r/Y9),n===1?"1 second":bg.l10n.t("{0} seconds",n))}var xC=Y(require("vscode")),DC=require("vscode");async function K9(t){let e=(await Promise.all([yw,Cw,Hp,Mp,nx].map(async o=>{let{stdout:i}=await et(t,"ps","-a","-q","--filter","status=exited","--filter",`label=${o}`);return i.toString().split(/\r?\n/).filter(s=>!!s)}))).flat(),n;if(e.length){let i=(await ms(t,e)).map(a=>({label:j0(a),description:V0(a,!0),container:a}));i.sort((a,c)=>a.label.localeCompare(c.label));let s=await xC.window.showQuickPick(i,{canPickMany:!0,placeHolder:DC.l10n.t("Select stopped dev containers to delete")});if(!s)return;s.length&&(n=new Set(await Xl(t)),await et(t,"rm",...s.map(a=>a.container.Id)))}let r=await J9(t,n);(!e.length||r==="none")&&await xC.window.showInformationMessage(DC.l10n.t("There are no stopped dev containers or unused dev volumes to delete."),{modal:!0})}async function X9(t){await J9(t)==="none"&&await xC.window.showInformationMessage(DC.l10n.t("There are no unused dev volumes to delete."),{modal:!0})}async function J9(t,e){let n=[...new Set([...e?(await Xl(t)).filter(r=>!e.has(r)&&r!=="vscode"):[],...await Xl(t,[fk]),...await Xl(t,[cx])])];if(n.length){let o=(await td(t,n)).map(s=>({label:Y0(s),description:q0(s),volume:s}));o.sort((s,a)=>s.label.localeCompare(a.label));let i=await xC.window.showQuickPick(o,{canPickMany:!0,placeHolder:DC.l10n.t("Select unused dev volumes to delete")});if(!i)return"cancel";i.length&&await et(t,"volume","rm",...i.map(s=>s.volume.Name))}return n.length?"done":"none"}var Z9=Fe.l10n.t("Stop Container"),Q9=Fe.l10n.t("Reopen Folder locally"),e7=Fe.l10n.t("Close Workspace");var yr=class{static isGroupItem(e){return!!e&&e.type==="Group"}static isContainerItem(e){return!!e&&e.type==="Container"}static isFolderItem(e){return!!e&&e.type==="Folder"}};var z0=class extends yr{constructor(n,r){super();this.label=n;this.groupType=r}type="Group";async asTreeItem(n,r,o,i){return new Q.TreeItem(this.label,Q.TreeItemCollapsibleState.Expanded)}},Ng=class extends yr{constructor(n,r=[],o,i=!1){super();this.container=n;this.folders=r;this.parent=o;this.isDevContainer=i}type="Container";async asTreeItem(n,r,o,i){let s=new Q.TreeItem(this.getContainerLabel(),this.getCollapsibleState());s.description=V0(this.container);let a=this.getContextBase();s.iconPath=X0(r,wve),s.contextValue="exited"+a;let c=!1;return o&&this.container.Id===o.Id?(s.iconPath=X0(r,vve),s.contextValue="active"+a,c=!0):n&&await this.setTreeItemIconAndContext(n,a,s),s.tooltip=this.getHover(c,s.iconPath instanceof Q.ThemeIcon?s.iconPath:new Q.ThemeIcon("vm"),s.label),this.folders.length===1&&this.isDevContainer&&(s.contextValue+="Folder"),s}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?Q.TreeItemCollapsibleState.Expanded:Q.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(n,r,o){switch(this.container.State.Status){case"created":{o.iconPath=new Q.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"paused":{o.iconPath=new Q.ThemeIcon("vm-outline"),o.contextValue="running"+r;break}case"restarting":{o.iconPath=new Q.ThemeIcon("vm-outline"),o.contextValue="exited"+r;break}case"exited":{o.iconPath=new Q.ThemeIcon("vm"),o.contextValue="exited"+r;break}case"running":{o.iconPath=new Q.ThemeIcon("vm-running"),o.contextValue="running"+r;break}}}getTimeElapsed(n){return n?BO(n):""}getContainerLabel(){return j0(this.container)}getHover(n,r,o){let i=new Q.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${o} (${Ec(this.container)})  
`),this.repository){let a=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${a} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let s=lx(this.container);return s&&i.appendMarkdown(`$(file-symlink-directory) ${s}  
`),n?i.appendMarkdown(Fe.l10n.t("$(remote) Connected")):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}_repository;_alreadyCheckedRepository=!1;get repository(){if(!this._alreadyCheckedRepository){let n=yc(this.container);n&&(this._repository=li(n)),this._alreadyCheckedRepository=!0}return this._repository}inspect(n){return ai(n,this.container.Id)}},rl=class extends yr{constructor(n,r,o){super();this.container=n;this.folder=r;this.isDevContainer=o}type="Folder";async asTreeItem(n,r,o,i){let s=new Q.TreeItem(Rg.basename(this.folder.path),Q.TreeItemCollapsibleState.None);return s.description=this.folder.path,s.iconPath=X0(r,Cve),s.contextValue="attachedFolder",this.isDevContainer&&!yc(this.container)&&!Zl(this.container)&&(s.contextValue="devFolder"),o&&this.container.Id===o.Id&&i===this.folder.path&&(s.iconPath=X0(r,yve),s.tooltip=Fe.l10n.t("Active Folder {0}",String(s.label)),s.contextValue=`active${s.contextValue}`),s}};function hve(t,e,n,r){if(!(!Q.env.remoteName||Q.env.remoteName!=="attached-container"&&Q.env.remoteName!=="dev-container"))return t7(t,e,n,r)}function t7(t,e,n,r){Q.commands.executeCommand("setContext","remote-containers:showDetails",!0);let o=new KO(t,e,r,e.output),i=Q.window.createTreeView("detailsContainers",{treeDataProvider:o});return o.setTitle=s=>{i.title=s},t.subscriptions.push(n.onDidChangeActiveContainer(s=>o.refresh(s))),o}function gve(t,e){let n=[Z9];return t&&t.Id===e.Id&&Q.workspace.workspaceFolders&&Q.workspace.workspaceFolders.length>0&&(n.push(e7),Q.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&n.push(Q9)),n}var YO=class{constructor(e,n){this.dockerParams=e;this.containerId=n}writeEmitter=new Q.EventEmitter;onDidWrite=this.writeEmitter.event;destroyables=[];open(){let{cliHost:e,env:n,output:r}=this.dockerParams;e.exec({cmd:ks(),args:["logs","-f",this.containerId],env:n,output:r}).then(o=>{this.destroyables.push(o.stdout.on("data",i=>{this.write(i.toString())})),this.destroyables.push(o.stderr.on("data",i=>{this.write(i.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},K0=class{constructor(e,n,r,o,i,s){this.targetsTreeData=e;this.detailsTreeData=n;this.devVolumesTreeData=r;this.dockerParams=o;this.context=i;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(Q.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(Q.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(Q.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(Q.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(Q.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(Q.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(Q.commands.registerCommand("remote-containers.attachToContainerInCurrentWindow",this.commandAttachToContainerInCurrentWindow,this)),e.push(Q.commands.registerCommand("remote-containers.attachToContainerInNewWindow",this.commandAttachToContainerInNewWindow,this)),e.push(Q.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(Q.commands.registerCommand("remote-containers.openInformationAboutMountPerformance",this.openInformationAboutMountPerformance,this)),e.push(Q.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(Q.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(Q.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(Q.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(Q.commands.registerCommand("remote-containers.openFolderInContainerInCurrentWindow",n=>this.commandStartAndOpenFolder(n,{forceReuseWindow:!0}),this)),e.push(Q.commands.registerCommand("remote-containers.openFolderInContainerInNewWindow",n=>this.commandStartAndOpenFolder(n,{forceNewWindow:!0}),this)),e.push(Q.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!yr.isContainerItem(e))return;let n=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?Fe.l10n.t("Stop active container? This will disconnect your current window."):Fe.l10n.t("Stop {0}?",e.getContainerLabel()),r=await Q.window.showWarningMessage(n,{modal:!0},...gve(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(r){case Z9:{await pO(this.dockerParams,e.container),e.container=await ai(this.dockerParams,e.container.Id);break}case e7:{await Q.commands.executeCommand("workbench.action.closeFolder");break}case Q9:{await Q.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!yr.isContainerItem(e))return;let n=await ci(this.dockerParams,e.container.Id);if(!n)return;let r=Fe.l10n.t("Remove"),o=await Q.window.showWarningMessage(Fe.l10n.t("Remove this container?"),{modal:!0,detail:Fe.l10n.t("This action is not reversible and deletes the container permanently.")},r);await this.targetsTreeData.withProgress(e.parent,async()=>{o===r&&(await pO(this.dockerParams,e.container),await w8(this.dockerParams,n.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let n=lx(e);if(n||(n=a3(e)),n){let r=await G_(this.dockerParams,n);if((await Xl(this.dockerParams)).indexOf(n)>=0){let s;r!=null&&r.Labels&&r.Labels["vsch.local.repository.unique"]==="true"?s=Fe.l10n.t("The container is using a volume with a cloned repository."):s=Fe.l10n.t("This is the last container using '{0}'.",n);let a=Fe.l10n.t("Remove");await Q.window.showInformationMessage(s,{modal:!0,detail:Fe.l10n.t("Do you want to remove the volume and the data it contains?")},a)===a&&await hO(this.dockerParams,n)}}}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){yr.isContainerItem(e)&&await this.targetsTreeData.withProgress(e,async()=>{await x0(this.dockerParams,e.container),e.container=await ai(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){yr.isFolderItem(e)&&(await Q.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){yr.isContainerItem(e)&&(this.detailsTreeData||(this.detailsTreeData=t7(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e,n){let r,o;yr.isFolderItem(e)?(o=e,r=e.container):Ng.isContainerItem(e)&&(o=e.folders[0],r=e.container),r&&(o&&ad(o.folder.authority)?(await x0(this.dockerParams,r),await IC(this.dockerParams,r,this.context,!!(n!=null&&n.forceNewWindow),o.folder.path)):await Q.commands.executeCommand("remote-containers.openFolder",o,n))}async commandAttachToContainerInCurrentWindow(e){return this.attachToContainerInternal(e,!1)}async commandAttachToContainerInNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,n){let r;yr.isContainerItem(e)?r=e.container:this.detailsTreeData&&(r=this.detailsTreeData.container),r&&(await x0(this.dockerParams,r),await IC(this.dockerParams,r,this.context,n))}async commandInspectDockerResource(e){let n;(yr.isContainerItem(e)||ol.isImageItem(e)||ol.isVolume(e)||ol.isDevVolume(e))&&(n=await e.inspect(this.dockerParams)),n&&Q.window.showTextDocument(await Q.workspace.openTextDocument({language:"json",content:JSON.stringify(n,null,"	")}))}async openInformationAboutMountPerformance(){await Q.env.openExternal(Q.Uri.parse("https://aka.ms/vscode-remote/containers/open-repo"))}async commandInspectInBasicDevContainer(e){ol.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){ol.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){ol.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}static async commandNewContainer(){var r;let e=[...(r=Q.workspace.workspaceFolders)!=null&&r.length?[{label:Fe.l10n.t("Open Current Folder in Container"),command:"remote-containers.reopenInContainer"}]:[],{label:Fe.l10n.t("Open Folder in Container..."),command:"remote-containers.openFolder"},{label:Fe.l10n.t("Open Workspace in Container..."),command:"remote-containers.openWorkspace"},{label:Fe.l10n.t("New Dev Container..."),command:"remote-containers.createDevContainer"},{label:Fe.l10n.t("Clone Repository in Container Volume..."),command:"remote-containers.openRepositoryInVolume"},{label:Fe.l10n.t("Clone GitHub Pull Request in Container Volume..."),command:"remote-containers.openPullRequestInVolume"},{label:Fe.l10n.t("Try a Sample..."),command:"remote-containers.trySample"}],n=await Q.window.showQuickPick(e,{placeHolder:Fe.l10n.t("Select an action to create a dev container")});if(n)return Q.commands.executeCommand(n.command)}async commandShowContainerLog(e){if(!yr.isContainerItem(e))return;let n=new YO(this.dockerParams,e.container.Id);Q.window.createTerminal({name:e.container.Config.Image,pty:n}).show()}};function n7(t,e,n,r){Q.commands.executeCommand("setContext","remote-containers:showDetails",!1);let o=new qO(t,e,s,n,r),i=Q.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=a=>i.message=a,t.subscriptions.push(Q.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await o.getDockerParams(!0),o.refresh(void 0)))),t.subscriptions.push(Q.commands.registerCommand("remote-containers.newContainer",K0.commandNewContainer)),t.subscriptions.push(Q.commands.registerCommand("remote-containers.pruneVolumes",async()=>{let a=await o.getDockerParams(!0);a&&await X9(a)}));function s(a){let c=hve(t,a,o,n),l=new JO(t,n,r),u=Q.window.createTreeView("devVolumes",{treeDataProvider:l});t.subscriptions.push(u);let f=new K0(o,c,l,a,t,n);t.subscriptions.push(...f.registerCommands()),t.subscriptions.push(uO(t,n.product)(async()=>{o.refresh(void 0),l.refresh(void 0);let m=await tt(t,r);c&&c.updateDockerParameters(m),f.updateDockerParameters(m)}))}}var qO=class{constructor(e,n,r,o,i){this.context=e;this.resolverResults=n;this.onFirstReveal=r;this.telemetry=o;this.output=i}_onDidChangeTreeData=new Q.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_onDidChangeActiveContainer=new Q.EventEmitter;onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;dockerParams;refreshDockerParams=!1;needsSSHCredentials=!1;passiveSSHAskpassEnv;eventsProcess;setTreeMessage=()=>{};_currentContainer;currentFolder;devContainers=[];attachContainers=[];otherContainers=[];recentAttachEntries=new Map;recentAttachDevContainerEntries=new Map;recentDevComposeEntries=new Map;containerItems=new Map;action=Promise.resolve();set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){if(!this.dockerParams){this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=zl(this.context.extensionPath,async n=>(this.needsSSHCredentials=!0,pm(n,!1)),this.output));try{this.dockerParams=await tt(this.context,this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv,!1);let n=mO();await _C(this.dockerParams,this.telemetry,n)!==!0&&(this.dockerParams=void 0)}catch(n){if(!this.needsSSHCredentials)throw n}}return this.dockerParams}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;let r="exec_create: /root/.vscode-server";if(n.Action==="die"||n.Action==="destroy"||n.Action==="create")this._onDidChangeTreeData.fire();else if(!n.Action.startsWith("exec_create")&&n.Actor&&n.Actor.ID&&this.containerItems.has(n.Actor.ID)){let o=this.containerItems.get(n.Actor.ID);this.dockerParams&&o?(async()=>(o.container=await ai(this.dockerParams,o.container.Id),this._onDidChangeTreeData.fire(o)))():this._onDidChangeTreeData.fire(o);return}else if(n.Action.startsWith(r)){this._onDidChangeTreeData.fire();return}}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await K_(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}needsDockerStartOrInstallContext=void 0;async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await Q.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await Q.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}hasContainersContext=void 0;async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let n=Q.workspace.workspaceFolders&&Q.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await Q.commands.executeCommand("setContext",n,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let n=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&n.push(new z0(Fe.l10n.t("Dev Containers"),0)),this.otherContainers.length>0&&n.push(new z0(Fe.l10n.t("Other Containers"),2)),n}async getChildDevContainer(e,n){let r=await this.getWorkspaceFolderFromContainer(e),o=r?[new rl(e,r,!0)]:[],i=eu(e);i&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new rl(e,a,!1))):i&&this.recentAttachEntries.has(e.Id)?o.push(...this.recentAttachEntries.get(e.Id).map(a=>new rl(e,a,!1))):(i=yc(e))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new rl(e,a,!1))):(i=nk(Zl(e)))&&this.recentAttachDevContainerEntries.has(i)?o.push(...this.recentAttachDevContainerEntries.get(i).map(a=>new rl(e,a,!1))):i===void 0&&this.recentDevComposeEntries.has(e.Id)&&o.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new rl(e,a,!1)));let s=new Ng(e,o,n,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){let n;if(e.groupType===0){let r=this.devContainers.map(async o=>this.getChildDevContainer(o,e));r.push(...this.attachContainers.map(async o=>{let i=new Ng(o,this.recentAttachEntries.get(o.Id).map(s=>new rl(o,s,!1)),e);return this.setContainerItems(i),i})),n=await Promise.all(r)}else n=this.otherContainers.map(r=>{let o=new Ng(r,[],e);return this.setContainerItems(o),o});return n.sort((r,o)=>r.getContainerLabel().localeCompare(o.getContainerLabel()))}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let n=await Kl(this.dockerParams,!0);if(await this.setHasContainersContext(n.length>0),n.length===0)return[];let r=await ms(this.dockerParams,n);return this.getChildGroups(r)}else{if(yr.isGroupItem(e))return this.getChildContainers(e);if(yr.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return await this.action,await this.getDockerOrShowMessage(e)?(this.onFirstReveal&&(this.onFirstReveal(this.dockerParams),this.onFirstReveal=void 0),this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=Q.workspace.workspaceFolders,n;if(this.dockerParams){if(e&&e.length>0){let r=this.resolverResults.get(e[0].uri.authority);r&&r.dockerContainerId&&(n=await ci(this.dockerParams,r.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let r=[...this.resolverResults.values()][0].dockerContainerId;r&&(n=await ci(this.dockerParams,r))}}n!==this._currentContainer&&(this._currentContainer=n)}addContainerToMap(e){if(eu(e)){this.devContainers.push(e);return}else if(yc(e)){this.devContainers.push(e);return}else if(Zl(e)){this.devContainers.push(e);return}else if(gw(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(n=>{this.addContainerToMap(n)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e,n){let{cliHost:r,dockerCLI:o,dockerComposePath:i}=this.dockerParams,s=bt(r.path,e),a=n?Ce.from({scheme:Ke.scheme,path:n}):await WG(r,s,dC(),Hn),c={cliHost:r,dockerPath:o,dockerComposePath:i,appRoot:Q.env.appRoot,extensionPath:this.context.extensionPath,package:await cr(this.context.extensionPath),output:this.output},l=a&&await hg(c,s.rootFolderPath,a);if(l){let u=dr(this.dockerParams.env);return Q.Uri.parse(xw(r.authority,e,l.workspace.workspaceFolder,u),!0)}}async getWorkspaceFolderFromContainer(e){let n=eu(e);if(n){let r=s3(e);return this.getWorkspaceFolderFromHostWorkspace(n,r)}else{let r=yc(e),o=lx(e),i=c3(e),s=this.dockerParams;if(r){let c=dr(s.env);return Q.Uri.parse(Wi(s.cliHost.authority,r,o,i,!1,c,void 0))}let a=Zl(e);if(a){let c=dr(s.env);return Q.Uri.parse(Wi(s.cliHost.authority,void 0,a.volumeName,a.folder,!1,c,void 0))}}}async getWorkspaceFolderFromHostPath(e){let n=this.dockerParams.cliHost,r=await v3(n,e,this.output),o=w3(n,r,e),i=dr(this.dockerParams.env);return Q.Uri.parse(xw(n.authority,e,o,i),!0)}getWorkspaceFolderFromRepository(e,n,r){let o=this.dockerParams,i=dr(o.env);return Q.Uri.parse(Wi(o.cliHost.authority,e,n,r,!1,i,void 0),!0)}getWorkspaceFolderFromDevContainerInVolume(e,n){let r=this.dockerParams,o=dr(r.env);return Q.Uri.parse(Wi(r.cliHost.authority,void 0,e,n,!1,o,void 0),!0)}async findComposeTargetContainer(e,n){var r;return(r=n.find(o=>eu(o)===e))==null?void 0:r.Id}trySetEntryWithAttachAuthority(e,n,r){let o;if("containerName"in n){let i=r.find(s=>s.Name===n.containerName);i&&(o=i.Id)}else o=n.containerId;o&&(this.recentAttachEntries.has(o)?this.recentAttachEntries.get(o).push(e):this.recentAttachEntries.set(o,[e]))}async trySetEntryWithDevAuthority(e,n,r,o){let i=n.hostPath,s=o[i];if(s||(s=await this.getWorkspaceFolderFromHostPath(n.hostPath),o[i]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(n.hostPath)?this.recentAttachDevContainerEntries.get(n.hostPath).push(e):this.recentAttachDevContainerEntries.set(n.hostPath,[e]);let a=await this.findComposeTargetContainer(n.hostPath,r);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,n){this.getWorkspaceFolderFromRepository(n.repositoryPath,n.volumeName,n.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(n.repositoryPath)?this.recentAttachDevContainerEntries.get(n.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(n.repositoryPath,[e]))}trySetEntryWithDevContainerInVolumeAuthority(e,n){if(this.getWorkspaceFolderFromDevContainerInVolume(n.volumeName,n.folder).path!==e.path){let o=nk(n);this.recentAttachDevContainerEntries.has(o)?this.recentAttachDevContainerEntries.get(o).push(e):this.recentAttachDevContainerEntries.set(o,[e])}}trySetEntryWithVolumeAuthority(e,n){let r=n.volumeName;r&&(this.recentAttachEntries.has(r)?this.recentAttachEntries.get(r).push(e):this.recentAttachEntries.set(r,[e]))}async trySetEntry(e,n,r){if(!e||!e.folderUri&&!e.workspace.configPath)return;let o=e.folderUri??e.workspace.configPath,i=ad(o.authority);if(i)this.trySetEntryWithAttachAuthority(o,i,n);else{let s=fo(o.authority);s&&(ln(s)?await this.trySetEntryWithDevAuthority(o,s,n,r):uo(s)?this.trySetEntryWithRepoAuthority(o,s):id(s)?this.trySetEntryWithDevContainerInVolumeAuthority(o,s):this.trySetEntryWithVolumeAuthority(o,s))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let n=await Q.commands.executeCommand("_workbench.getRecentlyOpened");if(n&&n.workspaces){let r={};for(let o of n.workspaces)await this.trySetEntry(o,e,r)}}withProgress(e,n){return this.action=this.action.then(()=>n()),this.refresh(e)}};var ol=class{constructor(e){this.label=e}detail;context;command;type="Default";static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type==="Image"}static isVolume(e){return!!e&&e.type==="Volume"}static isDevVolume(e){return!!e&&e.type==="DevVolume"}},GO=class{constructor(e){this.detail=e}type="Image";context="image";label=Fe.l10n.t("Image");inspect(e){return NG(e,this.detail)}},zO=class{constructor(e,n,r){this.label=e;this.detail=n;this.volumeDetails=r}type="Volume";context="volume";async inspect(e){return G_(e,this.volumeDetails)}},KO=class{constructor(e,n,r,o){this.context=e;this.dockerParams=n;this.telemetry=r;this.output=o}_onDidChangeTreeData=new Q.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;_container;setTreeTitle=()=>{};updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let n=new Q.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?Q.TreeItemCollapsibleState.Expanded:Q.TreeItemCollapsibleState.None);return n.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(n.description=e.detail,n.tooltip+=` ${n.description}`),n.contextValue=e.context,n.command=e.command,n}async getAttributes(e,n,r){let o=[];n&&o.push({label:Fe.l10n.t("Workspace"),detail:n});let i=yc(e.container);i&&o.push({label:Fe.l10n.t("Repository"),detail:i});let s=Zl(e.container);return s&&(o.push({label:Fe.l10n.t("Volume"),detail:s.volumeName}),o.push({label:Fe.l10n.t("Folder"),detail:s.folder})),o.push({label:Fe.l10n.t("Name"),detail:e.container.Name}),o.push(new GO(e.container.Config.Image)),r&&o.push({label:Fe.l10n.t("Configuration"),detail:r,command:{title:Fe.l10n.t("Open Dev Container File"),command:"remote-containers.openDevContainerFile",arguments:[r]},context:"devContainer"}),o}async getMounts(e){let n=[];return e&&e.Mounts.forEach(r=>{if(r.Type==="volume"){let o=r.Name,i=new zO(Fe.l10n.t("Volume"),o,o),s={label:Fe.l10n.t("Destination"),detail:r.Destination};n.push({label:Fe.l10n.t("Volume mount"),detail:[i,s]})}else if(r.Type==="bind"){let o={label:Fe.l10n.t("Source"),detail:r.Source},i={label:Fe.l10n.t("Destination"),detail:r.Destination},s=this.dockerParams&&["win32","darwin"].includes(this.dockerParams.cliHost.platform)?[{label:Fe.l10n.t("I/O performance"),detail:Fe.l10n.t("reduced by bridging OSes"),context:"mountPerformanceInfo",command:{command:"remote-containers.openInformationAboutMountPerformance"}}]:[];n.push({label:Fe.l10n.t("Bind mount"),detail:[o,i,...s]})}}),n}async getChildrenFromRoot(e){let n=[],r=eu(e.container),o=(e.container.Config.Labels||{})[rd];n.push({label:Fe.l10n.t("Attributes"),detail:await this.getAttributes(e,r,o),type:"Title"});let i;this.dockerParams&&(i=await ai(this.dockerParams,e.container.Id));let s=await this.getMounts(i);return s.length>0&&n.push({label:Fe.l10n.t("Mounts"),detail:s,type:"Title"}),n}async testContainer(){let e=!0;try{(this.dockerParams?await ai(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch{e=!1}return e||(this._container=void 0,this.setTreeTitle(Fe.l10n.t("Details (Containers)"))),e}async getChildren(e){if(this._container===void 0)return[];let n=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),n=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&n.push(...e.detail),n}async refresh(e){this.dockerParams=await tt(this.context,this.output),await _C(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},XO=class extends ol{type="DevVolume";volumeDetails;createdAt;constructor(e){super(e.Name),this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),n=new Q.TreeItem(e,Q.TreeItemCollapsibleState.None);return n.iconPath=this.iconPath,n.description=this.getDescription(),this.isUniqueVolume()?n.contextValue="uniqueDevVolume":n.contextValue="devVolume",n}isUniqueVolume(){return Tg(this.volumeDetails)}getLabel(){return Y0(this.volumeDetails)}getDescription(){return q0(this.volumeDetails)}getBranchName(){return WO(this.volumeDetails)}getPullRequestId(){return jO(this.volumeDetails)}getRepository(){return G0(this.volumeDetails)}get iconPath(){return new Q.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let r=new Date,o=new Date(this.volumeDetails.CreatedAt);e=Fe.l10n.t("{0} ago",VO(r,o))}return this.createdAt=e,e}async inspect(e){return G_(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await Q.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await Q.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await Xl(e)).indexOf(this.volumeDetails.Name)>=0)){await Q.window.showInformationMessage(Fe.l10n.t("Volume '{0}' is in use and cannot be removed.",this.volumeDetails.Name),{modal:!0});return}let o=Fe.l10n.t("Remove");await Q.window.showInformationMessage(Fe.l10n.t("Are you sure you want to remove volume '{0}'?",this.volumeDetails.Name),{modal:!0},o)===o&&await hO(e,this.volumeDetails.Name)}},JO=class{constructor(e,n,r){this.context=e;this.telemetry=n;this.output=r}dockerParams;_onDidChangeTreeData=new Q.EventEmitter;onDidChangeTreeData=this._onDidChangeTreeData.event;eventsProcess;async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){if(!this.dockerParams){this.dockerParams=await tt(this.context,this.output,void 0,void 0);let e=mO();await _C(this.dockerParams,this.telemetry,e)!==!0&&(this.dockerParams=void 0)}return this.dockerParams}async setHasVolumesContext(e){await Q.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let n=await tt(this.context,this.output),r=await Oo(n),o=await td(n,r),i=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=o.filter(i);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let l=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-l.getTime()}),s.map(a=>new XO(a))}async resolveTreeItem(e,n){let r=await tt(this.context,this.output),o=await this.getAssociatedContainers(r,n),i=n.getLabel(),s=n.getRepository(),a=n.getBranchName(),c=n.getPullRequestId(),l=n.getTimeElapsed();return o.length>0?e.tooltip=this.renderMarkdown(i,s,a,c,l,o.join(", ")):e.tooltip=this.renderMarkdown(i,s,a,c,l,Fe.l10n.t("None")),e}async getAssociatedContainers(e,n){let r=[],o=await Kl(e,!0),i=await ms(e,o);for(let s of i)for(let a of s.Mounts)a.Type==="volume"&&a.Name===n.volumeDetails.Name&&r.push(Ec(s));return r}renderMarkdown(e,n,r,o,i,s){let a=new Q.MarkdownString(void 0,!0);if(n){let c=n.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",l=n.gitUrlInfo.repositoryUrl;l.startsWith("http")?(l=n.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${l}](${l})
`)):a.appendMarkdown(`${c} ${l})
`),a.appendMarkdown(`&nbsp;  
`),r&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${r}](${l}/tree/${r})
`):a.appendMarkdown(`$(git-compare) ${r}
`),a.appendMarkdown(`&nbsp;  
`)),o&&(n.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${o}](${l}/pull/${o})
`):a.appendMarkdown(`$(git-pull-request-create) #${o}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${i}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let n=JSON.parse(e.toString());if(!n.Action)return;(n.Action==="die"||n.Action==="destroy"||n.Action==="create"||n.Action==="prune")&&this._onDidChangeTreeData.fire()}catch{}}async tryEnsureDocker(){let e=await this.getDockerParams();if(e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await K_(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",n=>{this.handleDockerEvent(n)})}catch(n){n.code!=="ENOENT"&&console.log(n),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},vve="vm-active",wve="vm-default",yve="folder-active",Cve="folder";function X0(t,e){let n=`${e}.svg`;return{light:Q.Uri.file(t.asAbsolutePath(Rg.join("resources","light",n))),dark:Q.Uri.file(t.asAbsolutePath(Rg.join("resources","dark",n))),highContrast:Q.Uri.file(t.asAbsolutePath(Rg.join("resources","highContrast",n)))}}var c1=require("util");var er=Y(require("vscode")),Ya=require("vscode");async function r7(t,e,n,r={},o={}){let i=await N_({params:t,createdAt:void 0,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerGroup:void 0,containerEnv:void 0,remoteExec:e,remotePtyExec:n,remoteExecAsRoot:void 0,rootShellServer:void 0,remoteWaylandSocket:void 0}),{hostOrContainerPort:s,connectionToken:a,remoteEnv:c,serverDownloaded:l}=await jl(t,i,r,o);return{params:t,properties:i,config:void 0,resolvedAuthority:{host:vc,port:s,connectionToken:a,extensionHostEnv:c},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:l}}async function ZO(t,e,n){var r,o;try{if(!await of(t))return;let{cliHost:i,env:s,output:a}=e,c;if(!(n!=null&&n.name)){let p=(await te({exec:i.exec,cmd:"kubectl",args:["get","pods","-o","json"],env:s,output:a})).stdout.toString(),h=JSON.parse(p).items;if(!h.length){await er.window.showInformationMessage(Ya.l10n.t("No pods found."),{modal:!0},Ya.l10n.t("Show Log"))&&er.commands.executeCommand(yt);return}if(c=(r=await er.window.showQuickPick(h.map(g=>({label:g.metadata.name,description:g.metadata.namespace,pod:g})),{placeHolder:Ya.l10n.t("Select pod")}))==null?void 0:r.pod,!c)return}if(!c){let d=["get","pod",n.name,"-o","json"];n.namespace&&d.push("--namespace",n.namespace);let h=(await te({exec:i.exec,cmd:"kubectl",args:d,env:s,output:a})).stdout.toString();c=JSON.parse(h)}let l=c.spec.containers||[];if(!l.length){await er.window.showInformationMessage(Ya.l10n.t("No containers found."),{modal:!0},Ya.l10n.t("Show Log"))&&er.commands.executeCommand(yt);return}let u=l.length>1?(o=await er.window.showQuickPick(l.map(d=>({label:d.name,description:d.image,container:d})),{placeHolder:Ya.l10n.t("Select container")}))==null?void 0:o.container:l[0];if(!u)return;let f=(await te({exec:i.exec,cmd:"kubectl",args:["config","current-context"],env:s,output:a})).stdout.toString().trim(),m={remoteAuthority:xve(er.env.remoteAuthority,{context:f,podname:c.metadata.name,namespace:c.metadata.namespace,name:u.name,image:u.image})};t.extensionMode===er.ExtensionMode.Development&&(m.reuseWindow=!0),await er.commands.executeCommand("vscode.newWindow",m)}catch(i){e.output.write((i==null?void 0:i.stack)||(i==null?void 0:i.message)||String(i)),er.commands.executeCommand(yt),await er.window.showErrorMessage(Ya.l10n.t("Error while attaching to Kubernetes container."),{detail:i==null?void 0:i.message,modal:!0})}}async function o7(t,e,n,r,o,i){return await of(t)?{...await Eve(t,e,n,r,o,i),isTrusted:!0}:(await er.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Eve(t,e,n,r,o,i){let s;return er.window.withProgress({location:er.ProgressLocation.Notification,title:pg,cancellable:!1},async a=>{try{let c=Dve(n);if(!c)throw new Error(`Invalid authority: ${n}`);let{options:l,parentAuthority:u}=c;if(u&&!r.execServer)throw new Error(`Parent authority found without ExecServer: ${n}`);let f=process.cwd(),m=Ha(),d=await Uo(r.execServer?{server:r.execServer,authority:u}:void 0,void 0,f,Hn,m,t.extensionPath,await lo(),e.product,o.log,Ls);s=await mg({authority:n,extensionContext:t,sessionStart:o.sessionStart,progress:a,cliHost:d,env:d.env,cwd:f,wslSettings:m,isLocalContainer:Wp(u,{}),telemetry:e,onDidInput:o.onDidInput,output:o.log,logFilePath:o.logFilePath,allowSystemConfigChange:!1,postCreate:i}),s.setWorkspaceName(`${l.name} in ${l.podname} (${l.image})`);let p=Sve(d.exec,l),h=_ve(d.ptyExec,l);return await r7(s,p,h)}catch(c){let l=c instanceof Ee?c:new Ee({description:Ya.l10n.t("An error occurred attaching to the container."),originalError:c});throw l.actions=[...vg,vm,af,gg,gm],l}}).then(a=>(tl(e,"k8s-container","success",o.sessionStart,s,void 0,void 0,a.properties),a),a=>{let c=a instanceof Ee?a:new Ee({description:Ya.l10n.t("An error occurred attaching to the container."),originalError:a});return tl(e,"k8s-container","failure",o.sessionStart,s,void 0,void 0,c.containerProperties,c),cf(c,"k8s-container",e,!0,o.log)})}function Sve(t,e){return async function(n){return t(i7(e,n))}}function _ve(t,e){return async function(n){return t(i7(e,n))}}function i7(t,e){let n=["exec","-it",t.podname];if(t.context&&n.push("--context",t.context),t.namespace&&n.push("--namespace",t.namespace),n.push("--container",t.name,"--"),e.cwd&&n.push("/bin/sh","-c",'cd "$1" && shift && "$@"',"--",e.cwd),e.env){let r=Object.keys(e.env);if(r.length){n.push("env");for(let o of r)n.push(`${o}=${e.env[o]}`)}}return n.push(e.cmd),e.args&&n.push(...e.args),{cmd:"kubectl",args:n,output:e.output}}function xve(t,e){return t=Dw(t),`k8s-container+${Buffer.from(JSON.stringify(e),"utf8").toString("hex")}${t?`@${t}`:""}`}function Dve(t){let e=jp(t);if((e==null?void 0:e.name)!=="k8s-container")return;try{return{parentAuthority:e.parentAuthority,options:JSON.parse(Buffer.from(e.config,"hex").toString("utf8"))}}catch{}let n=e.config.split("+").reduce((r,o)=>{let i=o.indexOf("=");return i!==-1&&(r[o.substring(0,i)]=decodeURIComponent(o.substring(i+1))),r},{});return{parentAuthority:e.parentAuthority,options:n}}var It=Y(require("vscode")),Ot=require("vscode"),Em=Y(require("fs")),kg=Y(require("os")),Cm=Y(require("path")),J0=require("child_process"),Lg=require("util");function Z0(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function s7(t,e){let n=t.globalStorageUri,r=ko.joinPath(n,"cli-bin");await It.workspace.fs.createDirectory(r);let o="";try{o=(await It.workspace.fs.readFile(ko.joinPath(r,"vscode-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}o!==process.execPath&&(await It.workspace.fs.writeFile(ko.joinPath(r,"vscode-app-root"),Buffer.from(It.env.appRoot,"utf-8")),await It.workspace.fs.writeFile(ko.joinPath(r,"vscode-quality"),Buffer.from(e.quality??"","utf-8")),await It.workspace.fs.writeFile(ko.joinPath(r,"vscode-machine-id"),Buffer.from(It.env.machineId,"utf-8")),await It.workspace.fs.writeFile(ko.joinPath(r,"vscode-path"),Buffer.from(process.execPath,"utf-8")));let i="";try{i=(await It.workspace.fs.readFile(ko.joinPath(r,"remote-containers-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")throw u}if(i===t.extensionPath)return;let s=ko.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),a=Z0(e),c=`devcontainer${a}`,l=[{source:"devcontainer",destination:c},{source:"devcontainer.cmd",destination:`devcontainer${a}.cmd`}];for(let u of l)await It.workspace.fs.copy(ko.joinPath(s,u.source),ko.joinPath(r,u.destination),{overwrite:!0});process.platform!=="win32"&&await Em.promises.chmod(ko.joinPath(r,c).fsPath,493),await It.workspace.fs.writeFile(ko.joinPath(r,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function Ive(t,e){let n=Z0(e),r="";try{let o=await oi("powershell.exe");if(r=(await(0,Lg.promisify)(J0.exec)(`"${o}" -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`,{env:ao(process.env)})).stdout.toString().trim(),r.indexOf(t)>=0)return await It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI is already in your PATH"),{modal:!0,detail:Ot.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)}),!0;let s=Ot.l10n.t("Add"),a=Ot.l10n.t("Copy CLI Path");switch(await It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI needs to be added to your PATH"),{modal:!0},s,a)){case s:let l=(0,Lg.promisify)(J0.exec)(`"${o}"  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${r};${t}', 'User')`,{env:ao(process.env)}),u=It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI has been added to your PATH"),{modal:!0,detail:Ot.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});await Promise.all([l,u]);break;case a:await It.env.clipboard.writeText(t),await It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:Ot.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${n}`)});break}return!0}catch{return!1}}async function Pve(t,e){let r=(process.env.PATH??"").split(":"),o=[Cm.join(kg.homedir(),"bin"),Cm.join(kg.homedir(),".local/bin")],i="/usr/local/bin";kg.platform()==="darwin"&&o.push(i);let s=(0,Lg.promisify)(Em.stat);for(let a of o){if(r.findIndex(p=>p===a)<0)continue;try{await s(a)}catch{continue}let c=Z0(e),l=Cm.join(a,`devcontainer${c}`);try{let p=await s(l);return console.log(p),await It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI is already symlinked in {0}",a),{modal:!0,detail:Ot.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)}),!0}catch(p){if((p==null?void 0:p.code)!=="ENOENT")return!1}let u=Ot.l10n.t("Create"),f=Ot.l10n.t("Copy CLI Path"),m=await It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI needs to be in your PATH"),{detail:Ot.l10n.t("Create a symlink in {0}?",a),modal:!0},u,f),d=Cm.join(t,`devcontainer${c}`);switch(m){case u:if(a===i){if(!await bve(d,l))break}else await(0,Lg.promisify)(Em.symlink)(d,l);await It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI has been symlinked in {0}",a),{modal:!0,detail:Ot.l10n.t(`Try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break;case f:await It.env.clipboard.writeText(t),await It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:Ot.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${c}`)});break}return!0}return!1}async function bve(t,e){try{return await Em.promises.symlink(t,e),!0}catch(n){if(n.code!=="EACCES"&&n.code!=="ENOENT")throw n;let r=Ot.l10n.t("OK");if(await It.window.showInformationMessage(Ot.l10n.t("This will now prompt with 'osascript' for Administrator privileges to install the shell command."),{modal:!0},r)===r){let s=`"${await oi("osascript")}" -e "do shell script \\"mkdir -p ${Cm.dirname(e)} && ln -sf '${t}' '${e}'\\" with administrator privileges"`;return await(0,Lg.promisify)(J0.exec)(s),!0}return!1}}async function a7(t,e){let n=t.globalStorageUri,r=ko.joinPath(n,"cli-bin").fsPath;switch(kg.platform()){case"win32":if(await Ive(r,e))return;break;case"darwin":case"linux":if(await Pve(r,e))return;break}let o=Ot.l10n.t("Copy CLI Path");if(await It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI needs to be included your PATH"),{modal:!0},o)===o){await It.env.clipboard.writeText(r);let s=Z0(e);await It.window.showInformationMessage(Ot.l10n.t("The devcontainer CLI path has been copied to the clipboard"),{modal:!0,detail:Ot.l10n.t(`After adding to your PATH, try running '{0} --help'
Note: you may need to restart your shell for PATH changes to take effect`,`devcontainer${s}`)})}}var So=Y(require("vscode")),Or=require("vscode"),QO=Y(require("path"));var Tve=Or.l10n.t("Select Dev Container Configuration"),Rve=Or.l10n.t('[Creating Dev Container (show log)](command:remote-containers.revealLogTerminal "Show details in terminal")'),c7="alpine:3.16.3";async function l7(t,e,n){let r=await Nve(t,e,n);if(!r)return;let{volumeAndFolderName:o}=r,i=dr(e.env),s=So.Uri.parse(Wi(e.cliHost.authority,void 0,o,o,!1,i,void 0));await sf({uri:s,type:"folder",label:Or.l10n.t("{0} [Dev Container]",o)}),await So.commands.executeCommand("vscode.openFolder",s)}async function Nve(t,e,n){let{output:r}=e,o=et(e,"pull",c7),i=await IO({telemetry:n,output:r,openConfigurationCommandId:mm,showLogCommandId:yt},Tve,!0);i.askForTrust=!0;let s=await Oo(e),a=async()=>{i.skipOptions=!0;let f=await b0(i,void 0,void 0,Promise.resolve(void 0));if(f==="back"||!f)return;let m=f.metadata.template;if(yO.indexOf(m.owner)===-1){let d=`@${m.owner}`,p={label:Or.l10n.t("Trust {0}",d),description:Or.l10n.t("from GitHub"),buttons:[{iconPath:new So.ThemeIcon("info"),tooltip:Or.l10n.t("Open Documentation")}]},h={label:Or.l10n.t("Back")},g={label:Or.l10n.t("Cancel")},v=i.quickPick.onDidTriggerItemButton(()=>{So.env.openExternal(So.Uri.parse(m.documentationURL))}),C=await Eo(i.quickPick,[p,h,g],Or.l10n.t("The {0} is from the {1} GitHub owner/organization.",m.name,d),void 0,void 0,!0);if(v.dispose(),!C||C===g)return;if(C==="back"||C===h)return a()}return u7(i,f,s,kve(f.id,s),a)},c=await a();if(!c){i.quickPick.dispose();return}let{selectedTemplate:l,volumeName:u}=c;return So.window.withProgress({location:So.ProgressLocation.Notification,title:Rve,cancellable:!1},async()=>{let f;try{await Lp(e,u,[`${cx}=true`]),await o;let{stdout:m}=await et(e,...Lve(u,od()));f=m.toString().trim();let d=QO.posix.join(od(),u),p=ps(e,f,"root"),h=await Xs(e,f,"root",Hn),g=so("container",d,{},p,h,()=>{throw new Error("not implemented")},"node",r);await g.mkdirp(d);let v=bt(QO.posix,d),C=await xO(i,g,v.configFolderPath,"workspace",l);return i.quickPick.hide(),C?{volumeAndFolderName:u}:void 0}finally{if(f)try{await Hi(e,f)}catch{}}})}function kve(t,e){let n,r=(/([^/:]+)(:[^/:]+)?$/.exec(t)||[])[1]||"devcontainer",o=0;do n=`${r}${o++?`-${o}`:""}`;while(e.indexOf(n)!==-1);return n}async function u7(t,e,n,r,o){let{quickPick:i}=t;i.placeholder=Or.l10n.t("Dev container name"),i.selectedItems=[],i.value=r,i.buttons=[So.QuickInputButtons.Back];let s={label:Or.l10n.t("Additional Options..."),alwaysShow:!0},a=!1;function c(){a=!1,i.items=[{label:Or.l10n.t("Create Dev Container"),description:i.value,alwaysShow:!0},s]}function l(d){a=!0,i.items=[{label:d,alwaysShow:!0}]}c();let u=[],f=await new Promise(d=>{u=[i.onDidAccept(()=>{i.value?a||d({volumeName:i.value,options:i.selectedItems[0]===s}):l(Or.l10n.t("The name cannot be empty."))}),i.onDidHide(()=>d(void 0)),i.onDidChangeValue(p=>{n.indexOf(p)!==-1?l(Or.l10n.t("A Docker volume with this name already exists.")):p&&!/^[a-zA-Z0-9]/.test(p)?l(Or.l10n.t("Only alphanumeric characters are allowed as the first character.")):p&&!/^[a-zA-Z0-9][a-zA-Z0-9_.-]*$/.test(p)?l(Or.l10n.t("Only alphanumeric characters, periods, underscores and hyphens are allowed.")):c()}),i.onDidTriggerButton(()=>d("back"))]});if(u.forEach(d=>d.dispose()),!f)return;if(f==="back")return o();let{volumeName:m}=f;if(f.options){let p=await(async()=>{t.skipOptions=!1;let h=await wm(t,e.metadata.template,Promise.resolve(void 0),async()=>{let g=await u7(t,e,n,m,o);if(g)return m=g.volumeName,g.selectedTemplate});if(!(h==="back"||!h))return h})();if(!p)return;e=p}return i.busy=!0,i.enabled=!1,{volumeName:m,selectedTemplate:e}}function Lve(t,e){return["run","-d","--mount",`type=volume,src=${t},dst=${e}`,c7,"sleep","infinity"]}var Q0=Y(require("crypto")),d7=require("path"),m7=Y(require("vscode")),e1=typeof __non_webpack_require__<"u"?__non_webpack_require__:require,Ave=["You may install and use any number of copies of the software only with Microsoft Visual Studio,","Visual Studio for Mac, Visual Studio Code, Azure DevOps, Team Foundation Server, and successor Microsoft products","and services (collectively, the \u201CVisual Studio Products and Services\u201D) to develop and test your applications.","The software is licensed, not sold. This agreement only gives you some rights to use the software. Microsoft reserves all other rights.","You may not:","work around any technical limitations in the software that only allow you to use it in certain ways;","reverse engineer, decompile or disassemble the software, or otherwise attempt to derive the source code for the software,","except and to the extent required by third party licensing terms governing use of certain open source components that may be included in the software;","remove, minimize, block, or modify any notices of Microsoft or its suppliers in the software;","use the software in any way that is against the law or to create or propagate malware; or","share, publish, distribute, or lease the software (except for any distributable code, subject to the terms above),","provide the software as a stand-alone offering for others to use, or transfer the software or this agreement to any third party."].join(" "),Fve="aes-192-cbc",p7="SEE  LICENSE.txt",Ove=Q0.scryptSync(Ave,p7,24),Uve=Buffer.from(p7);var h7={DevContainersOnlyLicensedForMicrosoftVSCode(){var t;return f7(((t=e1.main)==null?void 0:t.paths.map(e=>e+PC("f70715b752c50649525efc24a1d133eb")))??[])||f7([d7.posix.join(m7.env.appRoot,PC("9e4708daf438152c7e63cf9f3b24d92c"))])}};function f7(t){try{let e=e1.resolve(PC("bdf000de72c4f5f5d7cff4fa6dd90b95"),{paths:t}),n=e1(e);return!(!n[PC("0fd50b75eeecb3b44b3932921442f72c")]||!n[PC("80c3ae7905cba507debf9b326fc386ab")])}catch{return!1}}function PC(t){let e=Q0.createDecipheriv(Fve,Ove,Uve),n=e.update(t,"hex","utf8");return n+=e.final("utf8"),n}U.l10n.bundle&&C7.config({contents:U.l10n.bundle});var r1=class{constructor(e,n,r){this.context=e;this.output=n;this.telemetry=r}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let n=S7.parse(e.query);if(!n.url){U.window.showErrorMessage(oe.l10n.t("Failed to handle the URI '{0}' expected a 'url' query parameter.",e.toString()),{modal:!0});return}let r;if(Array.isArray(n.url)?r=n.url[0]:r=n.url,!await to(this.context,this.output.log,this.output.onDidInput,this.telemetry,"cloneInVolume"))return;let o=await tt(this.context,this.output.log);if(await RR(o.cliHost,r,o.cliHost.type==="local"?await g0(this.output.log):{},this.output.log)===!1){U.commands.executeCommand(yt),await U.window.showErrorMessage(oe.l10n.t("Cannot access the repository '{0}'.",r),{modal:!0});return}await U.commands.executeCommand(p0,n.url)}};async function $ve(t){var L;P8();let e=new Date;I8(t);let n,r=new Promise(E=>n=E);N8(r);let o=await cr(t.extensionPath),i=await Wv(U.env.appRoot);b8(t,i);let s=D8(t,o,i),a=await R8(o,i),c=new lC(t.logPath,e,a);if(t.subscriptions.push(U.commands.registerCommand(yt,()=>c.show())),!h7.DevContainersOnlyLicensedForMicrosoftVSCode()){c.log.write("The Dev Containers extension is supported only in Microsoft versions of VS Code");return}let{channel:l,postCreate:u}=x8(c.log,e);t.subscriptions.push(U.commands.registerCommand(lO,()=>l.show()));let f,m=new Promise(E=>f=E);t.subscriptions.push(U.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:h0(c,u,wr.results,n,f,async(E,I,R,_)=>d9(t,s,E,I,wr.onRemoveOnShutdownChanged,R,_)),async getCanonicalURI(E){let I=fo(E.authority);if(I&&ln(I)){let{hostPath:R,settings:_}=I;return xr(R)?xp(R,c.log):Ol(_)?Jv(_.host,R):Ul(I.parentAuthority)?R.startsWith("/")?nu(I.parentAuthority,R):E:Cc(I.parentAuthority)?R.startsWith("/")?nu(I.parentAuthority,R):E:U.Uri.file(R)}return E}}),U.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:h0(c,u,wr.results,n,f,async(E,I,R,_)=>I9(t,s,E,I,R,_))}),U.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:h0(c,u,wr.results,n,f,async(E,I,R,_)=>o7(t,s,E,I,R,_))}),U.window.registerUriHandler(new r1(t,c,s)));let d=async(E,I,R)=>{if(!await to(t,c.log,c.onDidInput,s,"openInContainer"))return;let _=await tt(t,c.log),x;if(yr.isFolderItem(E)?x=E.folder:x=E,x.scheme==="vscode-remote"&&x.authority.startsWith("dev-container+"))return U.commands.executeCommand("vscode.openFolder",x,R);{let b=bt(_.cliHost.path,De(x,_.cliHost.platform));return bC(t,b,_,c.onDidInput,s,I,R)}};t.subscriptions.push(U.commands.registerCommand("remote-containers.openFolder",async(E,I)=>E?d(E,!1,I):t1(t,!0,s,!1,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openWorkspace",async(E,I)=>E?d(E,!1,I):t1(t,!1,s,!1,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand(u8,async E=>Ag(t,s,c.log,c.onDidInput,E))),t.subscriptions.push(U.commands.registerCommand(p0,async E=>Ag(t,s,c.log,c.onDidInput,E,ui))),t.subscriptions.push(U.commands.registerCommand(d8,async()=>{var N,k,$;let I=(await((N=U.extensions.getExtension("vscode.git"))==null?void 0:N.activate())).getAPI(1);if(I.repositories.length===0)return;let R=I.repositories.reduce((H,G)=>{let q=G.state.remotes.find(V=>{var ce,Ue;return V.name===((Ue=(ce=G.state.HEAD)==null?void 0:ce.upstream)==null?void 0:Ue.remote)});return q!=null&&q.pushUrl&&H.push({repository:G,label:q.pushUrl}),H},[]),_=R[0];if(R.length>1){let H=await U.window.showQuickPick(R,{canPickMany:!1,placeHolder:oe.l10n.t("Choose which repository to clone")});if(H===void 0)return;_=H}let x=_.label,b=($=(k=_.repository.state.HEAD)==null?void 0:k.upstream)==null?void 0:$.name;return Ag(t,s,c.log,c.onDidInput,{url:x,branch:b},ui)})),t.subscriptions.push(U.commands.registerCommand(f8,async()=>{var b;let E=U.workspace.workspaceFolders;if(!E)return;let I=E[0].uri;if(E.length>1){let N=await U.window.showOpenDialog({canSelectFolders:!0,canSelectFiles:!1,canSelectMany:!1,title:oe.l10n.t("Choose a repository to clone in a Container Volume")});I=N==null?void 0:N[0]}let R,_;try{let N=await U.commands.executeCommand("remoteHub.api.getRepositoryContext",I);if(!N)throw new Error("Unable to get active repository context.");R=N.name,_=N.ref}catch{let $=await(await((b=U.extensions.getExtension("ms-vscode.remote-repositories"))==null?void 0:b.activate())).getMetadata(I);if(!$)throw new Error("Unable to get active repository context.");R=`${$.repo.owner}/${$.repo.name}`,_=(await $.getRevision()).name}let x=`https://github.com/${R}`;return _&&(x=`${x}/tree/${_}`),Ag(t,s,c.log,c.onDidInput,x,ui)})),t.subscriptions.push(U.commands.registerCommand(m8,async E=>Jve(t,s,c.log,c.onDidInput,E,ui))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolume",async(E,I,R)=>I7(t,E,I,R,s,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async E=>Zve(t,E,s,c.log,c.onDidInput))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async E=>Ag(t,s,c.log,c.onDidInput,void 0,E))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInContainer",()=>p(!1))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>p(!0))),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>p("rebuildNoCache")));let p=async E=>{if(!await U.workspace.requestWorkspaceTrust({message:mC})||!await to(t,c.log,c.onDidInput,s,"reopenInContainer"))return;let R=await tt(t,c.log),_=U.workspace.workspaceFile;if(_&&_.scheme==="untitled"){await u0();return}let x=U.workspace.workspaceFolders;if(!_&&x&&x.length){let N=x.length>1?await U.window.showWorkspaceFolderPick({placeHolder:oe.l10n.t("Pick a folder to reopen in a container.")}):x[0];N&&(_=N.uri)}let b=fO(_);if(b){await TC(t,b.repositoryPath,b.volumeName,b.folder,R);return}if(_){let N;if(R.cliHost.type==="wsl"&&_.scheme==="file"){let $=De(_,process.platform),H=Yf($)||S0()||await Xv(R.output)||(()=>{throw new Error("No default WSL distro found.")})();N=await Fl(H,$,R.output)}else N=De(_,R.cliHost.platform);let k=bt(R.cliHost.path,N);await bC(t,k,R,c.onDidInput,s,E,{forceReuseWindow:!0})}else return t1(t,!0,s,E,c.log,c.onDidInput)};t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenLocally",async()=>{let E=U.workspace.workspaceFolders,I=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(I&&I.scheme==="vscode-remote"){let R=fo(I.authority);if(R&&ln(R)){let _=U.Uri.file(R.hostPath),x={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",_,x)}else U.window.showInformationMessage(oe.l10n.t("'Reopen Locally' not possible in current context."))}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let E=U.workspace.workspaceFolders,I=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(I&&I.scheme==="vscode-remote"){let R=fo(I.authority);if(R&&ln(R)&&xr(R.hostPath)){let _=U.Uri.parse((await xp(R.hostPath,c.log)).toString()),x={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",_,x)}else U.window.showInformationMessage(oe.l10n.t("'Reopen in WSL' not possible in current context."))}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInSSH",async()=>{let E=U.workspace.workspaceFolders,I=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(I&&I.scheme==="vscode-remote"){let R=fo(I.authority),_=R==null?void 0:R.settings;if(R&&ln(R)&&(Ul(R.parentAuthority)||Ol(_))){let x=Ol(_)?Jv(_.host,R.hostPath):nu(R.parentAuthority,R.hostPath),b={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",U.Uri.parse(x.toString()),b)}else U.window.showInformationMessage(oe.l10n.t("'Reopen in SSH' not possible in current context."))}})),t.subscriptions.push(U.commands.registerCommand("remote-containers.reopenInTunnel",async()=>{let E=U.workspace.workspaceFolders,I=U.workspace.workspaceFile||E&&E.length&&E[0].uri;if(I&&I.scheme==="vscode-remote"){let R=fo(I.authority);if(R&&ln(R)&&Cc(R.parentAuthority)){let _=U.Uri.parse(nu(R.parentAuthority,R.hostPath).toString()),x={forceReuseWindow:!0};await U.commands.executeCommand("vscode.openFolder",_,x)}else U.window.showInformationMessage(oe.l10n.t("'Reopen in Tunnel' not possible in current context."))}}));let h=async E=>{var b;if(!await of(t))return;let I,R=typeof E=="string"?E:(b=E==null?void 0:E.containerDesc)==null?void 0:b.Id;if(R){if(!await to(t,c.log,c.onDidInput,s,"attachToContainer"))return;let N=await tt(t,c.log);I=await ai(N,R)}else{let N=to(t,c.log,c.onDidInput,s,"attachToContainer");if(I=await swe(t,c.log,N),!I)return}let _=await tt(t,c.log),x=t.extensionMode===U.ExtensionMode.Development;IC(_,I,t,!x)};t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainer",h)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",h)),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainer",async E=>ZO(t,await tt(t,c.log),E))),t.subscriptions.push(U.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async E=>ZO(t,await tt(t,c.log),E)));let g=async E=>{var R;if(!await to(t,c.log,c.onDidInput,s,"checkoutPRInVolume"))return;let I=(R=E==null?void 0:E.pullRequestModel)==null?void 0:R.html_url;Ag(t,s,c.log,I,ui)};t.subscriptions.push(U.commands.registerCommand("remote-containers.checkoutPRInVolume",g)),t.subscriptions.push(U.commands.registerCommand("remote-containers.switchContainer",async()=>{var _;if(wr.results.size){let x=[...wr.results.values()].filter(N=>N.dockerParams)[0],b=(_=x==null?void 0:x.dockerParams)==null?void 0:_.parsedAuthority;if(b&&uo(b)&&!b.inspectVolume){let N=so("container","/",{},x.properties.remoteExec,x.properties.remotePtyExec,()=>{throw new Error("not implemented")},void 0,x.params.output),k=await Ua().then(V=>V.map(ce=>({type:"workspace",uri:ce,fileHost:N}))),$=await tf(k,x.configWorkspaceURI);if(!$||$==="cancelled")return;let H=Ce.from({scheme:Ke.scheme,path:$.path}),G=U.Uri.parse(Wi(b.parentAuthority,b.repositoryPath,b.volumeName,b.folder,!1,b.settings,b.cloneInfo,H).toString()),q=b.volumeName;q===ui&&(q=oe.l10n.t("a unique volume")),await sf({uri:G,type:"folder",label:oe.l10n.t("{0} in {1} [Dev Container]",b.folder,q)}),await U.commands.executeCommand("vscode.openFolder",G);return}}let E=await tt(t,c.log),I=bt(E.cliHost.path,E.cliHost.cwd);if((await x7(E.cliHost,I,await nl(t,E.cliHost))).length<2){await U.window.showInformationMessage(oe.l10n.t("No other Dev Container configurations found in folder. Did you mean to open another folder in a container?"),{modal:!0},oe.l10n.t("Open Folder in Container..."))&&U.commands.executeCommand("remote-containers.openFolder");return}await bC(t,I,E,c.onDidInput,s,!1)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let E=rf();if(E){let I=await tt(t,c.log);await TC(t,E.repositoryPath,E.volumeName,E.folder,I,!0);return}return await Promise.all(wr.onRemoveOnShutdownChangedEmitter.fire(!0)),U.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(U.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let E=rf();if(E){let I=await tt(t,c.log);await TC(t,E.repositoryPath,E.volumeName,E.folder,I,"rebuildNoCache");return}return await Promise.all(wr.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),U.commands.executeCommand("workbench.action.reloadWindow")}));let v=h8(),C=((L=(U.workspace.workspaceFolders||[])[0])==null?void 0:L.uri)||Ce.file(process.cwd()),w=v.then(E=>Ma(E,C)),y,S=()=>y||(y=tt(t,c.log).then(E=>E.cliHost)),P,D=()=>P||(P=(async()=>{let E=await w,I=await S(),R=U.env.remoteName==="dev-container"&&U.env.remoteAuthority&&fo(U.env.remoteAuthority),x=!R||ln(R)?await nl(t,I):void 0;return c.log.write("Initializing configuration support..."),f9(t,{fileHost:E,userDataFolderForConfigurations:x,findDevContainerFiles:async b=>D0(I,bt(E.path,De(C,E.platform)),x,b),telemetry:s,output:c.log,openConfigurationCommandId:mm,showLogCommandId:yt})})());async function A(){var E;return(E=U.workspace.workspaceFolders)!=null&&E.length?!0:(await U.window.showInformationMessage(oe.l10n.t("Open a folder to create the configuration files in first."),{modal:!0},oe.l10n.t("Open Folder"))&&await U.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder"),!1)}t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{await A()&&await eP(t,await S(),await D(),s,c.log,c.onDidInput)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainerFileWithCopilot",async()=>{await A()&&await eP(t,await S(),await D(),s,c.log,c.onDidInput,{picker:"copilot"})})),t.subscriptions.push(U.commands.registerCommand("remote-containers.createDevContainer",async()=>{if(!await to(t,c.log,c.onDidInput,s,"createDevContainer"))return;let E=await tt(t,c.log);await l7(t,E,s)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openDevContainerFile",async(E,I)=>{let R,_=await tt(t,c.log),x;if(typeof E=="string"?R=[{type:"unknown",uri:Ce.file(E),fileHost:Ma(process.platform,Ce.file(ft.dirname(E)))}]:(x=await D0(_.cliHost,bt(_.cliHost.path,_.cliHost.cwd),await nl(t,_.cliHost)),R=(await Promise.all(x.map(b=>b.uri.scheme==="file"||b.uri.scheme==="vscode-remote"?b:_.cliHost.toCommonURI(De(b.uri,_.cliHost.platform)).then(N=>N&&{type:b.type,uri:N})))).filter(b=>!!b)),R.length){let b=await tf(R);if(!b||b==="cancelled")return;let N=rf();if(N){let k=_8(N.folder);for(let $ of k){try{await U.workspace.openTextDocument(U.Uri.parse($.toString()))}catch{continue}await U.commands.executeCommand("vscode.open",U.Uri.parse($.toString()),I);return}return}if(b){if(b.scheme==="file"&&await Er(b.fsPath))return await U.commands.executeCommand("vscode.open",U.Uri.parse(b.toString()),I);if(b.scheme==="file"&&wr.results.size)return await $i(fs,b,[],gc),await U.commands.executeCommand("vscode.open",U.Uri.parse(b.toString()),I);if(b.scheme==="vscode-remote")return await U.commands.executeCommand("vscode.open",U.Uri.parse(b.toString()),I);if(E===void 0)return await eP(t,await S(),await D(),s,c.log,c.onDidInput)}}else if(E===void 0&&!(x!=null&&x.length))return await eP(t,await S(),await D(),s,c.log,c.onDidInput)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:E,dockerParams:I}=[...wr.results.values()][0];if(!E||!I)return U.window.showInformationMessage(oe.l10n.t("Named configurations are only available for Docker containers."),{modal:!0});let R=await ai(I,E),_=F0(t.globalStoragePath,R),x=U.Uri.file(_);return await Er(_)?U.commands.executeCommand("vscode.open",x):(await $i(fs,x,[],gc),U.commands.executeCommand("vscode.open",x))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let E=[...(await E9(t.globalStoragePath)).map(R=>({label:R.name,...R})).sort((R,_)=>R.label.localeCompare(_.label)),...(await _9(t.globalStoragePath)).map(R=>({label:R.image,...R})).sort((R,_)=>R.label.localeCompare(_.label))],I=await U.window.showQuickPick(E.length?E:[{label:oe.l10n.t("No configuration found.")}],{placeHolder:oe.l10n.t("Choose a configuration file")});if(I&&"uri"in I)return U.commands.executeCommand("vscode.open",U.Uri.parse(I.uri.toString()))})),t.subscriptions.push(U.commands.registerCommand("remote-containers.settings",async()=>U.commands.executeCommand("workbench.action.openSettings",`@ext:${w7()}`))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getHelp",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.getStarted",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(U.commands.registerCommand("remote-containers.reportIssue",async()=>{let E={extensionId:w7(),issueBody:oe.l10n.t("For bug reports please include the complete log output. (In the VS Code window: `F1` > `Dev Containers: Show Container Log`.)")};return U.commands.executeCommand("vscode.openIssueReporter",E)})),t.subscriptions.push(U.commands.registerCommand("remote-containers.provideFeedback",async()=>U.env.openExternal(U.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),w.then(E=>{t.subscriptions.push(U.languages.registerDocumentLinkProvider([{pattern:"**/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new W0(E)))}),t.subscriptions.push(U.commands.registerCommand("remote-containers.trySample",()=>mwe(t,c,s))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLogFile",()=>pwe(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.openLastLogFile",()=>hwe(t,"remoteContainers",c.logFilePath))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>lwe(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Bve(t))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDocker",()=>M0(c.log))),t.subscriptions.push(U.commands.registerCommand("remote-containers.installDockerInWSL",()=>B0(t,c.log,c.onDidInput,s))),t.subscriptions.push(U.commands.registerCommand("remote-containers.cleanUpDevContainers",async()=>K9(await tt(t,c.log)))),n7(t,wr.results,s,c.log),s7(t,i).catch(E=>{c.log.write(`Error ensuring user CLI is configured: ${(E==null?void 0:E.stack)||(E==null?void 0:E.message)||String(E)}`)}),t.subscriptions.push(U.commands.registerCommand("remote-containers.installUserCLI",()=>a7(t,i))),t.subscriptions.push(U.commands.registerCommand("remote-containers.testConnection",async()=>{await U.commands.executeCommand(yt);let E=[...wr.results.values()][0];if(!E){c.log.write("Not connected.");return}let{params:I,properties:R}=E;await y_(I,R)})),(async()=>{I0()&&await m;let E=U.env.remoteName,I=!E||["dev-container","attached-container","wsl","ssh-remote","tunnel","exec","k8s-container"].indexOf(E)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[],R=await D();t.subscriptions.push(U.languages.registerCompletionItemProvider([...I,{pattern:ft.join(O0(t.globalStoragePath),"*.json")},{pattern:ft.join(A0(t.globalStoragePath),"*.json")}],R.createCompletionItemProvider())),E!=="codespaces"&&(R.startCodeLensProvider(),R.startHoverProvider(),R.startDiagnosticsCollection()),await S8(t)||await P7(t,await S(),s,c.log,c.onDidInput)})().catch(console.error),Wve(t),t.subscriptions.push(U.commands.registerCommand("remote-containers.addExtensionToConfig",async E=>(await D()).addExtensionToConfiguration(E)),U.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>(await D()).configureContainerFeatures()),U.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",async E=>(await D()).addPortLabelToConfiguration(E))),rf()&&U.commands.executeCommand("setContext","isRecoveryContainer",!0),await g8()}var v7="showRecoveryContainerNotification",_7="showReopenInContainerNotificationReset",Hve=5e3;function Bve(t){return t.globalState.update(_7,Date.now())}async function Wve(t){setTimeout(async()=>{let e=t.globalState.get(_7);if(a1(t.globalState.get(v7),e))return;if(rf()){let r=oe.l10n.t("This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry."),o=oe.l10n.t("Reopen in Container"),i=oe.l10n.t("Don't Show Again"),s=await U.window.showInformationMessage(r,o,i);s===o?U.commands.executeCommand("remote-containers.reopenInContainer"):s===i&&await t.globalState.update(v7,Date.now())}},Hve)}async function jve(){await Promise.all([...wr.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(n){console.error(n)}}))))}function w7(){let{name:t,publisher:e}=g7();return`${e}.${t}`}async function t1(t,e,n,r,o,i){var m;if(!await to(t,o,i,n,"openInContainer"))return;let s=await tt(t,o),a,c=U.workspace.workspaceFolders;if(c&&c[0]){let d=c[0].uri;if(d.scheme==="vscode-remote"){let p=fo(d.authority);if(p&&ln(p)){let h=bt(s.cliHost.path,p.hostPath);a=U.Uri.file(h.rootFolderPath)}else/^(wsl|ssh-remote|tunnel)\+/.test(d.authority)&&(a=d)}else d.scheme==="file"&&(a=d)}a||((m=U.env.remoteName)!=null&&m.match(/^(wsl|ssh-remote|tunnel)$/)?a=U.Uri.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:await s.cliHost.homedir()}):a=U.Uri.file(E7.homedir()));let l=e?{defaultUri:a,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:oe.l10n.t("Open")}:{defaultUri:a,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{[oe.l10n.t("Code Workspace")]:["code-workspace"]},openLabel:oe.l10n.t("Open")},u=await U.window.showOpenDialog(l),f=u&&u[0];if(f){let d=e?f:f.with({path:ft.posix.dirname(f.path)}),p=await tt(t,s.output,d,dO()==="always"),h;f.scheme==="file"&&p.cliHost.type==="wsl"?h=e?p.cliHost.cwd:p.cliHost.path.join(p.cliHost.cwd,ft.posix.basename(f.path)):h=De(f,p.cliHost.platform);let g=bt(p.cliHost.path,h);await bC(t,g,p,i,n,r)}}async function bC(t,e,n,r,o,i,s){try{await Vve(t,e,n,r,o,i,s)}catch(a){await cf(a,"ui",o,!1,n.output)}}async function Vve(t,e,n,r,o,i,s){var A;let{cliHost:a}=n;if(xr(e.rootFolderPath)){if(!await to(t,n.output,r,o,"openInContainer",e.rootFolderPath))return;n=await tt(t,n.output,e.rootFolderPath),a=n.cliHost,e=bt(a.path,e.isWorkspaceFile?a.path.join(a.cwd,ft.basename(e.workspaceOrFolderPath)):a.cwd)}let c=await FS(a,e);if(c){let O=oe.l10n.t("Continue");if(await U.window.showInformationMessage(oe.l10n.t("The workspace could fail to open in a container: {0}",c),{modal:!0},O)!==O)return}let l=await Gve(t,a,e);if(l==="cancelled")return;let u=l&&(l.scheme==="file"?await at(l.fsPath):await a.readFile(De(l,a.platform))).toString(),f=!!(u&&((A=He(u))!=null&&A.initializeCommand)),{dockerCLI:m,dockerComposePath:d}=n,p={cliHost:a,dockerPath:m,dockerComposePath:d,appRoot:U.env.appRoot,extensionPath:t.extensionPath,package:await cr(t.extensionPath),output:n.output},h=l&&await(f?hg(p,e.rootFolderPath,l):await wO(p,e.rootFolderPath,l)||hg(p,e.rootFolderPath,l));if(h==="canceled")return;if(!h&&l){let O=De(l,a.platform),L=await a.toCommonURI(O);L&&U.window.showTextDocument(U.Uri.parse(L.toString()));let E=oe.l10n.t("Show Log");await U.window.showErrorMessage(oe.l10n.t("Failed to read Dev Container configuration '{0}' file.",a.path.relative(e.configFolderPath,O)),{modal:!0},E)===E&&U.commands.executeCommand(yt);return}let g=h&&!W_(h.configuration);if(!h||g){let O=await N0({fileHost:a,userDataFolderForConfigurations:await nl(t,a),telemetry:o,output:n.output,openConfigurationCommandId:mm,showLogCommandId:yt},e,void 0,h==null?void 0:h.configuration.configFilePath);if(!O||(l=Ce.file(O).with({scheme:Ke.scheme}),h=await wO(p,e.rootFolderPath,l),!h||h==="canceled"))return}if(!await T8(t,n,h.configuration)||!await Kve(n,"mergedConfiguration"in h?h.mergedConfiguration:h.configuration))return;let v=h.configuration,C=h.workspace.workspaceFolder,w=a.type==="wsl"?(await a.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,y=(l==null?void 0:l.scheme)===Ke.scheme&&a.type==="wsl"&&!xr(w)&&await a.toCommonURI(De(l,a.platform))||l;if(Fo(v)){let O=ed(a,v);if(!v.initializeCommand&&!await ur(a).readDocument(O))return RC(oe.l10n.t('"{0}" does not exist.',O.fsPath),a,v.configFilePath);if(v.workspaceFolder&&!ft.posix.isAbsolute(v.workspaceFolder))return RC(oe.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),a,v.configFilePath)}else if(!("image"in v))if("dockerComposeFile"in v){let O=a.type==="wsl"?e.isWorkspaceFile?ft.dirname(w):w:e.rootFolderPath;if(!await j9(n)||!await awe(O,y,n,v))return}else{let O=v.configFilePath;return RC(oe.l10n.t('Configuration "{0}" not valid.',a.path.relative(e.rootFolderPath,De(O,a.platform))),a,O)}e.isWorkspaceFile&&(C=ft.posix.join(C,a.path.basename(e.workspaceOrFolderPath)));let S=dr(n.env),P=(a.type==="local"||a.type==="wsl")&&Ol(S),D=U.Uri.parse(xw(U.env.remoteAuthority,w,C,S,P,y));await sf({uri:D,type:e.isWorkspaceFile?"workspace":"folder",label:oe.l10n.t("{0} [Dev Container]",`${iC(a.platform,e.workspaceOrFolderPath,await a.homedir())}${$p(U.env.remoteAuthority,S)}`)}),await gO(t,i?D.authority:!1),await fC(t,i==="rebuildNoCache"?D.authority:!1),await U.commands.executeCommand("vscode.openFolder",D,s)}async function x7(t,e,n){let r=await zve(t,e.rootFolderPath),i=(r==null?void 0:r.scheme)==="file"&&process.platform==="win32"&&xr(r.fsPath)&&!U.workspace.getConfiguration("security").get("allowedUNCHosts",[]).includes(r.authority)?qve(t,e):Yve(r,t,e);return(await Promise.all([i.then(s=>s.map(a=>({type:"workspace",uri:a,fileHost:t}))),vO(t,e).then(s=>s.map(a=>({type:"repositoryConfig",uri:a,fileHost:Ma(process.platform,a.with({path:ft.posix.dirname(a.path)}))}))),n?f0(t,e,n).then(s=>s.map(a=>({type:"userData",uri:a,fileHost:t}))):[]])).flat()}async function Yve(t,e,n){return Promise.all((await Ua(t)).map(async o=>{if(!t){let i=ft.posix.relative(U.workspace.workspaceFolders[0].uri.path,o.path),s=e.platform==="win32"?"/"+n.rootFolderPath.replace(/\\/g,"/"):n.rootFolderPath;return Ce.from({scheme:Ke.scheme,path:ft.posix.join(s,i)})}if(o.scheme===co.scheme)return Ce.from({scheme:Ke.scheme,path:o.path});if(e.type==="wsl"&&o.scheme==="file"){let i=ft.relative(t.fsPath,o.fsPath),s=ft.posix.resolve(n.rootFolderPath,i.replace(/\\/g,"/"));return Ce.from({scheme:Ke.scheme,path:s})}return o}))}async function qve(t,e){let n=t.path.join(e.rootFolderPath,".devcontainer"),r=[...ql(t.path,e.rootFolderPath),...(await t.readDirWithTypes(n)).filter(([,o])=>(o&2)!==0).map(([o])=>t.path.join(n,o,"devcontainer.json"))];return(await Promise.all(r.map(o=>t.isFile(o).then(i=>i?Ce.from({scheme:Ke.scheme,path:o}):void 0)))).filter(Boolean)}async function Gve(t,e,n){let r=await x7(e,n,await nl(t,e)),o;if(U.env.remoteAuthority){let i=fo(U.env.remoteAuthority);i&&ln(i)&&(o=i.configFile)}return tf(r,o)}function zve(t,e){switch(t.type){case"local":return Ce.file(e);case"wsl":return U.env.remoteName==="wsl"?Ce.from({scheme:"vscode-remote",authority:U.env.remoteAuthority,path:e}):t.toCommonURI(e);case"remote":return U.env.remoteName==="ssh-remote"||U.env.remoteName==="tunnel"?Nn(t.platform,Ce.from({scheme:"vscode-remote",authority:U.env.remoteAuthority}),e):void 0;default:return}}async function Kve(t,{hostRequirements:e}){var r,o;let n=e&&Xve(e);if(n&&(n.cpus||n.memory||n.gpu&&n.gpu!=="optional")){let i=await et(t,"info","--format","{{json .}}"),s=JSON.parse(i.stdout.toString()),a=s.NCPU&&n.cpus&&n.cpus>s.NCPU,c=s.MemTotal&&n.memory&&n.memory>s.MemTotal,l=((o=(r=s.Runtimes)==null?void 0:r.nvidia)==null?void 0:o.path)==="nvidia-container-runtime";if(a||c){let u=[];s.NCPU&&u.push(oe.l10n.t("CPUs {0}",s.NCPU.toLocaleString())),s.MemTotal&&u.push(oe.l10n.t("RAM {0}",n1(s.MemTotal))),l&&u.push(oe.l10n.t("GPU"));let f=[];n.cpus&&f.push(oe.l10n.t("CPUs {0}",n.cpus.toLocaleString())),n.memory&&f.push(oe.l10n.t("RAM {0}",n1(n.memory))),n.storage&&f.push(oe.l10n.t("disk {0}",n1(n.storage))),n.gpu&&n.gpu!=="optional"&&f.push(oe.l10n.t("GPU"));let m=oe.l10n.t(`Docker daemon: {0}
devcontainer.json: {1}`,u.join(", "),f.join(", "));if(!await U.window.showInformationMessage(oe.l10n.t("Not all host requirements in devcontainer.json are met by the Docker daemon."),{modal:!0,detail:m},oe.l10n.t("Continue")))return!1}}return!0}function Xve(t){return{cpus:t.cpus||0,memory:y7(t.memory||"0"),storage:y7(t.storage||"0"),gpu:t.gpu}}function y7(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,n,r]=e,o=parseInt(n,10),i=r&&{t:2**40,g:2**30,m:2**20,k:2**10}[r[0]]||1;return o*i}return 0}function n1(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),n=t/Math.pow(2,10*e),r=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(n),1)))),1),o=Math.round(n*r)/r,i=[" bytes","kb","mb","gb","tb"][e];return`${o.toLocaleString()}${i}`}async function Ag(t,e,n,r,o,i){if(!await pC(t))return;let s=null;if(!await to(t,n,r,e,"cloneInVolume"))return;let a=await tt(t,n);if(typeof o=="string")s=o;else{let c;if(o!==void 0?c=o:c=await U.commands.executeCommand("git-base.api.getRemoteSources",{providerLabel:l=>oe.l10n.t("Clone a repository from {0} in a Container Volume",l.name),urlLabel:oe.l10n.t("Clone git repository from URL"),branch:!0}),c){s=(typeof c=="string"?c:c.url).trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let l=Zs(s);if(await RR(a.cliHost,l.repositoryUrl,a.cliHost.type==="local"?await g0(a.output):{},a.output)===!1){U.commands.executeCommand(yt),await U.window.showInformationMessage(oe.l10n.t("Cannot access the repository '{0}'.",l.repositoryUrl),{modal:!0});return}typeof c!="string"&&c.branch&&(s=`${s}/tree/${c.branch}`)}}s&&await D7(t,a,s,i)}async function D7(t,e,n,r){if(r||(r=await ewe(e)),r){let o=l1(n);r!==ui&&(o=await nwe(n)),o&&await TC(t,n,r,o,e)}}async function Jve(t,e,n,r,o,i){if(!await pC(t))return;let s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await to(t,n,r,e,"checkoutPRInVolume"))return;let a=await tt(t,n),c={placeHolder:oe.l10n.t("e.g. https://github.com/microsoft/vscode/pull/123"),prompt:oe.l10n.t("Enter a GitHub pull request url"),validateInput:f=>s.test(f)?void 0:oe.l10n.t("Invalid pull request url")},l;if(o?l=o:l=await U.window.showInputBox(c),!l)return;let u=Zs(l);if(u.repository==="unknown"||!u.pullRequestId){await U.window.showInformationMessage(oe.l10n.t("Invalid pull request URL '{0}'.",l),{modal:!0});return}await D7(t,a,l,i)}async function I7(t,e,n,r,o,i,s){if(!await to(t,i,s,o,"inspectVolume"))return;let a=await tt(t,i);e||(e=await Qve(a)),e&&(n&&r?await iwe(e,n,r,a):await owe(e,a))}async function Zve(t,e,n,r,o){await to(t,r,o,n,"inspectVolume")&&await I7(t,e==null?void 0:e.volumeName,void 0,void 0,n,r,o)}var NC=class{get detail(){return""}},o1=class extends NC{get label(){return oe.l10n.t("$(plus) Create a new volume...")}get description(){return""}get volumeName(){return""}get detail(){return oe.l10n.t("Use this volume to store several cloned repositories.")}get alwaysShow(){return!0}},i1=class extends NC{volume;constructor(e){super(),this.volume=e}get label(){return oe.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return oe.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}},s1=class extends NC{volume;constructor(e){super(),this.volume=e}get label(){return oe.l10n.t("$(folder) {0}",this.volume.Name)}get description(){let e=new Date(this.volume.CreatedAt);return oe.l10n.t("created at {0}",e.toDateString())}get volumeName(){return this.volume.Name}};async function Qve(t){let e=await Oo(t),r=(await td(t,e)).map(a=>new s1(a)),o=oe.l10n.t("Select the volume to inspect with Visual Studio Code"),i=U.window.createQuickPick();i.items=r,i.placeholder=o,i.show();let s=await new Promise(a=>{i.onDidAccept(()=>a(i.activeItems[0])),i.onDidHide(()=>a(void 0))});return i.hide(),s?s.volume.Name:null}async function ewe(t){let e=await Oo(t,["vsch.local.repository.unique=false"]),r=(await td(t,e)).map(u=>new i1(u)),o=new o1,i=[o,...r],s=oe.l10n.t("Select the volume for the cloned repository"),a=U.window.createQuickPick();a.items=i,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(u=>{a.onDidAccept(()=>u(a.activeItems[0])),a.onDidHide(()=>u(void 0))});if(a.hide(),!c)return null;let l=null;return c===o?l=await twe(t):l=c.volumeName,l}async function twe(t){let e="",n="vsc-remote-containers",r=await Oo(t);r.find(s=>s===n)||(e=n);let o={prompt:oe.l10n.t("Enter the volume name."),value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?oe.l10n.t("Volume names should be at least two characters and the first character must be alphanumeric."):oe.l10n.t("Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric.")},i=await U.window.showInputBox(o);return i?r.find(s=>s===i)?(await U.window.showErrorMessage(oe.l10n.t("Volume already exists"),{modal:!0}),null):i:null}async function nwe(t){let e={prompt:oe.l10n.t("Enter the target folder name."),value:l1(t),ignoreFocusOut:!0},n=await U.window.showInputBox(e);return n||null}function l1(t){return li(t).repositoryName}async function rwe(){return(await U.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function TC(t,e,n,r,o,i=!1){let s=dr(o.env),a=ax(e),c;try{c=await a.parseUrl(void 0)}catch(u){if(u instanceof Sw){U.window.showErrorMessage(u.description);return}let f=await rwe();try{c=await a.parseUrl(f)}catch{U.window.showErrorMessage(oe.l10n.t("Cannot access '{0}'.",e),{modal:!0});return}}let l=U.Uri.parse(Wi(o.cliHost.authority,e,n,r,!1,s,c));n===ui&&(n=oe.l10n.t("a unique volume")),await sf({uri:l,type:"folder",label:oe.l10n.t("{0} in {1} [Dev Container]",r,n)}),await gO(t,i?l.authority:!1),await fC(t,i==="rebuildNoCache"?l.authority:!1),await U.commands.executeCommand("vscode.openFolder",l)}async function owe(t,e){let n=dr(e.env),r=U.Uri.parse(Wi(e.cliHost.authority,void 0,t,void 0,!0,n,void 0));await sf({uri:r,type:"folder",label:oe.l10n.t("Volume {0} [Dev Container]",t)}),await U.commands.executeCommand("vscode.openFolder",r)}async function iwe(t,e,n,r){let o=dr(r.env),i=U.Uri.parse(Wi(r.cliHost.authority,e,t,n,!0,o,void 0));await sf({uri:i,type:"folder",label:oe.l10n.t("{0} in {1} [Inspect Dev Container]",n,t)}),await U.commands.executeCommand("vscode.openFolder",i)}async function IC(t,e,n,r,o){var c;if(!await of(n))return;let i,s=t.cliHost;if(s.type==="wsl"){let l=await s.toCommonURI(s.cwd);l&&l.scheme==="file"&&(i=l.fsPath)}let a=h3(t.cliHost.authority,e.Name,dr(t.env),i);if(o=o||((c=await y9(n.globalStoragePath,e))==null?void 0:c.workspaceFolder),o){let l=U.Uri.parse(`vscode-remote://${a}${o}`),u={};r?u.forceNewWindow=!0:u.forceReuseWindow=!0,await U.commands.executeCommand("vscode.openFolder",l,u)}else{let l={remoteAuthority:a};r||(l.reuseWindow=!0),await U.commands.executeCommand("vscode.newWindow",l)}}async function swe(t,e,n){let r=!0,o=(async()=>{if(!await n)throw new Error("cancel");r=!1;let i=await tt(t,e),s=await Kl(i),a=await ms(i,s),c=[];if(a.forEach(l=>{l.State.Status==="running"&&c.push({label:l.Name,description:`${l.Config.Image} ${l.Id}`,containerInfo:l})}),c.length===0)throw U.window.showErrorMessage(oe.l10n.t("There are no running containers to attach to."),{modal:!0}),new Error("cancel");return c.sort((l,u)=>l.label.localeCompare(u.label))})();try{let i={placeHolder:oe.l10n.t("Select the container to attach VS Code")},s=await U.window.showQuickPick(o,i);if(!s&&r){if(!await n)throw new Error("cancel");s=await U.window.showQuickPick(o,i)}return s?s.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function awe(t,e,n,r){if(!r.workspaceFolder)return RC(oe.l10n.t("Workspace folder not specified in devcontainer.json."),n.cliHost,r.configFilePath),!1;if(!ft.posix.isAbsolute(r.workspaceFolder))return RC(oe.l10n.t("Workspace folder in devcontainer.json must be an absolute path."),n.cliHost,r.configFilePath),!1;if(r.initializeCommand)return!0;let o=await Gl(n.cliHost,r,n.cliHost.env,n.cliHost.cwd),i=QN(t,{buildCLIHost:n.cliHost,configFile:e});return!(await Jl(n,i)&&!await cwe(n.cliHost,o))}async function cwe(t,e){let n=[];for(let r=0;r<e.length;r++)await t.isFile(e[r])||n.push(e[r]);return n.length>0?(U.window.showErrorMessage(oe.l10n.t("The following referenced docker compose files do not exist: {0}",n.join(", ")),{modal:!0}),!1):!0}async function RC(t,e,n){if(await U.window.showErrorMessage(t,{modal:!0},oe.l10n.t("Open devcontainer.json"))){let o=De(n,e.platform),i=await e.toCommonURI(o);i&&U.window.showTextDocument(U.Uri.parse(i.toString()))}}async function eP(t,e,n,r,o,i,s){await n.createConfiguration(s)&&await P7(t,e,r,o,i)}async function P7(t,e,n,r,o){if([void 0,"wsl","ssh-remote","tunnel"].indexOf(U.env.remoteName)===-1)return;let i=U.workspace.workspaceFile,s=U.workspace.workspaceFolders,a=i||s&&s.length&&s[0].uri||void 0;if(a&&a.scheme!=="vscode-vfs"){let c;if(e.type==="wsl"&&a.scheme==="file"){let m=De(a,process.platform),d=Yf(m)||S0()||await Xv(r)||(()=>{throw new Error("No default WSL distro found.")})();c=await Fl(d,m,r)}else c=De(a,e.platform);let l=bt(e.path,c),f=(await D0(e,l,await nl(t,e))).sort((m,d)=>{if(m.type!==d.type)return m.type.localeCompare(d.type);let p=ft.posix.dirname(m.uri.path),h=ft.posix.dirname(d.uri.path);return p.localeCompare(h)})[0];f&&(await uC(e,r)).canConnectToContainer&&await uwe(t,f,l,e,n,r,o)}}var tP="showReopenInContainerNotification",b7="showReopenInContainerNotificationReset";function lwe(t){return t.globalState.update(b7,Date.now())}async function uwe(t,e,n,r,o,i,s){let a=t.globalState.get(b7);if(a1(t.globalState.get(tP),a)||a1(t.workspaceState.get(tP),a))return;let c=VG(r,n,e.uri),l,u="";if(r.platform!=="linux"&&U.env.remoteName!=="wsl"&&!(r.platform==="win32"&&xr(n.rootFolderPath))&&U.env.remoteName!=="ssh-remote"){let w=await tt(t,i);if(l=await $j(w.cliHost,n,w.output),l&&c){let y=await Hv(w.cliHost,n.rootFolderPath,w.output);y&&await Bj(w.cliHost,n,w.cliHost.path.relative(y,De(e.uri,w.cliHost.platform)),w.output)||(l=void 0)}if(l){let{cliHost:y,dockerCLI:S,dockerComposePath:P}=w,D={cliHost:y,dockerPath:S,dockerComposePath:P,appRoot:U.env.appRoot,extensionPath:t.extensionPath,package:await cr(t.extensionPath),output:i},A=await hg(D,n.rootFolderPath,e.uri);(!A||!Fo(A.configuration)&&!("image"in A.configuration))&&(l=void 0)}l&&(u=oe.l10n.t(" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo)."))}U.env.remoteName==="wsl"&&n.rootFolderPath.match(/^\/mnt\/[a-z]\//)&&(u=oe.l10n.t(" This workspace is on the Windows file system (/mnt/). For best performance, we recommend moving the workspace to the Linux file system (~/home)."));let f;c?n.isWorkspaceFile?f=oe.l10n.t("Workspace contains a Dev Container configuration file."):f=oe.l10n.t("Folder contains a Dev Container configuration file."):f=oe.l10n.t("There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.");let m=oe.l10n.t("Reopen in Container"),d=oe.l10n.t("Clone in Volume"),p=oe.l10n.t("Don't Show Again..."),h=n.isWorkspaceFile?oe.l10n.t("{0} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u):oe.l10n.t("{0} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).{1}",f,u),g=l?[m,d,p]:[m,p];fwe(o,e.type);let v=await U.window.showInformationMessage(h,...g);if(dwe(o,v===m?"reopen":v===d?"openRepository":v===p?"dontShowAgain":"cancel",e.type),v===m){if(!await U.workspace.requestWorkspaceTrust({message:mC})||!await to(t,i,s,o,"reopenInContainer"))return;let y=await tt(t,i);if(y.cliHost.type==="wsl"&&r.platform==="win32"){let{cwd:S}=await aN(n.workspaceOrFolderPath,Ha(),i);n=bt(y.cliHost.path,S)}await bC(t,n,y,s,o,!1,{forceReuseWindow:!0})}else if(v===d){let w=await tt(t,i),y=await Hj(w.cliHost,n,w.output),S=oe.l10n.t("OK"),P=oe.l10n.t("Cancel");(!y||S===await U.window.showInformationMessage(oe.l10n.t("Local changes not pushed to the Git remote will not be available in the Docker volume."),S,P))&&await U.window.withProgress({location:U.ProgressLocation.Notification,title:oe.l10n.t("Clone in Volume")},async(D,A)=>{D.report({message:oe.l10n.t("Follow the prompts at the top of the window.")}),await U.commands.executeCommand(p0,l)})}else if(v===p){let w=n.isWorkspaceFile?oe.l10n.t("Any Workspace"):oe.l10n.t("Any Folder"),y=n.isWorkspaceFile?oe.l10n.t("Current Workspace"):oe.l10n.t("Current Folder"),S=n.isWorkspaceFile?oe.l10n.t("Don't show again for the current workspace or for any workspace?"):oe.l10n.t("Don't show again for the current folder or for any folder?"),P=await U.window.showInformationMessage(S,w,y);P===w?await t.globalState.update(tP,Date.now()):P===y&&await t.workspaceState.update(tP,Date.now())}}function fwe(t,e){t.sendTelemetryEvent("reopenNotificationOpen",{location:e})}function dwe(t,e,n){t.sendTelemetryEvent("reopenNotificationResult",{result:e,location:n})}function a1(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function mwe(t,e,n){if(!await to(t,e.log,e.onDidInput,n,"trySample"))return;let r=await tt(t,e.log),o=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET",detail:"https://github.com/Microsoft/vscode-remote-try-dotnet"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],i={placeHolder:oe.l10n.t("Select a sample repository to clone in a container volume")},s=await U.window.showQuickPick(o,i);s&&s.detail&&await TC(t,s.detail,ui,l1(s.detail),r)}async function pwe(t){let e=await Promise.all((await T7(t)).map(async r=>{let o=await(0,c1.promisify)(rP.stat)(r.path),i=r.time;return{label:r.prefix,description:`${Fg(i.getFullYear())}-${Fg(i.getMonth()+1)}-${Fg(i.getDate())} ${Fg(i.getHours())}:${Fg(i.getMinutes())}:${Fg(i.getSeconds())} - ${o.size} bytes`,path:r.path}}));e.length||e.push({label:oe.l10n.t("No log files found.")});let n=await U.window.showQuickPick(e,{placeHolder:oe.l10n.t("Choose a log file")});n&&n.path&&await U.window.showTextDocument(U.Uri.file(n.path))}function Fg(t,e=2){return t.toString().padStart(e,"0")}async function hwe(t,e,n){let r=(await T7(t)).find(o=>o.name.startsWith(e)&&o.path!==n);r?await U.window.showTextDocument(U.Uri.file(r.path)):await U.window.showInformationMessage(oe.l10n.t("No previous log file found."),{modal:!0})}async function T7(t){let e=[],n=ft.basename(t.logPath),r=ft.dirname(ft.dirname(ft.dirname(t.logPath))),o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/;o.test(ft.basename(r))&&(r=ft.dirname(r));for(let i of(await nP(r)).sort().reverse()){let s=o.exec(i);if(s){let a=ft.join(r,i);for(let c of await nP(a)){let l=ft.join(a,c),u=c.startsWith("window");for(let f of u?await nP(l):[c]){let m=ft.join(u?l:a,f),d=ft.join(m,n);for(let p of(await nP(d)).sort()){let h=ft.join(d,p),g=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(p),v=g?new Date(`${g[1]}-${g[2]}-${g[3]}T${g[4]}:${g[5]}:${g[6]}.${g[7]}Z`):new Date(`${s[1]}-${s[2]}-${s[3]}T${s[4]}:${s[5]}:${s[6]}Z`);e.push({name:p,path:h,time:v,prefix:g?p.substr(0,g.index-1):p.substr(0,p.length-4)})}}}}}return e.sort((i,s)=>i.time>s.time?-1:i.time<s.time?1:i.path.localeCompare(s.path)),e}async function nP(t){try{return await(0,c1.promisify)(rP.readdir)(t)}catch{return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! Bundled license information:

@nevware21/ts-utils/dist/es5/mod/ts-utils.js:
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@nevware21/ts-async/dist/es5/mod/ts-async.js:
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=extension.js.map
